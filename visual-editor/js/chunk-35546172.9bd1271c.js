(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35546172","chunk-31bd4de8","chunk-2d0c5232","chunk-2d20f374"],{"1a54":function(e,t,n){},"1d50":function(e,t,n){"use strict";n("be95")},"1da1":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("d3b7");function i(e,t,n,i,o,r,a){try{var s=e[r](a),d=s.value}catch(l){return void n(l)}s.done?t(d):Promise.resolve(d).then(i,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function s(e){i(a,o,r,s,d,"next",e)}function d(e){i(a,o,r,s,d,"throw",e)}s(void 0)}))}}},"3b63":function(e,t,n){"use strict";var i=n("18a6");t["a"]={add:function(e){return Object(i["a"])({url:"/tp_protocol_plugin/add",method:"post",data:e})},edit:function(e){return Object(i["a"])({url:"/tp_protocol_plugin/edit",method:"post",data:e})},del:function(e){return Object(i["a"])({url:"/tp_protocol_plugin/delete",method:"post",data:e})},page:function(e){return Object(i["a"])({url:"/tp_protocol_plugin/list",method:"post",data:e})},getWVPDevices:function(e){return Object(i["a"])({url:"/wvp/query/devices",method:"post",data:e})},callPlayWVP:function(e){return Object(i["a"])({url:"/wvp/play/start/",method:"post",data:e})},commandPlayerPTZ:function(e){return Object(i["a"])({url:"/wvp/ptz",method:"post",data:e})},getRecordList:function(e){return Object(i["a"])({url:"/gb_record/query",method:"post",data:e})},getRecordURL:function(e){return Object(i["a"])({url:"/playback/start",method:"post",data:e})},stopRecordPlay:function(e){return Object(i["a"])({url:"/wvp/play/stop",method:"post",data:e})}}},"3e8b":function(e,t,n){e.exports=n.p+"img/signal_status_off.3713fa08.svg"},4555:function(e,t,n){"use strict";n("1a54")},"476f":function(e,t,n){},"54f6":function(e,t,n){"use strict";n("6026")},6026:function(e,t,n){},"682d":function(e,t,n){},"7b06":function(e){e.exports=JSON.parse('{"a":"5.4.2"}')},"85b6":function(e,t,n){"use strict";n("f1d1")},"85db":function(e,t,n){"use strict";n("682d")},8731:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chart-div"},[e.showHeader?n("div",{staticClass:"chart-header"},[n("span",{staticClass:"title"},[e._v(e._s(e.optionData.name))]),"monitor"==e.optionData.type?n("div",{staticClass:"tool-right"},[n("status-icon",{ref:"statusIconRef",attrs:{status:e.status}}),n("el-button",{staticClass:"tool-item",class:"control"===e.monitorType?"selected":"",attrs:{size:"mini"},on:{click:function(t){return e.handleChangeMonitorType("control")}}},[e._v("控制")]),n("el-button",{staticClass:"tool-item",class:"record"===e.monitorType?"selected":"",attrs:{size:"mini"},on:{click:function(t){return e.handleChangeMonitorType("record")}}},[e._v("回放")]),n("el-button",{staticClass:"tool-item",class:"default"===e.monitorType?"selected":"",attrs:{size:"mini"},on:{click:function(t){return e.handleChangeMonitorType("default")}}},[e._v("默认")]),n("el-button",{staticClass:"tool-item",attrs:{size:"mini",icon:"el-icon-more"}})],1):e._e()]):e._e(),n("div",{ref:"videoBox",staticClass:"video-box"},["video"==e.optionData.type?n("video-player",{ref:"videoPlayer",staticStyle:{width:"100%",height:"100%"},attrs:{src:e.optionData.src}}):e._e(),"monitor"==e.optionData.type?n("monitor-player",{ref:"monitorPlayer",staticStyle:{width:"100%",height:"100%"},attrs:{type:e.monitorType,device:e.device}}):e._e(),"ezviz"==e.optionData.type?n("ezviz-player",{ref:"ezvizPlayer",staticStyle:{width:"100%",height:"100%"},attrs:{src:e.optionData.src,appKey:e.optionData.appKey,appSecret:e.optionData.appSecret}}):e._e()],1)])},o=[],r=(n("e9c4"),n("3b63")),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("video",{ref:"myVideo",staticClass:"video-js vjs-default-skin vjs-big-play-centered",attrs:{id:"mmiid",controls:"",preload:"auto",width:"100%",height:"100%"}})},s=[],d=n("5530"),l=(n("2ca0"),n("f0e2")),c=(n("fda2"),n("fc78")),u=n.n(c);const m=l["a"].getTech("Html5"),p=l["a"].mergeOptions||l["a"].util.mergeOptions,h={mediaDataSource:{},config:{}};class f extends m{constructor(e,t){e=p(h,e),super(e,t)}setSrc(e){this.flvPlayer&&(this.flvPlayer.detachMediaElement(),this.flvPlayer.destroy());const t=this.options_.mediaDataSource,n=this.options_.config;t.type=void 0===t.type?"flv":t.type,t.url=e,this.flvPlayer=u.a.createPlayer(t,n),this.flvPlayer.attachMediaElement(this.el_),this.flvPlayer.load()}dispose(){this.flvPlayer&&(this.flvPlayer.detachMediaElement(),this.flvPlayer.destroy()),super.dispose()}}f.isSupported=function(){return u.a&&u.a.isSupported()},f.formats={"video/flv":"FLV","video/x-flv":"FLV"},f.canPlayType=function(e){return f.isSupported()&&e in f.formats?"maybe":""},f.canPlaySource=function(e,t){return f.canPlayType(e.type)},f.VERSION="__VERSION__",l["a"].registerTech("Flvjs",f);var g=n("7b06"),v=n("be09"),y=n.n(v),S="2.2.1";function b(e){return e.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},e.streamFromParts=function(e,t){return e+"&"+t},e.streamToParts=function(e){var t={connection:"",stream:""};if(!e)return t;var n=e.search(/&(?![\w-]+=)/),i=void 0;return-1!==n?i=n+1:(n=i=e.lastIndexOf("/")+1,0===n&&(n=i=e.length)),t.connection=e.substring(0,n),t.stream=e.substring(i,e.length),t},e.isStreamingType=function(t){return t in e.streamingFormats},e.RTMP_RE=/^rtmp[set]?:\/\//i,e.isStreamingSrc=function(t){return e.RTMP_RE.test(t)},e.rtmpSourceHandler={},e.rtmpSourceHandler.canPlayType=function(t){return e.isStreamingType(t)?"maybe":""},e.rtmpSourceHandler.canHandleSource=function(t,n){var i=e.rtmpSourceHandler.canPlayType(t.type);return i||(e.isStreamingSrc(t.src)?"maybe":"")},e.rtmpSourceHandler.handleSource=function(t,n,i){var o=e.streamToParts(t.src);n.setRtmpConnection(o.connection),n.setRtmpStream(o.stream)},e.registerSourceHandler(e.rtmpSourceHandler),e}var T=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},w=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},C=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},_=l["a"].getComponent("Tech"),E=l["a"].dom,k=l["a"].url,P=l["a"].createTimeRange,I=l["a"].mergeOptions,x=y.a&&y.a.navigator||{},R=function(e){function t(n,i){T(this,t);var o=C(this,e.call(this,n,i));return n.source&&o.ready((function(){this.setSource(n.source)}),!0),n.startTime&&o.ready((function(){this.load(),this.play(),this.currentTime(n.startTime)}),!0),y.a.videojs=y.a.videojs||{},y.a.videojs.Flash=y.a.videojs.Flash||{},y.a.videojs.Flash.onReady=t.onReady,y.a.videojs.Flash.onEvent=t.onEvent,y.a.videojs.Flash.onError=t.onError,o.on("seeked",(function(){this.lastSeekTarget_=void 0})),o}return w(t,e),t.prototype.createEl=function(){var e=this.options_;e.swf||(e.swf="https://vjs.zencdn.net/swf/"+g["a"]+"/video-js.swf");var n=e.techId,i=I({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:e.autoplay,preload:e.preload,loop:e.loop,muted:e.muted},e.flashVars),o=I({wmode:"opaque",bgcolor:"#000000"},e.params),r=I({id:n,name:n,class:"vjs-tech"},e.attributes);return this.el_=t.embed(e.swf,i,o,r),this.el_.tech=this,this.el_},t.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},t.prototype.pause=function(){this.el_.vjs_pause()},t.prototype.src=function(e){return void 0===e?this.currentSrc():this.setSrc(e)},t.prototype.setSrc=function(e){var t=this;e=k.getAbsoluteURL(e),this.el_.vjs_src(e),this.autoplay()&&this.setTimeout((function(){return t.play()}),0)},t.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},t.prototype.setCurrentTime=function(t){var n=this.seekable();n.length&&(t=t>n.start(0)?t:n.start(0),t=t<n.end(n.length-1)?t:n.end(n.length-1),this.lastSeekTarget_=t,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",t),e.prototype.setCurrentTime.call(this))},t.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},t.prototype.duration=function(){if(0===this.readyState())return NaN;var e=this.el_.vjs_getProperty("duration");return e>=0?e:1/0},t.prototype.load=function(){this.el_.vjs_load()},t.prototype.poster=function(){this.el_.vjs_getProperty("poster")},t.prototype.setPoster=function(){},t.prototype.seekable=function(){var e=this.duration();return 0===e?P():P(0,e)},t.prototype.buffered=function(){var e=this.el_.vjs_getProperty("buffered");return 0===e.length?P():P(e[0][0],e[0][1])},t.prototype.supportsFullScreen=function(){return!1},t.prototype.enterFullScreen=function(){return!1},t.prototype.getVideoPlaybackQuality=function(){var e=this.el_.vjs_getProperty("getVideoPlaybackQuality");return y.a.performance&&"function"===typeof y.a.performance.now?e.creationTime=y.a.performance.now():y.a.performance&&y.a.performance.timing&&"number"===typeof y.a.performance.timing.navigationStart&&(e.creationTime=y.a.Date.now()-y.a.performance.timing.navigationStart),e},t}(_),A=["rtmpConnection","rtmpStream","preload","defaultPlaybackRate","playbackRate","autoplay","loop","controls","volume","muted","defaultMuted"],D=["networkState","readyState","initialTime","startOffsetTime","paused","ended","videoWidth","videoHeight"],j=R.prototype;function L(e){var t=e.charAt(0).toUpperCase()+e.slice(1);j["set"+t]=function(t){return this.el_.vjs_setProperty(e,t)}}function M(e){j[e]=function(){return this.el_.vjs_getProperty(e)}}for(var N=0;N<A.length;N++)M(A[N]),L(A[N]);for(var B=0;B<D.length;B++)M(D[B]);R.isSupported=function(){return!((!l["a"].browser.IS_CHROME||l["a"].browser.IS_ANDROID&&l["a"].browser.IS_IOS)&&(!l["a"].browser.IS_SAFARI||l["a"].browser.IS_IOS)&&!l["a"].browser.IS_EDGE)||R.version()[0]>=10},_.withSourceHandlers(R),R.nativeSourceHandler={},R.nativeSourceHandler.canPlayType=function(e){return e in R.formats?"maybe":""},R.nativeSourceHandler.canHandleSource=function(e,t){var n=void 0;function i(e){var t=k.getFileExtension(e);return t?"video/"+t:""}return n=e.type?e.type.replace(/;.*/,"").toLowerCase():i(e.src),R.nativeSourceHandler.canPlayType(n)},R.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},R.nativeSourceHandler.dispose=function(){},R.registerSourceHandler(R.nativeSourceHandler),R.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},R.onReady=function(e){var t=E.$("#"+e),n=t&&t.tech;n&&n.el()&&R.checkReady(n)},R.checkReady=function(e){e.el()&&(e.el().vjs_getProperty?e.triggerReady():this.setTimeout((function(){R.checkReady(e)}),50))},R.onEvent=function(e,t){var n=E.$("#"+e).tech,i=Array.prototype.slice.call(arguments,2);n.setTimeout((function(){n.trigger(t,i)}),1)},R.onError=function(e,t){var n=E.$("#"+e).tech;if("srcnotfound"===t)return n.error(4);"string"===typeof t?n.error("FLASH: "+t):(t.origin="flash",n.error(t))},R.version=function(){var e="0,0,0";try{e=new y.a.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{x.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=(x.plugins["Shockwave Flash 2.0"]||x.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(n){}}return e.split(",")},R.embed=function(e,t,n,i){var o=R.getEmbedCode(e,t,n,i),r=E.createEl("div",{innerHTML:o}).childNodes[0];return r},R.getEmbedCode=function(e,t,n,i){var o='<object type="application/x-shockwave-flash" ',r="",a="",s="";return t&&Object.getOwnPropertyNames(t).forEach((function(e){r+=e+"="+t[e]+"&amp;"})),n=I({movie:e,flashvars:r,allowScriptAccess:"always",allowNetworking:"all"},n),Object.getOwnPropertyNames(n).forEach((function(e){a+='<param name="'+e+'" value="'+n[e]+'" />'})),i=I({data:e,width:"100%",height:"100%"},i),Object.getOwnPropertyNames(i).forEach((function(e){s+=e+'="'+i[e]+'" '})),""+o+s+">"+a+"</object>"},b(R),_.getTech("Flash")?(l["a"].log.warn("Not using videojs-flash as it appears to already be registered"),l["a"].log.warn("videojs-flash should only be used with video.js@6 and above")):l["a"].registerTech("Flash",R),R.VERSION=S;var O={name:"VideoPlayer",props:{src:{type:[String],default:""},type:{type:[String],default:"hls"},autoplay:{type:[Boolean],default:!1},pic:{type:[String],default:""}},data:function(){return{videoPlayer:null}},watch:{src:{handler:function(e){console.log("====video.watch.src",e);var t=e;if(t){var n=this.getBasicOption(),i=this.getSuffix(t);switch(i){case"m3u8":var o=Object(d["a"])(Object(d["a"])({},n),this.getHlsOption(t));this.createPlayer(o,[{src:t,type:"application/x-mpegURL"}]);break;case"flv":var r=Object(d["a"])(Object(d["a"])({},n),this.getFlvOption(t));this.createPlayer(r,[{src:t,type:"video/x-flv"}]);break;case"mp4":var a=Object(d["a"])(Object(d["a"])({},n),this.getMP4Option(t));this.createPlayer(a,[{src:t,type:"video/mp4"}]);break;case"rtmp":var s=Object(d["a"])(Object(d["a"])({},n),this.getRTMPOption(t));this.createPlayer(s,[{src:t,type:"rtmp/flv"}]);break}}}}},beforeDestroy:function(){this.destroy()},methods:{createPlayer:function(e,t){var n=this,i=this;this.$nextTick((function(){n.videoPlayer||(n.videoPlayer=Object(l["a"])(n.$refs.myVideo,e,(function(){this.on("suspend",(function(){console.log("====延迟下载")})),this.on("loadstart",(function(){console.log("====客户端开始请求数据",i.src)})),this.on("progress",(function(){console.log("====客户端正在请求数据",i.src),i.$emit("callback","progress")})),this.on("error",(function(e){console.log("====请求数据时遇到错误",e)})),this.on("play",(function(){i.$emit("callback","play")})),this.on("pause",(function(){i.$emit("callback","pause")})),this.on("loadedmetadata",(function(){console.log("====成功获取资源长度")})),this.on("loadeddata",(function(){console.log("====渲染播放画面")})),this.on("waiting",(function(){console.log("====等待数据")})),this.on("playing",(function(){console.log("====开始回放")})),this.on("canplay",(function(){console.log("====可以播放，但中途可能因为加载而暂停")})),this.on("canplaythrough",(function(){console.log("====可以播放，歌曲全部加载完毕")})),this.on("seeked",(function(){console.log("====寻找完毕")})),this.on("timeupdate",(function(){console.log("====播放时间改变")})),this.on("ended",(function(){console.log("====播放结束"),i.$emit("callback","ended")}))}))),n.videoPlayer.src(t),n.videoPlayer.play()}))},getBasicOption:function(){return{autoplay:"muted",controls:!0,loop:!0,muted:!1,aspectRatio:"16:9",fluid:!0,width:"100%",height:"100%",fullscreen:{options:{navigationUI:"hide"}}}},getRTMPOption:function(){return{techOrder:["html5","flash"],flash:{hls:{withCreadentials:!1}}}},getHlsOption:function(){return{techOrder:["html5","flvjs"],html5:{hls:{overrideNative:!0,isLive:!1,cors:!0,withCredentials:!1}}}},getFlvOption:function(){return{techOrder:["html5","flvjs"],flvjs:{mediaDataSource:{isLive:!1,cors:!0,withCredentials:!1}}}},getMP4Option:function(){return{techOrder:["html5","flvjs"],flvjs:{mediaDataSource:{isLive:!1,cors:!0,withCredentials:!1}}}},play:function(){this.videoPlayer&&this.videoPlayer.play()},pause:function(){this.videoPlayer&&this.videoPlayer.pause()},destroy:function(){this.videoPlayer&&(this.videoPlayer.dispose(),this.videoPlayer=null,console.log("====销毁播放器"))},getSuffix:function(e){var t="";if(e){if(e.startsWith("rtmp://"))return"rtmp";t=this.src.substring(this.src.lastIndexOf(".")+1),t=t.toLowerCase()}return t}}},z=O,F=(n("1d50"),n("2877")),U=Object(F["a"])(z,a,s,!1,null,null,null),V=U.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video-control-container"},[n("div",{staticClass:"player-box",attrs:{id:"player-box"}},[n("video-player",{ref:"videoPlayer",staticClass:"player",attrs:{src:e.playSrc},on:{callback:e.playerCallback}})],1),"control"===e.type?n("div",{staticClass:"control-box"},[n("player-controller",{on:{command:e.handleCommand}})],1):e._e(),"record"===e.type?n("div",{staticClass:"record-box"},[n("record-controller",{attrs:{records:e.recordList,playDisabled:e.recordPlayDisabled},on:{"change-date":e.handleChangeDate,play:e.handlePlayRecord}})],1):e._e()])},G=[],W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"controller-container"},[i("div",{staticClass:"ptz-box"},[i("div",{staticClass:"pt-box"},[i("img",{staticClass:"img-full",attrs:{src:n("caf3")}}),i("img",{staticClass:"img-up",attrs:{src:n("8f77")},on:{mousedown:function(t){return e.handleCommand("up")},mouseup:function(t){return e.handleCommand("stop")}}}),i("img",{staticClass:"img-down",attrs:{src:n("8f77")},on:{mousedown:function(t){return e.handleCommand("down")},mouseup:function(t){return e.handleCommand("stop")}}}),i("img",{staticClass:"img-left",attrs:{src:n("8f77")},on:{mousedown:function(t){return e.handleCommand("left")},mouseup:function(t){return e.handleCommand("stop")}}}),i("img",{staticClass:"img-right",attrs:{src:n("8f77")},on:{mousedown:function(t){return e.handleCommand("right")},mouseup:function(t){return e.handleCommand("stop")}}})]),i("div",{staticClass:"zoom-box"},[i("el-button",{attrs:{icon:"el-icon-plus",size:"mini"},on:{mousedown:function(t){return e.handleCommand("zoomIn")},mouseup:function(t){return e.handleCommand("stop")}}}),i("el-button",{attrs:{icon:"el-icon-minus",size:"mini"},on:{mousedown:function(t){return e.handleCommand("zoomOut")},mouseup:function(t){return e.handleCommand("stop")}}})],1)])])},J=[],K={name:"PlayerController",methods:{handleCommand:function(e){this.$emit(e),this.$emit("command",e)}}},Z=K,q=(n("85db"),Object(F["a"])(Z,W,J,!1,null,"21a1eb9d",null)),Y=q.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"controller-container",attrs:{id:"recordBox"}},[n("div",{staticClass:"calendar-select"},[n("el-select",{staticClass:"year",attrs:{size:"mini"},on:{change:e.handleChangeDate},model:{value:e.year,callback:function(t){e.year=t},expression:"year"}},e._l(e.getYearList(),(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1),n("el-select",{staticClass:"month",attrs:{size:"mini"},on:{change:e.handleChangeDate},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},e._l(e.getMonthList(),(function(e){return n("el-option",{key:e,attrs:{label:e+"月",value:e}})})),1),n("el-calendar",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e.showRecordList?n("div",{staticClass:"record-list"},[e.records&&e.records.length>0?e._l(e.records,(function(t,i){return n("div",{key:i,staticClass:"record-item"},[n("div",{staticClass:"item-left"},[e._v(" "+e._s(t.startTime.substr(11)+"-"+t.endTime.substring(11))+" ")]),n("div",{staticClass:"item-right"},[n("el-button",{attrs:{size:"mini",round:"",icon:"el-icon-caret-right",disabled:e.playDisabled},on:{click:function(n){return e.handlePlayRecord(t)}}})],1)])})):[n("el-empty",{attrs:{description:"暂无数据","image-size":20}})]],2):e._e()])},Q=[],$=(n("a9e3"),{name:"RecordController",props:{records:{type:[Array],default:function(){return[]}},showRecordList:{type:[Boolean],default:!0},playDisabled:{type:[Boolean],default:!1}},data:function(){return{value:new Date,year:(new Date).getFullYear(),month:(new Date).getMonth()+1}},watch:{value:{handler:function(e){if(e){var t=Date.parse(e),n=new Date(t),i=n.getFullYear(),o=n.getMonth()+1,r=n.getDate(),a=i+"-"+o+"-"+r;this.$emit("change-date",a)}},immediate:!0}},mounted:function(){},methods:{getYearList:function(){for(var e=[],t=(new Date).getFullYear(),n=2e3;n<=Number(t);n++)e.push(n);return e.reverse()},getMonthList:function(){for(var e=[],t=1;t<=12;t++)e.push(t);return e},handleChangeDate:function(){this.value=this.year+"-"+this.month},handlePlayRecord:function(e){console.log("RecordController.handlePlayRecord",e),this.$emit("play",e)}}}),ee=$,te=(n("85b6"),Object(F["a"])(ee,X,Q,!1,null,"62317e0e",null)),ne=te.exports,ie={PREPARED:0,PLAY:1,PLAYING:2,PAUSED:3,STOPED:4,CLOSE:5},oe={name:"MonitorPlayer",components:{VideoPlayer:V,PlayerController:Y,RecordController:ne},props:{type:{type:[String],default:"default"},device:{type:[Object],default:function(){return{}}}},data:function(){return{oldType:"default",playSrc:"",recordList:[],playerStatus:ie.PREPARED,params:{horizonSpeed:"30",verticalSpeed:"30",zoomSpeed:"30"},recordPlayDisabled:!1}},watch:{type:{handler:function(e){var t=this;this.$nextTick((function(){var n=document.getElementById("player-box");switch(e){case"control":n.style&&n.style.setProperty("--w","calc(100% - 100px)"),t.playerStatus===ie.PLAYING&&"record"===t.oldType?t.stopPlay(t.callPlayWVP()):t.callPlayWVP();break;case"record":n.style&&n.style.setProperty("--w","calc(100% - 200px)"),t.playerStatus===ie.PLAYING&&(t.$refs.videoPlayer.pause(),t.recordPlayDisabled=!1);break;default:console.log("default",e),n.style&&n.style.setProperty("--w","100%"),t.playerStatus===ie.PLAYING&&"record"===t.oldType?t.stopPlay(t.callPlayWVP()):t.callPlayWVP();break}t.oldType=e}))},immediate:!0}},mounted:function(){var e=this;console.log("mounted",this.type),window.addEventListener("beforeunload",(function(t){e.stopPlay()}),null)},beforeDestroy:function(){this.stopPlay()},methods:{handleCommand:function(e){var t=this.device,n=t.parent_id,i=t.sub_device_addr;this.params.command=e.toLowerCase(),this.params.horizonSpeed="30",this.params.verticalSpeed="30",this.params.zoomSpeed="30",r["a"].commandPlayerPTZ(Object(d["a"])(Object(d["a"])({},this.params),{},{parent_id:n,sub_device_addr:i})).then((function(e){var t=e.data;console.log("====video.handleCommand",t)}))},getRecordList:function(e){var t=this;r["a"].getRecordList(e).then((function(e){var n=e.data;200==n.code&&(t.recordList=n.data.recordList?n.data.recordList:[])}))},handleChangeDate:function(e){console.log("handleChangeDate",e);var t=this.device,n=t.parent_id,i=t.sub_device_addr,o=e+" 00:00:00",r=e+" 23:59:59";this.getRecordList({parent_id:n,sub_device_addr:i,startTime:o,endTime:r})},handlePlayRecord:function(e){var t=this;if(!this.recordPlayDisabled){console.log("====handlePlayRecord",e);var n=function(){var n=t.device,i=n.parent_id,o=n.sub_device_addr,a=e.startTime,s=e.endTime,d={parent_id:i,sub_device_addr:o,startTime:a,endTime:s};r["a"].getRecordURL(d).then((function(e){var n=e.data;if(200==n.code){var i=n.data;t.playSrc=i.fmp4,t.recordPlayDisabled=!1,console.log("====handlePlayRecord",t.playSrc)}}))};this.recordPlayDisabled=!0,this.stopPlay(n)}},playerCallback:function(e){switch(e){case"play":this.playerStatus=ie.PLAY;break;case"progress":this.playerStatus===ie.PLAY&&(this.playerStatus=ie.PLAYING);break;case"ended":this.playerStatus=ie.STOPED;break;case"pause":this.playerStatus=ie.PAUSED;break;default:this.playerStatus=ie.PREPARED}},play:function(){},stopPlay:function(e){var t=this.device,n=t.parent_id,i=t.sub_device_addr;n&&i&&(this.playSrc="",r["a"].stopRecordPlay({parent_id:n,sub_device_addr:i}).then((function(t){t.data;e&&e()})))},callPlayWVP:function(){var e=this,t=this.device,n=t.parent_id,i=t.sub_device_addr;r["a"].callPlayWVP({parent_id:n,sub_device_addr:i}).then((function(t){var n=t.data;if(200==n.code){var i=n.data.data;e.playSrc=i.fmp4,e.play()}}))}}},re=oe,ae=(n("4555"),Object(F["a"])(re,H,G,!1,null,"7c38567a",null)),se=ae.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"video-container"}})},le=[],ce=n("1da1"),ue=(n("96cf"),n("c38d")),me=n.n(ue),pe=n("bc3a"),he=n.n(pe),fe={components:{},props:{src:{type:[String],default:""},appKey:{type:[String],default:""},appSecret:{type:[String],default:""}},data:function(){return{player:null}},mounted:function(){},watch:{src:{handler:function(e){e&&this.getAccessToken()}}},beforeDestroy:function(){this.destroy()},methods:{createPlayer:function(e){this.player=new me.a.EZUIKitPlayer({id:"video-container",accessToken:e,url:this.src})},getAccessToken:function(){var e=this;return Object(ce["a"])(regeneratorRuntime.mark((function t(){var n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,he.a.post("https://open.ys7.com/api/lapp/token/get?appKey="+e.appKey+"&appSecret="+e.appSecret);case 2:n=t.sent,i=n.data,o=i.data.accessToken,e.createPlayer(o);case 6:case"end":return t.stop()}}),t)})))()},destroy:function(){this.player.stop();var e=this.player.destroy();e.then((function(e){console.log("销毁播放器",e)}))}}},ge=fe,ve=(n("cfb4"),Object(F["a"])(ge,de,le,!1,null,"5dd4a416",null)),ye=ve.exports,Se=n("d7ac"),be={name:"Video",components:{VideoPlayer:V,MonitorPlayer:se,EzvizPlayer:ye,StatusIcon:Se["default"]},props:{showHeader:{type:[Boolean],default:!1},option:{type:[Object],default:function(){return{}}},device:{type:[Object],default:function(){return{}}},status:{type:[Boolean,Object],default:function(){return{}}}},data:function(){return{optionData:{},monitorType:"default"}},mounted:function(){},watch:{option:{handler:function(e){var t=this;if(e){var n=this.device.additional_info&&"null"!=this.device.additional_info?JSON.parse(this.device.additional_info):{};this.optionData=JSON.parse(JSON.stringify(e)),"video"===this.optionData.type?setTimeout((function(){t.optionData.src=n.video_address?n.video_address:""}),50):"ezviz"===this.optionData.type&&setTimeout((function(){t.optionData.src=n.video_address?n.video_address:"",t.optionData.appKey=n.app_key?n.app_key:"",t.optionData.appSecret=n.secret?n.secret:""}),50)}},immediate:!0}},methods:{handleChangeMonitorType:function(e){this.monitorType=e},sizeChange:function(){this.$refs.videoBox},nodeChanged:function(){this.$refs.videoPlayer.destroy()}}},Te=be,we=(n("54f6"),Object(F["a"])(Te,i,o,!1,null,"3abee3f2",null));t["default"]=we.exports},"8f77":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAADDZJREFUeF7tnXesbUUVhz8SRaPBoCJEEWIsj6gQDBYCEiUWsANiAcUCxF4QREVAsQAWFLCLBrACFhTEghisBKyIgYg+0aCIBkQlGo0aEsx6zpX3Hu++e86cmdkza/0mubn/7Fkz61v7y9l19iaoiYAILEtgE7ERARFYnoAE0d4hAhshIEG0e4iABNE+IAJ5BPQLksdNvYIQkCBBCq008whIkDxu6hWEgAQJUmilmUdAguRxU68gBCRIkEIrzTwCEiSPm3oFISBBghRaaeYRkCB53NQrCAEJEqTQSjOPgATJ46ZeQQhIkCCFVpp5BCRIHjf1CkJAggQptNLMIyBB8ripVxACEiRIoZVmHgEJksdNvYIQkCBBCq008whIkDxu6hWEgAQJUmilmUdAguRxU68gBCRIkEIrzTwCEiSPm3oFISBBghRaaeYRkCB53NQrCAEJEqTQSjOPgATJ46ZeQQhIkCCFVpp5BCRIHjf1CkJAggQptNLMIyBB8ripVxACEiRIoZVmHgEJksdNvYIQkCBBCq008whIkDxu6hWEgAQJUmilmUdAguRxU68gBCRIkEIrzTwCEiSPm3oFISBBghRaaeYRkCB53NQrCAEJEqTQSjOPgATJ41aq132BA4C7rPVnsf+y1t/pwG9LDag48xGQIPPxKrX1gcB+wB4zBvwccB7wyRm312aFCEiQQiBnDLMt8HZg/xm3X3+zM4EjgN9l9le3OQlIkDmBLbD5PkmOVQvEsK6rkyRfXDCOus9AQILMAKnAJk8HPlsgztohngHYoZdaRQISpCLcFLqGHEuzliSV6ydB6gK2k/Cv1x2CPYELKo8RNrwEqVf6rYHzge3rDbEm8hXA44BrK48TMrwEqVd2u+Jkl3JbtLMWuDLWYn7DjiFB6pTuaOCtdUIvG/UNwLGNx3Q/nAQpX+K9gakuwdql5HPKpxQ3ogQpW3t7dMROyu9dNuzM0X4Da07ar5q5hzbcKAEJUnYHORd4StmQc0f7ErDX3L3UYYMEJEi5HeM44Mhy4RaKdDxw1EIR1HkNAQlSZkewZ6vOKBOqWJRnAXYlTW0BAhJkAXip6w7pvOPui4cqGuGP6Xzk8qJRgwWTIIsV3PjZSfljFwtTrfc3kiQ3VxvBeWAJsliBTwQOXSxE9d4nAYdVH8XpABIkv7AHAafmd2/a82DgtKYjOhlMguQVcuf0nNXmed2b97oxPa/1g+YjDz6gBJm/gHdMcuw2f9dJe1yUJPnHpLMYbHAJMn/BPgy8aP5uXfQ4BXhxFzMZZBISZL5CvRx433xdutv6FcD7u5tVpxOSILMXZvd0SXfT2bt0ueV/0qXfb3c5u84mJUFmK8gWSY6dZtu8+60uTZLc0P1MJ56gBJmtAB8HnjvbpsNs9QngecPMdqKJSpCVwb8GeOfKmw25xWuBE4aceaNJS5CNg3488NVGtZhqmCcAX5tq8N7HlSDLV2ibdN5x/96LuOD8rkznI9csGMdldwmyfFltoTdb0ypCswXobI0ttfUISJAN7xJvBN4cbG85BnhLsJxXTFeC3BrRvsDnVyTnc4OnAWf7TC0vKwmyLrft0nNW98rDOXyvq9PzWr8cPpNCCUiQdUF+GXhiIbajhvkK8KRRJ1963hLkFqL23Y7XlQY8aLx3pE8sDDr9ctOWIP9jaZ9B09eb1t2vngN8qtyuNmYkCQIPSvc7thyzhNVmfX26P3JZtREGCBxdkNskOR41QK2mmOI3kyQ3TTF4D2NGF+Q9wCt7KETHc3gvcEjH86s6tciCvAD4SFW6foK/EPion3RmzySqILum+x2bzY4q9JZ/T/dHLo5GIaIgd0py7BKt2Avme0mS5G8Lxhmqe0RB7LDKDq/U5idgh1l2uBWmRRPETjZPDlPdOom+CrCLGyFaJEEenQ6t7NKuWj4Bu+RrHw29MD/EOD2jCLJVut+x4zil6XqmP0v3R67repYFJhdFEHtk4tkFeCnELQQ+nR7Rcc0kgiBHAG9zXcXpkns9YA95um3eBbHHts9zW70+EnsyYK8JuGyeBbGXnuzjNqtcVq6fpFan8xF72cpd8yyIvTr6VHcV6zOhLwD2qrK75lUQW3DBFl5Qa0fAFnywhR9cNY+C2PI1n3FVpXGSeSZgyyW5ad4EeUC6GWiLvqm1J2CLz9lNxJ+3H7rOiN4EsSU0rUBq0xE4H7AlW100T4LYIsyHu6jK+Em8C7BFv4dvXgSxZfw/Nnw1fCXwfMA+GzF08yDIg9P9jrsOXQl/k/9zuj/yk5FTG12Q2yU5HjlyERzP/TtJkn+PmuPogtjHKF82Kvwg8/4AYB8/HbKNLIh9zvhDQ1KPN+mXAPb57OHaqILslg6t7jAc8ZgT/mc61LpotPRHFOTO6Wbgw0aDHXy+P0z3qP46EocRBTkVOGgkyJrr/wmcBhw8Eo/RBDkMePdIgDXXWxF4NXDiKFxGEmSPdGg10pxH2Q9azvPmdKh1QctBc8caZWe7Rzop3z43UfXrisAV6aT9D13NagOTGUWQM4H9eoep+c1F4Cxg/7l6TLDxCIIcBRw7ARsNWZ/A0cBx9YfJH6F3QfYCzslPTz0HILA3cG6v8+xZkPuk8w77r+aXwK/T+Yj97671LIj9ctgviJp/AvYLYr8k3bVeBbFzDjv3UItDwM5F7Jykq9ajIHa1yq5aqcUjYFe17OpWN603QXZINwPtvodaPAJ2X8TWFLi8l9R7EsTmYi/82x1ztbgE7A67SWJ33CdvPQliz+ccOjkRTaAHAicB9tzd5K0XQezpXHtKV00ElgjYU7/29O+krQdB7L0OW2R680lJaPDeCNyY7o/YeySTtakFsTcCTQ57Q1BNBNYnYG8g7gnYG4mTtKkFsXfK7d1yNRFYjoC9y27vtE/SphTEViOxVUnURGAlArYqiq2O0rxNJYitY2WHVraulZoIrETA1tWyQy1bZ6tpm0KQLdL9DlsRUU0EZiVgKzTa/ZEbZu1QYrspBLE1dG0tXTURmJeArfVra/42a60FeelUx5LNiGqg2gTs3PWDtQdZit9SkLsBlwB6v6NVdX2OY++N7AL8qUV6LQU5HrDvaquJwKIE7Lv3Ry4aZJb+rQTZCbhYV61mKYm2mYGAXdXaFbh0hm0X2qSVIIcAJy80U3UWgXUJ2Bes7EtWVVsrQc4YYYmXqqQVvDSBJq/pthLkesBO0tVEoBQB+4KV3VOr2loIsiNwWdUsFDwqATu3/WnN5FsI8hDgRzWTUOywBB4K/Lhm9i0EuR+wumYSih2WwCrgVzWzbyHIlsB1NZNQ7LAEtgLs/LZaayGIPbH7r2oZKHBkArcHqn5Bt4UgVkBb7v6BkSup3IsTsMP27YpHXS9gK0HeBBxTOxnFD0WgyconrQR5ODDcF05D7W7jJfsY4MLa024liOXxixY/ibWBKX4XBK4C7Opo9dZSkMOBE6pnpAEiELCFPk5pkWhLQSyfbwG7t0hMY7glYGI0WwmntSCb1r4s53a3UGJLBG4L3NQKR2tBLK+dge+3SlDjuCLwCOB7LTOaQhDLb+u0sok+69yy2uOO9fu06v+VrVOYShDLczPAVqnYp3XSGm8oArZ+2gGtl/tZIjSlIEtzsGVcDgTs51NNBJYIfBc4HbBloiZrPQiylPy+ac0je0JzW8Ces1GLQ8Ce17sasHscJsXZPaTekyDr87gnsI0WeuhhN6k6BxPjGuDaqqNkBu9ZkMyU1E0EyhGQIOVYKpJDAhLEYVGVUjkCEqQcS0VySECCOCyqUipHQIKUY6lIDglIEIdFVUrlCEiQciwVySEBCeKwqEqpHAEJUo6lIjkkIEEcFlUplSMgQcqxVCSHBCSIw6IqpXIEJEg5lorkkIAEcVhUpVSOgAQpx1KRHBKQIA6LqpTKEZAg5VgqkkMCEsRhUZVSOQISpBxLRXJIQII4LKpSKkdAgpRjqUgOCUgQh0VVSuUISJByLBXJIQEJ4rCoSqkcAQlSjqUiOSQgQRwWVSmVIyBByrFUJIcEJIjDoiqlcgQkSDmWiuSQgARxWFSlVI6ABCnHUpEcEpAgDouqlMoRkCDlWCqSQwISxGFRlVI5AhKkHEtFckhAgjgsqlIqR0CClGOpSA4JSBCHRVVK5QhIkHIsFckhAQnisKhKqRwBCVKOpSI5JCBBHBZVKZUj8F/Q+ArYxEc13AAAAABJRU5ErkJggg=="},"96cf":function(e,t,n){var i=function(e){"use strict";var t,n=Object.prototype,i=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(D){d=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var o=t&&t.prototype instanceof g?t:g,r=Object.create(o.prototype),a=new x(i||[]);return r._invoke=E(e,n,a),r}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=l;var u="suspendedStart",m="suspendedYield",p="executing",h="completed",f={};function g(){}function v(){}function y(){}var S={};d(S,r,(function(){return this}));var b=Object.getPrototypeOf,T=b&&b(b(R([])));T&&T!==n&&i.call(T,r)&&(S=T);var w=y.prototype=g.prototype=Object.create(S);function C(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,r,a,s){var d=c(e[o],e,r);if("throw"!==d.type){var l=d.arg,u=l.value;return u&&"object"===typeof u&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(d.arg)}var o;function r(e,i){function r(){return new t((function(t,o){n(e,i,t,o)}))}return o=o?o.then(r,r):r()}this._invoke=r}function E(e,t,n){var i=u;return function(o,r){if(i===p)throw new Error("Generator is already running");if(i===h){if("throw"===o)throw r;return A()}n.method=o,n.arg=r;while(1){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===u)throw i=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var d=c(e,t,n);if("normal"===d.type){if(i=n.done?h:m,d.arg===f)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(i=h,n.method="throw",n.arg=d.arg)}}}function k(e,n){var i=e.iterator[n.method];if(i===t){if(n.delegate=null,"throw"===n.method){if(e.iterator["return"]&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var o=c(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;var r=o.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function R(e){if(e){var n=e[r];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){while(++o<e.length)if(i.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:A}}function A(){return{value:t,done:!0}}return v.prototype=y,d(w,"constructor",y),d(y,"constructor",v),v.displayName=d(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},C(_.prototype),d(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,i,o,r){void 0===r&&(r=Promise);var a=new _(l(t,n,i,o),r);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(w),d(w,s,"Generator"),d(w,r,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=R,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(i,o){return s.type="throw",s.arg=e,n.next=i,o&&(n.method="next",n.arg=t),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var d=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(d&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(d){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var o=i.arg;I(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:R(e),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=i}catch(o){"object"===typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},b34a:function(e,t,n){e.exports=n.p+"img/signal_status_on.7e0bce95.svg"},be95:function(e,t,n){},c38d:function(e,t,n){"use strict";(function(e,n){var i,o,r,a;function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){function e(t,n){c(this,e),this.coreX=t,this.coreY=n}return m(e,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}}]),e}();Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};var f=function(e,t,n){var i=document.getElementsByTagName("head")[0].getElementsByTagName("script"),o=!1;if(n)o=n();else for(var r=0;r<i.length;r++)i[r].getAttribute("src")==e&&(o=!0,t());if(o)t();else{var a=document.createElement("script");a.setAttribute("src",e),a.setAttribute("crossorigin",!0),a.onload=t,document.getElementsByTagName("head")[0].appendChild(a)}},g=function(e,t){for(var n=document.getElementsByTagName("head")[0].getElementsByTagName("link"),i=!1,o=0;o<n.length;o++)n[o].getAttribute("href")==e&&(i=!0);if(!i){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=e,r.onload=t,document.getElementsByTagName("head")[0].appendChild(r)}},v=function(e){return!!e&&("object"===l(e)||"function"===typeof e)&&"function"===typeof e.then},y=function(e,t){var n=new RegExp("(\\?|#|&)"+e+"=(.*?)(#|&|$)"),i=(t||window.location.href).match(n);return decodeURIComponent(i?i[2]:"")},S=function(e,t){var n=t.parentNode;n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling)},b=function(e){console.log("requestFullScreen",document.getElementById(e));var t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if(t)t.call(e);else if("undefined"!==typeof window.ActiveXObject){var n=new window.ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}},T=function(e){var t=document.documentElement.clientWidth,n=document.documentElement.clientHeight,i=e,o="";o+="width:"+n+"px;",o+="height:"+t+"px;",o+="-webkit-transform: rotate(90.001deg); transform: rotate(90.001deg);",o+="-webkit-transform-origin: "+t/2+"px "+t/2+"px;",o+="transform-origin: "+t/2+"px "+t/2+"px;",o+="position: fixed;top: 0;left: 0;z-index:10",i.style.cssText=o},w=function(e){b(e);var t=new Promise((function(e,t){var n=setInterval((function(){var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(t)return clearInterval(n),e(!0)}),100),i=setTimeout((function(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;e||t(!1),clearTimeout(i)}),2e3)}));return t},C=function(e,t,n){var i="";i+="width:"+t+"px;",i+="height:"+n+"px;",i+="-webkit-transform: none; transform: none;",i+="-webkit-transform-origin: 0 0;",i+="transform-origin: 0 0;",e.style.cssText=i},_=function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen()},E=function(e){_();var t=new Promise((function(e,t){var n=setInterval((function(){var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(!t)return clearInterval(n),e(!0)}),50),i=setTimeout((function(){var e=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;e&&t(!1),clearTimeout(i)}),2e3)}));return t},k=function(e){var t=e.split("/")[3],n=e.split("/")[4].split(".")[0],i=2===e.split("/")[2].split("@").length?e.split("/")[2].split("@")[0]:"",o=-1!==e.indexOf(".hd"),r=e.split("/")[4].split(".")[e.split("/")[4].split(".").length-1].split("?")[0];return"rec"===r&&-1!==e.indexOf(".cloud.rec")&&(r="cloud.rec"),{deviceSerial:t,channelNo:n,validCode:i,hd:o,type:r}};function P(e){if("string"===typeof e)try{var t=JSON.parse(e);return!("object"!==l(t)||!t)}catch(n){return!1}console.log("It is not a string!")}var I=function(e,t,n,i,o,r){var a=e,s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status)if(P(s.responseText)){var e=JSON.parse(s.responseText);o(e)}else o(s.responseText)},s.open(t,a,!0);var d=new FormData;for(var l in n)d.append(l,n[l]);s.send(d)},x=function(){function e(t,n){var i=this;c(this,e),f("https://open.ys7.com/assets/ezuikit_v3.4/js/hls.js",(function(){console.log("加载hls.min.js成功",window.Hls),console.log("isSupportHls",window.Hls.isSupported()),window.Hls.isSupported()&&i.initHLS(t,n)}),(function(){return!!window.Hls}))}return m(e,[{key:"toString",value:function(){return"hls ".concat(this.coreX,"-").concat(this.coreY)}},{key:"initHLS",value:function(e,t){var n=document.getElementById(e),i=new window.Hls({defaultAudioCodec:"mp4a.40.2"});i.loadSource(t),i.attachMedia(n),i.on(window.Hls.Events.MANIFEST_PARSED,(function(){n.play()})),i.on(window.Hls.Events.ERROR,(function(e,t){if(t.fatal)switch(t.type){case window.Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover"),i.startLoad();break;case window.Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),i.recoverMediaError();break;default:i.destroy();break}})),this.hls=i,this.video=n,this.hlsUrl=t}},{key:"play",value:function(){console.log("执行hls播放",this.video),this.hls.startLoad(),this.video.play()}},{key:"stop",value:function(){this.video.pause(),this.hls.stopLoad()}}]),e}(),R=function(){function e(t,n){var i=this;c(this,e),f("https://open.ys7.com/assets/ezuikit_v3.4/js/flv.min.js",(function(){console.log("加载flv.min.js成功",window.flvjs),console.log("isSupportFlv",window.flvjs.isSupported()),window.flvjs.isSupported()&&i.initFLV(t,n)}))}return m(e,[{key:"toString",value:function(){return"Flv ".concat(this.coreX,"-").concat(this.coreY)}},{key:"initFLV",value:function(e,t){var n=document.getElementById(e),i=n.getAttribute("controls");i||n.setAttribute("controls",!0);var o=window.flvjs.createPlayer({type:"flv",url:t,isLive:!0},{enableStashBuffer:!0,stashInitialSize:128,enableWorker:!0});o.attachMediaElement(n),o.load(),o.play(),this.flvUrl=t,this.flv=o,this.video=n}},{key:"play",value:function(){console.log("执行flv播放",this.video),this.video.play()}},{key:"stop",value:function(){this.video.pause(),this.flv.unload()}}]),e}(),A="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};function D(e,t){return t={exports:{}},e(t,t.exports),t.exports}var j=D((function(e,t){(function(){var n,i="4.17.21",o=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",s="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",u=1,m=2,p=4,h=1,f=2,g=1,v=2,y=4,S=8,b=16,T=32,w=64,C=128,_=256,E=512,k=30,P="...",I=800,x=16,R=1,D=2,j=3,L=1/0,M=9007199254740991,N=17976931348623157e292,B=NaN,O=4294967295,z=O-1,F=O>>>1,U=[["ary",C],["bind",g],["bindKey",v],["curry",S],["curryRight",b],["flip",E],["partial",T],["partialRight",w],["rearg",_]],V="[object Arguments]",H="[object Array]",G="[object AsyncFunction]",W="[object Boolean]",J="[object Date]",K="[object DOMException]",Z="[object Error]",q="[object Function]",Y="[object GeneratorFunction]",X="[object Map]",Q="[object Number]",$="[object Null]",ee="[object Object]",te="[object Promise]",ne="[object Proxy]",ie="[object RegExp]",oe="[object Set]",re="[object String]",ae="[object Symbol]",se="[object Undefined]",de="[object WeakMap]",le="[object WeakSet]",ce="[object ArrayBuffer]",ue="[object DataView]",me="[object Float32Array]",pe="[object Float64Array]",he="[object Int8Array]",fe="[object Int16Array]",ge="[object Int32Array]",ve="[object Uint8Array]",ye="[object Uint8ClampedArray]",Se="[object Uint16Array]",be="[object Uint32Array]",Te=/\b__p \+= '';/g,we=/\b(__p \+=) '' \+/g,Ce=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_e=/&(?:amp|lt|gt|quot|#39);/g,Ee=/[&<>"']/g,ke=RegExp(_e.source),Pe=RegExp(Ee.source),Ie=/<%-([\s\S]+?)%>/g,xe=/<%([\s\S]+?)%>/g,Re=/<%=([\s\S]+?)%>/g,Ae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,De=/^\w*$/,je=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Le=/[\\^$.*+?()[\]{}|]/g,Me=RegExp(Le.source),Ne=/^\s+/,Be=/\s/,Oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ze=/\{\n\/\* \[wrapped with (.+)\] \*/,Fe=/,? & /,Ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ve=/[()=,{}\[\]\/\s]/,He=/\\(\\)?/g,Ge=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,We=/\w*$/,Je=/^[-+]0x[0-9a-f]+$/i,Ke=/^0b[01]+$/i,Ze=/^\[object .+?Constructor\]$/,qe=/^0o[0-7]+$/i,Ye=/^(?:0|[1-9]\d*)$/,Xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qe=/($^)/,$e=/['\n\r\u2028\u2029\\]/g,et="\\ud800-\\udfff",tt="\\u0300-\\u036f",nt="\\ufe20-\\ufe2f",it="\\u20d0-\\u20ff",ot=tt+nt+it,rt="\\u2700-\\u27bf",at="a-z\\xdf-\\xf6\\xf8-\\xff",st="\\xac\\xb1\\xd7\\xf7",dt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",lt="\\u2000-\\u206f",ct=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ut="A-Z\\xc0-\\xd6\\xd8-\\xde",mt="\\ufe0e\\ufe0f",pt=st+dt+lt+ct,ht="['’]",ft="["+et+"]",gt="["+pt+"]",vt="["+ot+"]",yt="\\d+",St="["+rt+"]",bt="["+at+"]",Tt="[^"+et+pt+yt+rt+at+ut+"]",wt="\\ud83c[\\udffb-\\udfff]",Ct="(?:"+vt+"|"+wt+")",_t="[^"+et+"]",Et="(?:\\ud83c[\\udde6-\\uddff]){2}",kt="[\\ud800-\\udbff][\\udc00-\\udfff]",Pt="["+ut+"]",It="\\u200d",xt="(?:"+bt+"|"+Tt+")",Rt="(?:"+Pt+"|"+Tt+")",At="(?:"+ht+"(?:d|ll|m|re|s|t|ve))?",Dt="(?:"+ht+"(?:D|LL|M|RE|S|T|VE))?",jt=Ct+"?",Lt="["+mt+"]?",Mt="(?:"+It+"(?:"+[_t,Et,kt].join("|")+")"+Lt+jt+")*",Nt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Bt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ot=Lt+jt+Mt,zt="(?:"+[St,Et,kt].join("|")+")"+Ot,Ft="(?:"+[_t+vt+"?",vt,Et,kt,ft].join("|")+")",Ut=RegExp(ht,"g"),Vt=RegExp(vt,"g"),Ht=RegExp(wt+"(?="+wt+")|"+Ft+Ot,"g"),Gt=RegExp([Pt+"?"+bt+"+"+At+"(?="+[gt,Pt,"$"].join("|")+")",Rt+"+"+Dt+"(?="+[gt,Pt+xt,"$"].join("|")+")",Pt+"?"+xt+"+"+At,Pt+"+"+Dt,Bt,Nt,yt,zt].join("|"),"g"),Wt=RegExp("["+It+et+ot+mt+"]"),Jt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zt=-1,qt={};qt[me]=qt[pe]=qt[he]=qt[fe]=qt[ge]=qt[ve]=qt[ye]=qt[Se]=qt[be]=!0,qt[V]=qt[H]=qt[ce]=qt[W]=qt[ue]=qt[J]=qt[Z]=qt[q]=qt[X]=qt[Q]=qt[ee]=qt[ie]=qt[oe]=qt[re]=qt[de]=!1;var Yt={};Yt[V]=Yt[H]=Yt[ce]=Yt[ue]=Yt[W]=Yt[J]=Yt[me]=Yt[pe]=Yt[he]=Yt[fe]=Yt[ge]=Yt[X]=Yt[Q]=Yt[ee]=Yt[ie]=Yt[oe]=Yt[re]=Yt[ae]=Yt[ve]=Yt[ye]=Yt[Se]=Yt[be]=!0,Yt[Z]=Yt[q]=Yt[de]=!1;var Xt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Qt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},en={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tn=parseFloat,nn=parseInt,on="object"==typeof A&&A&&A.Object===Object&&A,rn="object"==typeof self&&self&&self.Object===Object&&self,an=on||rn||Function("return this")(),sn=t&&!t.nodeType&&t,dn=sn&&e&&!e.nodeType&&e,ln=dn&&dn.exports===sn,cn=ln&&on.process,un=function(){try{var e=dn&&dn.require&&dn.require("util").types;return e||cn&&cn.binding&&cn.binding("util")}catch(t){}}(),mn=un&&un.isArrayBuffer,pn=un&&un.isDate,hn=un&&un.isMap,fn=un&&un.isRegExp,gn=un&&un.isSet,vn=un&&un.isTypedArray;function yn(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Sn(e,t,n,i){var o=-1,r=null==e?0:e.length;while(++o<r){var a=e[o];t(i,a,n(a),e)}return i}function bn(e,t){var n=-1,i=null==e?0:e.length;while(++n<i)if(!1===t(e[n],n,e))break;return e}function Tn(e,t){var n=null==e?0:e.length;while(n--)if(!1===t(e[n],n,e))break;return e}function wn(e,t){var n=-1,i=null==e?0:e.length;while(++n<i)if(!t(e[n],n,e))return!1;return!0}function Cn(e,t){var n=-1,i=null==e?0:e.length,o=0,r=[];while(++n<i){var a=e[n];t(a,n,e)&&(r[o++]=a)}return r}function _n(e,t){var n=null==e?0:e.length;return!!n&&Nn(e,t,0)>-1}function En(e,t,n){var i=-1,o=null==e?0:e.length;while(++i<o)if(n(t,e[i]))return!0;return!1}function kn(e,t){var n=-1,i=null==e?0:e.length,o=Array(i);while(++n<i)o[n]=t(e[n],n,e);return o}function Pn(e,t){var n=-1,i=t.length,o=e.length;while(++n<i)e[o+n]=t[n];return e}function In(e,t,n,i){var o=-1,r=null==e?0:e.length;i&&r&&(n=e[++o]);while(++o<r)n=t(n,e[o],o,e);return n}function xn(e,t,n,i){var o=null==e?0:e.length;i&&o&&(n=e[--o]);while(o--)n=t(n,e[o],o,e);return n}function Rn(e,t){var n=-1,i=null==e?0:e.length;while(++n<i)if(t(e[n],n,e))return!0;return!1}var An=Fn("length");function Dn(e){return e.split("")}function jn(e){return e.match(Ue)||[]}function Ln(e,t,n){var i;return n(e,(function(e,n,o){if(t(e,n,o))return i=n,!1})),i}function Mn(e,t,n,i){var o=e.length,r=n+(i?1:-1);while(i?r--:++r<o)if(t(e[r],r,e))return r;return-1}function Nn(e,t,n){return t===t?mi(e,t,n):Mn(e,On,n)}function Bn(e,t,n,i){var o=n-1,r=e.length;while(++o<r)if(i(e[o],t))return o;return-1}function On(e){return e!==e}function zn(e,t){var n=null==e?0:e.length;return n?Gn(e,t)/n:B}function Fn(e){return function(t){return null==t?n:t[e]}}function Un(e){return function(t){return null==e?n:e[t]}}function Vn(e,t,n,i,o){return o(e,(function(e,o,r){n=i?(i=!1,e):t(n,e,o,r)})),n}function Hn(e,t){var n=e.length;e.sort(t);while(n--)e[n]=e[n].value;return e}function Gn(e,t){var i,o=-1,r=e.length;while(++o<r){var a=t(e[o]);a!==n&&(i=i===n?a:i+a)}return i}function Wn(e,t){var n=-1,i=Array(e);while(++n<e)i[n]=t(n);return i}function Jn(e,t){return kn(t,(function(t){return[t,e[t]]}))}function Kn(e){return e?e.slice(0,gi(e)+1).replace(Ne,""):e}function Zn(e){return function(t){return e(t)}}function qn(e,t){return kn(t,(function(t){return e[t]}))}function Yn(e,t){return e.has(t)}function Xn(e,t){var n=-1,i=e.length;while(++n<i&&Nn(t,e[n],0)>-1);return n}function Qn(e,t){var n=e.length;while(n--&&Nn(t,e[n],0)>-1);return n}function $n(e,t){var n=e.length,i=0;while(n--)e[n]===t&&++i;return i}var ei=Un(Xt),ti=Un(Qt);function ni(e){return"\\"+en[e]}function ii(e,t){return null==e?n:e[t]}function oi(e){return Wt.test(e)}function ri(e){return Jt.test(e)}function ai(e){var t,n=[];while(!(t=e.next()).done)n.push(t.value);return n}function si(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function di(e,t){return function(n){return e(t(n))}}function li(e,t){var n=-1,i=e.length,o=0,r=[];while(++n<i){var a=e[n];a!==t&&a!==c||(e[n]=c,r[o++]=n)}return r}function ci(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function ui(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function mi(e,t,n){var i=n-1,o=e.length;while(++i<o)if(e[i]===t)return i;return-1}function pi(e,t,n){var i=n+1;while(i--)if(e[i]===t)return i;return i}function hi(e){return oi(e)?yi(e):An(e)}function fi(e){return oi(e)?Si(e):Dn(e)}function gi(e){var t=e.length;while(t--&&Be.test(e.charAt(t)));return t}var vi=Un($t);function yi(e){var t=Ht.lastIndex=0;while(Ht.test(e))++t;return t}function Si(e){return e.match(Ht)||[]}function bi(e){return e.match(Gt)||[]}var Ti=function e(t){t=null==t?an:wi.defaults(an.Object(),t,wi.pick(an,Kt));var A=t.Array,Be=t.Date,Ue=t.Error,et=t.Function,tt=t.Math,nt=t.Object,it=t.RegExp,ot=t.String,rt=t.TypeError,at=A.prototype,st=et.prototype,dt=nt.prototype,lt=t["__core-js_shared__"],ct=st.toString,ut=dt.hasOwnProperty,mt=0,pt=function(){var e=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ht=dt.toString,ft=ct.call(nt),gt=an._,vt=it("^"+ct.call(ut).replace(Le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yt=ln?t.Buffer:n,St=t.Symbol,bt=t.Uint8Array,Tt=yt?yt.allocUnsafe:n,wt=di(nt.getPrototypeOf,nt),Ct=nt.create,_t=dt.propertyIsEnumerable,Et=at.splice,kt=St?St.isConcatSpreadable:n,Pt=St?St.iterator:n,It=St?St.toStringTag:n,xt=function(){try{var e=Ka(nt,"defineProperty");return e({},"",{}),e}catch(t){}}(),Rt=t.clearTimeout!==an.clearTimeout&&t.clearTimeout,At=Be&&Be.now!==an.Date.now&&Be.now,Dt=t.setTimeout!==an.setTimeout&&t.setTimeout,jt=tt.ceil,Lt=tt.floor,Mt=nt.getOwnPropertySymbols,Nt=yt?yt.isBuffer:n,Bt=t.isFinite,Ot=at.join,zt=di(nt.keys,nt),Ft=tt.max,Ht=tt.min,Gt=Be.now,Wt=t.parseInt,Jt=tt.random,Xt=at.reverse,Qt=Ka(t,"DataView"),$t=Ka(t,"Map"),en=Ka(t,"Promise"),on=Ka(t,"Set"),rn=Ka(t,"WeakMap"),sn=Ka(nt,"create"),dn=rn&&new rn,cn={},un=Ds(Qt),An=Ds($t),Dn=Ds(en),Un=Ds(on),mi=Ds(rn),yi=St?St.prototype:n,Si=yi?yi.valueOf:n,Ti=yi?yi.toString:n;function Ci(e){if(Ec(e)&&!dc(e)&&!(e instanceof Pi)){if(e instanceof ki)return e;if(ut.call(e,"__wrapped__"))return Ls(e)}return new ki(e)}var _i=function(){function e(){}return function(t){if(!_c(t))return{};if(Ct)return Ct(t);e.prototype=t;var i=new e;return e.prototype=n,i}}();function Ei(){}function ki(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function Pi(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=O,this.__views__=[]}function Ii(){var e=new Pi(this.__wrapped__);return e.__actions__=oa(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=oa(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=oa(this.__views__),e}function xi(){if(this.__filtered__){var e=new Pi(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Ri(){var e=this.__wrapped__.value(),t=this.__dir__,n=dc(e),i=t<0,o=n?e.length:0,r=Qa(0,o,this.__views__),a=r.start,s=r.end,d=s-a,l=i?s:a-1,c=this.__iteratees__,u=c.length,m=0,p=Ht(d,this.__takeCount__);if(!n||!i&&o==d&&p==d)return zr(e,this.__actions__);var h=[];e:while(d--&&m<p){l+=t;var f=-1,g=e[l];while(++f<u){var v=c[f],y=v.iteratee,S=v.type,b=y(g);if(S==D)g=b;else if(!b){if(S==R)continue e;break e}}h[m++]=g}return h}function Ai(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var i=e[t];this.set(i[0],i[1])}}function Di(){this.__data__=sn?sn(null):{},this.size=0}function ji(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Li(e){var t=this.__data__;if(sn){var i=t[e];return i===d?n:i}return ut.call(t,e)?t[e]:n}function Mi(e){var t=this.__data__;return sn?t[e]!==n:ut.call(t,e)}function Ni(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=sn&&t===n?d:t,this}function Bi(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var i=e[t];this.set(i[0],i[1])}}function Oi(){this.__data__=[],this.size=0}function zi(e){var t=this.__data__,n=uo(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():Et.call(t,n,1),--this.size,!0}function Fi(e){var t=this.__data__,i=uo(t,e);return i<0?n:t[i][1]}function Ui(e){return uo(this.__data__,e)>-1}function Vi(e,t){var n=this.__data__,i=uo(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function Hi(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var i=e[t];this.set(i[0],i[1])}}function Gi(){this.size=0,this.__data__={hash:new Ai,map:new($t||Bi),string:new Ai}}function Wi(e){var t=Wa(this,e)["delete"](e);return this.size-=t?1:0,t}function Ji(e){return Wa(this,e).get(e)}function Ki(e){return Wa(this,e).has(e)}function Zi(e,t){var n=Wa(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function qi(e){var t=-1,n=null==e?0:e.length;this.__data__=new Hi;while(++t<n)this.add(e[t])}function Yi(e){return this.__data__.set(e,d),this}function Xi(e){return this.__data__.has(e)}function Qi(e){var t=this.__data__=new Bi(e);this.size=t.size}function $i(){this.__data__=new Bi,this.size=0}function eo(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}function to(e){return this.__data__.get(e)}function no(e){return this.__data__.has(e)}function io(e,t){var n=this.__data__;if(n instanceof Bi){var i=n.__data__;if(!$t||i.length<o-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Hi(i)}return n.set(e,t),this.size=n.size,this}function oo(e,t){var n=dc(e),i=!n&&sc(e),o=!n&&!i&&pc(e),r=!n&&!i&&!o&&Fc(e),a=n||i||o||r,s=a?Wn(e.length,ot):[],d=s.length;for(var l in e)!t&&!ut.call(e,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||as(l,d))||s.push(l);return s}function ro(e){var t=e.length;return t?e[yr(0,t-1)]:n}function ao(e,t){return xs(oa(e),vo(t,0,e.length))}function so(e){return xs(oa(e))}function lo(e,t,i){(i!==n&&!oc(e[t],i)||i===n&&!(t in e))&&fo(e,t,i)}function co(e,t,i){var o=e[t];ut.call(e,t)&&oc(o,i)&&(i!==n||t in e)||fo(e,t,i)}function uo(e,t){var n=e.length;while(n--)if(oc(e[n][0],t))return n;return-1}function mo(e,t,n,i){return Co(e,(function(e,o,r){t(i,e,n(e),r)})),i}function po(e,t){return e&&ra(t,wu(t),e)}function ho(e,t){return e&&ra(t,Cu(t),e)}function fo(e,t,n){"__proto__"==t&&xt?xt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function go(e,t){var i=-1,o=t.length,r=A(o),a=null==e;while(++i<o)r[i]=a?n:gu(e,t[i]);return r}function vo(e,t,i){return e===e&&(i!==n&&(e=e<=i?e:i),t!==n&&(e=e>=t?e:t)),e}function yo(e,t,i,o,r,a){var s,d=t&u,l=t&m,c=t&p;if(i&&(s=r?i(e,o,r,a):i(e)),s!==n)return s;if(!_c(e))return e;var h=dc(e);if(h){if(s=ts(e),!d)return oa(e,s)}else{var f=Xa(e),g=f==q||f==Y;if(pc(e))return Zr(e,d);if(f==ee||f==V||g&&!r){if(s=l||g?{}:ns(e),!d)return l?sa(e,ho(s,e)):aa(e,po(s,e))}else{if(!Yt[f])return r?e:{};s=is(e,f,d)}}a||(a=new Qi);var v=a.get(e);if(v)return v;a.set(e,s),Bc(e)?e.forEach((function(n){s.add(yo(n,t,i,n,e,a))})):kc(e)&&e.forEach((function(n,o){s.set(o,yo(n,t,i,o,e,a))}));var y=c?l?Fa:za:l?Cu:wu,S=h?n:y(e);return bn(S||e,(function(n,o){S&&(o=n,n=e[o]),co(s,o,yo(n,t,i,o,e,a))})),s}function So(e){var t=wu(e);return function(n){return bo(n,e,t)}}function bo(e,t,i){var o=i.length;if(null==e)return!o;e=nt(e);while(o--){var r=i[o],a=t[r],s=e[r];if(s===n&&!(r in e)||!a(s))return!1}return!0}function To(e,t,i){if("function"!=typeof e)throw new rt(a);return Es((function(){e.apply(n,i)}),t)}function wo(e,t,n,i){var r=-1,a=_n,s=!0,d=e.length,l=[],c=t.length;if(!d)return l;n&&(t=kn(t,Zn(n))),i?(a=En,s=!1):t.length>=o&&(a=Yn,s=!1,t=new qi(t));e:while(++r<d){var u=e[r],m=null==n?u:n(u);if(u=i||0!==u?u:0,s&&m===m){var p=c;while(p--)if(t[p]===m)continue e;l.push(u)}else a(t,m,i)||l.push(u)}return l}Ci.templateSettings={escape:Ie,evaluate:xe,interpolate:Re,variable:"",imports:{_:Ci}},Ci.prototype=Ei.prototype,Ci.prototype.constructor=Ci,ki.prototype=_i(Ei.prototype),ki.prototype.constructor=ki,Pi.prototype=_i(Ei.prototype),Pi.prototype.constructor=Pi,Ai.prototype.clear=Di,Ai.prototype["delete"]=ji,Ai.prototype.get=Li,Ai.prototype.has=Mi,Ai.prototype.set=Ni,Bi.prototype.clear=Oi,Bi.prototype["delete"]=zi,Bi.prototype.get=Fi,Bi.prototype.has=Ui,Bi.prototype.set=Vi,Hi.prototype.clear=Gi,Hi.prototype["delete"]=Wi,Hi.prototype.get=Ji,Hi.prototype.has=Ki,Hi.prototype.set=Zi,qi.prototype.add=qi.prototype.push=Yi,qi.prototype.has=Xi,Qi.prototype.clear=$i,Qi.prototype["delete"]=eo,Qi.prototype.get=to,Qi.prototype.has=no,Qi.prototype.set=io;var Co=ca(Do),_o=ca(jo,!0);function Eo(e,t){var n=!0;return Co(e,(function(e,i,o){return n=!!t(e,i,o),n})),n}function ko(e,t,i){var o=-1,r=e.length;while(++o<r){var a=e[o],s=t(a);if(null!=s&&(d===n?s===s&&!zc(s):i(s,d)))var d=s,l=a}return l}function Po(e,t,i,o){var r=e.length;i=Zc(i),i<0&&(i=-i>r?0:r+i),o=o===n||o>r?r:Zc(o),o<0&&(o+=r),o=i>o?0:qc(o);while(i<o)e[i++]=t;return e}function Io(e,t){var n=[];return Co(e,(function(e,i,o){t(e,i,o)&&n.push(e)})),n}function xo(e,t,n,i,o){var r=-1,a=e.length;n||(n=rs),o||(o=[]);while(++r<a){var s=e[r];t>0&&n(s)?t>1?xo(s,t-1,n,i,o):Pn(o,s):i||(o[o.length]=s)}return o}var Ro=ua(),Ao=ua(!0);function Do(e,t){return e&&Ro(e,t,wu)}function jo(e,t){return e&&Ao(e,t,wu)}function Lo(e,t){return Cn(t,(function(t){return Tc(e[t])}))}function Mo(e,t){t=Gr(t,e);var i=0,o=t.length;while(null!=e&&i<o)e=e[As(t[i++])];return i&&i==o?e:n}function No(e,t,n){var i=t(e);return dc(e)?i:Pn(i,n(e))}function Bo(e){return null==e?e===n?se:$:It&&It in nt(e)?Za(e):Ss(e)}function Oo(e,t){return e>t}function zo(e,t){return null!=e&&ut.call(e,t)}function Fo(e,t){return null!=e&&t in nt(e)}function Uo(e,t,n){return e>=Ht(t,n)&&e<Ft(t,n)}function Vo(e,t,i){var o=i?En:_n,r=e[0].length,a=e.length,s=a,d=A(a),l=1/0,c=[];while(s--){var u=e[s];s&&t&&(u=kn(u,Zn(t))),l=Ht(u.length,l),d[s]=!i&&(t||r>=120&&u.length>=120)?new qi(s&&u):n}u=e[0];var m=-1,p=d[0];e:while(++m<r&&c.length<l){var h=u[m],f=t?t(h):h;if(h=i||0!==h?h:0,!(p?Yn(p,f):o(c,f,i))){s=a;while(--s){var g=d[s];if(!(g?Yn(g,f):o(e[s],f,i)))continue e}p&&p.push(f),c.push(h)}}return c}function Ho(e,t,n,i){return Do(e,(function(e,o,r){t(i,n(e),o,r)})),i}function Go(e,t,i){t=Gr(t,e),e=Ts(e,t);var o=null==e?e:e[As(rd(t))];return null==o?n:yn(o,e,i)}function Wo(e){return Ec(e)&&Bo(e)==V}function Jo(e){return Ec(e)&&Bo(e)==ce}function Ko(e){return Ec(e)&&Bo(e)==J}function Zo(e,t,n,i,o){return e===t||(null==e||null==t||!Ec(e)&&!Ec(t)?e!==e&&t!==t:qo(e,t,n,i,Zo,o))}function qo(e,t,n,i,o,r){var a=dc(e),s=dc(t),d=a?H:Xa(e),l=s?H:Xa(t);d=d==V?ee:d,l=l==V?ee:l;var c=d==ee,u=l==ee,m=d==l;if(m&&pc(e)){if(!pc(t))return!1;a=!0,c=!1}if(m&&!c)return r||(r=new Qi),a||Fc(e)?Ma(e,t,n,i,o,r):Na(e,t,d,n,i,o,r);if(!(n&h)){var p=c&&ut.call(e,"__wrapped__"),f=u&&ut.call(t,"__wrapped__");if(p||f){var g=p?e.value():e,v=f?t.value():t;return r||(r=new Qi),o(g,v,n,i,r)}}return!!m&&(r||(r=new Qi),Ba(e,t,n,i,o,r))}function Yo(e){return Ec(e)&&Xa(e)==X}function Xo(e,t,i,o){var r=i.length,a=r,s=!o;if(null==e)return!a;e=nt(e);while(r--){var d=i[r];if(s&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}while(++r<a){d=i[r];var l=d[0],c=e[l],u=d[1];if(s&&d[2]){if(c===n&&!(l in e))return!1}else{var m=new Qi;if(o)var p=o(c,u,l,e,t,m);if(!(p===n?Zo(u,c,h|f,o,m):p))return!1}}return!0}function Qo(e){if(!_c(e)||us(e))return!1;var t=Tc(e)?vt:Ze;return t.test(Ds(e))}function $o(e){return Ec(e)&&Bo(e)==ie}function er(e){return Ec(e)&&Xa(e)==oe}function tr(e){return Ec(e)&&Cc(e.length)&&!!qt[Bo(e)]}function nr(e){return"function"==typeof e?e:null==e?Rm:"object"==typeof e?dc(e)?dr(e[0],e[1]):sr(e):Hm(e)}function ir(e){if(!ps(e))return zt(e);var t=[];for(var n in nt(e))ut.call(e,n)&&"constructor"!=n&&t.push(n);return t}function or(e){if(!_c(e))return ys(e);var t=ps(e),n=[];for(var i in e)("constructor"!=i||!t&&ut.call(e,i))&&n.push(i);return n}function rr(e,t){return e<t}function ar(e,t){var n=-1,i=cc(e)?A(e.length):[];return Co(e,(function(e,o,r){i[++n]=t(e,o,r)})),i}function sr(e){var t=Ja(e);return 1==t.length&&t[0][2]?fs(t[0][0],t[0][1]):function(n){return n===e||Xo(n,e,t)}}function dr(e,t){return ds(e)&&hs(t)?fs(As(e),t):function(i){var o=gu(i,e);return o===n&&o===t?yu(i,e):Zo(t,o,h|f)}}function lr(e,t,i,o,r){e!==t&&Ro(t,(function(a,s){if(r||(r=new Qi),_c(a))cr(e,t,s,i,lr,o,r);else{var d=o?o(Cs(e,s),a,s+"",e,t,r):n;d===n&&(d=a),lo(e,s,d)}}),Cu)}function cr(e,t,i,o,r,a,s){var d=Cs(e,i),l=Cs(t,i),c=s.get(l);if(c)lo(e,i,c);else{var u=a?a(d,l,i+"",e,t,s):n,m=u===n;if(m){var p=dc(l),h=!p&&pc(l),f=!p&&!h&&Fc(l);u=l,p||h||f?dc(d)?u=d:uc(d)?u=oa(d):h?(m=!1,u=Zr(l,!0)):f?(m=!1,u=$r(l,!0)):u=[]:Lc(l)||sc(l)?(u=d,sc(d)?u=Xc(d):_c(d)&&!Tc(d)||(u=ns(l))):m=!1}m&&(s.set(l,u),r(u,l,o,a,s),s["delete"](l)),lo(e,i,u)}}function ur(e,t){var i=e.length;if(i)return t+=t<0?i:0,as(t,i)?e[t]:n}function mr(e,t,n){t=t.length?kn(t,(function(e){return dc(e)?function(t){return Mo(t,1===e.length?e[0]:e)}:e})):[Rm];var i=-1;t=kn(t,Zn(Ga()));var o=ar(e,(function(e,n,o){var r=kn(t,(function(t){return t(e)}));return{criteria:r,index:++i,value:e}}));return Hn(o,(function(e,t){return ta(e,t,n)}))}function pr(e,t){return hr(e,t,(function(t,n){return yu(e,n)}))}function hr(e,t,n){var i=-1,o=t.length,r={};while(++i<o){var a=t[i],s=Mo(e,a);n(s,a)&&_r(r,Gr(a,e),s)}return r}function fr(e){return function(t){return Mo(t,e)}}function gr(e,t,n,i){var o=i?Bn:Nn,r=-1,a=t.length,s=e;e===t&&(t=oa(t)),n&&(s=kn(e,Zn(n)));while(++r<a){var d=0,l=t[r],c=n?n(l):l;while((d=o(s,c,d,i))>-1)s!==e&&Et.call(s,d,1),Et.call(e,d,1)}return e}function vr(e,t){var n=e?t.length:0,i=n-1;while(n--){var o=t[n];if(n==i||o!==r){var r=o;as(o)?Et.call(e,o,1):Nr(e,o)}}return e}function yr(e,t){return e+Lt(Jt()*(t-e+1))}function Sr(e,t,n,i){var o=-1,r=Ft(jt((t-e)/(n||1)),0),a=A(r);while(r--)a[i?r:++o]=e,e+=n;return a}function br(e,t){var n="";if(!e||t<1||t>M)return n;do{t%2&&(n+=e),t=Lt(t/2),t&&(e+=e)}while(t);return n}function Tr(e,t){return ks(bs(e,t,Rm),e+"")}function wr(e){return ro(Uu(e))}function Cr(e,t){var n=Uu(e);return xs(n,vo(t,0,n.length))}function _r(e,t,i,o){if(!_c(e))return e;t=Gr(t,e);var r=-1,a=t.length,s=a-1,d=e;while(null!=d&&++r<a){var l=As(t[r]),c=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(r!=s){var u=d[l];c=o?o(u,l,d):n,c===n&&(c=_c(u)?u:as(t[r+1])?[]:{})}co(d,l,c),d=d[l]}return e}var Er=dn?function(e,t){return dn.set(e,t),e}:Rm,kr=xt?function(e,t){return xt(e,"toString",{configurable:!0,enumerable:!1,value:km(t),writable:!0})}:Rm;function Pr(e){return xs(Uu(e))}function Ir(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;var r=A(o);while(++i<o)r[i]=e[i+t];return r}function xr(e,t){var n;return Co(e,(function(e,i,o){return n=t(e,i,o),!n})),!!n}function Rr(e,t,n){var i=0,o=null==e?i:e.length;if("number"==typeof t&&t===t&&o<=F){while(i<o){var r=i+o>>>1,a=e[r];null!==a&&!zc(a)&&(n?a<=t:a<t)?i=r+1:o=r}return o}return Ar(e,t,Rm,n)}function Ar(e,t,i,o){var r=0,a=null==e?0:e.length;if(0===a)return 0;t=i(t);var s=t!==t,d=null===t,l=zc(t),c=t===n;while(r<a){var u=Lt((r+a)/2),m=i(e[u]),p=m!==n,h=null===m,f=m===m,g=zc(m);if(s)var v=o||f;else v=c?f&&(o||p):d?f&&p&&(o||!h):l?f&&p&&!h&&(o||!g):!h&&!g&&(o?m<=t:m<t);v?r=u+1:a=u}return Ht(a,z)}function Dr(e,t){var n=-1,i=e.length,o=0,r=[];while(++n<i){var a=e[n],s=t?t(a):a;if(!n||!oc(s,d)){var d=s;r[o++]=0===a?0:a}}return r}function jr(e){return"number"==typeof e?e:zc(e)?B:+e}function Lr(e){if("string"==typeof e)return e;if(dc(e))return kn(e,Lr)+"";if(zc(e))return Ti?Ti.call(e):"";var t=e+"";return"0"==t&&1/e==-L?"-0":t}function Mr(e,t,n){var i=-1,r=_n,a=e.length,s=!0,d=[],l=d;if(n)s=!1,r=En;else if(a>=o){var c=t?null:xa(e);if(c)return ci(c);s=!1,r=Yn,l=new qi}else l=t?[]:d;e:while(++i<a){var u=e[i],m=t?t(u):u;if(u=n||0!==u?u:0,s&&m===m){var p=l.length;while(p--)if(l[p]===m)continue e;t&&l.push(m),d.push(u)}else r(l,m,n)||(l!==d&&l.push(m),d.push(u))}return d}function Nr(e,t){return t=Gr(t,e),e=Ts(e,t),null==e||delete e[As(rd(t))]}function Br(e,t,n,i){return _r(e,t,n(Mo(e,t)),i)}function Or(e,t,n,i){var o=e.length,r=i?o:-1;while((i?r--:++r<o)&&t(e[r],r,e));return n?Ir(e,i?0:r,i?r+1:o):Ir(e,i?r+1:0,i?o:r)}function zr(e,t){var n=e;return n instanceof Pi&&(n=n.value()),In(t,(function(e,t){return t.func.apply(t.thisArg,Pn([e],t.args))}),n)}function Fr(e,t,n){var i=e.length;if(i<2)return i?Mr(e[0]):[];var o=-1,r=A(i);while(++o<i){var a=e[o],s=-1;while(++s<i)s!=o&&(r[o]=wo(r[o]||a,e[s],t,n))}return Mr(xo(r,1),t,n)}function Ur(e,t,i){var o=-1,r=e.length,a=t.length,s={};while(++o<r){var d=o<a?t[o]:n;i(s,e[o],d)}return s}function Vr(e){return uc(e)?e:[]}function Hr(e){return"function"==typeof e?e:Rm}function Gr(e,t){return dc(e)?e:ds(e,t)?[e]:Rs($c(e))}var Wr=Tr;function Jr(e,t,i){var o=e.length;return i=i===n?o:i,!t&&i>=o?e:Ir(e,t,i)}var Kr=Rt||function(e){return an.clearTimeout(e)};function Zr(e,t){if(t)return e.slice();var n=e.length,i=Tt?Tt(n):new e.constructor(n);return e.copy(i),i}function qr(e){var t=new e.constructor(e.byteLength);return new bt(t).set(new bt(e)),t}function Yr(e,t){var n=t?qr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Xr(e){var t=new e.constructor(e.source,We.exec(e));return t.lastIndex=e.lastIndex,t}function Qr(e){return Si?nt(Si.call(e)):{}}function $r(e,t){var n=t?qr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ea(e,t){if(e!==t){var i=e!==n,o=null===e,r=e===e,a=zc(e),s=t!==n,d=null===t,l=t===t,c=zc(t);if(!d&&!c&&!a&&e>t||a&&s&&l&&!d&&!c||o&&s&&l||!i&&l||!r)return 1;if(!o&&!a&&!c&&e<t||c&&i&&r&&!o&&!a||d&&i&&r||!s&&r||!l)return-1}return 0}function ta(e,t,n){var i=-1,o=e.criteria,r=t.criteria,a=o.length,s=n.length;while(++i<a){var d=ea(o[i],r[i]);if(d){if(i>=s)return d;var l=n[i];return d*("desc"==l?-1:1)}}return e.index-t.index}function na(e,t,n,i){var o=-1,r=e.length,a=n.length,s=-1,d=t.length,l=Ft(r-a,0),c=A(d+l),u=!i;while(++s<d)c[s]=t[s];while(++o<a)(u||o<r)&&(c[n[o]]=e[o]);while(l--)c[s++]=e[o++];return c}function ia(e,t,n,i){var o=-1,r=e.length,a=-1,s=n.length,d=-1,l=t.length,c=Ft(r-s,0),u=A(c+l),m=!i;while(++o<c)u[o]=e[o];var p=o;while(++d<l)u[p+d]=t[d];while(++a<s)(m||o<r)&&(u[p+n[a]]=e[o++]);return u}function oa(e,t){var n=-1,i=e.length;t||(t=A(i));while(++n<i)t[n]=e[n];return t}function ra(e,t,i,o){var r=!i;i||(i={});var a=-1,s=t.length;while(++a<s){var d=t[a],l=o?o(i[d],e[d],d,i,e):n;l===n&&(l=e[d]),r?fo(i,d,l):co(i,d,l)}return i}function aa(e,t){return ra(e,qa(e),t)}function sa(e,t){return ra(e,Ya(e),t)}function da(e,t){return function(n,i){var o=dc(n)?Sn:mo,r=t?t():{};return o(n,e,Ga(i,2),r)}}function la(e){return Tr((function(t,i){var o=-1,r=i.length,a=r>1?i[r-1]:n,s=r>2?i[2]:n;a=e.length>3&&"function"==typeof a?(r--,a):n,s&&ss(i[0],i[1],s)&&(a=r<3?n:a,r=1),t=nt(t);while(++o<r){var d=i[o];d&&e(t,d,o,a)}return t}))}function ca(e,t){return function(n,i){if(null==n)return n;if(!cc(n))return e(n,i);var o=n.length,r=t?o:-1,a=nt(n);while(t?r--:++r<o)if(!1===i(a[r],r,a))break;return n}}function ua(e){return function(t,n,i){var o=-1,r=nt(t),a=i(t),s=a.length;while(s--){var d=a[e?s:++o];if(!1===n(r[d],d,r))break}return t}}function ma(e,t,n){var i=t&g,o=fa(e);function r(){var t=this&&this!==an&&this instanceof r?o:e;return t.apply(i?n:this,arguments)}return r}function pa(e){return function(t){t=$c(t);var i=oi(t)?fi(t):n,o=i?i[0]:t.charAt(0),r=i?Jr(i,1).join(""):t.slice(1);return o[e]()+r}}function ha(e){return function(t){return In(Tm(Zu(t).replace(Ut,"")),e,"")}}function fa(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=_i(e.prototype),i=e.apply(n,t);return _c(i)?i:n}}function ga(e,t,i){var o=fa(e);function r(){var a=arguments.length,s=A(a),d=a,l=Ha(r);while(d--)s[d]=arguments[d];var c=a<3&&s[0]!==l&&s[a-1]!==l?[]:li(s,l);if(a-=c.length,a<i)return Pa(e,t,Sa,r.placeholder,n,s,c,n,n,i-a);var u=this&&this!==an&&this instanceof r?o:e;return yn(u,this,s)}return r}function va(e){return function(t,i,o){var r=nt(t);if(!cc(t)){var a=Ga(i,3);t=wu(t),i=function(e){return a(r[e],e,r)}}var s=e(t,i,o);return s>-1?r[a?t[s]:s]:n}}function ya(e){return Oa((function(t){var i=t.length,o=i,r=ki.prototype.thru;e&&t.reverse();while(o--){var s=t[o];if("function"!=typeof s)throw new rt(a);if(r&&!d&&"wrapper"==Va(s))var d=new ki([],!0)}o=d?o:i;while(++o<i){s=t[o];var l=Va(s),c="wrapper"==l?Ua(s):n;d=c&&cs(c[0])&&c[1]==(C|S|T|_)&&!c[4].length&&1==c[9]?d[Va(c[0])].apply(d,c[3]):1==s.length&&cs(s)?d[l]():d.thru(s)}return function(){var e=arguments,n=e[0];if(d&&1==e.length&&dc(n))return d.plant(n).value();var o=0,r=i?t[o].apply(this,e):n;while(++o<i)r=t[o].call(this,r);return r}}))}function Sa(e,t,i,o,r,a,s,d,l,c){var u=t&C,m=t&g,p=t&v,h=t&(S|b),f=t&E,y=p?n:fa(e);function T(){var n=arguments.length,g=A(n),v=n;while(v--)g[v]=arguments[v];if(h)var S=Ha(T),b=$n(g,S);if(o&&(g=na(g,o,r,h)),a&&(g=ia(g,a,s,h)),n-=b,h&&n<c){var w=li(g,S);return Pa(e,t,Sa,T.placeholder,i,g,w,d,l,c-n)}var C=m?i:this,_=p?C[e]:e;return n=g.length,d?g=ws(g,d):f&&n>1&&g.reverse(),u&&l<n&&(g.length=l),this&&this!==an&&this instanceof T&&(_=y||fa(_)),_.apply(C,g)}return T}function ba(e,t){return function(n,i){return Ho(n,e,t(i),{})}}function Ta(e,t){return function(i,o){var r;if(i===n&&o===n)return t;if(i!==n&&(r=i),o!==n){if(r===n)return o;"string"==typeof i||"string"==typeof o?(i=Lr(i),o=Lr(o)):(i=jr(i),o=jr(o)),r=e(i,o)}return r}}function wa(e){return Oa((function(t){return t=kn(t,Zn(Ga())),Tr((function(n){var i=this;return e(t,(function(e){return yn(e,i,n)}))}))}))}function Ca(e,t){t=t===n?" ":Lr(t);var i=t.length;if(i<2)return i?br(t,e):t;var o=br(t,jt(e/hi(t)));return oi(t)?Jr(fi(o),0,e).join(""):o.slice(0,e)}function _a(e,t,n,i){var o=t&g,r=fa(e);function a(){var t=-1,s=arguments.length,d=-1,l=i.length,c=A(l+s),u=this&&this!==an&&this instanceof a?r:e;while(++d<l)c[d]=i[d];while(s--)c[d++]=arguments[++t];return yn(u,o?n:this,c)}return a}function Ea(e){return function(t,i,o){return o&&"number"!=typeof o&&ss(t,i,o)&&(i=o=n),t=Kc(t),i===n?(i=t,t=0):i=Kc(i),o=o===n?t<i?1:-1:Kc(o),Sr(t,i,o,e)}}function ka(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Yc(t),n=Yc(n)),e(t,n)}}function Pa(e,t,i,o,r,a,s,d,l,c){var u=t&S,m=u?s:n,p=u?n:s,h=u?a:n,f=u?n:a;t|=u?T:w,t&=~(u?w:T),t&y||(t&=~(g|v));var b=[e,t,r,h,m,f,p,d,l,c],C=i.apply(n,b);return cs(e)&&_s(C,b),C.placeholder=o,Ps(C,e,t)}function Ia(e){var t=tt[e];return function(e,n){if(e=Yc(e),n=null==n?0:Ht(Zc(n),292),n&&Bt(e)){var i=($c(e)+"e").split("e"),o=t(i[0]+"e"+(+i[1]+n));return i=($c(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(e)}}var xa=on&&1/ci(new on([,-0]))[1]==L?function(e){return new on(e)}:Om;function Ra(e){return function(t){var n=Xa(t);return n==X?si(t):n==oe?ui(t):Jn(t,e(t))}}function Aa(e,t,i,o,r,s,d,l){var c=t&v;if(!c&&"function"!=typeof e)throw new rt(a);var u=o?o.length:0;if(u||(t&=~(T|w),o=r=n),d=d===n?d:Ft(Zc(d),0),l=l===n?l:Zc(l),u-=r?r.length:0,t&w){var m=o,p=r;o=r=n}var h=c?n:Ua(e),f=[e,t,i,o,r,m,p,s,d,l];if(h&&vs(f,h),e=f[0],t=f[1],i=f[2],o=f[3],r=f[4],l=f[9]=f[9]===n?c?0:e.length:Ft(f[9]-u,0),!l&&t&(S|b)&&(t&=~(S|b)),t&&t!=g)y=t==S||t==b?ga(e,t,l):t!=T&&t!=(g|T)||r.length?Sa.apply(n,f):_a(e,t,i,o);else var y=ma(e,t,i);var C=h?Er:_s;return Ps(C(y,f),e,t)}function Da(e,t,i,o){return e===n||oc(e,dt[i])&&!ut.call(o,i)?t:e}function ja(e,t,i,o,r,a){return _c(e)&&_c(t)&&(a.set(t,e),lr(e,t,n,ja,a),a["delete"](t)),e}function La(e){return Lc(e)?n:e}function Ma(e,t,i,o,r,a){var s=i&h,d=e.length,l=t.length;if(d!=l&&!(s&&l>d))return!1;var c=a.get(e),u=a.get(t);if(c&&u)return c==t&&u==e;var m=-1,p=!0,g=i&f?new qi:n;a.set(e,t),a.set(t,e);while(++m<d){var v=e[m],y=t[m];if(o)var S=s?o(y,v,m,t,e,a):o(v,y,m,e,t,a);if(S!==n){if(S)continue;p=!1;break}if(g){if(!Rn(t,(function(e,t){if(!Yn(g,t)&&(v===e||r(v,e,i,o,a)))return g.push(t)}))){p=!1;break}}else if(v!==y&&!r(v,y,i,o,a)){p=!1;break}}return a["delete"](e),a["delete"](t),p}function Na(e,t,n,i,o,r,a){switch(n){case ue:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ce:return!(e.byteLength!=t.byteLength||!r(new bt(e),new bt(t)));case W:case J:case Q:return oc(+e,+t);case Z:return e.name==t.name&&e.message==t.message;case ie:case re:return e==t+"";case X:var s=si;case oe:var d=i&h;if(s||(s=ci),e.size!=t.size&&!d)return!1;var l=a.get(e);if(l)return l==t;i|=f,a.set(e,t);var c=Ma(s(e),s(t),i,o,r,a);return a["delete"](e),c;case ae:if(Si)return Si.call(e)==Si.call(t)}return!1}function Ba(e,t,i,o,r,a){var s=i&h,d=za(e),l=d.length,c=za(t),u=c.length;if(l!=u&&!s)return!1;var m=l;while(m--){var p=d[m];if(!(s?p in t:ut.call(t,p)))return!1}var f=a.get(e),g=a.get(t);if(f&&g)return f==t&&g==e;var v=!0;a.set(e,t),a.set(t,e);var y=s;while(++m<l){p=d[m];var S=e[p],b=t[p];if(o)var T=s?o(b,S,p,t,e,a):o(S,b,p,e,t,a);if(!(T===n?S===b||r(S,b,i,o,a):T)){v=!1;break}y||(y="constructor"==p)}if(v&&!y){var w=e.constructor,C=t.constructor;w==C||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof C&&C instanceof C||(v=!1)}return a["delete"](e),a["delete"](t),v}function Oa(e){return ks(bs(e,n,Zs),e+"")}function za(e){return No(e,wu,qa)}function Fa(e){return No(e,Cu,Ya)}var Ua=dn?function(e){return dn.get(e)}:Om;function Va(e){var t=e.name+"",n=cn[t],i=ut.call(cn,t)?n.length:0;while(i--){var o=n[i],r=o.func;if(null==r||r==e)return o.name}return t}function Ha(e){var t=ut.call(Ci,"placeholder")?Ci:e;return t.placeholder}function Ga(){var e=Ci.iteratee||Am;return e=e===Am?nr:e,arguments.length?e(arguments[0],arguments[1]):e}function Wa(e,t){var n=e.__data__;return ls(t)?n["string"==typeof t?"string":"hash"]:n.map}function Ja(e){var t=wu(e),n=t.length;while(n--){var i=t[n],o=e[i];t[n]=[i,o,hs(o)]}return t}function Ka(e,t){var i=ii(e,t);return Qo(i)?i:n}function Za(e){var t=ut.call(e,It),i=e[It];try{e[It]=n;var o=!0}catch(a){}var r=ht.call(e);return o&&(t?e[It]=i:delete e[It]),r}var qa=Mt?function(e){return null==e?[]:(e=nt(e),Cn(Mt(e),(function(t){return _t.call(e,t)})))}:Km,Ya=Mt?function(e){var t=[];while(e)Pn(t,qa(e)),e=wt(e);return t}:Km,Xa=Bo;function Qa(e,t,n){var i=-1,o=n.length;while(++i<o){var r=n[i],a=r.size;switch(r.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Ht(t,e+a);break;case"takeRight":e=Ft(e,t-a);break}}return{start:e,end:t}}function $a(e){var t=e.match(ze);return t?t[1].split(Fe):[]}function es(e,t,n){t=Gr(t,e);var i=-1,o=t.length,r=!1;while(++i<o){var a=As(t[i]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}return r||++i!=o?r:(o=null==e?0:e.length,!!o&&Cc(o)&&as(a,o)&&(dc(e)||sc(e)))}function ts(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ut.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ns(e){return"function"!=typeof e.constructor||ps(e)?{}:_i(wt(e))}function is(e,t,n){var i=e.constructor;switch(t){case ce:return qr(e);case W:case J:return new i(+e);case ue:return Yr(e,n);case me:case pe:case he:case fe:case ge:case ve:case ye:case Se:case be:return $r(e,n);case X:return new i;case Q:case re:return new i(e);case ie:return Xr(e);case oe:return new i;case ae:return Qr(e)}}function os(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(Oe,"{\n/* [wrapped with "+t+"] */\n")}function rs(e){return dc(e)||sc(e)||!!(kt&&e&&e[kt])}function as(e,t){var n=typeof e;return t=null==t?M:t,!!t&&("number"==n||"symbol"!=n&&Ye.test(e))&&e>-1&&e%1==0&&e<t}function ss(e,t,n){if(!_c(n))return!1;var i=typeof t;return!!("number"==i?cc(n)&&as(t,n.length):"string"==i&&t in n)&&oc(n[t],e)}function ds(e,t){if(dc(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!zc(e))||(De.test(e)||!Ae.test(e)||null!=t&&e in nt(t))}function ls(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function cs(e){var t=Va(e),n=Ci[t];if("function"!=typeof n||!(t in Pi.prototype))return!1;if(e===n)return!0;var i=Ua(n);return!!i&&e===i[0]}function us(e){return!!pt&&pt in e}(Qt&&Xa(new Qt(new ArrayBuffer(1)))!=ue||$t&&Xa(new $t)!=X||en&&Xa(en.resolve())!=te||on&&Xa(new on)!=oe||rn&&Xa(new rn)!=de)&&(Xa=function(e){var t=Bo(e),i=t==ee?e.constructor:n,o=i?Ds(i):"";if(o)switch(o){case un:return ue;case An:return X;case Dn:return te;case Un:return oe;case mi:return de}return t});var ms=lt?Tc:Zm;function ps(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||dt;return e===n}function hs(e){return e===e&&!_c(e)}function fs(e,t){return function(i){return null!=i&&(i[e]===t&&(t!==n||e in nt(i)))}}function gs(e){var t=Fl(e,(function(e){return n.size===l&&n.clear(),e})),n=t.cache;return t}function vs(e,t){var n=e[1],i=t[1],o=n|i,r=o<(g|v|C),a=i==C&&n==S||i==C&&n==_&&e[7].length<=t[8]||i==(C|_)&&t[7].length<=t[8]&&n==S;if(!r&&!a)return e;i&g&&(e[2]=t[2],o|=n&g?0:y);var s=t[3];if(s){var d=e[3];e[3]=d?na(d,s,t[4]):s,e[4]=d?li(e[3],c):t[4]}return s=t[5],s&&(d=e[5],e[5]=d?ia(d,s,t[6]):s,e[6]=d?li(e[5],c):t[6]),s=t[7],s&&(e[7]=s),i&C&&(e[8]=null==e[8]?t[8]:Ht(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function ys(e){var t=[];if(null!=e)for(var n in nt(e))t.push(n);return t}function Ss(e){return ht.call(e)}function bs(e,t,i){return t=Ft(t===n?e.length-1:t,0),function(){var n=arguments,o=-1,r=Ft(n.length-t,0),a=A(r);while(++o<r)a[o]=n[t+o];o=-1;var s=A(t+1);while(++o<t)s[o]=n[o];return s[t]=i(a),yn(e,this,s)}}function Ts(e,t){return t.length<2?e:Mo(e,Ir(t,0,-1))}function ws(e,t){var i=e.length,o=Ht(t.length,i),r=oa(e);while(o--){var a=t[o];e[o]=as(a,i)?r[a]:n}return e}function Cs(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var _s=Is(Er),Es=Dt||function(e,t){return an.setTimeout(e,t)},ks=Is(kr);function Ps(e,t,n){var i=t+"";return ks(e,os(i,js($a(i),n)))}function Is(e){var t=0,i=0;return function(){var o=Gt(),r=x-(o-i);if(i=o,r>0){if(++t>=I)return arguments[0]}else t=0;return e.apply(n,arguments)}}function xs(e,t){var i=-1,o=e.length,r=o-1;t=t===n?o:t;while(++i<t){var a=yr(i,r),s=e[a];e[a]=e[i],e[i]=s}return e.length=t,e}var Rs=gs((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(je,(function(e,n,i,o){t.push(i?o.replace(He,"$1"):n||e)})),t}));function As(e){if("string"==typeof e||zc(e))return e;var t=e+"";return"0"==t&&1/e==-L?"-0":t}function Ds(e){if(null!=e){try{return ct.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function js(e,t){return bn(U,(function(n){var i="_."+n[0];t&n[1]&&!_n(e,i)&&e.push(i)})),e.sort()}function Ls(e){if(e instanceof Pi)return e.clone();var t=new ki(e.__wrapped__,e.__chain__);return t.__actions__=oa(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ms(e,t,i){t=(i?ss(e,t,i):t===n)?1:Ft(Zc(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];var r=0,a=0,s=A(jt(o/t));while(r<o)s[a++]=Ir(e,r,r+=t);return s}function Ns(e){var t=-1,n=null==e?0:e.length,i=0,o=[];while(++t<n){var r=e[t];r&&(o[i++]=r)}return o}function Bs(){var e=arguments.length;if(!e)return[];var t=A(e-1),n=arguments[0],i=e;while(i--)t[i-1]=arguments[i];return Pn(dc(n)?oa(n):[n],xo(t,1))}var Os=Tr((function(e,t){return uc(e)?wo(e,xo(t,1,uc,!0)):[]})),zs=Tr((function(e,t){var i=rd(t);return uc(i)&&(i=n),uc(e)?wo(e,xo(t,1,uc,!0),Ga(i,2)):[]})),Fs=Tr((function(e,t){var i=rd(t);return uc(i)&&(i=n),uc(e)?wo(e,xo(t,1,uc,!0),n,i):[]}));function Us(e,t,i){var o=null==e?0:e.length;return o?(t=i||t===n?1:Zc(t),Ir(e,t<0?0:t,o)):[]}function Vs(e,t,i){var o=null==e?0:e.length;return o?(t=i||t===n?1:Zc(t),t=o-t,Ir(e,0,t<0?0:t)):[]}function Hs(e,t){return e&&e.length?Or(e,Ga(t,3),!0,!0):[]}function Gs(e,t){return e&&e.length?Or(e,Ga(t,3),!0):[]}function Ws(e,t,n,i){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&ss(e,t,n)&&(n=0,i=o),Po(e,t,n,i)):[]}function Js(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=null==n?0:Zc(n);return o<0&&(o=Ft(i+o,0)),Mn(e,Ga(t,3),o)}function Ks(e,t,i){var o=null==e?0:e.length;if(!o)return-1;var r=o-1;return i!==n&&(r=Zc(i),r=i<0?Ft(o+r,0):Ht(r,o-1)),Mn(e,Ga(t,3),r,!0)}function Zs(e){var t=null==e?0:e.length;return t?xo(e,1):[]}function qs(e){var t=null==e?0:e.length;return t?xo(e,L):[]}function Ys(e,t){var i=null==e?0:e.length;return i?(t=t===n?1:Zc(t),xo(e,t)):[]}function Xs(e){var t=-1,n=null==e?0:e.length,i={};while(++t<n){var o=e[t];i[o[0]]=o[1]}return i}function Qs(e){return e&&e.length?e[0]:n}function $s(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=null==n?0:Zc(n);return o<0&&(o=Ft(i+o,0)),Nn(e,t,o)}function ed(e){var t=null==e?0:e.length;return t?Ir(e,0,-1):[]}var td=Tr((function(e){var t=kn(e,Vr);return t.length&&t[0]===e[0]?Vo(t):[]})),nd=Tr((function(e){var t=rd(e),i=kn(e,Vr);return t===rd(i)?t=n:i.pop(),i.length&&i[0]===e[0]?Vo(i,Ga(t,2)):[]})),id=Tr((function(e){var t=rd(e),i=kn(e,Vr);return t="function"==typeof t?t:n,t&&i.pop(),i.length&&i[0]===e[0]?Vo(i,n,t):[]}));function od(e,t){return null==e?"":Ot.call(e,t)}function rd(e){var t=null==e?0:e.length;return t?e[t-1]:n}function ad(e,t,i){var o=null==e?0:e.length;if(!o)return-1;var r=o;return i!==n&&(r=Zc(i),r=r<0?Ft(o+r,0):Ht(r,o-1)),t===t?pi(e,t,r):Mn(e,On,r,!0)}function sd(e,t){return e&&e.length?ur(e,Zc(t)):n}var dd=Tr(ld);function ld(e,t){return e&&e.length&&t&&t.length?gr(e,t):e}function cd(e,t,n){return e&&e.length&&t&&t.length?gr(e,t,Ga(n,2)):e}function ud(e,t,i){return e&&e.length&&t&&t.length?gr(e,t,n,i):e}var md=Oa((function(e,t){var n=null==e?0:e.length,i=go(e,t);return vr(e,kn(t,(function(e){return as(e,n)?+e:e})).sort(ea)),i}));function pd(e,t){var n=[];if(!e||!e.length)return n;var i=-1,o=[],r=e.length;t=Ga(t,3);while(++i<r){var a=e[i];t(a,i,e)&&(n.push(a),o.push(i))}return vr(e,o),n}function hd(e){return null==e?e:Xt.call(e)}function fd(e,t,i){var o=null==e?0:e.length;return o?(i&&"number"!=typeof i&&ss(e,t,i)?(t=0,i=o):(t=null==t?0:Zc(t),i=i===n?o:Zc(i)),Ir(e,t,i)):[]}function gd(e,t){return Rr(e,t)}function vd(e,t,n){return Ar(e,t,Ga(n,2))}function yd(e,t){var n=null==e?0:e.length;if(n){var i=Rr(e,t);if(i<n&&oc(e[i],t))return i}return-1}function Sd(e,t){return Rr(e,t,!0)}function bd(e,t,n){return Ar(e,t,Ga(n,2),!0)}function Td(e,t){var n=null==e?0:e.length;if(n){var i=Rr(e,t,!0)-1;if(oc(e[i],t))return i}return-1}function wd(e){return e&&e.length?Dr(e):[]}function Cd(e,t){return e&&e.length?Dr(e,Ga(t,2)):[]}function _d(e){var t=null==e?0:e.length;return t?Ir(e,1,t):[]}function Ed(e,t,i){return e&&e.length?(t=i||t===n?1:Zc(t),Ir(e,0,t<0?0:t)):[]}function kd(e,t,i){var o=null==e?0:e.length;return o?(t=i||t===n?1:Zc(t),t=o-t,Ir(e,t<0?0:t,o)):[]}function Pd(e,t){return e&&e.length?Or(e,Ga(t,3),!1,!0):[]}function Id(e,t){return e&&e.length?Or(e,Ga(t,3)):[]}var xd=Tr((function(e){return Mr(xo(e,1,uc,!0))})),Rd=Tr((function(e){var t=rd(e);return uc(t)&&(t=n),Mr(xo(e,1,uc,!0),Ga(t,2))})),Ad=Tr((function(e){var t=rd(e);return t="function"==typeof t?t:n,Mr(xo(e,1,uc,!0),n,t)}));function Dd(e){return e&&e.length?Mr(e):[]}function jd(e,t){return e&&e.length?Mr(e,Ga(t,2)):[]}function Ld(e,t){return t="function"==typeof t?t:n,e&&e.length?Mr(e,n,t):[]}function Md(e){if(!e||!e.length)return[];var t=0;return e=Cn(e,(function(e){if(uc(e))return t=Ft(e.length,t),!0})),Wn(t,(function(t){return kn(e,Fn(t))}))}function Nd(e,t){if(!e||!e.length)return[];var i=Md(e);return null==t?i:kn(i,(function(e){return yn(t,n,e)}))}var Bd=Tr((function(e,t){return uc(e)?wo(e,t):[]})),Od=Tr((function(e){return Fr(Cn(e,uc))})),zd=Tr((function(e){var t=rd(e);return uc(t)&&(t=n),Fr(Cn(e,uc),Ga(t,2))})),Fd=Tr((function(e){var t=rd(e);return t="function"==typeof t?t:n,Fr(Cn(e,uc),n,t)})),Ud=Tr(Md);function Vd(e,t){return Ur(e||[],t||[],co)}function Hd(e,t){return Ur(e||[],t||[],_r)}var Gd=Tr((function(e){var t=e.length,i=t>1?e[t-1]:n;return i="function"==typeof i?(e.pop(),i):n,Nd(e,i)}));function Wd(e){var t=Ci(e);return t.__chain__=!0,t}function Jd(e,t){return t(e),e}function Kd(e,t){return t(e)}var Zd=Oa((function(e){var t=e.length,i=t?e[0]:0,o=this.__wrapped__,r=function(t){return go(t,e)};return!(t>1||this.__actions__.length)&&o instanceof Pi&&as(i)?(o=o.slice(i,+i+(t?1:0)),o.__actions__.push({func:Kd,args:[r],thisArg:n}),new ki(o,this.__chain__).thru((function(e){return t&&!e.length&&e.push(n),e}))):this.thru(r)}));function qd(){return Wd(this)}function Yd(){return new ki(this.value(),this.__chain__)}function Xd(){this.__values__===n&&(this.__values__=Jc(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function Qd(){return this}function $d(e){var t,i=this;while(i instanceof Ei){var o=Ls(i);o.__index__=0,o.__values__=n,t?r.__wrapped__=o:t=o;var r=o;i=i.__wrapped__}return r.__wrapped__=e,t}function el(){var e=this.__wrapped__;if(e instanceof Pi){var t=e;return this.__actions__.length&&(t=new Pi(this)),t=t.reverse(),t.__actions__.push({func:Kd,args:[hd],thisArg:n}),new ki(t,this.__chain__)}return this.thru(hd)}function tl(){return zr(this.__wrapped__,this.__actions__)}var nl=da((function(e,t,n){ut.call(e,n)?++e[n]:fo(e,n,1)}));function il(e,t,i){var o=dc(e)?wn:Eo;return i&&ss(e,t,i)&&(t=n),o(e,Ga(t,3))}function ol(e,t){var n=dc(e)?Cn:Io;return n(e,Ga(t,3))}var rl=va(Js),al=va(Ks);function sl(e,t){return xo(gl(e,t),1)}function dl(e,t){return xo(gl(e,t),L)}function ll(e,t,i){return i=i===n?1:Zc(i),xo(gl(e,t),i)}function cl(e,t){var n=dc(e)?bn:Co;return n(e,Ga(t,3))}function ul(e,t){var n=dc(e)?Tn:_o;return n(e,Ga(t,3))}var ml=da((function(e,t,n){ut.call(e,n)?e[n].push(t):fo(e,n,[t])}));function pl(e,t,n,i){e=cc(e)?e:Uu(e),n=n&&!i?Zc(n):0;var o=e.length;return n<0&&(n=Ft(o+n,0)),Oc(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&Nn(e,t,n)>-1}var hl=Tr((function(e,t,n){var i=-1,o="function"==typeof t,r=cc(e)?A(e.length):[];return Co(e,(function(e){r[++i]=o?yn(t,e,n):Go(e,t,n)})),r})),fl=da((function(e,t,n){fo(e,n,t)}));function gl(e,t){var n=dc(e)?kn:ar;return n(e,Ga(t,3))}function vl(e,t,i,o){return null==e?[]:(dc(t)||(t=null==t?[]:[t]),i=o?n:i,dc(i)||(i=null==i?[]:[i]),mr(e,t,i))}var yl=da((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));function Sl(e,t,n){var i=dc(e)?In:Vn,o=arguments.length<3;return i(e,Ga(t,4),n,o,Co)}function bl(e,t,n){var i=dc(e)?xn:Vn,o=arguments.length<3;return i(e,Ga(t,4),n,o,_o)}function Tl(e,t){var n=dc(e)?Cn:Io;return n(e,Ul(Ga(t,3)))}function wl(e){var t=dc(e)?ro:wr;return t(e)}function Cl(e,t,i){t=(i?ss(e,t,i):t===n)?1:Zc(t);var o=dc(e)?ao:Cr;return o(e,t)}function _l(e){var t=dc(e)?so:Pr;return t(e)}function El(e){if(null==e)return 0;if(cc(e))return Oc(e)?hi(e):e.length;var t=Xa(e);return t==X||t==oe?e.size:ir(e).length}function kl(e,t,i){var o=dc(e)?Rn:xr;return i&&ss(e,t,i)&&(t=n),o(e,Ga(t,3))}var Pl=Tr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&ss(e,t[0],t[1])?t=[]:n>2&&ss(t[0],t[1],t[2])&&(t=[t[0]]),mr(e,xo(t,1),[])})),Il=At||function(){return an.Date.now()};function xl(e,t){if("function"!=typeof t)throw new rt(a);return e=Zc(e),function(){if(--e<1)return t.apply(this,arguments)}}function Rl(e,t,i){return t=i?n:t,t=e&&null==t?e.length:t,Aa(e,C,n,n,n,n,t)}function Al(e,t){var i;if("function"!=typeof t)throw new rt(a);return e=Zc(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}var Dl=Tr((function(e,t,n){var i=g;if(n.length){var o=li(n,Ha(Dl));i|=T}return Aa(e,i,t,n,o)})),jl=Tr((function(e,t,n){var i=g|v;if(n.length){var o=li(n,Ha(jl));i|=T}return Aa(t,i,e,n,o)}));function Ll(e,t,i){t=i?n:t;var o=Aa(e,S,n,n,n,n,n,t);return o.placeholder=Ll.placeholder,o}function Ml(e,t,i){t=i?n:t;var o=Aa(e,b,n,n,n,n,n,t);return o.placeholder=Ml.placeholder,o}function Nl(e,t,i){var o,r,s,d,l,c,u=0,m=!1,p=!1,h=!0;if("function"!=typeof e)throw new rt(a);function f(t){var i=o,a=r;return o=r=n,u=t,d=e.apply(a,i),d}function g(e){return u=e,l=Es(S,t),m?f(e):d}function v(e){var n=e-c,i=e-u,o=t-n;return p?Ht(o,s-i):o}function y(e){var i=e-c,o=e-u;return c===n||i>=t||i<0||p&&o>=s}function S(){var e=Il();if(y(e))return b(e);l=Es(S,v(e))}function b(e){return l=n,h&&o?f(e):(o=r=n,d)}function T(){l!==n&&Kr(l),u=0,o=c=r=l=n}function w(){return l===n?d:b(Il())}function C(){var e=Il(),i=y(e);if(o=arguments,r=this,c=e,i){if(l===n)return g(c);if(p)return Kr(l),l=Es(S,t),f(c)}return l===n&&(l=Es(S,t)),d}return t=Yc(t)||0,_c(i)&&(m=!!i.leading,p="maxWait"in i,s=p?Ft(Yc(i.maxWait)||0,t):s,h="trailing"in i?!!i.trailing:h),C.cancel=T,C.flush=w,C}var Bl=Tr((function(e,t){return To(e,1,t)})),Ol=Tr((function(e,t,n){return To(e,Yc(t)||0,n)}));function zl(e){return Aa(e,E)}function Fl(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new rt(a);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var a=e.apply(this,i);return n.cache=r.set(o,a)||r,a};return n.cache=new(Fl.Cache||Hi),n}function Ul(e){if("function"!=typeof e)throw new rt(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Vl(e){return Al(2,e)}Fl.Cache=Hi;var Hl=Wr((function(e,t){t=1==t.length&&dc(t[0])?kn(t[0],Zn(Ga())):kn(xo(t,1),Zn(Ga()));var n=t.length;return Tr((function(i){var o=-1,r=Ht(i.length,n);while(++o<r)i[o]=t[o].call(this,i[o]);return yn(e,this,i)}))})),Gl=Tr((function(e,t){var i=li(t,Ha(Gl));return Aa(e,T,n,t,i)})),Wl=Tr((function(e,t){var i=li(t,Ha(Wl));return Aa(e,w,n,t,i)})),Jl=Oa((function(e,t){return Aa(e,_,n,n,n,t)}));function Kl(e,t){if("function"!=typeof e)throw new rt(a);return t=t===n?t:Zc(t),Tr(e,t)}function Zl(e,t){if("function"!=typeof e)throw new rt(a);return t=null==t?0:Ft(Zc(t),0),Tr((function(n){var i=n[t],o=Jr(n,0,t);return i&&Pn(o,i),yn(e,this,o)}))}function ql(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new rt(a);return _c(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Nl(e,t,{leading:i,maxWait:t,trailing:o})}function Yl(e){return Rl(e,1)}function Xl(e,t){return Gl(Hr(t),e)}function Ql(){if(!arguments.length)return[];var e=arguments[0];return dc(e)?e:[e]}function $l(e){return yo(e,p)}function ec(e,t){return t="function"==typeof t?t:n,yo(e,p,t)}function tc(e){return yo(e,u|p)}function nc(e,t){return t="function"==typeof t?t:n,yo(e,u|p,t)}function ic(e,t){return null==t||bo(e,t,wu(t))}function oc(e,t){return e===t||e!==e&&t!==t}var rc=ka(Oo),ac=ka((function(e,t){return e>=t})),sc=Wo(function(){return arguments}())?Wo:function(e){return Ec(e)&&ut.call(e,"callee")&&!_t.call(e,"callee")},dc=A.isArray,lc=mn?Zn(mn):Jo;function cc(e){return null!=e&&Cc(e.length)&&!Tc(e)}function uc(e){return Ec(e)&&cc(e)}function mc(e){return!0===e||!1===e||Ec(e)&&Bo(e)==W}var pc=Nt||Zm,hc=pn?Zn(pn):Ko;function fc(e){return Ec(e)&&1===e.nodeType&&!Lc(e)}function gc(e){if(null==e)return!0;if(cc(e)&&(dc(e)||"string"==typeof e||"function"==typeof e.splice||pc(e)||Fc(e)||sc(e)))return!e.length;var t=Xa(e);if(t==X||t==oe)return!e.size;if(ps(e))return!ir(e).length;for(var n in e)if(ut.call(e,n))return!1;return!0}function vc(e,t){return Zo(e,t)}function yc(e,t,i){i="function"==typeof i?i:n;var o=i?i(e,t):n;return o===n?Zo(e,t,n,i):!!o}function Sc(e){if(!Ec(e))return!1;var t=Bo(e);return t==Z||t==K||"string"==typeof e.message&&"string"==typeof e.name&&!Lc(e)}function bc(e){return"number"==typeof e&&Bt(e)}function Tc(e){if(!_c(e))return!1;var t=Bo(e);return t==q||t==Y||t==G||t==ne}function wc(e){return"number"==typeof e&&e==Zc(e)}function Cc(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=M}function _c(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ec(e){return null!=e&&"object"==typeof e}var kc=hn?Zn(hn):Yo;function Pc(e,t){return e===t||Xo(e,t,Ja(t))}function Ic(e,t,i){return i="function"==typeof i?i:n,Xo(e,t,Ja(t),i)}function xc(e){return jc(e)&&e!=+e}function Rc(e){if(ms(e))throw new Ue(r);return Qo(e)}function Ac(e){return null===e}function Dc(e){return null==e}function jc(e){return"number"==typeof e||Ec(e)&&Bo(e)==Q}function Lc(e){if(!Ec(e)||Bo(e)!=ee)return!1;var t=wt(e);if(null===t)return!0;var n=ut.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ct.call(n)==ft}var Mc=fn?Zn(fn):$o;function Nc(e){return wc(e)&&e>=-M&&e<=M}var Bc=gn?Zn(gn):er;function Oc(e){return"string"==typeof e||!dc(e)&&Ec(e)&&Bo(e)==re}function zc(e){return"symbol"==typeof e||Ec(e)&&Bo(e)==ae}var Fc=vn?Zn(vn):tr;function Uc(e){return e===n}function Vc(e){return Ec(e)&&Xa(e)==de}function Hc(e){return Ec(e)&&Bo(e)==le}var Gc=ka(rr),Wc=ka((function(e,t){return e<=t}));function Jc(e){if(!e)return[];if(cc(e))return Oc(e)?fi(e):oa(e);if(Pt&&e[Pt])return ai(e[Pt]());var t=Xa(e),n=t==X?si:t==oe?ci:Uu;return n(e)}function Kc(e){if(!e)return 0===e?e:0;if(e=Yc(e),e===L||e===-L){var t=e<0?-1:1;return t*N}return e===e?e:0}function Zc(e){var t=Kc(e),n=t%1;return t===t?n?t-n:t:0}function qc(e){return e?vo(Zc(e),0,O):0}function Yc(e){if("number"==typeof e)return e;if(zc(e))return B;if(_c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Kn(e);var n=Ke.test(e);return n||qe.test(e)?nn(e.slice(2),n?2:8):Je.test(e)?B:+e}function Xc(e){return ra(e,Cu(e))}function Qc(e){return e?vo(Zc(e),-M,M):0===e?e:0}function $c(e){return null==e?"":Lr(e)}var eu=la((function(e,t){if(ps(t)||cc(t))ra(t,wu(t),e);else for(var n in t)ut.call(t,n)&&co(e,n,t[n])})),tu=la((function(e,t){ra(t,Cu(t),e)})),nu=la((function(e,t,n,i){ra(t,Cu(t),e,i)})),iu=la((function(e,t,n,i){ra(t,wu(t),e,i)})),ou=Oa(go);function ru(e,t){var n=_i(e);return null==t?n:po(n,t)}var au=Tr((function(e,t){e=nt(e);var i=-1,o=t.length,r=o>2?t[2]:n;r&&ss(t[0],t[1],r)&&(o=1);while(++i<o){var a=t[i],s=Cu(a),d=-1,l=s.length;while(++d<l){var c=s[d],u=e[c];(u===n||oc(u,dt[c])&&!ut.call(e,c))&&(e[c]=a[c])}}return e})),su=Tr((function(e){return e.push(n,ja),yn(Pu,n,e)}));function du(e,t){return Ln(e,Ga(t,3),Do)}function lu(e,t){return Ln(e,Ga(t,3),jo)}function cu(e,t){return null==e?e:Ro(e,Ga(t,3),Cu)}function uu(e,t){return null==e?e:Ao(e,Ga(t,3),Cu)}function mu(e,t){return e&&Do(e,Ga(t,3))}function pu(e,t){return e&&jo(e,Ga(t,3))}function hu(e){return null==e?[]:Lo(e,wu(e))}function fu(e){return null==e?[]:Lo(e,Cu(e))}function gu(e,t,i){var o=null==e?n:Mo(e,t);return o===n?i:o}function vu(e,t){return null!=e&&es(e,t,zo)}function yu(e,t){return null!=e&&es(e,t,Fo)}var Su=ba((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ht.call(t)),e[t]=n}),km(Rm)),bu=ba((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ht.call(t)),ut.call(e,t)?e[t].push(n):e[t]=[n]}),Ga),Tu=Tr(Go);function wu(e){return cc(e)?oo(e):ir(e)}function Cu(e){return cc(e)?oo(e,!0):or(e)}function _u(e,t){var n={};return t=Ga(t,3),Do(e,(function(e,i,o){fo(n,t(e,i,o),e)})),n}function Eu(e,t){var n={};return t=Ga(t,3),Do(e,(function(e,i,o){fo(n,i,t(e,i,o))})),n}var ku=la((function(e,t,n){lr(e,t,n)})),Pu=la((function(e,t,n,i){lr(e,t,n,i)})),Iu=Oa((function(e,t){var n={};if(null==e)return n;var i=!1;t=kn(t,(function(t){return t=Gr(t,e),i||(i=t.length>1),t})),ra(e,Fa(e),n),i&&(n=yo(n,u|m|p,La));var o=t.length;while(o--)Nr(n,t[o]);return n}));function xu(e,t){return Au(e,Ul(Ga(t)))}var Ru=Oa((function(e,t){return null==e?{}:pr(e,t)}));function Au(e,t){if(null==e)return{};var n=kn(Fa(e),(function(e){return[e]}));return t=Ga(t),hr(e,n,(function(e,n){return t(e,n[0])}))}function Du(e,t,i){t=Gr(t,e);var o=-1,r=t.length;r||(r=1,e=n);while(++o<r){var a=null==e?n:e[As(t[o])];a===n&&(o=r,a=i),e=Tc(a)?a.call(e):a}return e}function ju(e,t,n){return null==e?e:_r(e,t,n)}function Lu(e,t,i,o){return o="function"==typeof o?o:n,null==e?e:_r(e,t,i,o)}var Mu=Ra(wu),Nu=Ra(Cu);function Bu(e,t,n){var i=dc(e),o=i||pc(e)||Fc(e);if(t=Ga(t,4),null==n){var r=e&&e.constructor;n=o?i?new r:[]:_c(e)&&Tc(r)?_i(wt(e)):{}}return(o?bn:Do)(e,(function(e,i,o){return t(n,e,i,o)})),n}function Ou(e,t){return null==e||Nr(e,t)}function zu(e,t,n){return null==e?e:Br(e,t,Hr(n))}function Fu(e,t,i,o){return o="function"==typeof o?o:n,null==e?e:Br(e,t,Hr(i),o)}function Uu(e){return null==e?[]:qn(e,wu(e))}function Vu(e){return null==e?[]:qn(e,Cu(e))}function Hu(e,t,i){return i===n&&(i=t,t=n),i!==n&&(i=Yc(i),i=i===i?i:0),t!==n&&(t=Yc(t),t=t===t?t:0),vo(Yc(e),t,i)}function Gu(e,t,i){return t=Kc(t),i===n?(i=t,t=0):i=Kc(i),e=Yc(e),Uo(e,t,i)}function Wu(e,t,i){if(i&&"boolean"!=typeof i&&ss(e,t,i)&&(t=i=n),i===n&&("boolean"==typeof t?(i=t,t=n):"boolean"==typeof e&&(i=e,e=n)),e===n&&t===n?(e=0,t=1):(e=Kc(e),t===n?(t=e,e=0):t=Kc(t)),e>t){var o=e;e=t,t=o}if(i||e%1||t%1){var r=Jt();return Ht(e+r*(t-e+tn("1e-"+((r+"").length-1))),t)}return yr(e,t)}var Ju=ha((function(e,t,n){return t=t.toLowerCase(),e+(n?Ku(t):t)}));function Ku(e){return bm($c(e).toLowerCase())}function Zu(e){return e=$c(e),e&&e.replace(Xe,ei).replace(Vt,"")}function qu(e,t,i){e=$c(e),t=Lr(t);var o=e.length;i=i===n?o:vo(Zc(i),0,o);var r=i;return i-=t.length,i>=0&&e.slice(i,r)==t}function Yu(e){return e=$c(e),e&&Pe.test(e)?e.replace(Ee,ti):e}function Xu(e){return e=$c(e),e&&Me.test(e)?e.replace(Le,"\\$&"):e}var Qu=ha((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),$u=ha((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),em=pa("toLowerCase");function tm(e,t,n){e=$c(e),t=Zc(t);var i=t?hi(e):0;if(!t||i>=t)return e;var o=(t-i)/2;return Ca(Lt(o),n)+e+Ca(jt(o),n)}function nm(e,t,n){e=$c(e),t=Zc(t);var i=t?hi(e):0;return t&&i<t?e+Ca(t-i,n):e}function im(e,t,n){e=$c(e),t=Zc(t);var i=t?hi(e):0;return t&&i<t?Ca(t-i,n)+e:e}function om(e,t,n){return n||null==t?t=0:t&&(t=+t),Wt($c(e).replace(Ne,""),t||0)}function rm(e,t,i){return t=(i?ss(e,t,i):t===n)?1:Zc(t),br($c(e),t)}function am(){var e=arguments,t=$c(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var sm=ha((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));function dm(e,t,i){return i&&"number"!=typeof i&&ss(e,t,i)&&(t=i=n),i=i===n?O:i>>>0,i?(e=$c(e),e&&("string"==typeof t||null!=t&&!Mc(t))&&(t=Lr(t),!t&&oi(e))?Jr(fi(e),0,i):e.split(t,i)):[]}var lm=ha((function(e,t,n){return e+(n?" ":"")+bm(t)}));function cm(e,t,n){return e=$c(e),n=null==n?0:vo(Zc(n),0,e.length),t=Lr(t),e.slice(n,n+t.length)==t}function um(e,t,i){var o=Ci.templateSettings;i&&ss(e,t,i)&&(t=n),e=$c(e),t=nu({},t,o,Da);var r,a,d=nu({},t.imports,o.imports,Da),l=wu(d),c=qn(d,l),u=0,m=t.interpolate||Qe,p="__p += '",h=it((t.escape||Qe).source+"|"+m.source+"|"+(m===Re?Ge:Qe).source+"|"+(t.evaluate||Qe).source+"|$","g"),f="//# sourceURL="+(ut.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zt+"]")+"\n";e.replace(h,(function(t,n,i,o,s,d){return i||(i=o),p+=e.slice(u,d).replace($e,ni),n&&(r=!0,p+="' +\n__e("+n+") +\n'"),s&&(a=!0,p+="';\n"+s+";\n__p += '"),i&&(p+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=d+t.length,t})),p+="';\n";var g=ut.call(t,"variable")&&t.variable;if(g){if(Ve.test(g))throw new Ue(s)}else p="with (obj) {\n"+p+"\n}\n";p=(a?p.replace(Te,""):p).replace(we,"$1").replace(Ce,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=wm((function(){return et(l,f+"return "+p).apply(n,c)}));if(v.source=p,Sc(v))throw v;return v}function mm(e){return $c(e).toLowerCase()}function pm(e){return $c(e).toUpperCase()}function hm(e,t,i){if(e=$c(e),e&&(i||t===n))return Kn(e);if(!e||!(t=Lr(t)))return e;var o=fi(e),r=fi(t),a=Xn(o,r),s=Qn(o,r)+1;return Jr(o,a,s).join("")}function fm(e,t,i){if(e=$c(e),e&&(i||t===n))return e.slice(0,gi(e)+1);if(!e||!(t=Lr(t)))return e;var o=fi(e),r=Qn(o,fi(t))+1;return Jr(o,0,r).join("")}function gm(e,t,i){if(e=$c(e),e&&(i||t===n))return e.replace(Ne,"");if(!e||!(t=Lr(t)))return e;var o=fi(e),r=Xn(o,fi(t));return Jr(o,r).join("")}function vm(e,t){var i=k,o=P;if(_c(t)){var r="separator"in t?t.separator:r;i="length"in t?Zc(t.length):i,o="omission"in t?Lr(t.omission):o}e=$c(e);var a=e.length;if(oi(e)){var s=fi(e);a=s.length}if(i>=a)return e;var d=i-hi(o);if(d<1)return o;var l=s?Jr(s,0,d).join(""):e.slice(0,d);if(r===n)return l+o;if(s&&(d+=l.length-d),Mc(r)){if(e.slice(d).search(r)){var c,u=l;r.global||(r=it(r.source,$c(We.exec(r))+"g")),r.lastIndex=0;while(c=r.exec(u))var m=c.index;l=l.slice(0,m===n?d:m)}}else if(e.indexOf(Lr(r),d)!=d){var p=l.lastIndexOf(r);p>-1&&(l=l.slice(0,p))}return l+o}function ym(e){return e=$c(e),e&&ke.test(e)?e.replace(_e,vi):e}var Sm=ha((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),bm=pa("toUpperCase");function Tm(e,t,i){return e=$c(e),t=i?n:t,t===n?ri(e)?bi(e):jn(e):e.match(t)||[]}var wm=Tr((function(e,t){try{return yn(e,n,t)}catch(i){return Sc(i)?i:new Ue(i)}})),Cm=Oa((function(e,t){return bn(t,(function(t){t=As(t),fo(e,t,Dl(e[t],e))})),e}));function _m(e){var t=null==e?0:e.length,n=Ga();return e=t?kn(e,(function(e){if("function"!=typeof e[1])throw new rt(a);return[n(e[0]),e[1]]})):[],Tr((function(n){var i=-1;while(++i<t){var o=e[i];if(yn(o[0],this,n))return yn(o[1],this,n)}}))}function Em(e){return So(yo(e,u))}function km(e){return function(){return e}}function Pm(e,t){return null==e||e!==e?t:e}var Im=ya(),xm=ya(!0);function Rm(e){return e}function Am(e){return nr("function"==typeof e?e:yo(e,u))}function Dm(e){return sr(yo(e,u))}function jm(e,t){return dr(e,yo(t,u))}var Lm=Tr((function(e,t){return function(n){return Go(n,e,t)}})),Mm=Tr((function(e,t){return function(n){return Go(e,n,t)}}));function Nm(e,t,n){var i=wu(t),o=Lo(t,i);null!=n||_c(t)&&(o.length||!i.length)||(n=t,t=e,e=this,o=Lo(t,wu(t)));var r=!(_c(n)&&"chain"in n)||!!n.chain,a=Tc(e);return bn(o,(function(n){var i=t[n];e[n]=i,a&&(e.prototype[n]=function(){var t=this.__chain__;if(r||t){var n=e(this.__wrapped__),o=n.__actions__=oa(this.__actions__);return o.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,Pn([this.value()],arguments))})})),e}function Bm(){return an._===this&&(an._=gt),this}function Om(){}function zm(e){return e=Zc(e),Tr((function(t){return ur(t,e)}))}var Fm=wa(kn),Um=wa(wn),Vm=wa(Rn);function Hm(e){return ds(e)?Fn(As(e)):fr(e)}function Gm(e){return function(t){return null==e?n:Mo(e,t)}}var Wm=Ea(),Jm=Ea(!0);function Km(){return[]}function Zm(){return!1}function qm(){return{}}function Ym(){return""}function Xm(){return!0}function Qm(e,t){if(e=Zc(e),e<1||e>M)return[];var n=O,i=Ht(e,O);t=Ga(t),e-=O;var o=Wn(i,t);while(++n<e)t(n);return o}function $m(e){return dc(e)?kn(e,As):zc(e)?[e]:oa(Rs($c(e)))}function ep(e){var t=++mt;return $c(e)+t}var tp=Ta((function(e,t){return e+t}),0),np=Ia("ceil"),ip=Ta((function(e,t){return e/t}),1),op=Ia("floor");function rp(e){return e&&e.length?ko(e,Rm,Oo):n}function ap(e,t){return e&&e.length?ko(e,Ga(t,2),Oo):n}function sp(e){return zn(e,Rm)}function dp(e,t){return zn(e,Ga(t,2))}function lp(e){return e&&e.length?ko(e,Rm,rr):n}function cp(e,t){return e&&e.length?ko(e,Ga(t,2),rr):n}var up=Ta((function(e,t){return e*t}),1),mp=Ia("round"),pp=Ta((function(e,t){return e-t}),0);function hp(e){return e&&e.length?Gn(e,Rm):0}function fp(e,t){return e&&e.length?Gn(e,Ga(t,2)):0}return Ci.after=xl,Ci.ary=Rl,Ci.assign=eu,Ci.assignIn=tu,Ci.assignInWith=nu,Ci.assignWith=iu,Ci.at=ou,Ci.before=Al,Ci.bind=Dl,Ci.bindAll=Cm,Ci.bindKey=jl,Ci.castArray=Ql,Ci.chain=Wd,Ci.chunk=Ms,Ci.compact=Ns,Ci.concat=Bs,Ci.cond=_m,Ci.conforms=Em,Ci.constant=km,Ci.countBy=nl,Ci.create=ru,Ci.curry=Ll,Ci.curryRight=Ml,Ci.debounce=Nl,Ci.defaults=au,Ci.defaultsDeep=su,Ci.defer=Bl,Ci.delay=Ol,Ci.difference=Os,Ci.differenceBy=zs,Ci.differenceWith=Fs,Ci.drop=Us,Ci.dropRight=Vs,Ci.dropRightWhile=Hs,Ci.dropWhile=Gs,Ci.fill=Ws,Ci.filter=ol,Ci.flatMap=sl,Ci.flatMapDeep=dl,Ci.flatMapDepth=ll,Ci.flatten=Zs,Ci.flattenDeep=qs,Ci.flattenDepth=Ys,Ci.flip=zl,Ci.flow=Im,Ci.flowRight=xm,Ci.fromPairs=Xs,Ci.functions=hu,Ci.functionsIn=fu,Ci.groupBy=ml,Ci.initial=ed,Ci.intersection=td,Ci.intersectionBy=nd,Ci.intersectionWith=id,Ci.invert=Su,Ci.invertBy=bu,Ci.invokeMap=hl,Ci.iteratee=Am,Ci.keyBy=fl,Ci.keys=wu,Ci.keysIn=Cu,Ci.map=gl,Ci.mapKeys=_u,Ci.mapValues=Eu,Ci.matches=Dm,Ci.matchesProperty=jm,Ci.memoize=Fl,Ci.merge=ku,Ci.mergeWith=Pu,Ci.method=Lm,Ci.methodOf=Mm,Ci.mixin=Nm,Ci.negate=Ul,Ci.nthArg=zm,Ci.omit=Iu,Ci.omitBy=xu,Ci.once=Vl,Ci.orderBy=vl,Ci.over=Fm,Ci.overArgs=Hl,Ci.overEvery=Um,Ci.overSome=Vm,Ci.partial=Gl,Ci.partialRight=Wl,Ci.partition=yl,Ci.pick=Ru,Ci.pickBy=Au,Ci.property=Hm,Ci.propertyOf=Gm,Ci.pull=dd,Ci.pullAll=ld,Ci.pullAllBy=cd,Ci.pullAllWith=ud,Ci.pullAt=md,Ci.range=Wm,Ci.rangeRight=Jm,Ci.rearg=Jl,Ci.reject=Tl,Ci.remove=pd,Ci.rest=Kl,Ci.reverse=hd,Ci.sampleSize=Cl,Ci.set=ju,Ci.setWith=Lu,Ci.shuffle=_l,Ci.slice=fd,Ci.sortBy=Pl,Ci.sortedUniq=wd,Ci.sortedUniqBy=Cd,Ci.split=dm,Ci.spread=Zl,Ci.tail=_d,Ci.take=Ed,Ci.takeRight=kd,Ci.takeRightWhile=Pd,Ci.takeWhile=Id,Ci.tap=Jd,Ci.throttle=ql,Ci.thru=Kd,Ci.toArray=Jc,Ci.toPairs=Mu,Ci.toPairsIn=Nu,Ci.toPath=$m,Ci.toPlainObject=Xc,Ci.transform=Bu,Ci.unary=Yl,Ci.union=xd,Ci.unionBy=Rd,Ci.unionWith=Ad,Ci.uniq=Dd,Ci.uniqBy=jd,Ci.uniqWith=Ld,Ci.unset=Ou,Ci.unzip=Md,Ci.unzipWith=Nd,Ci.update=zu,Ci.updateWith=Fu,Ci.values=Uu,Ci.valuesIn=Vu,Ci.without=Bd,Ci.words=Tm,Ci.wrap=Xl,Ci.xor=Od,Ci.xorBy=zd,Ci.xorWith=Fd,Ci.zip=Ud,Ci.zipObject=Vd,Ci.zipObjectDeep=Hd,Ci.zipWith=Gd,Ci.entries=Mu,Ci.entriesIn=Nu,Ci.extend=tu,Ci.extendWith=nu,Nm(Ci,Ci),Ci.add=tp,Ci.attempt=wm,Ci.camelCase=Ju,Ci.capitalize=Ku,Ci.ceil=np,Ci.clamp=Hu,Ci.clone=$l,Ci.cloneDeep=tc,Ci.cloneDeepWith=nc,Ci.cloneWith=ec,Ci.conformsTo=ic,Ci.deburr=Zu,Ci.defaultTo=Pm,Ci.divide=ip,Ci.endsWith=qu,Ci.eq=oc,Ci.escape=Yu,Ci.escapeRegExp=Xu,Ci.every=il,Ci.find=rl,Ci.findIndex=Js,Ci.findKey=du,Ci.findLast=al,Ci.findLastIndex=Ks,Ci.findLastKey=lu,Ci.floor=op,Ci.forEach=cl,Ci.forEachRight=ul,Ci.forIn=cu,Ci.forInRight=uu,Ci.forOwn=mu,Ci.forOwnRight=pu,Ci.get=gu,Ci.gt=rc,Ci.gte=ac,Ci.has=vu,Ci.hasIn=yu,Ci.head=Qs,Ci.identity=Rm,Ci.includes=pl,Ci.indexOf=$s,Ci.inRange=Gu,Ci.invoke=Tu,Ci.isArguments=sc,Ci.isArray=dc,Ci.isArrayBuffer=lc,Ci.isArrayLike=cc,Ci.isArrayLikeObject=uc,Ci.isBoolean=mc,Ci.isBuffer=pc,Ci.isDate=hc,Ci.isElement=fc,Ci.isEmpty=gc,Ci.isEqual=vc,Ci.isEqualWith=yc,Ci.isError=Sc,Ci.isFinite=bc,Ci.isFunction=Tc,Ci.isInteger=wc,Ci.isLength=Cc,Ci.isMap=kc,Ci.isMatch=Pc,Ci.isMatchWith=Ic,Ci.isNaN=xc,Ci.isNative=Rc,Ci.isNil=Dc,Ci.isNull=Ac,Ci.isNumber=jc,Ci.isObject=_c,Ci.isObjectLike=Ec,Ci.isPlainObject=Lc,Ci.isRegExp=Mc,Ci.isSafeInteger=Nc,Ci.isSet=Bc,Ci.isString=Oc,Ci.isSymbol=zc,Ci.isTypedArray=Fc,Ci.isUndefined=Uc,Ci.isWeakMap=Vc,Ci.isWeakSet=Hc,Ci.join=od,Ci.kebabCase=Qu,Ci.last=rd,Ci.lastIndexOf=ad,Ci.lowerCase=$u,Ci.lowerFirst=em,Ci.lt=Gc,Ci.lte=Wc,Ci.max=rp,Ci.maxBy=ap,Ci.mean=sp,Ci.meanBy=dp,Ci.min=lp,Ci.minBy=cp,Ci.stubArray=Km,Ci.stubFalse=Zm,Ci.stubObject=qm,Ci.stubString=Ym,Ci.stubTrue=Xm,Ci.multiply=up,Ci.nth=sd,Ci.noConflict=Bm,Ci.noop=Om,Ci.now=Il,Ci.pad=tm,Ci.padEnd=nm,Ci.padStart=im,Ci.parseInt=om,Ci.random=Wu,Ci.reduce=Sl,Ci.reduceRight=bl,Ci.repeat=rm,Ci.replace=am,Ci.result=Du,Ci.round=mp,Ci.runInContext=e,Ci.sample=wl,Ci.size=El,Ci.snakeCase=sm,Ci.some=kl,Ci.sortedIndex=gd,Ci.sortedIndexBy=vd,Ci.sortedIndexOf=yd,Ci.sortedLastIndex=Sd,Ci.sortedLastIndexBy=bd,Ci.sortedLastIndexOf=Td,Ci.startCase=lm,Ci.startsWith=cm,Ci.subtract=pp,Ci.sum=hp,Ci.sumBy=fp,Ci.template=um,Ci.times=Qm,Ci.toFinite=Kc,Ci.toInteger=Zc,Ci.toLength=qc,Ci.toLower=mm,Ci.toNumber=Yc,Ci.toSafeInteger=Qc,Ci.toString=$c,Ci.toUpper=pm,Ci.trim=hm,Ci.trimEnd=fm,Ci.trimStart=gm,Ci.truncate=vm,Ci.unescape=ym,Ci.uniqueId=ep,Ci.upperCase=Sm,Ci.upperFirst=bm,Ci.each=cl,Ci.eachRight=ul,Ci.first=Qs,Nm(Ci,function(){var e={};return Do(Ci,(function(t,n){ut.call(Ci.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),Ci.VERSION=i,bn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Ci[e].placeholder=Ci})),bn(["drop","take"],(function(e,t){Pi.prototype[e]=function(i){i=i===n?1:Ft(Zc(i),0);var o=this.__filtered__&&!t?new Pi(this):this.clone();return o.__filtered__?o.__takeCount__=Ht(i,o.__takeCount__):o.__views__.push({size:Ht(i,O),type:e+(o.__dir__<0?"Right":"")}),o},Pi.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),bn(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=n==R||n==j;Pi.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ga(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),bn(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Pi.prototype[e]=function(){return this[n](1).value()[0]}})),bn(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Pi.prototype[e]=function(){return this.__filtered__?new Pi(this):this[n](1)}})),Pi.prototype.compact=function(){return this.filter(Rm)},Pi.prototype.find=function(e){return this.filter(e).head()},Pi.prototype.findLast=function(e){return this.reverse().find(e)},Pi.prototype.invokeMap=Tr((function(e,t){return"function"==typeof e?new Pi(this):this.map((function(n){return Go(n,e,t)}))})),Pi.prototype.reject=function(e){return this.filter(Ul(Ga(e)))},Pi.prototype.slice=function(e,t){e=Zc(e);var i=this;return i.__filtered__&&(e>0||t<0)?new Pi(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==n&&(t=Zc(t),i=t<0?i.dropRight(-t):i.take(t-e)),i)},Pi.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Pi.prototype.toArray=function(){return this.take(O)},Do(Pi.prototype,(function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),r=Ci[o?"take"+("last"==t?"Right":""):t],a=o||/^find/.test(t);r&&(Ci.prototype[t]=function(){var t=this.__wrapped__,s=o?[1]:arguments,d=t instanceof Pi,l=s[0],c=d||dc(t),u=function(e){var t=r.apply(Ci,Pn([e],s));return o&&m?t[0]:t};c&&i&&"function"==typeof l&&1!=l.length&&(d=c=!1);var m=this.__chain__,p=!!this.__actions__.length,h=a&&!m,f=d&&!p;if(!a&&c){t=f?t:new Pi(this);var g=e.apply(t,s);return g.__actions__.push({func:Kd,args:[u],thisArg:n}),new ki(g,m)}return h&&f?e.apply(this,s):(g=this.thru(u),h?o?g.value()[0]:g.value():g)})})),bn(["pop","push","shift","sort","splice","unshift"],(function(e){var t=at[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);Ci.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var o=this.value();return t.apply(dc(o)?o:[],e)}return this[n]((function(n){return t.apply(dc(n)?n:[],e)}))}})),Do(Pi.prototype,(function(e,t){var n=Ci[t];if(n){var i=n.name+"";ut.call(cn,i)||(cn[i]=[]),cn[i].push({name:t,func:n})}})),cn[Sa(n,v).name]=[{name:"wrapper",func:n}],Pi.prototype.clone=Ii,Pi.prototype.reverse=xi,Pi.prototype.value=Ri,Ci.prototype.at=Zd,Ci.prototype.chain=qd,Ci.prototype.commit=Yd,Ci.prototype.next=Xd,Ci.prototype.plant=$d,Ci.prototype.reverse=el,Ci.prototype.toJSON=Ci.prototype.valueOf=Ci.prototype.value=tl,Ci.prototype.first=Ci.prototype.head,Pt&&(Ci.prototype[Pt]=Qd),Ci},wi=Ti();dn?((dn.exports=wi)._=wi,sn._=wi):an._=wi}).call(A)}));function L(e,t){var n=t.parentNode;n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling)}var M=function(){function e(t,n){c(this,e),this.id=n,this.jSPlugin=t,this.state={play:!1,loading:!1,text:""},this.loadingSetText=this.loadingSetText}return m(e,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"setPlayStatus",value:function(e){this.state=Object.assign(this.state,e)}},{key:"loadingStart",value:function(e){var t=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(t),t.innerHTML="@keyframes antRotate {to {transform: rotate(400deg);transform-origin:50% 50%;}} .loading {display: inline-block;z-index: 1000;-webkit-animation: antRotate 1s infinite linear;animation: antRotate 1s infinite linear;}";var n=e,i=document.getElementById(n),o=i.offsetWidth,r=i.offsetHeight,a=0,s=i.offsetLeft;document.getElementById("".concat(e,"-loading-id-0"))&&document.getElementById("".concat(e,"-loading-id-0")).parentNode.removeChild(document.getElementById("".concat(e,"-loading-id-0")));var d=document.createElement("div");d.setAttribute("id","".concat(e,"-loading-id-0"));var l="position:absolute;outline:none;pointer-events:none;";console.log("this.jSPlugin",this.jSPlugin),l+="width: 100%;background-size: cover; background-repeat:no-repeat;",l+="height: 100%;",l+="top:"+a+";",l+="left:"+s+"px;",d.setAttribute("style",l),d.style.height=r,d.setAttribute("class","loading-container"),L(d,i);var c=1,u=document.createElement("div"),m=document.createElement("div");u.setAttribute("class","loading-item"),u.setAttribute("id","".concat(e,"-loading-item-0"));l="display:inline-flex;pointer-events:none;flex-direction:column;justify-content:center;align-items: center;width:100%;height:"+r+"px;outline:none;vertical-align: top;position:absolute;";function p(e,t,n,i){var o=parseInt(i/n,10)*(e/n),r=i%n*(t/n);return{top:o,left:r}}l+="left:"+p(r,o,c,0).left+"px;",l+="top:"+p(r,o,c,0).top+"px;",u.setAttribute("style",l);var h=document.createElement("div");m.innerHTML="",m.style.color="#fff",h.setAttribute("class","loading"),h.setAttribute("id","loading-icon");var f='<svg t="1567069979438" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399" width="32" height="32"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#ffffff" p-id="2400"></path></svg>';h.innerHTML=f,u.appendChild(h),u.appendChild(m),d.appendChild(u)}},{key:"loadingStop",value:function(e){var t=document.getElementById("".concat(e,"-loading-item-0"));t&&t.removeChild(document.getElementById("loading-icon"))}},{key:"loadingSetText",value:function(e){var t=this;if(this.loadingClearText(),document.getElementById("".concat(this.id,"-loading-item-0"))){var n=document.getElementById("".concat(this.id,"-loading-item-0")).childNodes[1];if(!n){var i=document.getElementById("".concat(this.id,"-loading-item-0"));i.style.height="100%",n=document.createElement("div"),n.innerHTML=e.text,i.appendChild(n)}n.innerHTML=e.text,n.style.fontSize="14px",n.style.color=e.color||"#FFFFFF",this.state.text=e.text,e.delayClear&&setTimeout((function(){t.loadingClearText()}),parseInt(e.delayClear))}}},{key:"loadingClearText",value:function(){if(document.getElementById("".concat(this.id,"-loading-item-0"))){var e=document.getElementById("".concat(this.id,"-loading-item-0")).childNodes;e.length>1?e[1].parentNode.removeChild(e[1]):e[0]&&e[0].parentNode.removeChild(e[0])}}},{key:"loadingClear",value:function(){if(document.getElementById("".concat(this.id,"-loading-item-0"))){for(var e=document.getElementById("".concat(this.id,"-loading-item-0")).childNodes,t=e.length-1;t>=0;t--)e[t].parentNode.removeChild(e[t]);document.getElementById("".concat(this.id,"-loading-id-0"))&&(document.getElementById("".concat(this.id,"-loading-id-0")).style.background="none"),document.getElementById("loading-icon")&&document.getElementById("loading-icon").parentNode.removeChild(document.getElementById("loading-icon"))}}},{key:"loadingEnd",value:function(){var e=document.getElementById("".concat(this.id,"-loading-item-0"));if(e){e.parentNode.removeChild(e);var t=document.getElementById("".concat(this.id,"-loading-id-0"));t&&0===t.children.length&&t.parentNode.removeChild(t)}document.getElementById("".concat(this.id,"-loading-item-0")).style.background="none"}}]),e}(),N=function(){function e(t,n){c(this,e),this.id=n,this.jSPlugin=t,this.timer=null,this.state={play:!1,loading:!1}}return m(e,[{key:"default",value:function(e){var t=this,n="msgId";document.getElementById("".concat(this.id,"-").concat(n))&&document.getElementById("".concat(this.id,"-wrap")).removeChild(document.getElementById("".concat(this.id,"-").concat(n)));var i=document.createElement("div");i.id="".concat(this.id,"-").concat(n),i.style="position: absolute;top: 50%;left:calc(50% - ".concat(14*e.length/2,"px);padding: 4px 16px;background: #00000080;color: #FFFFFF;font-size: 14px"),i.innerHTML=e,document.getElementById("".concat(this.id,"-wrap")).appendChild(i),this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){document.getElementById("".concat(t.id,"-wrap")).removeChild(document.getElementById("".concat(t.id,"-").concat(n)))}),2e3)}}]),e}(),B=[{moduleCode:"",detailCode:"405984",description:"",solution:"",updateTime:1559564188e3},{moduleCode:"",detailCode:"10035",description:"获取子账户AccessToken异常,子账户不存在或子账户不属于该开发者",solution:"",updateTime:1559551958e3},{moduleCode:"",detailCode:"1052674",description:"获取本地录像失败",solution:"",updateTime:1558579653e3},{moduleCode:"",detailCode:"395547",description:"",solution:"",updateTime:1557367296e3},{moduleCode:"",detailCode:"12",description:"",solution:"",updateTime:1557229476e3},{moduleCode:"",detailCode:"10052",description:"余额不足",solution:"",updateTime:1557121463e3},{moduleCode:"",detailCode:"20108",description:"当前用户和所添加用户不是好友关系",solution:"",updateTime:1556541725e3},{moduleCode:"",detailCode:"10009",description:"",solution:"",updateTime:1556422452e3},{moduleCode:"",detailCode:"320001",description:"通道不存在",solution:"请检查录像机的关联状态是否正常，没有摄像头的通道无法播放",updateTime:1556419044e3},{moduleCode:"",detailCode:"120001",description:"通道不存在",solution:"请检查录像机的关联状态是否正常，没有摄像头的通道无法播放",updateTime:155641903e4},{moduleCode:"",detailCode:"320049",description:"",solution:"",updateTime:1556272984e3},{moduleCode:"",detailCode:"380227",description:"",solution:"",updateTime:1556264379e3},{moduleCode:"",detailCode:"10033",description:"policy参数信息异常",solution:"",updateTime:1555922124e3},{moduleCode:"",detailCode:"10065",description:"weakAppKey 不属于accessToken对应的用户",solution:"",updateTime:1555497522e3},{moduleCode:"",detailCode:"100001",description:"",solution:"",updateTime:1555141776e3},{moduleCode:"",detailCode:"395558",description:"",solution:"",updateTime:1554987121e3},{moduleCode:"",detailCode:"70001",description:"智能家居买断用户设备受到限制,建议合理选择pagestart和pageSize",solution:"",updateTime:1554691023e3},{moduleCode:"",detailCode:"170001",description:"",solution:"",updateTime:1554691023e3},{moduleCode:"",detailCode:"1012",description:"重置失败",solution:"",updateTime:1554645841e3},{moduleCode:"",detailCode:"1043",description:"重置失败",solution:"",updateTime:1554645834e3},{moduleCode:"",detailCode:"60060",description:"直播功能未开通",solution:"通道未开通直播功能，请先开通直播",updateTime:1554346018e3},{moduleCode:"",detailCode:"380203",description:"",solution:"",updateTime:1554093666e3},{moduleCode:"",detailCode:"399048",description:"免费版并发数达到上限，请升级企业版使用多并发能力",solution:"升级成为企业版套餐即可取消并发数限制",updateTime:1553839878e3},{moduleCode:"",detailCode:"60007",description:"预置点个数超过最大值",solution:"",updateTime:1553671316e3},{moduleCode:"",detailCode:"1005",description:"",solution:"",updateTime:1553513701e3},{moduleCode:"",detailCode:"20605",description:"其他用户正在认证中",solution:"",updateTime:1552976317e3},{moduleCode:"",detailCode:"90004",description:"当前型号设备暂时不支持AI任务：CS-C3W-3B1WFR-YGL",solution:"",updateTime:1552898525e3},{moduleCode:"",detailCode:"60046",description:"添加的设备的IP和本设备的IP冲突",solution:"",updateTime:1552872372e3},{moduleCode:"",detailCode:"3",description:"修改视频清晰度失败!",solution:"",updateTime:1552440229e3},{moduleCode:"",detailCode:"1013",description:"",solution:"",updateTime:1552035069e3},{moduleCode:"",detailCode:"370007",description:"",solution:"",updateTime:1551852327e3},{moduleCode:"",detailCode:"-1",description:"",solution:"",updateTime:1551752889e3},{moduleCode:"",detailCode:"30005",description:"弱账户不存在",solution:"",updateTime:1551422358e3},{moduleCode:"",detailCode:"90006",description:"用户操作AI任务受限",solution:"",updateTime:155107332e4},{moduleCode:"",detailCode:"60203",description:"未开通相关服务",solution:"",updateTime:155062307e4},{moduleCode:"",detailCode:"10002",description:"accessToken过期或异常",solution:"",updateTime:1550300346e3},{moduleCode:"",detailCode:"380339",description:"",solution:"",updateTime:1549889458e3},{moduleCode:"",detailCode:"90002",description:"AI任务设备配置数达到上限：3",solution:"",updateTime:1549071664e3},{moduleCode:"",detailCode:"380008",description:"",solution:"",updateTime:1549005979e3},{moduleCode:"",detailCode:"320227",description:"",solution:"",updateTime:1548739731e3},{moduleCode:"",detailCode:"60059",description:"ezopen地址均不可用",solution:"",updateTime:154839535e4},{moduleCode:"",detailCode:"10005",description:"appKey异常",solution:"",updateTime:1548317858e3},{moduleCode:"",detailCode:"60045",description:"添加的设备的IP和其他通道的IP冲突",solution:"",updateTime:1548155085e3},{moduleCode:"",detailCode:"60047",description:"码流类型不支持",solution:"",updateTime:1547962108e3},{moduleCode:"",detailCode:"60041",description:"添加的设备被其他设备关联或响应超时",solution:"",updateTime:154796098e4},{moduleCode:"",detailCode:"110029",description:"个人用户接口调用频率超限",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1547606859e3},{moduleCode:"",detailCode:"380355",description:"设备直连推流异常结束",solution:"",updateTime:1547106294e3},{moduleCode:"",detailCode:"320081",description:"",solution:"",updateTime:1547106279e3},{moduleCode:"",detailCode:"60035",description:"购买云存储服务失败",solution:"",updateTime:1547026959e3},{moduleCode:"",detailCode:"90005",description:"设备已存在：C75714141",solution:"",updateTime:1546940622e3},{moduleCode:"",detailCode:"1053445",description:"该时间段没有录像片段",solution:"",updateTime:1546935727e3},{moduleCode:"",detailCode:"90007",description:"设备未加入到AI任务",solution:"",updateTime:1546932948e3},{moduleCode:"",detailCode:"326000",description:"",solution:"",updateTime:1546823143e3},{moduleCode:"",detailCode:"1021",description:"重置失败",solution:"",updateTime:1546781152e3},{moduleCode:"",detailCode:"2001",description:"删除设备失败!",solution:"",updateTime:1546422886e3},{moduleCode:"",detailCode:"380425",description:"",solution:"",updateTime:1546407694e3},{moduleCode:"",detailCode:"120097",description:"",solution:"",updateTime:1546085995e3},{moduleCode:"",detailCode:"10059",description:"requestId已存在",solution:"",updateTime:1545824509e3},{moduleCode:"",detailCode:"1154723",description:"",solution:"",updateTime:1545795209e3},{moduleCode:"",detailCode:"60043",description:"添加的设备超出最大数量",solution:"",updateTime:1545493607e3},{moduleCode:"",detailCode:"1152677",description:"",solution:"",updateTime:1545313404e3},{moduleCode:"",detailCode:"20097",description:"设备添加异常,设备验证码为ABCDEF或设备被N1，R1关联",solution:"",updateTime:1545310795e3},{moduleCode:"",detailCode:"10060",description:"设备不支持该云存储类型",solution:"",updateTime:1545309064e3},{moduleCode:"",detailCode:"20102",description:"无相应邀请信息，无法接受邀请",solution:"",updateTime:1545204966e3},{moduleCode:"",detailCode:"10053",description:"云存储开通中",solution:"",updateTime:1545100293e3},{moduleCode:"",detailCode:"20401",description:"用户云空间信息不存在",solution:"",updateTime:154501788e4},{moduleCode:"",detailCode:"20600",description:"临时密码数已达上限",solution:"",updateTime:1544873457e3},{moduleCode:"",detailCode:"901",description:"",solution:"",updateTime:1544693519e3},{moduleCode:"",detailCode:"60210",description:"图片数据错误",solution:"",updateTime:1544604457e3},{moduleCode:"",detailCode:"10013",description:"您的应用没有权限调用",solution:"",updateTime:1544416237e3},{moduleCode:"",detailCode:"70007",description:"授权码不存在",solution:"",updateTime:1544179533e3},{moduleCode:"",detailCode:"10015",description:"授权地址不存在",solution:"",updateTime:154416324e4},{moduleCode:"",detailCode:"320423",description:"",solution:"",updateTime:1544100685e3},{moduleCode:"",detailCode:"370009",description:"",solution:"",updateTime:1544077151e3},{moduleCode:"",detailCode:"10031",description:"子账户或萤石用户没有权限",solution:"",updateTime:1543990462e3},{moduleCode:"",detailCode:"10055",description:"设备不支持试用云存储服务",solution:"",updateTime:1543986292e3},{moduleCode:"",detailCode:"60042",description:"添加的设备密码错误",solution:"",updateTime:1543710913e3},{moduleCode:"",detailCode:"60082",description:"设备正在响应本次声源定位",solution:"",updateTime:1543647426e3},{moduleCode:"",detailCode:"10056",description:"设备不支持云存储服务转出",solution:"",updateTime:1543558342e3},{moduleCode:"",detailCode:"20104",description:"好友不存在",solution:"",updateTime:1543492403e3},{moduleCode:"",detailCode:"20111",description:"好友不是等待验证状态，无法接受邀请",solution:"",updateTime:1543492365e3},{moduleCode:"",detailCode:"20107",description:"不能添加自己为好友",solution:"",updateTime:1543480986e3},{moduleCode:"",detailCode:"1",description:"设备返回其他错误",solution:"",updateTime:1543459921e3},{moduleCode:"",detailCode:"60084",description:"当前正在关闭隐私遮蔽",solution:"",updateTime:1543456515e3},{moduleCode:"",detailCode:"380255",description:"",solution:"",updateTime:1543411652e3},{moduleCode:"",detailCode:"20015",description:"设备不支持",solution:"",updateTime:1543390936e3},{moduleCode:"",detailCode:"30003",description:"手机验证码错误",solution:"",updateTime:1543389137e3},{moduleCode:"",detailCode:"20615",description:"锁用户已存在",solution:"",updateTime:1543388325e3},{moduleCode:"",detailCode:"60061",description:"账户流量已超出或未购买，限制开通",solution:"",updateTime:1543372581e3},{moduleCode:"",detailCode:"60020",description:"设备不支持该信令",solution:"",updateTime:1543321636e3},{moduleCode:"",detailCode:"320146",description:"",solution:"",updateTime:1543318472e3},{moduleCode:"",detailCode:"60018",description:"设备升级失败",solution:"",updateTime:1543304928e3},{moduleCode:"",detailCode:"60044",description:"添加的设备网络不可达超时",solution:"",updateTime:1543304102e3},{moduleCode:"",detailCode:"20619",description:"主用户无法删除",solution:"",updateTime:1543290219e3},{moduleCode:"",detailCode:"20608",description:"锁用户不存在",solution:"",updateTime:154328195e4},{moduleCode:"",detailCode:"20609",description:"设备响应超时,门锁通信故障或者电量不足,请重试.",solution:"",updateTime:1543281601e3},{moduleCode:"",detailCode:"1049954",description:"升级设备失败",solution:"",updateTime:1543279264e3},{moduleCode:"",detailCode:"60009",description:"正在调用预置点",solution:"",updateTime:1543238114e3},{moduleCode:"",detailCode:"1052677",description:"获取本地录像失败",solution:"",updateTime:1543207604e3},{moduleCode:"",detailCode:"327000",description:"",solution:"",updateTime:1543196609e3},{moduleCode:"",detailCode:"20021",description:"设备在线，未被用户添加",solution:"",updateTime:1543193436e3},{moduleCode:"",detailCode:"20202",description:"操作留言信息失败",solution:"",updateTime:1543191562e3},{moduleCode:"",detailCode:"1052678",description:"获取本地录像失败",solution:"",updateTime:1543132218e3},{moduleCode:"",detailCode:"1054723",description:"格式化设备失败",solution:"",updateTime:1543129833e3},{moduleCode:"",detailCode:"20109",description:"对应分享不存在",solution:"",updateTime:1543129111e3},{moduleCode:"",detailCode:"60026",description:"设备处于隐私遮蔽状态",solution:"",updateTime:1543110403e3},{moduleCode:"",detailCode:"60083",description:"当前正在开启隐私遮蔽",solution:"",updateTime:1543071148e3},{moduleCode:"",detailCode:"60001",description:"用户无云台控制权限",solution:"",updateTime:1543059167e3},{moduleCode:"",detailCode:"2003",description:"设备不在线",solution:"",updateTime:1543051046e3},{moduleCode:"",detailCode:"-24",description:"设置设备enable错误",solution:"",updateTime:1543042701e3},{moduleCode:"",detailCode:"10018",description:"",solution:"",updateTime:1543041564e3},{moduleCode:"",detailCode:"20103",description:"好友已存在",solution:"",updateTime:154303843e4},{moduleCode:"",detailCode:"70010",description:"授权异常请重试",solution:"",updateTime:154303559e4},{moduleCode:"",detailCode:"60056",description:"删除设备失败",solution:"",updateTime:1543031275e3},{moduleCode:"",detailCode:"60040",description:"添加的设备不在同一局域网",solution:"",updateTime:154303121e4},{moduleCode:"",detailCode:"60019",description:"加密已开启",solution:"",updateTime:1543029931e3},{moduleCode:"",detailCode:"1054722",description:"格式化设备失败",solution:"",updateTime:1543028537e3},{moduleCode:"",detailCode:"20016",description:"当前设备正在格式化",solution:"",updateTime:1543028537e3},{moduleCode:"",detailCode:"10024",description:"透明通道权限校验不通过",solution:"",updateTime:154302554e4},{moduleCode:"",detailCode:"6002",description:"删除设备失败!",solution:"",updateTime:1543025026e3},{moduleCode:"",detailCode:"1011",description:"验证码错误！",solution:"",updateTime:1543016865e3},{moduleCode:"",detailCode:"60032",description:"卡密已使用",solution:"",updateTime:1543006668e3},{moduleCode:"",detailCode:"10034",description:"子账号已存在",solution:"",updateTime:1542989194e3},{moduleCode:"",detailCode:"20301",description:"根据uuid查询联动信息不存在",solution:"",updateTime:1542988651e3},{moduleCode:"",detailCode:"1041",description:"获取验证码过于频繁",solution:"",updateTime:1542980953e3},{moduleCode:"",detailCode:"10012",description:"该appkey下已绑定重复的phone！",solution:"",updateTime:15429808e5},{moduleCode:"",detailCode:"1008",description:"phone不合法！",solution:"",updateTime:1542979812e3},{moduleCode:"",detailCode:"60023",description:"订阅操作失败",solution:"",updateTime:1542979006e3},{moduleCode:"",detailCode:"5",description:"设备返回其他错误",solution:"",updateTime:1542977828e3},{moduleCode:"",detailCode:"60006",description:"云台当前操作失败",solution:"",updateTime:1542977598e3},{moduleCode:"",detailCode:"131",description:"修改视频清晰度失败!",solution:"",updateTime:1542977246e3},{moduleCode:"",detailCode:"10019",description:"密码错误",solution:"",updateTime:1542976628e3},{moduleCode:"",detailCode:"10004",description:"用户不存在",solution:"",updateTime:1542976268e3},{moduleCode:"",detailCode:"20201",description:"操作报警信息失败",solution:"",updateTime:1542975906e3},{moduleCode:"",detailCode:"20024",description:"设备不在线，已经被别的用户添加",solution:"",updateTime:1542975858e3},{moduleCode:"",detailCode:"60004",description:"设备云台旋转达到左限位",solution:"",updateTime:1542975207e3},{moduleCode:"",detailCode:"1052679",description:"修改视频清晰度失败!",solution:"",updateTime:1542974886e3},{moduleCode:"",detailCode:"20031",description:"请在萤石客户端关闭终端绑定",solution:"",updateTime:1542974756e3},{moduleCode:"",detailCode:"1053825",description:"获取本地录像失败",solution:"",updateTime:1542974692e3},{moduleCode:"",detailCode:"60011",description:"预置点不存在",solution:"",updateTime:1542974414e3},{moduleCode:"",detailCode:"1052936",description:"修改视频清晰度失败!",solution:"",updateTime:154297439e4},{moduleCode:"",detailCode:"1016",description:"",solution:"",updateTime:1542974273e3},{moduleCode:"",detailCode:"10032",description:"子账号不存在",solution:"",updateTime:1542973906e3},{moduleCode:"",detailCode:"20013",description:"设备已被别人添加",solution:"",updateTime:1542973817e3},{moduleCode:"",detailCode:"50000",description:"服务器错误!",solution:"",updateTime:1542973801e3},{moduleCode:"",detailCode:"60010",description:"该预置点已经是当前位置",solution:"",updateTime:15429738e5},{moduleCode:"",detailCode:"60003",description:"设备云台旋转达到下限位",solution:"",updateTime:154297377e4},{moduleCode:"",detailCode:"4",description:"设备返回其他错误",solution:"",updateTime:1542973755e3},{moduleCode:"",detailCode:"60016",description:"加密未开启，无需关闭",solution:"",updateTime:1542973753e3},{moduleCode:"",detailCode:"60002",description:"设备云台旋转达到上限位",solution:"",updateTime:1542973742e3},{moduleCode:"",detailCode:"20023",description:"设备不在线，未被用户添加",solution:"",updateTime:1542973685e3},{moduleCode:"",detailCode:"10008",description:"",solution:"",updateTime:1542973676e3},{moduleCode:"",detailCode:"20010",description:"设备验证码错误",solution:"",updateTime:1542973658e3},{moduleCode:"",detailCode:"60005",description:"设备云台旋转达到右限位",solution:"",updateTime:1542973657e3},{moduleCode:"",detailCode:"20017",description:"设备已经被自己添加",solution:"",updateTime:1542973648e3},{moduleCode:"",detailCode:"20020",description:"设备在线，已经被自己添加",solution:"",updateTime:1542973533e3},{moduleCode:"",detailCode:"20029",description:"设备不在线，已经被自己添加",solution:"",updateTime:154297353e4},{moduleCode:"",detailCode:"10014",description:"APPKEY下对应的第三方userId和phone未绑定！",solution:"",updateTime:1542973499e3},{moduleCode:"",detailCode:"20002",description:"设备不存在",solution:"",updateTime:1542973499e3},{moduleCode:"",detailCode:"10030",description:"appkey和appsecret不匹配",solution:"",updateTime:154297349e4},{moduleCode:"",detailCode:"20022",description:"设备在线，已经被别的用户添加",solution:"",updateTime:1542973486e3},{moduleCode:"",detailCode:"20008",description:"设备响应超时",solution:"",updateTime:1542973484e3},{moduleCode:"",detailCode:"20032",description:"该用户下通道不存在",solution:"",updateTime:1542973481e3},{moduleCode:"",detailCode:"20006",description:"网络异常",solution:"",updateTime:1542973475e3},{moduleCode:"",detailCode:"20014",description:"deviceSerial不合法!",solution:"",updateTime:1542973454e3},{moduleCode:"",detailCode:"20007",description:"设备不在线",solution:"",updateTime:1542973454e3},{moduleCode:"",detailCode:"20018",description:"该用户不拥有该设备",solution:"",updateTime:1542973453e3},{moduleCode:"",detailCode:"10010",description:"",solution:"",updateTime:1542973453e3},{moduleCode:"",detailCode:"10011",description:"未绑定！",solution:"",updateTime:1542973453e3},{moduleCode:"",detailCode:"20001",description:"通道不存在!",solution:"",updateTime:1542973452e3},{moduleCode:"",detailCode:"10017",description:"appKey不存在",solution:"",updateTime:1542973451e3},{moduleCode:"",detailCode:"400259",description:"",solution:"",updateTime:1542875643e3},{moduleCode:"",detailCode:"400004",description:"",solution:"",updateTime:1542873364e3},{moduleCode:"",detailCode:"3840",description:"",solution:"",updateTime:154186e7},{moduleCode:"",detailCode:"-1017",description:"",solution:"",updateTime:1541733663e3},{moduleCode:"",detailCode:"320025",description:"",solution:"",updateTime:1541078281e3},{moduleCode:"",detailCode:"320024",description:"",solution:"",updateTime:1540801374e3},{moduleCode:"",detailCode:"321002",description:"",solution:"",updateTime:1540631734e3},{moduleCode:"",detailCode:"321000",description:"",solution:"",updateTime:1540609178e3},{moduleCode:"",detailCode:"321022",description:"",solution:"",updateTime:1540548345e3},{moduleCode:"",detailCode:"321016",description:"",solution:"",updateTime:1540287187e3},{moduleCode:"",detailCode:"320023",description:"",solution:"",updateTime:1539825993e3},{moduleCode:"",detailCode:"-1016",description:"",solution:"",updateTime:1539584931e3},{moduleCode:"",detailCode:"8",description:"",solution:"",updateTime:1539391812e3},{moduleCode:"",detailCode:"1075127593",description:"",solution:"",updateTime:1538959251e3},{moduleCode:"",detailCode:"380421",description:"",solution:"",updateTime:1537288465e3},{moduleCode:"",detailCode:"322000",description:"麦克风权限未开启",solution:"",updateTime:1536820136e3},{moduleCode:"",detailCode:"1152678",description:"",solution:"",updateTime:1536738348e3},{moduleCode:"",detailCode:"320047",description:"",solution:"",updateTime:1536664472e3},{moduleCode:"",detailCode:"327006",description:"",solution:"",updateTime:153613612e4},{moduleCode:"",detailCode:"1074807593",description:"",solution:"",updateTime:1536135035e3},{moduleCode:"",detailCode:"320291",description:"",solution:"",updateTime:1536110836e3},{moduleCode:"",detailCode:"320045",description:"",solution:"",updateTime:1535963775e3},{moduleCode:"",detailCode:"370004",description:"",solution:"",updateTime:1535883699e3},{moduleCode:"",detailCode:"1149954",description:"",solution:"",updateTime:1535700674e3},{moduleCode:"",detailCode:"320053",description:"",solution:"",updateTime:1535681079e3},{moduleCode:"",detailCode:"400000",description:"",solution:"",updateTime:1535532332e3},{moduleCode:"",detailCode:"110028",description:"个人版抓图接口日调用次数超出限制",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1535348756e3},{moduleCode:"",detailCode:"110027",description:"个人版帐号数量超出安全限制，无法调用",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1535348734e3},{moduleCode:"",detailCode:"110026",description:"设备数量超出个人版限制，当前设备无法操作",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1535348588e3},{moduleCode:"",detailCode:"100000",description:"",solution:"",updateTime:1534980008e3},{moduleCode:"",detailCode:"324004",description:"",solution:"",updateTime:1534927762e3},{moduleCode:"",detailCode:"360104",description:"",solution:"",updateTime:1534761006e3},{moduleCode:"",detailCode:"320204",description:"",solution:"",updateTime:1534584221e3},{moduleCode:"",detailCode:"380001",description:"",solution:"",updateTime:1534404715e3},{moduleCode:"",detailCode:"380204",description:"",solution:"",updateTime:1534401682e3},{moduleCode:"",detailCode:"328006",description:"",solution:"",updateTime:1534144407e3},{moduleCode:"",detailCode:"321703",description:"",solution:"",updateTime:1534127274e3},{moduleCode:"",detailCode:"321510",description:"",solution:"",updateTime:1533428892e3},{moduleCode:"",detailCode:"321006",description:"",solution:"",updateTime:1533036916e3},{moduleCode:"",detailCode:"50009",description:"",solution:"",updateTime:1532078548e3},{moduleCode:"",detailCode:"50007",description:"",solution:"",updateTime:153199172e4},{moduleCode:"",detailCode:"50018",description:"",solution:"",updateTime:1531912829e3},{moduleCode:"",detailCode:"380451",description:"",solution:"",updateTime:15316157e5},{moduleCode:"",detailCode:"380336",description:"",solution:"",updateTime:1531231721e3},{moduleCode:"",detailCode:"360020",description:"",solution:"",updateTime:1531117554e3},{moduleCode:"",detailCode:"380418",description:"",solution:"",updateTime:153110707e4},{moduleCode:"",detailCode:"1153445",description:"设备在该时间段内没有录像",solution:"",updateTime:1530944007e3},{moduleCode:"",detailCode:"110007",description:"调用接口总次数达到上限",solution:"请升级企业版，获取更高能力",updateTime:1530935584e3},{moduleCode:"",detailCode:"360019",description:"",solution:"",updateTime:1530869771e3},{moduleCode:"",detailCode:"360100",description:"",solution:"",updateTime:1530786188e3},{moduleCode:"",detailCode:"380042",description:"",solution:"",updateTime:1530775199e3},{moduleCode:"",detailCode:"320355",description:"",solution:"",updateTime:1530716074e3},{moduleCode:"",detailCode:"100003",description:"",solution:"",updateTime:1530232541e3},{moduleCode:"",detailCode:"371026",description:"",solution:"",updateTime:15301926e5},{moduleCode:"",detailCode:"102",description:"",solution:"",updateTime:1529895641e3},{moduleCode:"",detailCode:"380201",description:"",solution:"",updateTime:1529740929e3},{moduleCode:"",detailCode:"320054",description:"",solution:"",updateTime:1529544875e3},{moduleCode:"",detailCode:"500101",description:"",solution:"",updateTime:1529485953e3},{moduleCode:"",detailCode:"321001",description:"",solution:"",updateTime:1529411048e3},{moduleCode:"",detailCode:"321508",description:"",solution:"",updateTime:1529393279e3},{moduleCode:"",detailCode:"405991",description:"",solution:"",updateTime:1529380238e3},{moduleCode:"",detailCode:"380461",description:"",solution:"",updateTime:1529130941e3},{moduleCode:"",detailCode:"-1019",description:"",solution:"",updateTime:1529057245e3},{moduleCode:"",detailCode:"322009",description:"",solution:"",updateTime:1528965717e3},{moduleCode:"",detailCode:"324005",description:"",solution:"",updateTime:1528950153e3},{moduleCode:"",detailCode:"325000",description:"",solution:"",updateTime:1528947143e3},{moduleCode:"",detailCode:"326032",description:"",solution:"",updateTime:1528872971e3},{moduleCode:"",detailCode:"325032",description:"",solution:"",updateTime:1528863189e3},{moduleCode:"",detailCode:"328000",description:"",solution:"",updateTime:1528794505e3},{moduleCode:"",detailCode:"53",description:"",solution:"",updateTime:1528693249e3},{moduleCode:"",detailCode:"-1020",description:"",solution:"",updateTime:152849944e4},{moduleCode:"",detailCode:"329032",description:"",solution:"",updateTime:1528446301e3},{moduleCode:"",detailCode:"-1202",description:"",solution:"",updateTime:152843982e4},{moduleCode:"",detailCode:"2",description:"",solution:"",updateTime:1528434175e3},{moduleCode:"",detailCode:"1152936",description:"",solution:"",updateTime:1528345986e3},{moduleCode:"",detailCode:"328011",description:"",solution:"",updateTime:15283386e5},{moduleCode:"",detailCode:"28",description:"",solution:"",updateTime:152833753e4},{moduleCode:"",detailCode:"320356",description:"",solution:"",updateTime:1528188693e3},{moduleCode:"",detailCode:"320357",description:"",solution:"",updateTime:1528188517e3},{moduleCode:"",detailCode:"405800",description:"",solution:"",updateTime:1528168732e3},{moduleCode:"",detailCode:"405996",description:"",solution:"",updateTime:1528168686e3},{moduleCode:"",detailCode:"380357",description:"",solution:"",updateTime:1528011565e3},{moduleCode:"",detailCode:"328022",description:"",solution:"",updateTime:1527929065e3},{moduleCode:"",detailCode:"380003",description:"",solution:"",updateTime:1527927819e3},{moduleCode:"",detailCode:"50004",description:"",solution:"",updateTime:1527770643e3},{moduleCode:"",detailCode:"50011",description:"",solution:"",updateTime:1527770635e3},{moduleCode:"",detailCode:"370017",description:"",solution:"",updateTime:1527739514e3},{moduleCode:"",detailCode:"327032",description:"",solution:"",updateTime:1527726704e3},{moduleCode:"",detailCode:"324001",description:"",solution:"",updateTime:1527681892e3},{moduleCode:"",detailCode:"405997",description:"",solution:"",updateTime:1527653408e3},{moduleCode:"",detailCode:"405995",description:"",solution:"",updateTime:1527647283e3},{moduleCode:"",detailCode:"1153825",description:"",solution:"",updateTime:1527601747e3},{moduleCode:"",detailCode:"328002",description:"",solution:"",updateTime:1527495292e3},{moduleCode:"",detailCode:"1152679",description:"",solution:"",updateTime:1527486665e3},{moduleCode:"",detailCode:"380356",description:"",solution:"",updateTime:1527125669e3},{moduleCode:"",detailCode:"328032",description:"",solution:"",updateTime:1527069382e3},{moduleCode:"",detailCode:"22",description:"",solution:"",updateTime:1527049826e3},{moduleCode:"",detailCode:"9",description:"",solution:"",updateTime:1527006778e3},{moduleCode:"",detailCode:"89",description:"",solution:"",updateTime:1526622784e3},{moduleCode:"",detailCode:"328016",description:"",solution:"",updateTime:1526452365e3},{moduleCode:"",detailCode:"368005",description:"",solution:"",updateTime:1525921264e3},{moduleCode:"",detailCode:"0",description:"",solution:"",updateTime:1525920242e3},{moduleCode:"",detailCode:"380006",description:"",solution:"",updateTime:1525918868e3},{moduleCode:"",detailCode:"310",description:"",solution:"",updateTime:1525834436e3},{moduleCode:"",detailCode:"360011",description:"",solution:"",updateTime:1525681552e3},{moduleCode:"",detailCode:"170005",description:"",solution:"",updateTime:15254339e5},{moduleCode:"",detailCode:"50023",description:"",solution:"",updateTime:1525403338e3},{moduleCode:"",detailCode:"100131",description:"",solution:"",updateTime:1525229691e3},{moduleCode:"",detailCode:"-1018",description:"",solution:"",updateTime:1525142341e3},{moduleCode:"",detailCode:"362026",description:"",solution:"",updateTime:1524882677e3},{moduleCode:"",detailCode:"368007",description:"",solution:"",updateTime:1524832269e3},{moduleCode:"",detailCode:"54",description:"",solution:"",updateTime:1524793646e3},{moduleCode:"",detailCode:"1154722",description:"",solution:"",updateTime:1524620807e3},{moduleCode:"",detailCode:"320229",description:"",solution:"",updateTime:1524551682e3},{moduleCode:"",detailCode:"360012",description:"",solution:"",updateTime:1524472094e3},{moduleCode:"",detailCode:"380229",description:"",solution:"",updateTime:1524110755e3},{moduleCode:"",detailCode:"360016",description:"",solution:"",updateTime:1523933518e3},{moduleCode:"",detailCode:"-1003",description:"",solution:"",updateTime:1523584804e3},{moduleCode:"",detailCode:"410026",description:"",solution:"",updateTime:152351743e4},{moduleCode:"",detailCode:"360102",description:"TTS初始化失败",solution:"",updateTime:1523503528e3},{moduleCode:"",detailCode:"360013",description:"设备开启了隐私保护",solution:"",updateTime:1523503507e3},{moduleCode:"",detailCode:"360010",description:"设备正在对讲中",solution:"",updateTime:1523503491e3},{moduleCode:"",detailCode:"360007",description:"TTS关闭了与客户端的连接",solution:"",updateTime:1523503475e3},{moduleCode:"",detailCode:"360006",description:"客户端接收发生错误",solution:"",updateTime:1523503457e3},{moduleCode:"",detailCode:"360005",description:"客户端发送的消息错误",solution:"",updateTime:1523503437e3},{moduleCode:"",detailCode:"360004",description:"TTS内部发生错误",solution:"",updateTime:1523503421e3},{moduleCode:"",detailCode:"360003",description:"TTS的设备端发生错误",solution:"",updateTime:1523503397e3},{moduleCode:"",detailCode:"360002",description:"对讲发起超时",solution:"",updateTime:1523503376e3},{moduleCode:"",detailCode:"360001",description:"客户端请求超时",solution:"",updateTime:1523503357e3},{moduleCode:"",detailCode:"320077",description:"",solution:"",updateTime:1523444274e3},{moduleCode:"",detailCode:"370047",description:"",solution:"",updateTime:152344048e4},{moduleCode:"",detailCode:"100002",description:"",solution:"",updateTime:1523413964e3},{moduleCode:"",detailCode:"-1004",description:"",solution:"",updateTime:1523336653e3},{moduleCode:"",detailCode:"380000",description:"",solution:"",updateTime:1523180856e3},{moduleCode:"",detailCode:"380213",description:"",solution:"",updateTime:1523180623e3},{moduleCode:"",detailCode:"380101",description:"",solution:"",updateTime:1522834231e3},{moduleCode:"",detailCode:"50047",description:"",solution:"",updateTime:1522833243e3},{moduleCode:"",detailCode:"-999",description:"",solution:"",updateTime:1522831034e3},{moduleCode:"",detailCode:"320418",description:"",solution:"",updateTime:1522829072e3},{moduleCode:"",detailCode:"-1009",description:"",solution:"",updateTime:1522746247e3},{moduleCode:"",detailCode:"320209",description:"",solution:"",updateTime:1522744395e3},{moduleCode:"",detailCode:"368006",description:"",solution:"",updateTime:15227443e5},{moduleCode:"",detailCode:"369003",description:"",solution:"",updateTime:1522736355e3},{moduleCode:"",detailCode:"405989",description:"",solution:"",updateTime:1522726571e3},{moduleCode:"",detailCode:"-1012",description:"",solution:"",updateTime:1522726203e3},{moduleCode:"",detailCode:"322016",description:"",solution:"",updateTime:1522722918e3},{moduleCode:"",detailCode:"500103",description:"",solution:"",updateTime:1522655556e3},{moduleCode:"",detailCode:"405999",description:"",solution:"",updateTime:1522654716e3},{moduleCode:"",detailCode:"321032",description:"",solution:"",updateTime:1522647732e3},{moduleCode:"",detailCode:"381101",description:"",solution:"",updateTime:1522392414e3},{moduleCode:"",detailCode:"399999",description:"",solution:"",updateTime:1522379834e3},{moduleCode:"",detailCode:"380103",description:"",solution:"",updateTime:1522312724e3},{moduleCode:"",detailCode:"360014",description:"",solution:"",updateTime:1522304341e3},{moduleCode:"",detailCode:"-1005",description:"",solution:"",updateTime:1522288195e3},{moduleCode:"",detailCode:"100005",description:"",solution:"",updateTime:1522218849e3},{moduleCode:"",detailCode:"100004",description:"",solution:"",updateTime:1522209053e3},{moduleCode:"",detailCode:"106002",description:"",solution:"",updateTime:15222062e5},{moduleCode:"",detailCode:"410030",description:"",solution:"",updateTime:1522162252e3},{moduleCode:"",detailCode:"-1002",description:"",solution:"",updateTime:152215069e4},{moduleCode:"",detailCode:"-1200",description:"",solution:"",updateTime:1522139025e3},{moduleCode:"",detailCode:"-1001",description:"",solution:"",updateTime:1522046436e3},{moduleCode:"",detailCode:"-1011",description:"",solution:"",updateTime:1522045931e3},{moduleCode:"",detailCode:"381102",description:"",solution:"",updateTime:1522044953e3},{moduleCode:"",detailCode:"381103",description:"",solution:"",updateTime:1522044953e3},{moduleCode:"",detailCode:"391205",description:"vtdu解析服务器ip失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391206",description:"vtdu描述符select失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391207",description:"vtdu文件描述符不在可读中",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391208",description:"vtdu网络发生错误getsockopt",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391209",description:"vtdu描述符select超时",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395000",description:"cas回复信令，发现内存已经释放（和设备之间异常断开）",msg:"播放失败请重试",solution:"检查设备网络；刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395400",description:"私有化协议vtm检测私有化协议中码流类型小于0或者设备序列号为空等非法参数场景返回(app不重试取流)",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395402",description:"回放找不到录像文件",msg:"回放找不到录像文件，本地存储请检查存储卡是否接触良好",solution:"检查是否有存储卡并且接触良好",updateTime:1522034841e3},{moduleCode:"",detailCode:"395403",description:"操作码或信令密钥与设备不匹配",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395404",description:"设备不在线",solution:"检查设备网络；重启设备接入萤石云",msg:"设备不在线，请检查设备网络或重启设备接入萤石云",updateTime:1522034841e3},{moduleCode:"",detailCode:"395405",description:"流媒体向设备发送或接受信令超时/cas响应超时",msg:"播放失败，请检查设备网络或重启设备",solution:"检查设备网络；重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"395406",description:"token失效",msg:"播放失败请重试或重启设备",solution:"刷新重试或者重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"395407",description:"客户端的URL格式错误",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395409",description:"预览开启隐私保护",msg:"播放失败请关闭隐私遮蔽",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395410",description:"设备达到最大连接数",solution:"请升级设备固件版本",updateTime:1522034841e3},{moduleCode:"",detailCode:"395411",description:"token无权限",msg:"播放失败",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395412",description:"session不存在",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395413",description:"验证token的他异常（不具体） ",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395415",description:"设备通道错",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395416",description:"设备资源受限",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395451",description:"设备不支持的码流类型",msg:"播放失败请重试或切换设备码流",solution:"刷新重试或者切换到高清模式",updateTime:1522034841e3},{moduleCode:"",detailCode:"395452",description:"设备链接流媒体服务器失败",msg:"播放失败，请检查设备网络或重启设备或重新加载",solution:"检查设备网络，重启设备，刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395454",description:"流媒体中关于设备取流会话不存在",msg:"播放失败请重试",solution:"流媒体中关于设备取流会话不存在",updateTime:152222018e4},{moduleCode:"",detailCode:"395455",description:"设备通道未关联",msg:"播放失败，请检查设备通道是否关联",solution:"检查设备通道是否关联",updateTime:152222018e4},{moduleCode:"",detailCode:"395456",description:"设备通道关联设备不在线",msg:"播放失败，请检查设备通道是否上线",solution:"检查设备通道是否上线",updateTime:152222018e4},{moduleCode:"",detailCode:"395457",description:"客户端不支持端到端加密",msg:"播放失败",solution:"客户端不支持端到端加密",updateTime:152222018e4},{moduleCode:"",detailCode:"395458",description:"设备不支持当前并发ECDH密",msg:"客户端不支持端到端加密",solution:"设备不支持当前并发ECDH密",updateTime:152222018e4},{moduleCode:"",detailCode:"395459",description:"VTDU 处理ECDH 加密失败",msg:"播放失败",solution:"VTDU 处理ECDH 加密失败",updateTime:152222018e4},{moduleCode:"",detailCode:"395460",description:"流媒体中关于设备取流会话不存在",msg:"播放失败请重试",solution:"流媒体中关于设备取流会话不存在",updateTime:152222018e4},{moduleCode:"",detailCode:"395492",description:"设备不支持的命令",msg:"操作失败，设备不支持",solution:"",updateTime:152222018e4},{moduleCode:"",detailCode:"395500",description:"服务器处理失败",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395501",description:"流媒体vtdu达到最大负载，请扩容",msg:"播放失败请重试",solution:"服务器负载达到上限，请稍后重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395503",description:"vtm返回分配vtdu失败",msg:"播放失败请重试",solution:"vtdu服务异常，请请稍后重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395504",description:"流媒体vtdu达到最大负载",msg:"播放失败请重试",solution:"服务器负载达到上限，请稍后重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395505",description:"vtm ecdh解密失败",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395506",description:"vtm 返回IPC不支持取流（需要IPC添加NVR后支持）",msg:"播放失败，请绑定NVR使用",solution:"IPC绑定NVR使用",updateTime:1522034841e3},{moduleCode:"",detailCode:"395544",description:"设备返回无视频源",msg:"播放失败，请检查设备接触情况",solution:"设备是否接触良好； 如果一直无法解决，请联系技术支持",updateTime:1522034841e3},{moduleCode:"",detailCode:"395545",description:"视频分享时间已经结束",msg:"视频分享时间已结束",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395546",description:"vtdu返回达到取流并发路数限制",msg:"并发上限，请升级为企业版",solution:"请升级为企业版，放开并发限制",updateTime:1522034841e3},{moduleCode:"",detailCode:"395547",description:"vtdu返回开放平台用户并发限制",msg:"并发上限，请升级为企业版",solution:"请确定开放平台用户预览是否超过用户并发数量限制",updateTime:1522034841e3},{moduleCode:"",detailCode:"395556",description:"ticket校验失败",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395557",description:"回放服务器等待流头超时",msg:"播放失败请重试",solution:"刷新重试，检测设备网络，重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"395558",description:"查找录像开始时间错误",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395560",description:"群组分享取流二次验证失败",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395561",description:"分享群组用户被锁住",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395562",description:"群组分享用户权限变更",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395563",description:"认证服务连接失败",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395564",description:"认证超时",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395566",description:"不在分享时间内预览",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395567",description:"分享通道被锁定",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395568",description:"未找到认证类型",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395569",description:"认证返回的参数异常",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395600",description:"分享设备不在分享时间内",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395601",description:"群组分享用户没权限",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395602",description:"群组分享权限变更",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395610",description:"接收流头失败",msg:"播放失败请重试并检查设备网络情况以及设备配置",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395620",description:"心跳超时",msg:"播放失败请重试并检查设备网络情况以及设备配置",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395530",description:"机房故障不可用",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395701",description:"cas信令返回格式错误",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395702",description:"SPGW请求Cas、Status透传超时",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395703",description:"SPGW请求http不通",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396001",description:"客户端参数出错",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396099",description:"客户端默认错误",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396101",description:"不支持的命令",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396102",description:"设备流头发送失败",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396103",description:"cas/设备返回错误1",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396104",description:"cas/设备返回错误-1",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396105",description:"设备返回错误码3",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396106",description:"设备返回错误码4",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396107",description:"设备返回错误码5",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396108",description:"cas信令回应重复",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396109",description:"视频广场取消分享",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396110",description:"设备信令默认错误",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396501",description:"设备数据链路和实际链路不匹配",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396502",description:"设备数据链路重复建立连接",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396503",description:"设备数据链路端口不匹配",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396504",description:"缓存设备数据链路失败(内存块不足)",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396505",description:"设备发送确认头消息重复",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396506",description:"设备数据先于确定头部到达",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396508",description:"设备数据头部长度非法",msg:"播放失败请重试或重启设备",solution:"刷新重试，或者重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"396509",description:"索引找不到设备数据管理块",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396510",description:"设备数据链路vtdu内存块协议状态不匹配",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396511",description:"设备数据头部没有streamkey错误",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396512",description:"设备数据头部非法(较笼统)",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396513",description:"设备数据长度过小",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396514",description:"设备老协议推流头部没有streamkey错误",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396515",description:"设备老协议推流数据非法",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396516",description:"设备老协议索引找不到内存管理块",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396517",description:"设备老协议推流数据非法",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396518",description:"设备数据包过大",msg:"播放失败请重试或重启设备",solution:"刷新重试，或者重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"396519",description:"设备推流链路网络不稳定",msg:"播放失败，请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396520",description:"设备推流链路网络不稳定(默认)",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396700",description:"异常数据包",msg:"播放失败，设备重启",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396701",description:"回放结束数据包",msg:"回放结束",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397001",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397002",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397003",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397004",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397005",description:"VTDU连接失败，或VTDU侧断开连接",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397006",description:"vtm断开连接（无需 关注）",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397007",description:"客户端发送缓冲区满（上行带宽太小）",msg:"播放失败，上行带宽过小请检查设备网络情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"399000",description:"无效包，包过大",msg:" 检查设备重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"399001",description:"地址不合法",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"399002",description:"缺少端口",msg:" 播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"170003",description:"refreshToken不存在",solution:"建议用户重新调用logout接口，然后调用openLoginPage接口重新启动登录页面登录",updateTime:1522034841e3},{moduleCode:"",detailCode:"170004",description:"refreshToken已过期",solution:"建议用户重新调用logout接口，然后调用openLoginPage接口重新启动登录页面登录",updateTime:1522034841e3},{moduleCode:"",detailCode:"380011",description:"设备隐私保护中",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380045",description:"设备直连取流连接数量过大",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380047",description:"设备不支持该命令",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380077",description:"设备正在对讲中",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380102",description:"数据接收异常",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380205",description:"设备检测入参异常",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380209",description:"网络连接超时",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380212",description:"设备端网络连接超时",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"101007",description:"手机号未注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120503",description:"正在响铃",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390016",description:"vtdu成功响应未携带流头",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101008",description:"手机号码不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120504",description:"室内机正在通话",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390017",description:"无数据流，尚未使用",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101009",description:"用户名与手机不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120505",description:"设备操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390018",description:"信令消息体PB解析失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101010",description:"获取验证码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120506",description:"非法命令",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390019",description:"信令消息体PB封装失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101011",description:"验证码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120507",description:"智能锁密码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390020",description:"申请系统内存资源失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101012",description:"验证码失效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120508",description:"开关锁失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390021",description:"vtdu地址尚未获取到",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101013",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120509",description:"开关锁超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390022",description:"客户端尚未支持",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101014",description:"密码不正确或者appKey不正确",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120510",description:"智能锁设备繁忙",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390023",description:"获取系统socket资源失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101015",description:"用户被锁住",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120511",description:"远程开锁功能未打开",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390024",description:"上层填充的StreamSsnId不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101021",description:"验证参数异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120600",description:"临时密码数已达上限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390025",description:"链接服务器失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101026",description:"邮箱已经被注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120601",description:"添加临时密码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390026",description:"客户端请求未收到服务端应答",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101031",description:"邮箱未注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120602",description:"删除临时密码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390027",description:"链路断开",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101032",description:"邮箱不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120603",description:"该临时密码不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390028",description:"没有取流链接",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101041",description:"获取验证码过于频繁",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120604",description:"指纹锁射频通信失败,请稍后再试",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390029",description:"流成功停止",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101043",description:"手机验证码输入错误超过规定次数",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120605",description:"其他用户正在认证中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390030",description:"客户端防串流校验失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102000",description:"设备不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120606",description:"验证已启动,请在120s内进行本地验证和调用添加设备接口",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390031",description:"应用层tcp粘包处理缓冲区满",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102001",description:"摄像机不存在",solution:"摄像机未注册到萤石云平台，请仔细检查摄像机的网络配置，确保连接到网络",updateTime:152203484e4},{moduleCode:"",detailCode:"120607",description:"删除用户失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390032",description:"无效状态迁移",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102003",description:"设备不在线",solution:"参考服务中心排查方法",updateTime:152203484e4},{moduleCode:"",detailCode:"120608",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390033",description:"无效客户端状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102004",description:"设备异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120609",description:"设备响应超时,门锁通信故障或者电量不足,请重试.",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390034",description:"向vtm取流流媒体信息请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102007",description:"设备序列号不正确",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120610",description:"获取临时密码列表失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390035",description:"向代理取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102009",description:"设备请求响应超时异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130001",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390036",description:"向代理保活取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"105000",description:"设备已被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130002",description:"手机号码已经注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390037",description:"向vtdu取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"105001",description:"设备已被别人添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130003",description:"手机验证码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390038",description:"向vtdu保活取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"105002",description:"设备验证码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130004",description:"终端绑定操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391001",description:"vtm地址或端口非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107001",description:"邀请不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"149999",description:"数据异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391002",description:"vtm生成文件描述符失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107002",description:"邀请验证失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"150000",description:"服务器异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391003",description:"vtm设置文件描述符非阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107003",description:"邀请用户不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160000",description:"设备不支持云台控制",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391004",description:"vtm设置文件描述符阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107004",description:"云存储连接失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160001",description:"用户无云台控制权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391005",description:"vtm解析服务器ip失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"7005",description:"VTDU主动断开连接",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107005",description:"VTDU主动断开连接",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160002",description:"设备云台旋转达到上限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391006",description:"vtm描述符select失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107006",description:"不能邀请自己",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160003",description:"设备云台旋转达到下限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391007",description:"vtm文件描述符不在可读中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107007",description:"重复邀请",solution:"分享和删除分享必须全部由接口形式操作，如果与萤石客户端混用会造成这个问题，解决办法：在萤石客户端清空所有相关分享数据并重新添加设备，再通过接口操作即可",updateTime:152203484e4},{moduleCode:"",detailCode:"160004",description:"设备云台旋转达到左限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391008",description:"vtm网络发生错误getsockopt",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110001",description:"参数错误",solution:"参数为空或者格式不对",updateTime:152203484e4},{moduleCode:"",detailCode:"160005",description:"设备云台旋转达到右限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391009",description:"vtm描述符select超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110002",description:"accessToken异常或过期",solution:"accessToken有效期为七天，建议在accessToken即将过期或者出现10002错误码的时候重新获取accessToken",updateTime:152203484e4},{moduleCode:"",detailCode:"160006",description:"云台当前操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391101",description:"proxy地址或端口非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110004",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160007",description:"预置点个数超过最大值",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391102",description:"proxy生成文件描述符失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110005",description:"appKey异常",solution:"确认appKey状态，不通过或者冻结状态会返回该错误码",updateTime:152203484e4},{moduleCode:"",detailCode:"160009",description:"正在调用预置点",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391103",description:"proxy设置文件描述符非阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110006",description:"ip受限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160010",description:"该预置点已经是当前位置",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391104",description:"proxy设置文件描述符阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160011",description:"预置点不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391105",description:"proxy解析服务器ip失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110008",description:"签名错误",solution:"①获取签名方式详见apidemo及[旧]API文档 ②注意编码格式为UTF-8",updateTime:152203484e4},{moduleCode:"",detailCode:"160013",description:"设备版本已是最新",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391106",description:"proxy描述符select失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110009",description:"签名参数错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160014",description:"设备正在升级",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391107",description:"proxy文件描述符不在可读中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110010",description:"签名超时",solution:"请调用同步服务器时间接口进行校时",updateTime:152203484e4},{moduleCode:"",detailCode:"160015",description:"设备正在重启",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391108",description:"proxy网络发生错误getsockopt",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110011",description:"未开通萤石云服务",solution:"参照绑定流程",updateTime:152203484e4},{moduleCode:"",detailCode:"160016",description:"加密未开启，无须关闭",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391109",description:"proxy描述符select超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110012",description:"第三方账户与萤石账号已经绑定",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160017",description:"设备抓图失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391201",description:"vtdu地址或端口非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110013",description:"应用没有权限调用此接口",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160018",description:"设备升级失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391202",description:"vtdu生成文件描述符失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110014",description:"APPKEY下对应的第三方userId和phone未绑定",solution:"获取AccessToken时所用appKey与SDK所用appKey不一致",updateTime:152203484e4},{moduleCode:"",detailCode:"160019",description:"加密已开启",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391203",description:"vtdu设置文件描述符非阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110017",description:"appKey不存在",solution:"请填写在官网申请的应用秘钥",updateTime:152203484e4},{moduleCode:"",detailCode:"160020",description:"不支持该命令",solution:"请确认设备是否支持该命令",updateTime:152203484e4},{moduleCode:"",detailCode:"391204",description:"vtdu设置文件描述符阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110018",description:"AccessToken与Appkey不匹配",solution:"请检查获取accessToken对应的appKey和SDK中设置的appKey是否一致",updateTime:152203484e4},{moduleCode:"",detailCode:"160023",description:"订阅操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110019",description:"密码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160024",description:"取消订阅操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110020",description:"请求方法为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160025",description:"客流统计配置失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110021",description:"ticket校验失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160026",description:"设备处于隐私遮蔽状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110022",description:"透传目的地非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160027",description:"设备正在镜像操作",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110024",description:"无透传权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160028",description:"设备正在键控动作",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110025",description:"appKey被禁止使用通明通道",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160029",description:"设备处于语音对讲状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160030",description:"卡密输入错误次数过多，24小时后再输入",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160031",description:"卡密信息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160032",description:"卡密状态不对或已过期",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160033",description:"卡密非卖品，只能开通对应的绑定设备",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110030",description:"appKey和appSecret不匹配",solution:"请检查appKey和appSecret是否对应",updateTime:152203484e4},{moduleCode:"",detailCode:"160035",description:"购买云存储服务失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110031",description:"子账户或萤石用户没有权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160040",description:"添加的设备不在同一局域网",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110032",description:"子账户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160041",description:"添加的设备被其他设备关联或响应超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110033",description:"子账户未设置授权策略",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160042",description:"添加的设备密码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110034",description:"子账户已存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160043",description:"添加的设备超出最大数量",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110035",description:"获取子账户AccessToken异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160044",description:"添加的设备网络不可达超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110036",description:"子账户被禁用",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160045",description:"添加的设备的IP和其他通道的IP冲突",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110051",description:"无权限进行抓图",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160046",description:"添加的设备的IP和本设备的IP冲突",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160047",description:"码流类型不支持",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120002",description:"设备不存在",solution:"①设备没有注册到萤石云平台，请检查下设备网络参数，确保能正常连接网络②设备序列号不存在",updateTime:152203484e4},{moduleCode:"",detailCode:"160048",description:"带宽超出系统接入带宽",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120003",description:"参数异常，SDK版本过低",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160049",description:"IP或者端口不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120004",description:"参数异常，SDK版本过低",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160050",description:"添加的设备版本不支持需要升级才能接入",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120005",description:"安全认证失败，需进行SDK安全认证",solution:"已去掉安全验证",updateTime:152203484e4},{moduleCode:"",detailCode:"160051",description:"添加的设备不支持接入",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120006",description:"网络异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160052",description:"添加的设备通道号出错",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120007",description:"设备不在线",solution:"参考服务中心排查方法",updateTime:152203484e4},{moduleCode:"",detailCode:"160053",description:"添加的设备分辨率不支持",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120008",description:"设备响应超时",solution:"设备响应超时，请检测设备网络或重试",updateTime:152203484e4},{moduleCode:"",detailCode:"160054",description:"添加的设备账号被锁定",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120009",description:"子账号不能添加设备",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160055",description:"添加的设备取码流出错",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120010",description:"设备验证码错误",solution:"验证码在设备标签上，六位大写字母，注意大小写",updateTime:152203484e4},{moduleCode:"",detailCode:"160056",description:"删除设备失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120012",description:"设备添加失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160057",description:"删除的设备未关联",solution:"检查IPC与NVR是否有关联关系",updateTime:152203484e4},{moduleCode:"",detailCode:"120013",description:"设备已被别人添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160060",description:"地址未绑定",solution:"请前往官网设置直播",updateTime:152203484e4},{moduleCode:"",detailCode:"120014",description:"设备序列号不正确",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160061",description:"账户流量已超出或未购买，限制开通",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120015",description:"设备不支持该功能",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160062",description:"该通道直播已开通",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120016",description:"当前设备正在格式化",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160063",description:"直播未使用或直播已关闭",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120017",description:"设备已被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160070",description:"设备不能转移给自己",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120018",description:"该用户不拥有该设备",solution:"确认设备是否属于用户",updateTime:152203484e4},{moduleCode:"",detailCode:"160071",description:"设备不能转移，设备与其他设备存在关联关系",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400001",description:"参数为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120019",description:"设备不支持云存储服务",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160072",description:"设备不能转移，通道被分享给其他用户或者分享到视频广场",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400002",description:"参数错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120020",description:"设备在线，被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160073",description:"云存储转移失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400025",description:"设备不支持对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120021",description:"设备在线，但是未被用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160080",description:"当前正在声源定位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400029",description:"没有初始化或资源被释放",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120022",description:"设备在线，但是已经被别的用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160081",description:"当前正在轨迹巡航",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400030",description:"json解析异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120023",description:"设备不在线，未被用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160082",description:"设备正在响应本次声源定位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400031",description:"网络异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120024",description:"设备不在线，但是已经被别的用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160083",description:"当前正在开启隐私遮蔽",solution:"设备正在操作隐私遮蔽，无法进行当前操作",updateTime:152203484e4},{moduleCode:"",detailCode:"400032",description:"设备信息异常为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120025",description:"重复申请分享",solution:"确认设备是否由添加过该设备且申请过分享的账户下是否还存在分享记录",updateTime:152203484e4},{moduleCode:"",detailCode:"160084",description:"当前正在关闭隐私遮蔽",solution:"设备正在操作隐私遮蔽，无法进行当前操作",updateTime:152203484e4},{moduleCode:"",detailCode:"400034",description:"取流超时",solution:"一般是由于网络状况不好导致，可以尝试下让用户重新播放",updateTime:152203484e4},{moduleCode:"",detailCode:"120026",description:"视频广场不存在该视频",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"380290",description:"　连接CAS服务器失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400035",description:"设备已加密，需要输入验证码",solution:"收到此错误码，需要让用户输入验证码后，调用EZPlayer.setPlayKey传入验证码，并重新调用播放函数",updateTime:152203484e4},{moduleCode:"",detailCode:"120027",description:"视频转码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361001",description:"对讲服务端排队超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400036",description:"播放验证码错误",solution:"收到此错误码，需要让用户输入验证码后，调用EZPlayer.setPlayKey传入验证码，并重新调用播放函数",updateTime:152203484e4},{moduleCode:"",detailCode:"120028",description:"设备固件升级包不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361002",description:"对讲服务端处理超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400037",description:"surfacehold错误",solution:"请检查是否是播放之前销毁了surface，收到此错误也可以重新建立surface后播放",updateTime:152203484e4},{moduleCode:"",detailCode:"120029",description:"设备不在线，但是已经被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361003",description:"设备链接对讲服务器超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400100",description:"未知错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120030",description:"该用户不拥有该视频广场视频",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361004",description:"服务器内部错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400200",description:"player sdk出错，这种错误一般开发者也是无法解决，不具体分类传出，传一个统一的inner错误码出去",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120031",description:"开启终端绑定，硬件特征码验证失败",solution:"请在萤石客户端关闭终端绑定，参考此步骤",updateTime:152203484e4},{moduleCode:"",detailCode:"361005",description:"解析消息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400300",description:"内存溢出",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120032",description:"该用户下通道不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361006",description:"请求重定向--需要向其他服务申请对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400901",description:"设备不在线，可以提示用户",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120033",description:"无法收藏自己分享的视频",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361007",description:"请求url非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400902",description:"accesstoken异常或失效，需要重新获取accesstoken，并传入到sdk",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120034",description:"该用户下无设备",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361008",description:"token失效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400903",description:"当前账号开启了终端绑定，只允许指定设备登录操作，提示用户登录i.ys7.com解除终端绑定",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120090",description:"用户反馈失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361009",description:"设备验证码或者通信秘钥不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400904",description:"设备正在对讲中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120095",description:"APP包下载失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361010",description:"设备已经在对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400905",description:"设备开启了隐私保护，不允许预览、对讲等",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120096",description:"APP包信息删除失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361011",description:"设备10s响应超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120101",description:"视频不支持分享给本人",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361012",description:"设备不在线",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320002",description:"参数无效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120102",description:"无相应邀请信息",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361013",description:"设备开启隐私保护拒绝对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320003",description:"暂不支持此操作",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120103",description:"好友已存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361014",description:"token无权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320004",description:"内存溢出",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120104",description:"好友不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361015",description:"设备返回session不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320005",description:"创建CAS session失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120105",description:"好友状态错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361016",description:"验证token其他异常错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320006",description:"创建cloud session失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120106",description:"对应群组不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361017",description:"服务端监听设备建立端口超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320007",description:"token失效",solution:"重新设置token后再重试",updateTime:152203484e4},{moduleCode:"",detailCode:"120107",description:"不能添加自己为好友",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361018",description:"设备链路异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320008",description:"token池里面没有token,请传入token",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120108",description:"当前用户和所添加用户不是好友关系",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361019",description:"对讲服务端不支持的信令消息",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320009",description:"传入新的INIT_PARAM并reset(保留，目前未用)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120109",description:"对应分享不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361020",description:"对讲服务端解析对讲请求未携带会话描述能力集",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320010",description:"请重试",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120110",description:"好友群组不属于当前用户",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361021",description:"对讲服务端优先能力集结果为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320011",description:"500毫秒后请重试",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120111",description:"好友不是等待验证状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361022",description:"cas链路异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320012",description:"token池已满",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120112",description:"添加应用下的用户为好友失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361023",description:"对讲服务端分配对讲会话资源失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320013",description:"P2P client超过限制",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120201",description:"操作报警信息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361024",description:"对讲服务端解析信令消息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320014",description:"sdk未初始化",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120202",description:"操作留言信息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390001",description:"通用错误返回",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320015",description:"超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120301",description:"根据UUID查询报警消息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390002",description:"入参为空指针",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320016",description:"正在打洞中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120302",description:"根据UUID查询图片不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390003",description:"入参值无效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320017",description:"没有视频文件头(播放器层面产生和处理此错误)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120303",description:"根据FID查询图片不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390004",description:"信令消息解析非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320018",description:"解码错误/超时(播放器层面产生和处理此错误)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120305",description:"设备ip解析错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390005",description:"内存资源不足",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320019",description:"取消(保留，用户不用处理)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120401",description:"用户云空间信息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390006",description:"协议格式不对或者消息体长度超过STREAM_MAX_MSGBODY_LEN",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320020",description:"播放过程中预连接被用户清除预操作信息",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120402",description:"云空间操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390007",description:"设备序列号长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320021",description:"流加密码不对",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120403",description:"用户目录不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390008",description:"取流url长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320022",description:"未传入播放窗口",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120404",description:"要操作的目标目录不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390009",description:"解析vtm返回vtdu地址不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"100200",description:"操作成功",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120405",description:"要删除的文件信息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390010",description:"解析vtm返回级联vtdu地址不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101001",description:"用户名不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120406",description:"已开通云存储",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390011",description:"解析vtm返回会话标识长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101002",description:"用户名已被占用",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120407",description:"开通记录失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390012",description:"vtdu返回流头长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101003",description:"密码不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120500",description:"获取数据错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390013",description:"vtdu会话长度非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101004",description:"密码为同一字符",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120501",description:"开锁失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390014",description:"回调函数未注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101006",description:"手机号码已经被注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120502",description:"室内机未收到呼叫",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390015",description:"vtdu成功响应未携带会话标识",solution:"",updateTime:152203484e4}],O="200",z="操作成功!",F={data:B,code:O,msg:z},U=function(){function e(t,n){c(this,e),this.coreX=t,this.coreY=n,console.log("ErrorCode",F)}return m(e,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"matchErrorInfo",value:function(e){return F.data.find((function(t){return t.detailCode.substr(-4)==e}))}}]),e}(),V={color:"red",backgroundColor:"red",activeColor:"red",btnList:[{btnKey:"ade5d065a113432e8091a1c5bc819c57-934f270c08b14e928bf0c2ae8e1a937d-header-0",iconId:"deviceID",part:"left",defaultActive:1,isrender:1,themeId:"934f270c08b14e928bf0c2ae8e1a937d"},{btnKey:"ade5d065a113432e8091a1c5bc819c57-934f270c08b14e928bf0c2ae8e1a937d-header-1",iconId:"deviceName",part:"left",defaultActive:1,isrender:1,themeId:"934f270c08b14e928bf0c2ae8e1a937d"}]},H={color:"blue",backgroundColor:"blue",activeColor:"blue",btnList:[{btnKey:"ade5d065a113432e8091a1c5bc819c57-934f270c08b14e928bf0c2ae8e1a937d-footer-0",iconId:"play",part:"left",defaultActive:0,isrender:0,themeId:"934f270c08b14e928bf0c2ae8e1a937d"}]},G={header:V,footer:H},W=function e(t){this.jsPlugin=t;var n={isMouseDown:!1,isOver:!1,mousePosition:null,oldTime:null,nowTime:null,moved:null,hoverTime:"2018-12-07 12:00:00",hoverLeft:0,timeTipShow:!1,randomNum:123,timeWidthTbls:[60,1800,3600,86400],timeUnits:["范围: 1分钟; 单位: 秒","范围: 30分钟; 单位: 分钟","范围: 1小时; 单位: 分钟","范围: 1天; 单位: 小时","范围: 3天; 单位: 小时"],drawPen:null,timeSection:[],canvasWidth:null,canvasHeight:null,timeTips:null},i=this;Object.keys(n).forEach((function(e){i[e]=n[e]})),this.options={width:this.canvasWidth,height:48,time:(new Date).getTime(),timeSection:[],timeWidth:0},e.prototype.subTime=function(e){return e<10?"0"+e:e},e.prototype.tranTime=function(e){var t=e;if(e){var n=new Date(e);t=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()+" "+this.subTime(n.getHours())+":"+this.subTime(n.getMinutes())+":"+this.subTime(n.getSeconds())}return t},e.prototype.init=function(e){e.width&&document.getElementById(e.id).setAttribute("width",parseInt(e.width,10)+"px");var t=this,n=this.options;t.randomNum=(Math.random()+"").split(".").join(""),t.timeWidthTblIndex=n.timeWidth;var i=document.querySelector("#".concat(this.jsPlugin.id,"-canvas"));t.drawPen=i.getContext("2d"),t.nowTime=n.time||Date.now(),t.timeSection=n.timeSection||[],t.canvasWidth=i.offsetWidth,t.canvasHeight=i.offsetHeight,t.updata(),document.getElementById("".concat(this.jsPlugin.id,"-canvas")).addEventListener("mousemove",(function(e){t.options.readOnly||t.mousemove(e)})),document.getElementById("".concat(this.jsPlugin.id,"-canvas")).addEventListener("mouseover",(function(e){t.options.readOnly||t.mouseover(e)})),document.getElementById("".concat(this.jsPlugin.id,"-canvas")).addEventListener("mouseleave",(function(e){t.options.readOnly||t.mouseleave(e)})),document.getElementById("".concat(this.jsPlugin.id,"-canvas")).addEventListener("mousedown",(function(e){t.options.readOnly||t.mousedown(e)})),document.getElementById("".concat(this.jsPlugin.id,"-canvas")).addEventListener("mouseup",(function(n){if(!t.options.readOnly){var i=e.onChange;t.mouseUpFn(n,i)}}))},e.prototype.setWidth=function(e){var t=this,n=this;e.width&&(document.getElementById(this.jsPlugin.id).style.width=e.width,document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.width=e.width,document.getElementById("".concat(this.jsPlugin.id,"-canvas-container")).style.width=e.width,n.canvasWidth=e.width,setTimeout((function(){t.updata({time:new Date})}),500))},e.prototype.mousemove=function(e){if(this.isMouseDown&&this.isOver){var t=this.mousePosition-e.pageX;if(0===t)return;var n=0;switch(this.timeWidth){case 60:n=.1;break;case 1800:n=3;break;case 3600:n=3;break;case 86400:n=120;break}var i=new Date(this.oldTime).getTime()+t*n*1e3;this.updata({time:i}),this.moved=!0}else{var o=parseInt(document.getElementById("".concat(this.jsPlugin.id,"-canvas-container")).offsetLeft,10);this.mousePosition=e.pageX-o,this.updata()}},e.prototype.mousedown=function(e){this.isMouseDown=!0,this.mousePosition=e.pageX,this.oldTime=this.nowTime},e.prototype.mouseover=function(e){this.isOver=!0},e.prototype.mouseleave=function(e){this.isOver=!1,this.isMouseDown=!1,this.updata()},e.prototype.changeSize=function(e){console.log("changeSize",e),this.options.timeWidth=e,this.updata({timeWidth:e})},e.prototype.mouseUpFn=function(e,t){if(this.isMouseDown&&(this.isMouseDown=!1,this.moved)){this.moved=!1;var n=this.subTime(new Date(this.nowTime).getHours())+":"+this.subTime(new Date(this.nowTime).getMinutes())+":"+this.subTime(new Date(this.nowTime).getSeconds()),i=new Date(this.oldTime).getFullYear()+"/"+(new Date(this.oldTime).getMonth()+1)+"/"+new Date(this.oldTime).getDate();this.nowTime=new Date("".concat(i," ").concat(n)),this.updata({time:this.nowTime}),this.oldTime=this.nowTime,console.log("nowTime",new Date(this.nowTime),"".concat(i," ").concat(n)),t(this.nowTime)}},e.prototype.readOnly=function(e){console.log("更改为只读"),this.options.readOnly=!0,document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.cursor="not-allowed"},e.prototype.unReadOnly=function(e){console.log("更改为只读"),this.options.readOnly=!1,document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.cursor="pointer"},e.prototype.run=function(e){this.isMouseDown||this.updata(e)},e.prototype.getTime=function(e){console.log("this",this),console.log("当前时间",new Date(this.nowTime))},e.prototype.updata=function(e){var t=this;e=e||{},t.nowTime=e.time||t.nowTime,t.timeSection=e.timeSection||t.timeSection,t.timeWidthTblIndex=e.timeWidth||t.timeWidthTblIndex,t.timeWidth=t.timeWidthTbls[e.timeWidth||t.timeWidthTblIndex],t.timeUnit=t.timeUnits[e.timeWidth||t.timeWidthTblIndex],0===e.timeWidth&&(t.timeWidthTblIndex=0,t.timeWidth=t.timeWidthTbls[0],t.timeUnit=t.timeUnits[0]),t.drawPen.fillStyle="#000000",t.drawPen.fillRect(0,0,t.canvasWidth,t.canvasHeight),t.drawScale(),t.drawRecord(),t.drawOtherMsg(),document.getElementById("".concat(this.jsPlugin.id,"-canvas-container")).style.width=t.options.width+"px",document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.width=t.options.width+"px",document.getElementById("".concat(this.jsPlugin.id,"-canvas-container")).style.height=t.options.height+"px",document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.height=t.options.height+"px"},e.prototype.drawSolidLine=function(e,t,n,i,o,r){this.drawPen.save(),this.drawPen.strokeStyle=r,this.drawPen.lineWidth=o,this.drawPen.beginPath(),this.drawPen.moveTo(e,t),this.drawPen.lineTo(n,i),this.drawPen.stroke(),this.drawPen.restore()},e.prototype.drawString=function(e,t,n,i,o){this.drawPen.font="12px serif",this.drawPen.fillStyle="#ffffff",this.drawPen.textAlign=i||"left",this.drawPen.fillText(e,t,n+10)},e.prototype.drawScale=function(){var e=this,t="rgba(255,255,255)",n=new Date(e.nowTime),i=n.getFullYear(),o=n.getSeconds(),r=n.getMinutes(),a=n.getHours(),s=n.getDate(),d=0;switch(e.timeWidth){case 60:var l=parseInt(e.canvasWidth/10);n.setSeconds(n.getSeconds()-parseInt(l/2,10)),s=n.getDate(),a=n.getHours(),r=n.getMinutes(),o=n.getSeconds();for(var c=0;c<l;c++){if(d=o+c,n.setSeconds(d),d%10===0){e.drawSolidLine(c*e.canvasWidth/l,8,c*e.canvasWidth/l,e.canvasHeight/5+8,1,t);var u=this.subTime(n.getHours())+":"+this.subTime(n.getMinutes())+":"+this.subTime(n.getSeconds());e.drawString(u,c*e.canvasWidth/l,e.canvasHeight/5*2.5,"center","rgba(255,255,255,0.3)")}else e.drawSolidLine(c*e.canvasWidth/l,8,c*e.canvasWidth/l,e.canvasHeight/5*.5+8,1,t);n.setDate(s),n.setHours(a),n.setMinutes(r)}break;case 1800:l=parseInt(e.canvasWidth/20);n.setMinutes(n.getMinutes()-parseInt(l/2,10)),a=n.getHours(),r=n.getMinutes();for(c=0;c<=l;c++){if(d=r+c,n.setMinutes(d),d%5===0){e.drawSolidLine(c*e.canvasWidth/l,8,c*e.canvasWidth/l,e.canvasHeight/5*1.5+8,1,t);u=this.subTime(n.getHours())+":"+this.subTime(n.getMinutes());e.drawString(u,c*e.canvasWidth/l,e.canvasHeight/5*2.5,"center","rgba(255,255,255,0.3)")}else e.drawSolidLine(c*e.canvasWidth/l,8,c*e.canvasWidth/l,e.canvasHeight/5*.5+8,1,t);n.setHours(a)}break;case 3600:l=parseInt(e.canvasWidth/20);n.setMinutes(n.getMinutes()-parseInt(l/2,10)),a=n.getHours(),r=n.getMinutes();for(c=0;c<=l;c++){if(d=r+c,n.setMinutes(d),d%10===0){e.drawSolidLine(c*e.canvasWidth/l,8,c*e.canvasWidth/l,e.canvasHeight/5*1.5+8,1,t);u=this.subTime(n.getHours())+":"+this.subTime(n.getMinutes());e.drawString(u,c*e.canvasWidth/l,e.canvasHeight/5*2.5,"center","rgba(255,255,255,0.3)")}else e.drawSolidLine(c*e.canvasWidth/l,8,c*e.canvasWidth/l,e.canvasHeight/5*.5+8,1,t);n.setHours(a)}break;case 86400:l=parseInt(e.canvasWidth/30);n.setHours(n.getHours()-parseInt(l/2,10)),o=n.getSeconds(),r=n.getMinutes(),a=n.getHours(),s=n.getDate(),i=n.getFullYear();for(c=0;c<=l;c++){d=a+c,n.setHours(d),u=this.subTime(n.getHours())+":00",e.drawSolidLine(c*e.canvasWidth/l,8,c*e.canvasWidth/l,e.canvasHeight/5*.5+8,1,t),d%2===0&&e.drawString(u,c*e.canvasWidth/l,e.canvasHeight/5*2,"center","rgba(255,255,255,0.3)"),n.setFullYear(i),n.setDate(s),n.setHours(a)}break}},e.prototype.getRecord=function(e,t,n){this.timeSection=e,this.drawRecord()},e.prototype.drawRecord=function(){for(var e=this.timeSection||[],t=this,n=t.drawPen,i=0;i<e.length;i++){var o=a(e[i].startTime),r=a(e[i].endTime);n.fillStyle="#1890ff80",n.fillRect(o,0,r-o,48)}function a(e){var n=10;switch(t.timeWidth){case 60:n=10;break;case 1800:n=20/60;break;case 3600:n=20/60;break;case 86400:n=20/60/60;break}var i=t.canvasWidth/2,o=i+(e-t.nowTime)/1e3*n;return o>t.canvasWidth&&(o=t.canvasWidth),o<=0&&(o=0),o}},e.prototype.drawOtherMsg=function(){this.drawSolidLine(this.canvasWidth/2,0,this.canvasWidth/2,this.canvasHeight,2,"#1890FF"),this.drawPen.shadowBlur=0,this.isOver&&!this.isMouseDown?(this.mouseTime=this.mousePosition/this.canvasWidth*this.timeWidth*1e3+this.nowTime-this.timeWidth/2*1e3,this.mouseString=this.tranTime(this.mouseTime),this.hoverTime=this.mouseString,this.hoverLeft=this.mousePosition-60,this.timeTipShow=!0):this.timeTipShow=!1}},J=function(){function e(t){if(c(this,e),this.jSPlugin=t,!document.getElementById("".concat(this.jSPlugin.id,"-audioControls")))return!1;this.currentTimeWidth=0,this.date=new Date,this.datepickerVisible=!1,this.seekTimer=null,this.disabled=!1,this.seekFrequency=2e3,this.jSPlugin.params&&this.jSPlugin.params.seekFrequency&&(this.seekFrequency=this.jSPlugin.params.seekFrequency),this.recInit()}return m(e,[{key:"recInit",value:function(){var e=this;this.currentTimeWidth=0;var t=parseInt(getComputedStyle(document.getElementById(this.jSPlugin.id)).width,10)-100,n=document.createElement("div");n.style="display:inline-block;height:48px;",n.id=this.jSPlugin.id+"-canvas-container";var i=document.createElement("canvas");i.id=this.jSPlugin.id+"-canvas",i.className="time-line-body",i.height="48",i.width=t,i.style="display:inline-block;",i.innerHTML="该浏览器不支持canvas",n.appendChild(i),S(n,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")));var o=document.createElement("div");o.className="timeline-controls",o.style="display:flex;width:100px;height:48px;text-align:center;line-height: 48px;vertical-align: top;background: #000000;";var r='\n<div class="timeline-controls-scale" style="display: inline-flex;flex-direction: column;justify-content: center;vertical-align: top;padding: 0 20px;">\n  <span style="vertical-Align: middle;line-height: 14px;height: 18px; width: 18px;cursor:pointer;" id="'.concat(this.jSPlugin.id,'-timeline-scale-add">\n    <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"\n      viewBox="0 0 20 20">\n      <title>add</title>\n      <g>\n        <polygon points="0.1,0.5 15,0.5 15,15.4 0.1,15.4 \t" />\n      </g>\n      <g>\n        <path\n          fill="#FFFFFF";\n          d="M7.6,12.4c-0.3,0-0.5-0.2-0.5-0.5v-8c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v8C8.1,12.2,7.9,12.4,7.6,12.4z" />\n      </g>\n      <g>\n        <path\n          fill="#FFFFFF";\n          d="M11.6,8.4h-8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h8c0.3,0,0.5,0.2,0.5,0.5S11.8,8.4,11.6,8.4z" />\n      </g>\n    </svg>\n  </span>\n  <span style="vertical-Align: middle;line-height: 14px;height: 18px; width: 18px;cursor:pointer;" id="').concat(this.jSPlugin.id,'-timeline-scale-sub">\n    <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"\n      viewBox="0 0 20 20">\n      <title>reduce</title>\n      <g>\n        <polygon class="st0" points="1,0.8 15.2,0.8 15.2,15 1,15 \t" />\n      </g>\n      <g>\n        <path class="st1"\n          fill="#FFFFFF";\n          d="M12.1,8.4h-8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h8c0.3,0,0.5,0.2,0.5,0.5S12.4,8.4,12.1,8.4z" />\n      </g>\n    </svg>\n  </span>\n</div>\n<label for="').concat(this.jSPlugin.id,'-datepicker">\n  <div class="timeline-controls-date">\n    <span>\n      <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"\n        viewBox="0 0 20 20">\n        <title>ifttt</title>\n        <g id="Rectangle">\n          <rect x="0.6" y="0.9" class="st0" width="20" height="20" />\n        </g>\n        <g id="Stroke-1">\n          <path fill="#FFFFFF"; class="st1"\n            d="M14,7.2c-0.3,0-0.5-0.2-0.5-0.5V3.4c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v3.3C14.5,7,14.2,7.2,14,7.2z" />\n        </g>\n        <g id="Stroke-3">\n          <path fill="#FFFFFF"; class="st1"\n            d="M7.3,7.2C7,7.2,6.8,7,6.8,6.7V3.4c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v3.3C7.8,7,7.6,7.2,7.3,7.2z" />\n        </g>\n        <g id="Stroke-5">\n          <path fill="#FFFFFF"; class="st1"\n            d="M18.1,9.7h-15c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h15c0.3,0,0.5,0.2,0.5,0.5S18.4,9.7,18.1,9.7z" />\n        </g>\n        <g id="Stroke-7">\n          <path fill="#FFFFFF"; class="st1" d="M16.5,19.7H4.8c-1.2,0-2.2-1-2.2-2.2V6.7c0-1.2,1-2.2,2.2-2.2h11.7c1.2,0,2.2,1,2.2,2.2v10.8\nC18.6,18.8,17.7,19.7,16.5,19.7z M4.8,5.6c-0.6,0-1.2,0.5-1.2,1.2v10.8c0,0.6,0.5,1.2,1.2,1.2h11.7c0.6,0,1.2-0.5,1.2-1.2V6.7\nc0-0.6-0.5-1.2-1.2-1.2H4.8z" />\n        </g>\n        <g id="Stroke-9">\n          <path fill="#FFFFFF"; class="st1" d="M10.6,13.3c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5s0.3-0.2,0.5-0.2h0h0c0.4,0,0.7,0.3,0.7,0.7\nS11,13.3,10.6,13.3z" />\n        </g>\n        <g id="Stroke-11">\n          <path fill="#FFFFFF"; class="st1" d="M14.8,13.3c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5c0.1-0.1,0.3-0.2,0.5-0.2c0.4,0,0.7,0.3,0.7,0.7\nS15.2,13.3,14.8,13.3z M14.8,12.3c-0.2,0-0.3,0.1-0.3,0.3c0,0.2,0.3,0.4,0.5,0.2c0.1-0.1,0.1-0.1,0.1-0.2\nC15.1,12.4,15,12.3,14.8,12.3z" />\n        </g>\n        <g id="Stroke-13">\n          <path fill="#FFFFFF"; class="st1" d="M6.5,16.6c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5c0.1-0.1,0.3-0.2,0.5-0.2h0h0c0.4,0,0.7,0.3,0.7,0.7\nC7.2,16.3,6.9,16.6,6.5,16.6z" />\n        </g>\n        <g id="Stroke-15">\n          <path fill="#FFFFFF"; class="st1" d="M10.6,16.6c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5c0.1-0.1,0.3-0.2,0.5-0.2h0h0c0.4,0,0.7,0.3,0.7,0.7\nC11.4,16.3,11,16.6,10.6,16.6z" />\n        </g>\n      </svg>\n    </span>\n  </div>\n</label>\n<input autocomplete="off" data-toggle="').concat(this.jSPlugin.id,'-datepicker" id="').concat(this.jSPlugin.id,'-datepicker" name="').concat(this.jSPlugin.id,'-datepicker" style="opacity:0;width:24px;margin-left:-24px;cursor:pointer;" />\n');o.innerHTML=r,S(o,n),this.timeLine=new W(this.jSPlugin),this.timeLine.init({id:this.jSPlugin.id+"-canvas",width:t,onChange:function(t){console.log("time",t,new Date(t).Format("yyyyMMddhhmmss"));var n=new Date(t).Format("yyyyMMddhhmmss");if(console.log("----------------this.jSPlugin.url",e.jSPlugin.url),e.jSPlugin.Theme&&e.jSPlugin.Theme.decoderState.state.recordvideo&&(e.jSPlugin.Theme.setDecoderState({recordvideo:!1}),("cloud.rec"===k(e.jSPlugin.url).type||e.jSPlugin.capacity&&"1"==e.jSPlugin.capacity.support_seek_playback)&&e.jSPlugin.stopSave()),"cloud.rec"===k(e.jSPlugin.url).type||e.jSPlugin.capacity&&"1"==e.jSPlugin.capacity.support_seek_playback){var i=function(){e.jSPlugin.seek(n.substr(8,6),"235959"),e.unSyncTimeLine(),setTimeout((function(){e.syncTimeLine()}),6e3)};e.seekTimer?clearTimeout(e.seekTimer):i(),e.seekTimer=setTimeout((function(){i(),clearTimeout(e.seekTimer),e.seekTimer=null}),e.seekFrequency)}else{var o=function(){setTimeout((function(){e.disabled=!1}),e.seekFrequency)},r=e.jSPlugin.Theme.decoderState.state.play,a=function(t){e.disabled=!0,r?e.jSPlugin.pause(n).then((function(){console.log("暂停成功"),e.jSPlugin.resume(n).then((function(n){console.log("恢复成功：",n),e.jSPlugin.Theme&&e.jSPlugin.Theme.setDecoderState({play:!0}),e.jSPlugin.Theme&&e.jSPlugin.Theme.decoderState.state.sound&&e.jSPlugin.openSound(),t&&t()}))["catch"]((function(e){console.log("恢复失败",e)}))}))["catch"]((function(){console.log("暂停失败"),e.jSPlugin.resume(n).then((function(n){console.log("恢复成功"),e.jSPlugin.Theme&&e.jSPlugin.Theme.setDecoderState({play:!0}),t&&t()}))["catch"]((function(e){console.log("恢复失败",e)}))})):e.jSPlugin.resume().then((function(){e.jSPlugin.pause(n).then((function(){console.log("暂停成功"),e.jSPlugin.resume(n).then((function(n){console.log("恢复成功：",n),e.jSPlugin.Theme&&e.jSPlugin.Theme.setDecoderState({play:!0}),e.jSPlugin.Theme&&e.jSPlugin.Theme.decoderState.state.sound&&e.jSPlugin.openSound(),t&&t()}))["catch"]((function(e){console.log("恢复失败",e)}))}))["catch"]((function(){console.log("暂停失败"),e.jSPlugin.resume(n).then((function(n){console.log("恢复成功"),e.jSPlugin.Theme&&e.jSPlugin.Theme.setDecoderState({play:!0}),t&&t()}))["catch"]((function(e){console.log("恢复失败",e)}))}))})),e.jSPlugin.Theme&&e.jSPlugin.Theme.decoderState&&e.jSPlugin.Theme.decoderState.state&&e.jSPlugin.Theme.decoderState.state.zoom&&(e.jSPlugin.Theme.setDecoderState({zoom:!1}),e.jSPlugin.Zoom.stopZoom())};e.disabled?(console.log("操作频繁，等待2秒后执行"),e.seekTimer&&clearTimeout(e.seekTimer),e.seekTimer=setTimeout((function(){a(o)}),e.seekFrequency)):a(o)}}}),this.syncTimeLine(),g("".concat(this.jSPlugin.staticPath,"/rec/datepicker.min.css")),f("".concat(this.jSPlugin.staticPath,"/rec/jquery.min.js"),(function(){f("".concat(e.jSPlugin.staticPath,"/rec/datepicker.js"),(function(){f("".concat(e.jSPlugin.staticPath,"/rec/datepicker.zh-CN.js"),(function(){!document.getElementsByClassName("datepicker-container")[0]&&$("#".concat(e.jSPlugin.id,"-datepicker")).datepicker&&$("#".concat(e.jSPlugin.id,"-datepicker")).datepicker({autoShow:!1,autoHide:!0,autoPick:!0,language:"zh-CN",date:new Date(y("begin",e.jSPlugin.params.url).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"))||new Date,format:"yyyy-mm-dd",endDate:new Date,inline:!0,container:document.getElementById("".concat(e.jSPlugin.id,"-wrap"))}),document.getElementsByClassName("datepicker-container")[0]&&(document.getElementsByClassName("datepicker-container")[0].style.display="none"),e.datepickerVisible=!1,$("#".concat(e.jSPlugin.id,"-datepicker")).on("pick.datepicker",(function(t){console.log("重新选择日期",t.date,new Date(t.date).Format("yyyyMMdd"),new Date(document.getElementById("".concat(e.jSPlugin.id,"-datepicker")).value).Format("yyyyMMdd")),t.date>new Date||new Date(t.date).Format("yyyyMMdd")===new Date(document.getElementById("".concat(e.jSPlugin.id,"-datepicker")).value).Format("yyyyMMdd")?t.preventDefault():(document.getElementById("".concat(e.jSPlugin.id,"-datepicker")).value=new Date(t.date).Format("yyyy-MM-dd"),e.renderRec(t.date),e.jSPlugin.Theme.decoderState&&e.jSPlugin.Theme.decoderState.state?e.jSPlugin.Theme.decoderState.state.cloudRec?e.jSPlugin.changePlayUrl({begin:new Date(t.date).Format("yyyyMMdd"),type:"cloud.rec"}):e.jSPlugin.Theme.decoderState.state.rec?e.jSPlugin.changePlayUrl({begin:new Date(t.date).Format("yyyyMMdd"),type:"rec"}):e.jSPlugin.changePlayUrl({begin:new Date(t.date).Format("yyyyMMdd")}):e.jSPlugin.changePlayUrl({begin:new Date(t.date).Format("yyyyMMdd")})),document.getElementsByClassName("datepicker-container")[0]&&(document.getElementsByClassName("datepicker-container")[0].style.display="none"),e.datepickerVisible=!1,e.jSPlugin.Theme&&e.jSPlugin.Theme.decoderState&&e.jSPlugin.Theme.decoderState.state&&e.jSPlugin.Theme.decoderState.state.zoom&&(e.jSPlugin.Theme.setDecoderState({zoom:!1}),e.jSPlugin.Zoom.stopZoom())})),$("#".concat(e.jSPlugin.id,"-datepicker")).off("click").on("click",(function(t){console.log("点击日期"),e.datepickerVisible?document.getElementsByClassName("datepicker-container")[0]&&(document.getElementsByClassName("datepicker-container")[0].style.display="none"):document.getElementsByClassName("datepicker-container")[0]&&(document.getElementsByClassName("datepicker-container")[0].style.display="inline"),e.datepickerVisible=!e.datepickerVisible}))}))}))})),document.getElementById("".concat(this.jSPlugin.id,"-timeline-scale-add")).onclick=function(){var t=e.currentTimeWidth;t<3&&e.timeLine.changeSize(++e.currentTimeWidth)},document.getElementById("".concat(this.jSPlugin.id,"-timeline-scale-sub")).onclick=function(){var t=e.currentTimeWidth;t>0&&e.timeLine.changeSize(--e.currentTimeWidth)};var a=y("begin",this.jSPlugin.url)||(new Date).Format("yyyyMMdd");this.renderRec("".concat(a.slice(0,4),"-").concat(a.slice(4,6),"-").concat(a.slice(6,8))),this.observer=new MutationObserver((function(t,n){e.recAutoSize()}));var s={attributes:!0,attributeOldValue:!0,attributeFilter:["style"]},d=document.getElementById("".concat(this.jSPlugin.id));this.observer.observe(d,s)}},{key:"setDatepickerDate",value:function(e){if(document.getElementsByClassName("datepicker-container")[0]){var t=document.getElementsByClassName("datepicker-container")[0],n=t.parentNode;n.removeChild(t),document.getElementById("".concat(this.jSPlugin.id,"-datepicker")).value=e.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"),$("#".concat(this.jSPlugin.id,"-datepicker")).datepicker({autoShow:!1,autoHide:!0,autoPick:!0,language:"zh-CN",defaultDate:e,format:"yyyy-mm-dd",endDate:new Date,inline:!0,container:document.getElementById("".concat(this.jSPlugin.id,"-wrap"))})}}},{key:"datepickerHide",value:function(){document.getElementsByClassName("datepicker-container")[0]&&(document.getElementsByClassName("datepicker-container")[0].style.display="none"),this.datepickerVisible=!1}},{key:"datepickerShow",value:function(){document.getElementsByClassName("datepicker-container")[0]&&(document.getElementsByClassName("datepicker-container")[0].style.display="inline"),this.datepickerVisible=!0}},{key:"recAutoSize",value:function(){var e=this;if(document.getElementById("".concat(this.jSPlugin.id,"-canvas"))){var t=parseInt(getComputedStyle(document.getElementById(this.jSPlugin.id)).width,10)-100;t!==parseInt(document.getElementById("".concat(this.jSPlugin.id,"-canvas")).width)&&(document.getElementById("".concat(this.jSPlugin.id,"-canvas")).width=t,this.timeLine.init({id:"".concat(this.jSPlugin.id,"-canvas"),width:t,onChange:function(t){console.log("time",t,new Date(t).Format("yyyyMMddhhmmss")),console.log("jSPlugin",e.jSPlugin);var n=new Date(t).Format("yyyyMMddhhmmss");e.jSPlugin.changePlayUrl({begin:n})}}),this.renderRec(this.date),this.syncTimeLine())}}},{key:"syncTimeLine",value:function(){var e=this;this.jSPlugin.recTimer&&clearInterval(this.jSPlugin.recTimer),this.jSPlugin.recTimer=setInterval((function(){var t=e.jSPlugin.getOSDTime();t.then((function(t){var n=t.data;-1===n?console.log("获取播放时间错误"):n>0&&e.timeLine.run({time:new Date(n>1e12?n:1e3*n)})}))["catch"]((function(e){}))}),1e3)}},{key:"unSyncTimeLine",value:function(){this.jSPlugin.recTimer&&clearInterval(this.jSPlugin.recTimer)}},{key:"renderRec",value:function(e){var t=this;this.date=e;var n=this,i=new Date(new Date(e).Format("yyyy-MM-dd 00:00:00").replace(/-/g,"/")).getTime(),o=new Date(new Date(e).Format("yyyy-MM-dd 23:59:59").replace(/-/g,"/")).getTime();this.timeLine.getRecord([],i,o),console.log("-----------233---------this.jSPlugin.url",this.jSPlugin.url);var r={accessToken:this.jSPlugin.accessToken,recType:"cloud.rec"===k(this.jSPlugin.url).type?1:2,deviceSerial:k(this.jSPlugin.url).deviceSerial,channelNo:k(this.jSPlugin.url).channelNo,startTime:i,endTime:o,version:"2.0"},a=function(e){if(e.data&&e.data.files&&e.data.files.length>0){var a=e.data.files,s=(new Date).getTime(),d=e.data.isAll;if(d)t.timeLine.getRecord(a,i,o);else{var l=function e(){function t(t){t.data&&t.data.files&&t.data.files.length>0?0==t.data.isAll?(t.data.files&&(a=a.concat(t.data.files)),s=t.data.nextFileTime>0?t.data.nextFileTime:(new Date).getTime(),e()):(console.log("云存储执行渲染片段"),n.timeLine.getRecord(a,i,o)):n.timeLine.getRecord(a,i,o)}r.startTime=s,I(this.jSPlugin.env.domain+"/api/lapp/video/by/time","POST",r,"",t)};l()}t.timeLine.run({time:new Date(i)})}else e.data&&e.data.length>0&&(console.log("获取本地录像片段成功",e),n.timeLine.getRecord(e.data,i,o),n.timeLine.run({time:new Date(i)}))},s=this.jSPlugin.env.domain+"/api/lapp/video/by/time";I(s,"POST",r,"",a)}}]),e}(),K=function(e){console.log("执行TimeLine - params",e),this.state={id:e.id,start:"00:00:00",end:"24:00:00",current:0,timelag:30,timeArr:[],availTimeLine:[],scrollTop:0,index:0,date:"",noTimeLineTxt:"",disabled:!1};var t=this;this.setState=function(e){Object.keys(e).forEach((function(n){t.state[n]=e[n],"scrollTop"===n&&document.getElementById("time-line-item").parentNode.scrollTo(0,e[n]),"current"===n&&(document.getElementById("time-line-current").innerHTML=e[n])}))},this.setDisabled=function(e){this.setState({disabled:e}),document.getElementById("time-line-item").parentNode.style.overflowY=e?"hidden":"scroll"},this.timeToSecond=function(e){var t=e.split(":"),n=Number(t[0]),i=Number(t[1]),o=Number(t[2]);return 60*n*60+60*i+(o||0)},this.minuteToTime=function(e){var t=Math.floor(e/60),n=e%60;return(t>9?t:"0"+t)+":"+(n>9?n:"0"+n)},this.timeToMinute=function(e){var t=e.split(":"),n=Number(t[0]),i=Number(t[1]);return 60*n+i},this.getPalyParam=e.getPalyParam,document.getElementById("time-line-item").parentNode.ontouchstart=function(){if(t.state.disabled)return!1;e.ontouchstart()},document.getElementById("time-line-item").parentNode.ontouchmove=function(){if(t.state.disabled)return!1;e.ontouchmove()},document.getElementById("time-line-item").parentNode.ontouchend=function(){if(t.state.disabled)return!1;var n,i=new Promise((function(e,t){var i=-1;n=setInterval((function(){var t=document.getElementById("time-line-item").parentNode.scrollTop;t!==i?(console.log("scolling",t,i),i=t):(console.log("scoll stop",t,i),clearInterval(n),e(t))}),100)}));i.then((function(e){console.log("scollPromise: then",e,t),t.rectTopTotime(e),console.log("页面滚动实际高度",e,t.state),t.getPalyParam({current:t.state.current})})),e.ontouchend()},this.matchTimeDot()};K.prototype.changeScale=function(e){this.setState({timelag:e}),this.matchTimeDot()},K.prototype.setDateLine=function(e,t){e.length>0?("undefined"===typeof t&&(t=e.length-1),this.setState({availTimeLine:e,start:e[t].st,end:e[t].et,current:e[t].st}),console.log("this.state",this.state),this.matchRecTimeDot(),this.primaryOffsetH()):(this.setState({availTimeLine:[]}),console.log("this.state",this.state),this.matchRecTimeDot())},K.prototype.matchTimeDot=function(){var e=this.state,t=e.start,n=e.end,i=e.timelag;e.availTimeLine,console.log("start",t,"end",n);var o=[],r=this.timeToMinute(n);r=Math.floor(r/i)*i;for(var a=r;a>=0;){var s=0,d=0,l=[];a==r&&(s=70),0==a&&(d=230);var c=this.minuteToTime(a);o.push({id:a,current:c,label:"a"+a,marginTop:s,marginBottom:d,recArr:l}),a-=i}this.setState({timeArr:o}),this.renderDateLine()},K.prototype.matchRecTimeDot=function(){var e=this.state,t=e.start,n=e.end,i=e.timelag,o=e.availTimeLine,r=e.timeArr;console.log("start",t,"end",n);var a=[],s=o.length;if(0===s)for(var d=0;d<r.length;d++)r[d].recArr=[];else{for(var l=0;l<r.length;l++)r[l].recArr=[];for(var c=0;c<s;c++){var u=o[c],m=this.timeToSecond(u.st),p=this.timeToSecond(u.et),h=void 0,f=void 0,g=0,v=0;h=Math.floor(m/(60*i))*i,g=(m-60*h)/i,f=Math.floor(p/(60*i))*i,v=(p-60*f)/i,a[c]={st:h,et:f,stAvailPercent:g,etAvailPercent:v};for(d=0;d<r.length;d++)if(r[d].id==h&&r[d].id==f){var y=v-g,S=60-v;r[d].recArr.push({height:y,top:S})}else r[d].id==h?r[d].recArr.push({height:60-g,top:0}):r[d].id==f?r[d].recArr.push({height:v,top:60-v}):r[d].id>h&&r[d].id<f&&r[d].recArr.push({height:60,top:0})}}console.log("availArr: ",a),this.setState({timeArr:r}),console.log("timeArr:",this.state),this.renderDateLine()},K.prototype.renderDateLine=function(){var e=this.state,t=e.id,n=e.timeArr;console.log("id,timeArr",t,n);var i=document.getElementById("time-line-item");i.innerHTML="",n.forEach((function(e,t){var n=document.createElement("div");n.setAttribute("class","time-item"),n.style="margin-top: ".concat(e.marginTop,"px; margin-bottom: ").concat(e.marginBottom,"px; border-right-color: ").concat(e.borderColor,";");var o=document.createElement("div");o.setAttribute("class","scale");var r='<div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale" style="width:10px"></div>';e.recArr.forEach((function(e,t){r+='<div class="item-unavail" style="height: '.concat(e.height,"px;background-color:#A8B9ED; top: ").concat(e.top,'px"></div>')})),r+="<div id=".concat(e.label,' style="position: relative; top: 51px; left: 40%"> ').concat(e.current,"</div>"),n.innerHTML=r,i.appendChild(n)}))},K.prototype.primaryOffsetH=function(){var e=this.state,t=e.start,n=e.timelag,i=e.timeArr,o=i[0].current,r=this.timeToSecond(o),a=this.timeToSecond(t),s=r-a,d=Math.ceil(s/n)+60;this.setState({scrollTop:d}),console.log("起始偏移量",d)},K.prototype.currentOffsetH=function(){var e=this.state,t=e.current,n=e.timelag,i=e.timeArr,o=i[0].current,r=this.timeToSecond(o),a=this.timeToSecond(t),s=r-a,d=Math.ceil(s/n)+60;this.setState({scrollTop:d})},K.prototype.rectTopTotime=function(e){var t,n,i=this.state.timelag,o=Math.floor(e/60),r=e-60*o;if(console.log("index：",o,"offsetH:",r),0==r)t=this.state.timeArr[o-1].current,n=0;else{var a=this.state.timeArr[o].current,s=this.timeToMinute(a),d=60-r,l=d*i,c=Math.floor(l/60)+s,u=60*Math.floor(l/60);n=Math.ceil(l-u),t=this.minuteToTime(c)}this.setState({current:t+":"+(n>9?n:"0"+n),scrollTop:e})},K.prototype.stepScrollTimeLine=function(e){this.setState({current:e}),this.currentOffsetH()},K.prototype.secondCountDown=function(e){var t=this.state.current,n=t.split(":"),i=Number(n[0]),o=Number(n[1]),r=Number(n[2]),a=60*i*60+60*o+r+1,s=Math.floor(a/3600),d=Math.floor((a-3600*s)/60),l=a-3600*s-60*d;this.setState({current:(s>9?s:"0"+s)+":"+(d>9?d:"0"+d)+":"+(l>9?l:"0"+l)})};var Z=K;function q(e){var t=new Date(e),n=t.getHours(),i=t.getMinutes(),o=t.getSeconds();return(n>9?n:"0"+n)+":"+(i>9?i:"0"+i)+":"+(o>9?o:"0"+o)}Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};var Y=function(){function e(t,n,i){var o=this;c(this,e),this.changeRecSpeed=n,this.resetMobileZoomStatus=i,this.isMobile=!0,this.jSPlugin=t,this.timer=null,this.date=(new Date).Format("yyyy-MM-dd"),this.begin=((new Date).Format("yyyy-MM-dd")+" 00:00:00").replace(/-/g,"/"),this.end=((new Date).Format("yyyy-MM-dd")+" 23:59:59").replace(/-/g,"/"),this.initBegin=null,this.initEnd=null,this.type=k(this.jSPlugin.url).type,this.operating=!1,this.seekTimer=null,this.disabled=!1,this.seekFrequency=2e3,this.jSPlugin.params&&this.jSPlugin.params.seekFrequency&&(this.seekFrequency=this.jSPlugin.params.seekFrequency);var r=document.createElement("style");if(r.innerHTML='\n    body{\n      padding: 0;\n      margin: 0;\n    }\n    .time-line-container {\n      text-align: left;\n      height: 300px;\n      /* outline: 1px solid red; */\n      /* background: gray; */\n      position: relative;\n      /* padding-top: 60px; */\n      margin-top: 20px;\n    }\n\n    .time-line-container .time-line-item-container {\n      display: inline-block;\n      /* height: 400px; */\n      width: 30%;\n      /* background: indianred; */\n      overflow-y: scroll;\n      overflow-x: hidden;\n      /* padding-top: 60px; */\n      height: 300px;\n      box-sizing: border-box;\n      white-space: nowrap;\n      position: relative;\n    }\n\n    .time-line-container .time-line-item-container::-webkit-scrollbar {\n      width: 0px;\n      /*滚动条宽度*/\n      height: 0px;\n      /*滚动条高度*/\n    }\n\n    .time-line-item .time-item {\n      position: relative;\n      box-sizing: border-box;\n      height: 60px;\n      font-size: 12px;\n      color: rgb(150, 150, 150);\n      border-right: 6px solid;\n      border-right-color: #ddd;\n    }\n\n    .time-line-item .time-item .scale {\n      width: 6px;\n      height: 9px;\n      border-bottom: 1px solid #ccc;\n      float: right;\n      clear: both;\n    }\n\n    .time-line-item .time-item .item-unavail {\n      width: 6px;\n      position: absolute;\n      left: 100%;\n      background-color: #ddd;\n    }\n\n    .time-line-container .current-time {\n      position: absolute;\n      left: 0;\n      top: 40px;\n      height: 29px;\n      /* line-height: 58px; */\n      border-bottom: 1px solid #648FFC;\n      width: 60%;\n      margin-left: 26%;\n    }\n\n    .time-line-container .current-time .current-time-bg {\n      position: relative;\n      top: 15px;\n      width: 100px;\n      height: 29px;\n      line-height: 29px;\n      left: -70px;\n      font-size: 12px;\n      color: #2C2C2C;\n    }\n\n    .time-line-container .current-time .current-time-bg::before {\n      content: \'\';\n      display: inline-block;\n      width: 6px;\n      height: 6px;\n      border-radius: 100%;\n      background: #648FFC;\n      top: 11px;\n      position: absolute;\n      right: 30px;\n    }\n\n    .date-switch-container {\n      height: 40px;\n      position: relative;\n      text-align: center;\n      margin: 20px 10px;\n    }\n\n    .date-switch-container .current-date {\n      line-height: 40px;\n      height: 22px;\n      font-size: 16px;\n      color: #2C2C2C;\n      text-align: center;\n      font-weight: bold;\n    }\n\n    .date-container {\n      width: 40px;\n      height: 40px;\n      position: absolute;\n      right: 0;\n      top: 0;\n    }\n\n    .rec-type-container {\n      display: flex;\n      justify-content: space-between;\n    }\n\n    .rec-type-container .rec-type-text {\n      padding: 0 15px;\n      font-size: 12px;\n      color: #2C2C2C;\n    }\n\n    .rec-type-container .rec-type-switch {\n      padding: 0 20px;\n    }\n\n    .date-container input {\n      position: absolute;\n      opacity: 0;\n      display: inline-block;\n      width: 40px;\n      height: 40px;\n      z-index: 10;\n      left: 0;\n    }\n\n    .date-container label {\n      position: absolute;\n      left: 0;\n      top: 0;\n      /* display: none; */\n      z-index: 0;\n    }\n\n    .date-icon {\n      display: inline-block;\n      width: 40px;\n      height: 40px;\n      background: url(\'https://resource.eziot.com/group2/M00/00/6A/CtwQF2F6VieAQrU9AAABP-_Nsqo949.png\') no-repeat 100% 100%;\n    }\n    .select-container {\n      padding: 10px;\n      display: flex;\n      justify-content: space-between;\n    }\n\n    .advice {\n      height: 24px;\n      width: 70px;\n      display: flex;\n      justify-content: space-between;\n      line-height: 24px;\n      background: #F8F8F8;\n      border-radius: 8px;\n    }\n\n    .advice span {\n      width: 40px;\n      display: inline-block;\n    }\n\n    input[type="checkbox"]:not(:checked)+.advice span:first-child {\n      box-shadow: 0px 2px 5px 0px rgb(23 45 101 / 20%);\n      border-radius: 8px;\n      text-align: center;\n\n    }\n\n    input[type="checkbox"]:checked+.advice span:last-child {\n      box-shadow: 0px 2px 5px 0px rgb(23 45 101 / 20%);\n      border-radius: 8px;\n      text-align: center;\n    }\n\n    input[type="checkbox"]:not(:checked)+.advice span:first-child svg {\n      fill: #648FFC !important;\n    }\n\n    input[type="checkbox"]:checked+.advice span:last-child svg {\n      fill: #648FFC !important;\n    }',document.getElementsByTagName("head")[0].appendChild(r),y("begin",this.jSPlugin.url)){var a=y("begin",this.jSPlugin.url);this.date=a.slice(0,4)+"/"+a.slice(4,6)+"/"+a.slice(6,8),this.begin=this.date+" ".concat(a.slice(8,10)||"00",":").concat(a.slice(10,12)||"00",":").concat(a.slice(12,14)||"00"),this.end=this.date+" 23:59:59",this.initBegin=this.begin}if(y("end",this.jSPlugin.url)){var s=y("end",this.jSPlugin.url);this.end=this.date+" ".concat(s.slice(8,10)||"23",":").concat(s.slice(10,12)||"59",":").concat(s.slice(12,14)||"59"),this.initEnd=this.end}var d=document.createElement("div");d.id="date-switch-container-wrap",d.className="date-switch-container-wrap",d.style="",d.innerHTML='\n      <div class="date-switch-container">\n      <div class="current-date" id="current-date">今日录像</div>\n      <div class="date-container">\n        <label for="date">\n          <div class="date-icon"></div>\n        </label>\n        <input type="date" name="date" id="date" />\n      </div>\n    </div>\n        ',S(d,document.getElementById("".concat(this.jSPlugin.id,"-wrap")));var l=document.createElement("div");l.id="rec-type-container-wrap",l.className="rec-type-container-wrap",l.style="",l.innerHTML='\n    <div class="rec-type-container">\n    <div class="rec-type-text">共<span id="recCount">0</span>个录像</div>\n    <div class="rec-type-switch">\n      <label>\n        <input type="checkbox" name="type" id="cloudType" value="1" hidden />\n        <label for="cloudType" class="advice">\n          <span>\n          <svg fill="#CCCCCC" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="2 0 20 20">\n            <path class="st0" d="M12.6,5c-2.3,0.1-4.3,1.4-5.3,3.3L7.2,8.6c-2.4,0.5-4.1,2.5-4.1,4.9c0,2.8,2.4,5,5.2,5h9.9\n            c2.4,0,4.3-1.9,4.3-4.2l0-0.2c-0.1-2-1.6-3.5-3.5-3.9l-0.1,0l0-0.2c-0.4-2.8-3-5-6.1-5L12.6,5z"/>\n          </svg>\n        </span>\n        <span>\n          <svg fill="#CCCCCC" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="2 0 20 20">\n            <path id="形状结合" class="st0" d="M14.3,4c0.6,0,1.2,0.2,1.7,0.7l0,0L18.3,7C18.7,7.4,19,8,19,8.6l0,0v9c0,1.3-1.1,2.3-2.4,2.3\n\tl0,0H8.4C7.1,20,6,19,6,17.7l0,0V6.3C6,5,7.1,4,8.4,4l0,0H14.3z M9.7,7.2C9.3,7.2,8.9,7.6,8.9,8l0,0v2.5l0,0.1\n\tc0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C10.4,7.5,10,7.2,9.7,7.2z M12.2,7.2c-0.4,0-0.8,0.3-0.8,0.8l0,0v2.5\n\tl0,0.1c0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C12.9,7.5,12.5,7.2,12.2,7.2z M14.7,7.2c-0.4,0-0.8,0.3-0.8,0.8l0,0\n\tv2.5l0,0.1c0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C15.4,7.5,15,7.2,14.7,7.2z"/>\n          </svg>\n        </span>\n        </label>\n      </label>\n    </div>\n  </div>\n        ',S(l,d);var u=document.createElement("div");u.id="mobile-rec-wrap",u.className="mobileRec-wrap",u.style="",u.innerHTML='\n    <div class="time-line-container">\n    <div class="current-time">\n      <div class="current-time-bg" id="time-line-current">2020-01-01 00:00:00</div>\n    </div>\n    <div class="time-line-item-container">\n      <div class="time-line-item" id="time-line-item">\n      </div>\n    </div>\n    </div>\n      ',S(u,l);var m=function(e){console.log("子组件传值到父组件",e,e.current);var t=e.current,n=new Date(o.date).Format("yyyyMMdd").substr(0,8)+(e.current?t.replace(/:/g,""):e.current.replace(/:/g,""));if(o.initBegin&&new Date("".concat(o.date," ").concat(e.current)).getTime()<new Date(o.initBegin).getTime()&&(console.log("超过限制最低值"),n=new Date(o.initBegin).Format("yyyyMMddhhmmss")),o.initEnd&&new Date("".concat(o.date," ").concat(e.current)).getTime()>new Date(o.initEnd).getTime()&&(console.log("超过限制最高值"),n=new Date(o.initBegin).Format("yyyyMMddhhmmss")),"cloud.rec"===o.type){var i=function(){o.jSPlugin.seek(n.substr(8,6),"235959"),setTimeout((function(){o.syncTimeLine()}),6e3)};o.seekTimer?clearTimeout(o.seekTimer):i(),console.log("this.jsPlug",o.jSPlugin.params),o.seekTimer=setTimeout((function(){i(),clearTimeout(o.seekTimer),o.seekTimer=null}),o.seekFrequency)}else{var r=function(){setTimeout((function(){o.disabled=!1}),o.seekFrequency)},a=function(e){o.disabled=!0,o.jSPlugin.pause(n).then((function(){console.log("暂停成功"),o.jSPlugin.resume(n).then((function(t){console.log("恢复成功"),o.jSPlugin.Theme&&o.jSPlugin.Theme.setDecoderState({play:!0}),o.jSPlugin.Theme&&o.jSPlugin.Theme.decoderState.state.sound&&o.jSPlugin.openSound(),o.syncTimeLine(),e&&e()}))}))["catch"]((function(){console.log("暂停失败"),o.jSPlugin.resume(n).then((function(t){console.log("恢复成功"),o.jSPlugin.Theme&&o.jSPlugin.Theme.setDecoderState({play:!0}),o.syncTimeLine(),e&&e()}))}))};o.disabled?(console.log("操作频繁，等待2秒后执行"),o.seekTimer&&clearTimeout(o.seekTimer),o.seekTimer=setTimeout((function(){a(r)}),o.seekFrequency)):a(r)}},p=function(){o.operating=!0,o.unSyncTimeLine()},h=function(){},f=function(){o.operating=!1,console.log("ontouchend")};this.TimeLineOBJ=new Z({id:"time-line-item",getPalyParam:m,ontouchstart:p,ontouchmove:h,ontouchend:f}),this.fetchDeviceRec(),document.getElementById("date").addEventListener("change",(function(e){if(console.log("日期变化",e.target.value),o.initBegin||o.initEnd)return console.log("您开启了时间限制，无法切换日期"),!1;o.date=new Date(e.target.value).Format("yyyy/MM/dd"),o.begin=o.date+" 00:00:00",o.end=o.date+" 23:59:59",o.fetchDeviceRec(),o.jSPlugin.changePlayUrl({type:o.type,begin:"".concat(new Date(o.date).Format("yyyyMMdd"),"000000")}),o.changeRecSpeed(1),o.resetMobileZoomStatus()})),document.getElementById("cloudType").checked="rec"===this.type,document.getElementById("cloudType").addEventListener("change",(function(e){var t=e.target.checked?2:1;o.type=e.target.checked?"rec":"cloud.rec",console.log("recType",t),o.fetchDeviceRec(),o.jSPlugin.changePlayUrl({type:o.type,begin:"".concat(new Date(o.date).Format("yyyyMMdd"),"000000")}).then((function(){console.log("切换类型成功"),o.syncTimeLine(),o.changeRecSpeed(1),o.resetMobileZoomStatus()}),(function(e){console.log("err",e)}))["catch"]((function(e){console.log(e)}))})),this.syncTimeLine()}return m(e,[{key:"fetchDeviceRec",value:function(){var e=this,t=function(t){var n=t.length;document.getElementById("recCount").innerHTML=n;for(var i=[],o=n-1;o>=0;o--){var r=t[o],a=q(r.endTime),s=q(r.startTime);i.push({st:s,et:a})}e.TimeLineOBJ.setDateLine(i)},n=new FormData;n.append("deviceSerial",k(this.jSPlugin.url).deviceSerial),n.append("channelNo",k(this.jSPlugin.url).channelNo),n.append("accessToken",this.jSPlugin.accessToken),n.append("recType","cloud.rec"===this.type?1:2),n.append("startTime",new Date(this.begin).getTime()),n.append("endTime",new Date(this.end).getTime()),fetch(this.jSPlugin.env.domain+"/api/lapp/video/by/time",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){if(200==e.code&&e.data){var n=[];n=e.data,t(n)}else t([])}))}},{key:"syncTimeLine",value:function(){var e=this,t=function(e){var t=new Date(e),n=t.getHours(),i=t.getMinutes(),o=t.getSeconds();return(n>9?n:"0"+n)+":"+(i>9?i:"0"+i)+":"+(o>9?o:"0"+o)};this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){if(e.operating)return console.log("操作中"),!1;e.jSPlugin.getOSDTime().then((function(n){n.data>0?e.TimeLineOBJ.stepScrollTimeLine(t(1e3*n.data)):(console.log("未找到当前获取播放时间，等待中..."),console.log("res:-----------------",n))}))["catch"]((function(e){console.log("err:-----",e),console.log("未找到当前获取播放时间，等待中...")}))}),1e3)}},{key:"unSyncTimeLine",value:function(){this.timer&&clearInterval(this.timer)}}]),e}(),X=[{code:200,msg:"",desc:"请求成功",text:"操作成功",type:"ptzStart"},{code:10001,msg:"操作失败",desc:"参数为空或格式不正确",text:"参数错误",type:"ptzStart"},{code:10002,msg:"账号异常，操作失败",desc:"重新获取accessToken",text:"accessToken异常或过期",type:"ptzStart"},{code:10005,msg:"账号异常，操作失败",desc:"appKey被冻结",text:"appKey异常",type:"ptzStart"},{code:20002,msg:"设备不存在，请检查设备连接情况",desc:"",text:"设备不存在",type:"ptzStart"},{code:20006,msg:"操作失败，请检查设备网络情况",desc:"检查设备网络状况，稍后再试",text:"网络异常",type:"ptzStart"},{code:20007,msg:"操作失败，请检查设备在线情况",desc:"检查设备是否在线",text:"设备不在线",type:"ptzStart"},{code:20008,msg:"操作过于频繁，稍后再试",desc:"操作过于频繁，稍后再试",text:"设备响应超时",type:"ptzStart"},{code:20014,msg:"操作失败",desc:"",text:"deviceSerial不合法",type:"ptzStart"},{code:20032,msg:"通道不存在请检查设备连接情况",desc:"该用户下通道不存在",text:"该用户下通道不存在",type:"ptzStart"},{code:49999,msg:"操作失败，请重试",desc:"接口调用异常",text:"数据异常",type:"ptzStart"},{code:6e4,msg:"操作失败，设备不支持该操作",desc:"",text:"设备不支持云台控制",type:"ptzStart"},{code:60001,msg:"操作失败，用户无权限",desc:"",text:"用户无云台控制权限",type:"ptzStart"},{code:60002,msg:"设备已旋转到上限位",desc:"",text:"设备云台旋转达到上限位",type:"ptzStart"},{code:60003,msg:"设备已旋转到下限位",desc:"",text:"设备云台旋转达到下限位",type:"ptzStart"},{code:60004,msg:"设备已旋转到左限位",desc:"",text:"设备云台旋转达到左限位",type:"ptzStart"},{code:60005,msg:"设备已旋转到右限位",desc:"",text:"设备云台旋转达到右限位",type:"ptzStart"},{code:60006,msg:"操作失败，请重试",desc:"稍候再试",text:"云台当前操作失败",type:"ptzStart"},{code:60009,msg:"设备正在操作中",desc:"",text:"正在调用预置点",type:"ptzStart"},{code:60020,msg:"操作失败",desc:"确认设备是否支持该操作",text:"不支持该命令",type:"ptzStart"}],Q=[{code:200,msg:"",desc:"请求成功",text:"操作成功",type:"ptzStop"},{code:10001,msg:"操作失败",desc:"参数为空或格式不正确",text:"参数错误",type:"ptzStop"},{code:10002,msg:"账号异常，操作失败",desc:"重新获取accessToken",text:"accessToken异常或过期",type:"ptzStop"},{code:10005,msg:"账号异常，操作失败",desc:"appKey被冻结",text:"appKey异常",type:"ptzStop"},{code:20002,msg:"设备不存在，请检查设备连接情况",desc:"",text:"设备不存在",type:"ptzStop"},{code:20006,msg:"操作失败，请检查设备网络情况",desc:"检查设备网络状况，稍后再试",text:"网络异常",type:"ptzStop"},{code:20007,msg:"操作失败，请检查设备在线情况",desc:"检查设备是否在线",text:"设备不在线",type:"ptzStop"},{code:20008,msg:"操作过于频繁，稍后再试",desc:"操作过于频繁，稍后再试",text:"设备响应超时",type:"ptzStop"},{code:20014,msg:"操作失败",desc:"",text:"deviceSerial不合法",type:"ptzStop"},{code:20032,msg:"通道不存在请检查设备连接情况",desc:"该用户下通道不存在",text:"该用户下通道不存在",type:"ptzStop"},{code:49999,msg:"操作失败，请重试",desc:"接口调用异常",text:"数据异常",type:"ptzStop"},{code:6e4,msg:"操作失败，设备不支持该操作",desc:"",text:"设备不支持云台控制",type:"ptzStop"},{code:60001,msg:"操作失败，用户无权限",desc:"",text:"用户无云台控制权限",type:"ptzStop"},{code:60006,msg:"操作失败，请重试",desc:"稍候再试",text:"云台当前操作失败",type:"ptzStop"},{code:60009,msg:"设备正在操作中",desc:"",text:"正在调用预置点",type:"ptzStop"},{code:60020,msg:"操作失败",desc:"确认设备是否支持该操作",text:"不支持该命令",type:"ptzStop"}],ee=[{code:200,msg:"",desc:"请求成功",text:"操作成功",type:"talk"},{code:10001,msg:"播放失败",desc:"参数为空或格式不正确",text:"参数错误",type:"talk"},{code:10002,msg:"账号异常，操作失败",desc:"",text:"accessToken异常或过期",type:"talk"},{code:10031,msg:"账号异常，操作失败",desc:"",text:"子账户或萤石用户没有权限",type:"talk"},{code:20002,msg:"设备不存在请检查设备连接情况",desc:"设备序列号输入有误或者设备未被添加或者通道异常",text:"设备不存在",type:"talk"},{code:60059,msg:"播放失败",desc:"",text:"ezopen地址均不可用",type:"talk"}],te=[{code:200,msg:"",desc:"",text:"操作成功",type:"time"},{code:10001,msg:"播放失败",desc:"参数为空或格式不正确",text:"参数错误",type:"time"},{code:10002,msg:"账号异常，播放失败",desc:"",text:"accessToken异常或过期",type:"time"},{code:10004,msg:"账号异常，播放失败",desc:"",text:"用户不存在",type:"time"},{code:10005,msg:"账号异常，播放失败",desc:"",text:"appKey异常",type:"time"},{code:10011,msg:"播放失败",desc:"设备对应用户未注册至应用下",text:"未开通萤石服务",type:"time"},{code:10013,msg:"账号异常，播放失败",desc:"",text:"非开发者账号无权限调用",type:"time"},{code:10030,msg:"播放失败",desc:"",text:"appkey和appsecret不匹配",type:"time"},{code:20002,msg:"设备不存在请检查设备连接情况",desc:"设备序列号输入有误或者设备未被添加或者通道异常",text:"设备不存在",type:"time"},{code:20014,msg:"播放失败",desc:"",text:"deviceSerial不合法",type:"time"},{code:20032,msg:"设备不存在请检查设备连接情况",desc:"",text:"该用户下通道不存在",type:"time"},{code:60024,msg:"播放失败请重试",desc:"",text:"取消订阅操作失败",type:"time"},{code:49999,msg:"播放失败请重试",desc:"",text:"操作异常",type:"time"}],ne={ptzStart:X,ptzStop:Q,talk:ee,time:te},ie=function(){function e(t,n){c(this,e),this.coreX=t,this.coreY=n,console.log("uikitCode",ne)}return m(e,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"matchInfo",value:function(e,t){if(ne[t]){var n={};return ne[t].map((function(t){t.code==e&&(n=t)})),n}return{code:500,msg:"未知错误",desc:"未知的错误码，或错误码类型有误",text:"",type:t}}}]),e}(),oe=function(){function e(t){var n=this;if(c(this,e),this.jSPlugin=t,this.codeHandler=new ie,this.pluginStatus=new M(this,this.jSPlugin.id),this.showPtz=!1,console.log("云台初始化"),document.getElementById(this.jSPlugin.id+"-ez-ptz-item"))return!1;var i=document.createElement("div");i.id=this.jSPlugin.id+"-ez-ptz-item",i.className="ez-ptz-wrap",i.style="display:none";var o=document.createElement("style");o.innerHTML="\n    .ez-ptz-container {\n      position: relative;\n      width: 80px;\n      height: 80px;\n      background: rgba(255, 255, 255, 0.80);\n      box-shadow: 0px 0px 33px 4px rgb(0 0 0 / 15%);\n      border: 1px solid rgba(255, 255, 255, 0.80);\n      border-radius: 100%;\n      cursor: pointer;\n      overflow: hidden;\n      user-select: none;\n    }\n    .ez-ptz-container .ez-ptz-icon.top {\n      width: 0;\n      height: 0;\n      border-left: 3px solid transparent;\n      border-right: 3px solid transparent;\n      border-bottom: 6px solid #333333;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 3px);\n      top: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.top.active {\n      border-bottom-color: #1890FF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.bottom {\n      width: 0;\n      height: 0;\n      border-left: 3px solid transparent;\n      border-right: 3px solid transparent;\n      border-top: 6px solid #333333;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 3px);\n      bottom: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.bottom.active {\n      border-top-color: #1890FF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.right {\n      width: 0;\n      height: 0;\n      border-top: 3px solid transparent;\n      border-bottom: 3px solid transparent;\n      border-left: 6px solid #333333;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 3px);\n      right: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.right.active {\n      border-left-color: #1890FF;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.left {\n      width: 0;\n      height: 0;\n      border-top: 3px solid transparent;\n      border-bottom: 3px solid transparent;\n      border-right: 6px solid #333333;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 3px);\n      left: 2px;\n    }\n\n    .ez-ptz-container .ez-ptz-icon.left.active {\n      border-right-color: #1890FF;\n    }\n\n    .ez-ptz-container .ez-ptz-main.center {\n      width: 23px;\n      height: 23px;\n      background: #1890FF;\n      border-radius: 100%;\n      top: calc(50% - 12.3px);\n      left: calc(50% - 12.3px);\n      position: absolute;\n    }\n\n    .ez-ptz-wrap {\n      position: absolute;\n      right: 20px;\n      top: calc(50% - 50px);\n      width: 100px;\n      height: 100px;\n      z-index: 999;\n    }\n\n    .ez-ptz-close {\n      position: absolute;\n      color: #FFFFFF;\n      top: 0;\n      right: 0px;\n    }",document.getElementsByTagName("head")[0].appendChild(o),i.innerHTML='\n      <div class="ez-ptz-container" id="'.concat(this.jSPlugin.id,'-ez-ptz-container" style="position: relative;width: 80px;height: 80px;background: rgba(255, 255, 255, 0.80);box-shadow: 0px 0px 33px 4px rgba(0, 0, 0, 0.15);border: 1px solid rgba(255, 255, 255, 0.80);border-radius: 100%;cursor: pointer;overflow: hidden;user-select: none;">\n        <div class="ez-ptz-main center"></div>\n        <div class="ez-ptz-icon top active"></div>\n        <div class="ez-ptz-icon left active"></div>\n        <div class="ez-ptz-icon bottom active"></div>\n        <div class="ez-ptz-icon right active"></div>\n      '),document.getElementById("".concat(t.id,"-wrap")).appendChild(i),document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).onmousedown=function(e){e.preventDefault(),console.log("触摸开始"),n._handlePtzTouch(e,"start")},document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).onmouseup=function(e){e.preventDefault(),console.log("触摸结束"),n._handlePtzTouch(e,"stop")},document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).ontouchstart=function(e){e.preventDefault(),console.log("触摸开始"),n._handlePtzTouch(e,"start")},document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).ontouchend=function(e){e.preventDefault(),console.log("触摸结束",e),n._handlePtzTouch(e,"stop")}}return m(e,[{key:"show",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-item")).style="display: inline-block",this.showPtz=!0}},{key:"hide",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-item")).style="display: none",this.showPtz=!1}},{key:"_handlePtzTouch",value:function(e,t){var n=this,i=document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).getBoundingClientRect(),o=i.left+41,r=i.top+41,a=e.x||e.changedTouches[0].clientX,s=e.y||e.changedTouches[0].clientY,d=a-o,l=s-r,c=0,u=this.jSPlugin.env.domain+"/api/lapp/device/ptz/start";if(c=Math.abs(d)>Math.abs(l)?d>0?3:2:l>0?1:0,/^rotate\(90/.test(document.getElementById("".concat(this.jSPlugin.id,"-wrap")).style.transform))switch(c){case 0:c=2;break;case 1:c=3;break;case 2:c=1;break;case 3:c=0;break}document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).style="background-image:linear-gradient(".concat(0===c?180:1===c?0:2===c?90:270,"deg, #1d8dd8 0%, rgba(100,143,252,0.00) 30%)"),"stop"===t&&(u=this.jSPlugin.env.domain+"/api/lapp/device/ptz/stop",document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).style="");var m=new FormData;m.append("deviceSerial",k(this.jSPlugin.url).deviceSerial),m.append("channelNo",k(this.jSPlugin.url).channelNo),m.append("speed",1),m.append("direction",c),m.append("accessToken",this.jSPlugin.accessToken),fetch(u,{method:"POST",body:m}).then((function(e){return e.json()})).then((function(e){200==e.code||(console.log(e.code,n.codeHandler.matchInfo(e.code,"start"===t?"ptzStart":"ptzStop")),n.pluginStatus.loadingSetText({text:n.codeHandler.matchInfo(e.code,"start"===t?"ptzStart":"ptzStop").msg,color:"red",delayClear:2e3}),60005!=e.code&&60002!=e.code&&60003!=e.code&&60004!=e.code||(document.getElementById("".concat(n.jSPlugin.id,"-ez-ptz-container")).style="background-image:linear-gradient(".concat(0===c?180:1===c?0:2===c?90:270,"deg, #f45656 0%, rgba(100,143,252,0.00) 30%)")))}))["catch"]((function(e){console.log("云台调用异常",e)}))}}]),e}();(function(e){"object"===l(t)&&"undefined"!==typeof n?n.exports=e():(o=[],i=e,r="function"===typeof i?i.apply(t,o):i,void 0===r||(n.exports=r))})((function(){return function(){function e(t,n,i){function o(s,d){if(!n[s]){if(!t[s]){var l="function"==typeof a&&a;if(!d&&l)return a(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){var n=t[s][1][e];return o(n||e)}),u,u.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof a&&a,s=0;s<i.length;s++)o(i[s]);return o}return e}()({1:[function(e,t,n){var i=e("./adapter_factory.js"),o=(0,i.adapterFactory)({window:window});window.adapter=o,t.exports=o},{"./adapter_factory.js":2}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=g;var i=e("./utils"),o=f(i),r=e("./chrome/chrome_shim"),a=f(r),s=e("./edge/edge_shim"),d=f(s),l=e("./firefox/firefox_shim"),c=f(l),u=e("./safari/safari_shim"),m=f(u),p=e("./common_shim"),h=f(p);function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},i=o.log,r=o.detectBrowser(t),s={browserDetails:r,commonShim:h,extractVersion:o.extractVersion,disableLog:o.disableLog,disableWarnings:o.disableWarnings};switch(r.browser){case"chrome":if(!a||!a.shimPeerConnection||!n.shimChrome)return i("Chrome shim is not included in this adapter release."),s;i("adapter.js shimming chrome."),s.browserShim=a,a.shimGetUserMedia(t),a.shimMediaStream(t),a.shimPeerConnection(t),a.shimOnTrack(t),a.shimAddTrackRemoveTrack(t),a.shimGetSendersWithDtmf(t),a.shimGetStats(t),a.shimSenderReceiverGetStats(t),a.fixNegotiationNeeded(t),h.shimRTCIceCandidate(t),h.shimConnectionState(t),h.shimMaxMessageSize(t),h.shimSendThrowTypeError(t),h.removeAllowExtmapMixed(t);break;case"firefox":if(!c||!c.shimPeerConnection||!n.shimFirefox)return i("Firefox shim is not included in this adapter release."),s;i("adapter.js shimming firefox."),s.browserShim=c,c.shimGetUserMedia(t),c.shimPeerConnection(t),c.shimOnTrack(t),c.shimRemoveStream(t),c.shimSenderGetStats(t),c.shimReceiverGetStats(t),c.shimRTCDataChannel(t),c.shimAddTransceiver(t),c.shimCreateOffer(t),c.shimCreateAnswer(t),h.shimRTCIceCandidate(t),h.shimConnectionState(t),h.shimMaxMessageSize(t),h.shimSendThrowTypeError(t);break;case"edge":if(!d||!d.shimPeerConnection||!n.shimEdge)return i("MS edge shim is not included in this adapter release."),s;i("adapter.js shimming edge."),s.browserShim=d,d.shimGetUserMedia(t),d.shimGetDisplayMedia(t),d.shimPeerConnection(t),d.shimReplaceTrack(t),h.shimMaxMessageSize(t),h.shimSendThrowTypeError(t);break;case"safari":if(!m||!n.shimSafari)return i("Safari shim is not included in this adapter release."),s;i("adapter.js shimming safari."),s.browserShim=m,m.shimRTCIceServerUrls(t),m.shimCreateOfferLegacy(t),m.shimCallbacksAPI(t),m.shimLocalStreamsAPI(t),m.shimRemoteStreamsAPI(t),m.shimTrackEventTransceiver(t),m.shimGetUserMedia(t),h.shimRTCIceCandidate(t),h.shimMaxMessageSize(t),h.shimSendThrowTypeError(t),h.removeAllowExtmapMixed(t);break;default:i("Unsupported browser!");break}return s}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var i="function"===typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return l(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":l(e)},o=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}});var r=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}}),n.shimMediaStream=u,n.shimOnTrack=m,n.shimGetSendersWithDtmf=p,n.shimGetStats=h,n.shimSenderReceiverGetStats=f,n.shimAddTrackRemoveTrackWithNative=g,n.shimAddTrackRemoveTrack=v,n.shimPeerConnection=y,n.fixNegotiationNeeded=S;var a=e("../utils.js"),s=d(a);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function m(e){if("object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(i){var o=void 0;o=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===i.track.id})):{track:i.track};var r=new Event("track");r.track=i.track,r.receiver=o,r.transceiver={receiver:o},r.streams=[t.stream],n.dispatchEvent(r)})),t.stream.getTracks().forEach((function(i){var o=void 0;o=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===i.id})):{track:i};var r=new Event("track");r.track=i,r.receiver=o,r.transceiver={receiver:o},r.streams=[t.stream],n.dispatchEvent(r)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else s.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function p(e){if("object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){var o=n.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){o.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function h(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),i=n[0],o=n[1],r=n[2];if(arguments.length>0&&"function"===typeof i)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof i))return t.apply(this,[]);var a=function(e){var t={},n=e.result();return n.forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var d=function(e){o(s(a(e)))};return t.apply(this,[d,i])}return new Promise((function(n,i){t.apply(e,[function(e){n(s(a(e)))},i])})).then(o,r)}}}function f(e){if("object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var o=e.RTCPeerConnection.prototype.getReceivers;o&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=o.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],n=void 0,i=void 0,o=void 0;return this.getSenders().forEach((function(e){e.track===t&&(n?o=!0:n=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(i?o=!0:i=e),e.track===t})),o||n&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return r.apply(this,arguments)}}}}function g(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var i=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));if(n)throw new DOMException("Track already exists.","InvalidAccessError")}));var i=this.getSenders();n.apply(this,arguments);var o=this.getSenders().filter((function(e){return-1===i.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(o)};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var i=t._shimmedLocalStreams[n].indexOf(e);-1!==i&&t._shimmedLocalStreams[n].splice(i,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),o.apply(this,arguments)}}function v(e){if(e.RTCPeerConnection){var t=s.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return g(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){var t=n.getSenders().find((function(t){return t.track===e}));if(t)throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var o=new e.MediaStream(t.getTracks());this._streams[t.id]=o,this._reverseStreams[o.id]=t,t=o}i.apply(this,[t])};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var i=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var o=[].slice.call(arguments,1);if(1!==o.length||!o[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var r=this.getSenders().find((function(e){return e.track===t}));if(r)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var a=this._streams[n.id];if(a)a.addTrack(t),Promise.resolve().then((function(){i.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=c({},t,(function(){var e=this,t=arguments,i=arguments.length&&"function"===typeof arguments[0];return i?n.apply(this,[function(n){var i=d(e,n);t[0].apply(null,[i])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return d(e,t)}))}));e.RTCPeerConnection.prototype[t]=i[t]}));var r=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=l(this,arguments[0]),r.apply(this,arguments)):r.apply(this,arguments)};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:d(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");var n=e._pc===this;if(!n)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var i=void 0;Object.keys(this._streams).forEach((function(n){var o=t._streams[n].getTracks().find((function(t){return e.track===t}));o&&(i=t._streams[n])})),i&&(1===i.getTracks().length?this.removeStream(this._reverseStreams[i.id]):i.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function d(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var i=e._reverseStreams[t],o=e._streams[i.id];n=n.replace(new RegExp(o.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function l(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var i=e._reverseStreams[t],o=e._streams[i.id];n=n.replace(new RegExp(i.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function y(e){var t=s.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=i[t]}));var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}function S(e){s.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var t=e.target;if("stable"===t.signalingState)return e}))}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,n){function i(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var i=n.video&&n.video.width,o=n.video&&n.video.height,r=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:r||3}},i&&(n.video.mandatory.maxWidth=i),o&&(n.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=i},{}],5:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return l(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":l(e)};n.shimGetUserMedia=d;var o=e("../utils.js"),r=a(o);function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var s=r.log;function d(e){var t=e&&e.navigator;if(t.mediaDevices){var n=r.detectBrowser(e),o=function(e){if("object"!==("undefined"===typeof e?"undefined":i(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var o="object"===i(e[n])?e[n]:{ideal:e[n]};void 0!==o.exact&&"number"===typeof o.exact&&(o.min=o.max=o.exact);var r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==o.ideal){t.optional=t.optional||[];var a={};"number"===typeof o.ideal?(a[r("min",n)]=o.ideal,t.optional.push(a),a={},a[r("max",n)]=o.ideal,t.optional.push(a)):(a[r("",n)]=o.ideal,t.optional.push(a))}void 0!==o.exact&&"number"!==typeof o.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",n)]=o.exact):["min","max"].forEach((function(e){void 0!==o[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,n)]=o[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,r){if(n.version>=61)return r(e);if(e=JSON.parse(JSON.stringify(e)),e&&"object"===i(e.audio)){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=o(e.audio)}if(e&&"object"===i(e.video)){var d=e.video.facingMode;d=d&&("object"===("undefined"===typeof d?"undefined":i(d))?d:{ideal:d});var l=n.version<66;if(d&&("user"===d.exact||"environment"===d.exact||"user"===d.ideal||"environment"===d.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||l)){delete e.video.facingMode;var c=void 0;if("environment"===d.exact||"environment"===d.ideal?c=["back","rear"]:"user"!==d.exact&&"user"!==d.ideal||(c=["front"]),c)return t.mediaDevices.enumerateDevices().then((function(t){t=t.filter((function(e){return"videoinput"===e.kind}));var n=t.find((function(e){return c.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&c.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=d.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=o(e.video),s("chrome: "+JSON.stringify(e)),r(e)}))}e.video=o(e.video)}return s("chrome: "+JSON.stringify(e)),r(e)},d=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},l=function(e,n,i){a(e,(function(e){t.webkitGetUserMedia(e,n,(function(e){i&&i(d(e))}))}))};if(t.getUserMedia=l.bind(t),t.mediaDevices.getUserMedia){var c=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return c(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(d(e))}))}))}}}}},{"../utils.js":15}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return l(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":l(e)};n.shimRTCIceCandidate=u,n.shimMaxMessageSize=m,n.shimSendThrowTypeError=p,n.shimConnectionState=h,n.removeAllowExtmapMixed=f;var o=e("sdp"),r=c(o),a=e("./utils"),s=d(a);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===("undefined"===typeof e?"undefined":i(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&(e=JSON.parse(JSON.stringify(e)),e.candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),o=r["default"].parseCandidate(e.candidate),a=Object.assign(n,o);return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,s.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function m(e){if(e.RTCPeerConnection){var t=s.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=r["default"].splitSections(e.sdp);return t.shift(),t.some((function(e){var t=r["default"].parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!==n?-1:n},o=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},a=function(e,n){var i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);var o=r["default"].matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?i=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i},d=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),r=e.sdpSemantics;"plan-b"===r&&Object.defineProperty(this,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var s=i(arguments[0]),l=o(s),c=a(arguments[0],s),u=void 0;u=0===l&&0===c?Number.POSITIVE_INFINITY:0===l||0===c?Math.max(l,c):Math.min(l,c);var m={};Object.defineProperty(m,"maxMessageSize",{get:function(){return u}}),this._sctp=m}return d.apply(this,arguments)}}}function p(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},s.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var i=arguments[0],o=i.length||i.size||i.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function h(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function f(e){if(e.RTCPeerConnection){var t=s.detectBrowser(e);if(!("chrome"===t.browser&&t.version>=71)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n")),n.apply(this,arguments)}}}}},{"./utils":15,sdp:17}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimPeerConnection=m,n.shimReplaceTrack=p;var r=e("../utils"),a=u(r),s=e("./filtericeservers"),d=e("rtcpeerconnection-shim"),l=c(d);function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function m(e){var t=a.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var i=(0,l["default"])(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,s.filterIceServers)(e.iceServers,t.version),a.log("ICE servers after filtering:",e.iceServers)),new i(e)},e.RTCPeerConnection.prototype=i.prototype}function p(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.filterIceServers=a;var i=e("../utils"),o=r(i);function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e,t){var n=!1;return e=JSON.parse(JSON.stringify(e)),e.filter((function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&o.deprecated("RTCIceServer.url","RTCIceServer.urls");var i="string"===typeof t;return i&&(t=[t]),t=t.filter((function(e){if(0===e.indexOf("stun:"))return!1;var t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=i?t[0]:t,!!t.length}}))}},{"../utils":15}],9:[function(e,t,n){function i(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=i},{}],10:[function(e,t,n){function i(e){var t=e&&e.navigator,n=function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},i=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return i(e)["catch"]((function(e){return Promise.reject(n(e))}))}}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetUserMedia=i},{}],11:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var i="function"===typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return l(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":l(e)},o=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}});var r=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}}),n.shimOnTrack=u,n.shimPeerConnection=m,n.shimSenderGetStats=p,n.shimReceiverGetStats=h,n.shimRemoveStream=f,n.shimRTCDataChannel=g,n.shimAddTransceiver=v,n.shimCreateOffer=y,n.shimCreateAnswer=S;var a=e("../utils"),s=d(a);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){"object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function m(e){var t=s.detectBrowser(e);if("object"===("undefined"===typeof e?"undefined":i(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=i[t]})),t.version<68){var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var o={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),n=e[0],i=e[1],a=e[2];return r.apply(this,[n||null]).then((function(e){if(t.version<53&&!i)try{e.forEach((function(e){e.type=o[e.type]||e.type}))}catch(n){if("TypeError"!==n.name)throw n;e.forEach((function(t,n){e.set(n,Object.assign({},t,{type:o[t.type]||t.type}))}))}return e})).then(i,a)}}}function p(e){if("object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function h(e){if("object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function f(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;s.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function g(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function v(e){if("object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e){var t=/^[a-z0-9]{0,16}$/i;if(!t.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var i=t.apply(this,arguments);if(n){var o=i.sender,r=o.getParameters();"encodings"in r||(r.encodings=e.sendEncodings,this.setParametersPromises.push(o.setParameters(r)["catch"]((function(){}))))}return i})}}function y(e){if("object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)}))["finally"]((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}function S(e){if("object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)}))["finally"]((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(e,t,n){function i(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=i},{}],13:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return l(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":l(e)};n.shimGetUserMedia=s;var o=e("../utils"),r=a(o);function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function s(e){var t=r.detectBrowser(e),n=e&&e.navigator,o=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===("undefined"===typeof e?"undefined":i(e))&&"object"===i(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),s(e)},o&&o.prototype.getSettings){var d=o.prototype.getSettings;o.prototype.getSettings=function(){var e=d.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var l=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===("undefined"===typeof e?"undefined":i(e))&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[e])}}}}},{"../utils":15}],14:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return l(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":l(e)};n.shimLocalStreamsAPI=s,n.shimRemoteStreamsAPI=d,n.shimCallbacksAPI=c,n.shimGetUserMedia=u,n.shimConstraints=m,n.shimRTCIceServerUrls=p,n.shimTrackEventTransceiver=h,n.shimCreateOfferLegacy=f;var o=e("../utils"),r=a(o);function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function s(e){if("object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(i){return t.call(n,i,e)})),e.getVideoTracks().forEach((function(i){return t.call(n,i,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){var n=arguments[1];return n&&(this._localStreams?this._localStreams.includes(n)||this._localStreams.push(n):this._localStreams=[n]),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var i=e.getTracks();this.getSenders().forEach((function(e){i.includes(e.track)&&t.removeTrack(e)}))}})}}function d(e){if("object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function c(e){if("object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,o=t.createAnswer,r=t.setLocalDescription,a=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var i=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[i]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=o.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var d=function(e,t,n){var i=r.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=d,d=function(e,t,n){var i=a.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=d,d=function(e,t,n){var i=s.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=d}}function u(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,i=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return i(m(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}.bind(t))}function m(e){return e&&void 0!==e.video?Object.assign({},e,{video:r.compactObject(e.video)}):e}function p(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var i=[],o=0;o<e.iceServers.length;o++){var a=e.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,i.push(a)):i.push(e.iceServers[o])}e.iceServers=i}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}function h(e){"object"===("undefined"===typeof e?"undefined":i(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function f(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var i=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveVideo||i||this.addTransceiver("video")}return t.apply(this,arguments)}}},{"../utils":15}],15:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return l(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":l(e)};function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.extractVersion=s,n.wrapPeerConnectionEvent=d,n.disableLog=c,n.disableWarnings=u,n.log=m,n.deprecated=p,n.detectBrowser=h,n.compactObject=g,n.walkStats=v,n.filterStats=y;var r=!0,a=!0;function s(e,t,n){var i=e.match(t);return i&&i.length>=n&&parseInt(i[n],10)}function d(e,t,n){if(e.RTCPeerConnection){var i=e.RTCPeerConnection.prototype,o=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return o.apply(this,arguments);var r=function(e){var t=n(e);t&&i(t)};return this._eventMap=this._eventMap||{},this._eventMap[i]=r,o.apply(this,[e,r])};var r=i.removeEventListener;i.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return r.apply(this,arguments);var i=this._eventMap[n];return delete this._eventMap[n],r.apply(this,[e,i])},Object.defineProperty(i,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function c(e){return"boolean"!==typeof e?new Error("Argument type: "+("undefined"===typeof e?"undefined":i(e))+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function u(e){return"boolean"!==typeof e?new Error("Argument type: "+("undefined"===typeof e?"undefined":i(e))+". Please use a boolean."):(a=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function m(){if("object"===("undefined"===typeof window?"undefined":i(window))){if(r)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function p(e,t){a&&console.warn(e+" is deprecated, please use "+t+" instead.")}function h(e){var t=e.navigator,n={browser:null,version:null};if("undefined"===typeof e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=s(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=s(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=s(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=s(t.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n}function f(e){return"[object Object]"===Object.prototype.toString.call(e)}function g(e){return f(e)?Object.keys(e).reduce((function(t,n){var i=f(e[n]),r=i?g(e[n]):e[n],a=i&&!Object.keys(r).length;return void 0===r||a?t:Object.assign(t,o({},n,r))}),{}):e}function v(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(i){i.endsWith("Id")?v(e,e.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach((function(t){v(e,e.get(t),n)}))})))}function y(e,t,n){var i=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;var r=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&r.push(e)})),r.forEach((function(t){e.forEach((function(n){n.type===i&&n.trackId===t.id&&v(e,n,o)}))})),o}},{}],16:[function(e,t,n){var i=e("sdp");function o(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function r(e,t,n,o,r){var a=i.writeRtpDescription(e.kind,t);if(a+=i.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=i.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":r||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var d="msid:"+(o?o.id:"-")+" "+s+"\r\n";a+="a="+d,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+d,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+d,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),a}function a(e,t){var n=!1;return e=JSON.parse(JSON.stringify(e)),e.filter((function(e){if(e&&(e.urls||e.url)){var i=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"===typeof i;return o&&(i=[i]),i=i.filter((function(e){var i=0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!n;return i?(n=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")})),delete e.url,e.urls=o?i[0]:i,!!i.length}}))}function s(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},o=function(e,t,n,o){var r=i(e.parameters.apt,n),a=i(t.parameters.apt,o);return r&&a&&r.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(i){for(var r=0;r<t.codecs.length;r++){var a=t.codecs[r];if(i.name.toLowerCase()===a.name.toLowerCase()&&i.clockRate===a.clockRate){if("rtx"===i.name.toLowerCase()&&i.parameters&&a.parameters.apt&&!o(i,a,e.codecs,t.codecs))continue;a=JSON.parse(JSON.stringify(a)),a.numChannels=Math.min(i.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<i.rtcpFeedback.length;t++)if(i.rtcpFeedback[t].type===e.type&&i.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var i=0;i<t.headerExtensions.length;i++){var o=t.headerExtensions[i];if(e.uri===o.uri){n.headerExtensions.push(o);break}}})),n}function d(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function l(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}t.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}function m(t,n,i,o){var r=new Event("track");r.track=n,r.receiver=i,r.transceiver={receiver:i},r.streams=o,e.setTimeout((function(){t._dispatchEvent("track",r)}))}var p=function(n){var o=this,r=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){o[e]=r[e].bind(r)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all";break}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced";break}if(n.iceServers=a(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var s=n.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=i.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(p.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(p.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),p.prototype.onicecandidate=null,p.prototype.onaddstream=null,p.prototype.ontrack=null,p.prototype.onremovestream=null,p.prototype.onsignalingstatechange=null,p.prototype.oniceconnectionstatechange=null,p.prototype.onconnectionstatechange=null,p.prototype.onicegatheringstatechange=null,p.prototype.onnegotiationneeded=null,p.prototype.ondatachannel=null,p.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"===typeof this["on"+e]&&this["on"+e](t))},p.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},p.prototype.getConfiguration=function(){return this._config},p.prototype.getLocalStreams=function(){return this.localStreams},p.prototype.getRemoteStreams=function(){return this.remoteStreams},p.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,i={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)i.iceTransport=this.transceivers[0].iceTransport,i.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();i.iceTransport=o.iceTransport,i.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(i),i},p.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var i,o=this.transceivers.find((function(e){return e.track===t}));if(o)throw c("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(i=this.transceivers[r]);return i||(i=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),i.track=t,i.stream=n,i.rtpSender=new e.RTCRtpSender(t,i.dtlsTransport),i.rtpSender},p.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var i=e.clone();e.getTracks().forEach((function(e,t){var n=i.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),i.getTracks().forEach((function(e){n.addTrack(e,i)}))}},p.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var i=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null;var o=this.transceivers.map((function(e){return e.stream}));-1===o.indexOf(i)&&this.localStreams.indexOf(i)>-1&&this.localStreams.splice(this.localStreams.indexOf(i),1),this._maybeFireNegotiationNeeded()},p.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},p.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},p.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},p.prototype._createIceGatherer=function(t,n){var i=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;o.state=n?"completed":"gathering",null!==i.transceivers[t].bufferedCandidateEvents&&i.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},p.prototype._gather=function(t,n){var o=this,r=this.transceivers[n].iceGatherer;if(!r.onlocalcandidate){var a=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,r.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),r.onlocalcandidate=function(e){if(!(o.usingBundle&&n>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,d=!s||0===Object.keys(s).length;if(d)"new"!==r.state&&"gathering"!==r.state||(r.state="completed");else{"new"===r.state&&(r.state="gathering"),s.component=1,s.ufrag=r.getLocalParameters().usernameFragment;var l=i.writeCandidate(s);a.candidate=Object.assign(a.candidate,i.parseCandidate(l)),a.candidate.candidate=l,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var c=i.getMediaSections(o._localDescription.sdp);c[a.candidate.sdpMLineIndex]+=d?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",o._localDescription.sdp=i.getDescription(o._localDescription.sdp)+c.join("");var u=o.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),d||o._dispatchEvent("icecandidate",a),u&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){r.onlocalcandidate(e)}))}),0)}},p.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var i=new e.RTCDtlsTransport(n);return i.ondtlsstatechange=function(){t._updateConnectionState()},i.onerror=function(){Object.defineProperty(i,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:i}},p.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var i=this.transceivers[e].dtlsTransport;i&&(delete i.ondtlsstatechange,delete i.onerror,delete this.transceivers[e].dtlsTransport)},p.prototype._transceive=function(e,n,o){var r=s(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(r.encodings=e.sendEncodingParameters,r.rtcp={cname:i.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(r.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(r)),o&&e.rtpReceiver&&r.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?r.encodings=e.recvEncodingParameters:r.encodings=[{}],r.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(r.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(r.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(r))},p.prototype.setLocalDescription=function(e){var t,n,o=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!d("setLocalDescription",e.type,o.signalingState)||o._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+o.signalingState));if("offer"===e.type)t=i.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=i.parseRtpParameters(e);o.transceivers[t].localCapabilities=n})),o.transceivers.forEach((function(e,t){o._gather(e.mid,t)}));else if("answer"===e.type){t=i.splitSections(o._remoteDescription.sdp),n=t.shift();var r=i.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var a=o.transceivers[t],d=a.iceGatherer,l=a.iceTransport,c=a.dtlsTransport,u=a.localCapabilities,m=a.remoteCapabilities,p=i.isRejected(e)&&0===i.matchPrefix(e,"a=bundle-only").length;if(!p&&!a.rejected){var h=i.getIceParameters(e,n),f=i.getDtlsParameters(e,n);r&&(f.role="server"),o.usingBundle&&0!==t||(o._gather(a.mid,t),"new"===l.state&&l.start(d,h,r?"controlling":"controlled"),"new"===c.state&&c.start(f));var g=s(u,m);o._transceive(a,g.codecs.length>0,!1)}}))}return o._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?o._updateSignalingState("have-local-offer"):o._updateSignalingState("stable"),Promise.resolve()},p.prototype.setRemoteDescription=function(o){var r=this;if(-1===["offer","answer"].indexOf(o.type))return Promise.reject(c("TypeError",'Unsupported type "'+o.type+'"'));if(!d("setRemoteDescription",o.type,r.signalingState)||r._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+o.type+" in state "+r.signalingState));var a={};r.remoteStreams.forEach((function(e){a[e.id]=e}));var p=[],h=i.splitSections(o.sdp),f=h.shift(),g=i.matchPrefix(f,"a=ice-lite").length>0,v=i.matchPrefix(f,"a=group:BUNDLE ").length>0;r.usingBundle=v;var y=i.matchPrefix(f,"a=ice-options:")[0];return r.canTrickleIceCandidates=!!y&&y.substr(14).split(" ").indexOf("trickle")>=0,h.forEach((function(d,c){var m=i.splitLines(d),h=i.getKind(d),y=i.isRejected(d)&&0===i.matchPrefix(d,"a=bundle-only").length,S=m[0].substr(2).split(" ")[2],b=i.getDirection(d,f),T=i.parseMsid(d),w=i.getMid(d)||i.generateIdentifier();if(y||"application"===h&&("DTLS/SCTP"===S||"UDP/DTLS/SCTP"===S))r.transceivers[c]={mid:w,kind:h,protocol:S,rejected:!0};else{var C,_,E,k,P,I,x,R,A;!y&&r.transceivers[c]&&r.transceivers[c].rejected&&(r.transceivers[c]=r._createTransceiver(h,!0));var D,j,L=i.parseRtpParameters(d);y||(D=i.getIceParameters(d,f),j=i.getDtlsParameters(d,f),j.role="client"),x=i.parseRtpEncodingParameters(d);var M=i.parseRtcpParameters(d),N=i.matchPrefix(d,"a=end-of-candidates",f).length>0,B=i.matchPrefix(d,"a=candidate:").map((function(e){return i.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===o.type||"answer"===o.type)&&!y&&v&&c>0&&r.transceivers[c]&&(r._disposeIceAndDtlsTransports(c),r.transceivers[c].iceGatherer=r.transceivers[0].iceGatherer,r.transceivers[c].iceTransport=r.transceivers[0].iceTransport,r.transceivers[c].dtlsTransport=r.transceivers[0].dtlsTransport,r.transceivers[c].rtpSender&&r.transceivers[c].rtpSender.setTransport(r.transceivers[0].dtlsTransport),r.transceivers[c].rtpReceiver&&r.transceivers[c].rtpReceiver.setTransport(r.transceivers[0].dtlsTransport)),"offer"!==o.type||y){if("answer"===o.type&&!y){C=r.transceivers[c],_=C.iceGatherer,E=C.iceTransport,k=C.dtlsTransport,P=C.rtpReceiver,I=C.sendEncodingParameters,R=C.localCapabilities,r.transceivers[c].recvEncodingParameters=x,r.transceivers[c].remoteCapabilities=L,r.transceivers[c].rtcpParameters=M,B.length&&"new"===E.state&&(!g&&!N||v&&0!==c?B.forEach((function(e){l(C.iceTransport,e)})):E.setRemoteCandidates(B)),v&&0!==c||("new"===E.state&&E.start(_,D,"controlling"),"new"===k.state&&k.start(j));var O=s(C.localCapabilities,C.remoteCapabilities),z=O.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length;!z&&C.sendEncodingParameters[0].rtx&&delete C.sendEncodingParameters[0].rtx,r._transceive(C,"sendrecv"===b||"recvonly"===b,"sendrecv"===b||"sendonly"===b),!P||"sendrecv"!==b&&"sendonly"!==b?delete C.rtpReceiver:(A=P.track,T?(a[T.stream]||(a[T.stream]=new e.MediaStream),n(A,a[T.stream]),p.push([A,P,a[T.stream]])):(a["default"]||(a["default"]=new e.MediaStream),n(A,a["default"]),p.push([A,P,a["default"]])))}}else{C=r.transceivers[c]||r._createTransceiver(h),C.mid=w,C.iceGatherer||(C.iceGatherer=r._createIceGatherer(c,v)),B.length&&"new"===C.iceTransport.state&&(!N||v&&0!==c?B.forEach((function(e){l(C.iceTransport,e)})):C.iceTransport.setRemoteCandidates(B)),R=e.RTCRtpReceiver.getCapabilities(h),t<15019&&(R.codecs=R.codecs.filter((function(e){return"rtx"!==e.name}))),I=C.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var F,U=!1;if("sendrecv"===b||"sendonly"===b){if(U=!C.rtpReceiver,P=C.rtpReceiver||new e.RTCRtpReceiver(C.dtlsTransport,h),U)A=P.track,T&&"-"===T.stream||(T?(a[T.stream]||(a[T.stream]=new e.MediaStream,Object.defineProperty(a[T.stream],"id",{get:function(){return T.stream}})),Object.defineProperty(A,"id",{get:function(){return T.track}}),F=a[T.stream]):(a["default"]||(a["default"]=new e.MediaStream),F=a["default"])),F&&(n(A,F),C.associatedRemoteMediaStreams.push(F)),p.push([A,P,F])}else C.rtpReceiver&&C.rtpReceiver.track&&(C.associatedRemoteMediaStreams.forEach((function(e){var t=e.getTracks().find((function(e){return e.id===C.rtpReceiver.track.id}));t&&u(t,e)})),C.associatedRemoteMediaStreams=[]);C.localCapabilities=R,C.remoteCapabilities=L,C.rtpReceiver=P,C.rtcpParameters=M,C.sendEncodingParameters=I,C.recvEncodingParameters=x,r._transceive(r.transceivers[c],!1,U)}}})),void 0===r._dtlsRole&&(r._dtlsRole="offer"===o.type?"active":"passive"),r._remoteDescription={type:o.type,sdp:o.sdp},"offer"===o.type?r._updateSignalingState("have-remote-offer"):r._updateSignalingState("stable"),Object.keys(a).forEach((function(t){var n=a[t];if(n.getTracks().length){if(-1===r.remoteStreams.indexOf(n)){r.remoteStreams.push(n);var i=new Event("addstream");i.stream=n,e.setTimeout((function(){r._dispatchEvent("addstream",i)}))}p.forEach((function(e){var t=e[0],i=e[1];n.id===e[2].id&&m(r,t,i,[n])}))}})),p.forEach((function(e){e[2]||m(r,e[0],e[1],[])})),e.setTimeout((function(){r&&r.transceivers&&r.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},p.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},p.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},p.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},p.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t["new"]>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},p.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t["new"]>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},p.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter((function(e){return"audio"===e.kind})).length,a=n.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(o=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}n.transceivers.forEach((function(e){"audio"===e.kind?(o--,o<0&&(e.wantReceive=!1)):"video"===e.kind&&(a--,a<0&&(e.wantReceive=!1))}));while(o>0||a>0)o>0&&(n._createTransceiver("audio"),o--),a>0&&(n._createTransceiver("video"),a--);var d=i.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(o,r){var a=o.track,s=o.kind,d=o.mid||i.generateIdentifier();o.mid=d,o.iceGatherer||(o.iceGatherer=n._createIceGatherer(r,n.usingBundle));var l=e.RTCRtpSender.getCapabilities(s);t<15019&&(l.codecs=l.codecs.filter((function(e){return"rtx"!==e.name}))),l.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),o.remoteCapabilities&&o.remoteCapabilities.codecs&&o.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),l.headerExtensions.forEach((function(e){var t=o.remoteCapabilities&&o.remoteCapabilities.headerExtensions||[];t.forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var c=o.sendEncodingParameters||[{ssrc:1001*(2*r+1)}];a&&t>=15019&&"video"===s&&!c[0].rtx&&(c[0].rtx={ssrc:c[0].ssrc+1}),o.wantReceive&&(o.rtpReceiver=new e.RTCRtpReceiver(o.dtlsTransport,s)),o.localCapabilities=l,o.sendEncodingParameters=c})),"max-compat"!==n._config.bundlePolicy&&(d+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),d+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){d+=r(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),d+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,d+="a="+i.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(d+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:d});return Promise.resolve(l)},p.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var o=i.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(o+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),o+="a=ice-options:trickle\r\n";var a=i.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,i){if(!(i+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?o+="m=application 0 DTLS/SCTP 5000\r\n":o+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?o+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(o+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(o+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var d;if(e.stream)"audio"===e.kind?d=e.stream.getAudioTracks()[0]:"video"===e.kind&&(d=e.stream.getVideoTracks()[0]),d&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var l=s(e.localCapabilities,e.remoteCapabilities),c=l.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length;!c&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,o+=r(e,l,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(o+="a=rtcp-rsize\r\n")}}));var d=new e.RTCSessionDescription({type:"answer",sdp:o});return Promise.resolve(d)},p.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(o,r){if(!n._remoteDescription)return r(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var s=0;s<n.transceivers.length;s++)if(n.transceivers[s].mid===e.sdpMid){a=s;break}var d=n.transceivers[a];if(!d)return r(c("OperationError","Can not add ICE candidate"));if(d.rejected)return o();var u=Object.keys(e.candidate).length>0?i.parseCandidate(e.candidate):{};if("tcp"===u.protocol&&(0===u.port||9===u.port))return o();if(u.component&&1!==u.component)return o();if((0===a||a>0&&d.iceTransport!==n.transceivers[0].iceTransport)&&!l(d.iceTransport,u))return r(c("OperationError","Can not add ICE candidate"));var m=e.candidate.trim();0===m.indexOf("a=")&&(m=m.substr(2)),t=i.getMediaSections(n._remoteDescription.sdp),t[a]+="a="+(u.type?m:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=i.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length;p++)if(!n.transceivers[p].rejected&&(n.transceivers[p].iceTransport.addRemoteCandidate({}),t=i.getMediaSections(n._remoteDescription.sdp),t[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=i.getDescription(n._remoteDescription.sdp)+t.join(""),n.usingBundle))break;o()}))},p.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var i=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&i.push(e[t].getStats())}))})),Promise.all(i).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};var h=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];h.forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var i=n.prototype.getStats;n.prototype.getStats=function(){return i.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){e[n].type=o(e[n]),t.set(n,e[n])})),t}))}}}));var f=["createOffer","createAnswer"];return f.forEach((function(e){var t=p.prototype[e];p.prototype[e]=function(){var e=arguments;return"function"===typeof e[0]||"function"===typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"===typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"===typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),f=["setLocalDescription","setRemoteDescription","addIceCandidate"],f.forEach((function(e){var t=p.prototype[e];p.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]||"function"===typeof e[2]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)}),(function(t){"function"===typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=p.prototype[e];p.prototype[e]=function(){var e=arguments;return"function"===typeof e[1]?t.apply(this,arguments).then((function(){"function"===typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),p}},{sdp:17}],17:[function(e,t,n){var i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},i.splitSections=function(e){var t=e.split("\nm=");return t.map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},i.getDescription=function(e){var t=i.splitSections(e);return t&&t[0]},i.getMediaSections=function(e){var t=i.splitSections(e);return t.shift(),t},i.matchPrefix=function(e,t){return i.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},i.parseCandidate=function(e){var t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");for(var n={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:n[t[i]]=t[i+1];break}return n},i.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},i.parseIceOptions=function(e){return e.substr(14).split(" ")},i.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},i.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},i.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},i.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},i.parseFmtp=function(e){for(var t,n={},i=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<i.length;o++)t=i[o].trim().split("="),n[t[0].trim()]=t[1];return n},i.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},i.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},i.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},i.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},i.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},i.getMid=function(e){var t=i.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},i.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},i.getDtlsParameters=function(e,t){var n=i.matchPrefix(e+t,"a=fingerprint:");return{role:"auto",fingerprints:n.map(i.parseFingerprint)}},i.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},i.getIceParameters=function(e,t){var n=i.splitLines(e);n=n.concat(i.splitLines(t));var o={usernameFragment:n.filter((function(e){return 0===e.indexOf("a=ice-ufrag:")}))[0].substr(12),password:n.filter((function(e){return 0===e.indexOf("a=ice-pwd:")}))[0].substr(10)};return o},i.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},i.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=i.splitLines(e),o=n[0].split(" "),r=3;r<o.length;r++){var a=o[r],s=i.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var d=i.parseRtpMap(s),l=i.matchPrefix(e,"a=fmtp:"+a+" ");switch(d.parameters=l.length?i.parseFmtp(l[0]):{},d.rtcpFeedback=i.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(i.parseRtcpFb),t.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(d.name.toUpperCase());break}}}return i.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(i.parseExtmap(e))})),t},i.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=i.writeRtpMap(e),n+=i.writeFmtp(e),n+=i.writeRtcpFb(e)}));var o=0;return t.codecs.forEach((function(e){e.maxptime>o&&(o=e.maxptime)})),o>0&&(n+="a=maxptime:"+o+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=i.writeExtmap(e)})),n},i.parseRtpEncodingParameters=function(e){var t,n=[],o=i.parseRtpParameters(e),r=-1!==o.fecMechanisms.indexOf("RED"),a=-1!==o.fecMechanisms.indexOf("ULPFEC"),s=i.matchPrefix(e,"a=ssrc:").map((function(e){return i.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),d=s.length>0&&s[0].ssrc,l=i.matchPrefix(e,"a=ssrc-group:FID").map((function(e){var t=e.substr(17).split(" ");return t.map((function(e){return parseInt(e,10)}))}));l.length>0&&l[0].length>1&&l[0][0]===d&&(t=l[0][1]),o.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var i={ssrc:d,codecPayloadType:parseInt(e.parameters.apt,10)};d&&t&&(i.rtx={ssrc:t}),n.push(i),r&&(i=JSON.parse(JSON.stringify(i)),i.fec={ssrc:d,mechanism:a?"red+ulpfec":"red"},n.push(i))}})),0===n.length&&d&&n.push({ssrc:d});var c=i.matchPrefix(e,"b=");return c.length&&(c=0===c[0].indexOf("b=TIAS:")?parseInt(c[0].substr(7),10):0===c[0].indexOf("b=AS:")?1e3*parseInt(c[0].substr(5),10)*.95-16e3:void 0,n.forEach((function(e){e.maxBitrate=c}))),n},i.parseRtcpParameters=function(e){var t={},n=i.matchPrefix(e,"a=ssrc:").map((function(e){return i.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var o=i.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=o.length>0,t.compound=0===o.length;var r=i.matchPrefix(e,"a=rtcp-mux");return t.mux=r.length>0,t},i.parseMsid=function(e){var t,n=i.matchPrefix(e,"a=msid:");if(1===n.length)return t=n[0].substr(7).split(" "),{stream:t[0],track:t[1]};var o=i.matchPrefix(e,"a=ssrc:").map((function(e){return i.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return o.length>0?(t=o[0].value.split(" "),{stream:t[0],track:t[1]}):void 0},i.parseSctpDescription=function(e){var t,n=i.parseMLine(e),o=i.matchPrefix(e,"a=max-message-size:");o.length>0&&(t=parseInt(o[0].substr(19),10)),isNaN(t)&&(t=65536);var r=i.matchPrefix(e,"a=sctp-port:");if(r.length>0)return{port:parseInt(r[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};var a=i.matchPrefix(e,"a=sctpmap:");if(a.length>0){var s=i.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:t}}},i.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(e,t,n){var o,r=void 0!==t?t:2;o=e||i.generateSessionId();var a=n||"thisisadapterortc";return"v=0\r\no="+a+" "+o+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.writeMediaSection=function(e,t,n,o){var r=i.writeRtpDescription(e.kind,t);if(r+=i.writeIceParameters(e.iceGatherer.getLocalParameters()),r+=i.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),r+="a=mid:"+e.mid+"\r\n",e.direction?r+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?r+="a=sendrecv\r\n":e.rtpSender?r+="a=sendonly\r\n":e.rtpReceiver?r+="a=recvonly\r\n":r+="a=inactive\r\n",e.rtpSender){var a="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";r+="a="+a,r+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,r+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return r+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+i.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(r+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+i.localCName+"\r\n"),r},i.getDirection=function(e,t){for(var n=i.splitLines(e),o=0;o<n.length;o++)switch(n[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[o].substr(2)}return t?i.getDirection(t):"sendrecv"},i.getKind=function(e){var t=i.splitLines(e),n=t[0].split(" ");return n[0].substr(2)},i.isRejected=function(e){return"0"===e.split(" ",2)[1]},i.parseMLine=function(e){var t=i.splitLines(e),n=t[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},i.parseOLine=function(e){var t=i.matchPrefix(e,"o=")[0],n=t.substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},i.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var t=i.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"===l(t)&&(t.exports=i)},{}]},{},[1])(1)})),ae.sessions={},ae.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33;return window.navigator.userAgent.match("Linux")&&(t=35),e>=26&&e<=t||ae.extension.isInstalled()}return!0};var re={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){var t=window.setTimeout((function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)}),1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var e={};this.cache=e,window.addEventListener("message",(function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){var n=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){var i=new Error("NavigatorUserMediaError");i.name="You cancelled the request for permission, giving up...",n(i)}else n(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&(console.log("clearing ",t.data.id),window.clearTimeout(t.data.id))}))}};function ae(e){if(void 0===ae.initDone)return e.error("Library not initialized"),{};if(!ae.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(ae.log("Library initialized: "+ae.initDone),e=e||{},e.success="function"==typeof e.success?e.success:ae.noop,e.error="function"==typeof e.error?e.error:ae.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:ae.noop,null===e.server||void 0===e.server)return e.error("Invalid server url"),{};var t=!1,n=null,i={},o=null,r=null,a=0,s=e.server;ae.isArray(s)?(ae.log("Multiple servers provided ("+s.length+"), will use the first that works"),s=null,r=e.server,ae.debug(r)):0===s.indexOf("ws")?(t=!0,ae.log("Using WebSockets to contact Janus: "+s)):(t=!1,ae.log("Using REST API to contact Janus: "+s));var d=e.iceServers;void 0!==d&&null!==d||(d=[{urls:"stun:stun.l.google.com:19302"}]);var c=e.iceTransportPolicy,u=e.bundlePolicy,m=e.ipv6;void 0!==m&&null!==m||(m=!1);var p=!1;void 0!==e.withCredentials&&null!==e.withCredentials&&(p=!0===e.withCredentials);var h=10;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(h=e.max_poll_events),h<1&&(h=1);var f=null;void 0!==e.token&&null!==e.token&&(f=e.token);var g=null;void 0!==e.apisecret&&null!==e.apisecret&&(g=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);var v=25e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(v=e.keepAlivePeriod),isNaN(v)&&(v=25e3);var y=6e4;function S(e){var t={high:9e5,medium:3e5,low:1e5};return void 0!==e&&null!==e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(y=e.longPollTimeout),isNaN(y)&&(y=6e4);var b=!1,T=null,w={},C=this,_=0,E={};function k(){if(null!=T)if(ae.debug("Long poll..."),b){var t=s+"/"+T+"?rid="+(new Date).getTime();void 0!==h&&null!==h&&(t=t+"&maxev="+h),null!==f&&void 0!==f&&(t=t+"&token="+encodeURIComponent(f)),null!==g&&void 0!==g&&(t=t+"&apisecret="+encodeURIComponent(g)),ae.httpAPICall(t,{verb:"GET",withCredentials:p,success:P,timeout:y,error:function(t,n){if(ae.error(t+":",n),_++,_>3)return b=!1,void e.error("Lost connection to the server (is it down?)");k()}})}else ae.warn("Is the server down? (connected=false)")}function P(e,i){if(_=0,t||void 0===T||null===T||!0===i||k(),t||!ae.isArray(e))if("keepalive"!==e["rtcgw"])if("ack"!==e["rtcgw"])if("success"!==e["rtcgw"])if("trickle"===e["rtcgw"]){var o=e["sender"];if(void 0===o||null===o)return void ae.warn("Missing sender...");var r=w[o];if(void 0===r||null===r)return void ae.debug("This handle is not attached to this session");var a=e["candidate"];ae.debug("Got a trickled candidate on session "+T),ae.debug(a);var s=r.webrtcStuff;s.pc&&s.remoteSdp?(ae.debug("Adding remote candidate:",a),a&&!0!==a.completed?s.pc.addIceCandidate(a):s.pc.addIceCandidate(ae.endOfCandidates)):(ae.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),s.candidates||(s.candidates=[]),s.candidates.push(a),ae.debug(s.candidates))}else{if("webrtcup"===e["rtcgw"]){ae.debug("Got a webrtcup event on session "+T),ae.debug(e);o=e["sender"];if(void 0===o||null===o)return void ae.warn("Missing sender...");r=w[o];return void 0===r||null===r?void ae.debug("This handle is not attached to this session"):void r.webrtcState(!0)}if("hangup"===e["rtcgw"]){ae.debug("Got a hangup event on session "+T),ae.debug(e);o=e["sender"];if(void 0===o||null===o)return void ae.warn("Missing sender...");r=w[o];if(void 0===r||null===r)return void ae.debug("This handle is not attached to this session");r.webrtcState(!1,e["reason"]),r.hangup()}else if("detached"===e["rtcgw"]){ae.debug("Got a detached event on session "+T),ae.debug(e);o=e["sender"];if(void 0===o||null===o)return void ae.warn("Missing sender...");r=w[o];if(void 0===r||null===r)return;r.detached=!0,r.ondetached(),r.detach()}else if("media"===e["rtcgw"]){ae.debug("Got a media event on session "+T),ae.debug(e);o=e["sender"];if(void 0===o||null===o)return void ae.warn("Missing sender...");r=w[o];if(void 0===r||null===r)return void ae.debug("This handle is not attached to this session");r.mediaState(e["type"],e["receiving"])}else if("slowlink"===e["rtcgw"]){ae.debug("Got a slowlink event on session "+T),ae.debug(e);o=e["sender"];if(void 0===o||null===o)return void ae.warn("Missing sender...");r=w[o];if(void 0===r||null===r)return void ae.debug("This handle is not attached to this session");r.slowLink(e["uplink"],e["lost"])}else{if("error"===e["rtcgw"]){ae.error("Ooops: "+e["error"].code+" "+e["error"].reason),ae.debug(e);m=e["transaction"];if(null!==m&&void 0!==m){p=E[m];null!==p&&void 0!==p&&p(e),delete E[m]}return}if("event"===e["rtcgw"]){ae.debug("Got a plugin event on session "+T),ae.debug(e);o=e["sender"];if(void 0===o||null===o)return void ae.warn("Missing sender...");var d=e["plugindata"];if(void 0===d||null===d)return void ae.warn("Missing plugindata...");ae.debug("  -- Event is coming from "+o+" ("+d["plugin"]+")");var l=d["data"];ae.debug(l);r=w[o];if(void 0===r||null===r)return void ae.warn("This handle is not attached to this session");var c=e["jsep"];void 0!==c&&null!==c&&(ae.debug("Handling SDP as well..."),ae.debug(c));var u=r.onmessage;null!==u&&void 0!==u?(ae.debug("Notifying application..."),u(l,c)):ae.debug("No provided notification callback")}else{if("timeout"===e["rtcgw"])return ae.error("Timeout on session "+T),ae.debug(e),void(t&&n.close(3504,"Gateway timeout"));ae.warn("Unknown message/event  '"+e["rtcgw"]+"' on session "+T),ae.debug(e)}}}else{ae.debug("Got a success on session "+T),ae.debug(e);var m=e["transaction"];if(null!==m&&void 0!==m){var p=E[m];null!==p&&void 0!==p&&p(e),delete E[m]}}else{ae.debug("Got an ack on session "+T),ae.debug(e);var m=e["transaction"];if(null!==m&&void 0!==m){var p=E[m];null!==p&&void 0!==p&&p(e),delete E[m]}}else ae.vdebug("Got a keepalive on session "+T);else for(var h=0;h<e.length;h++)P(e[h],!0)}function I(){if(null!==s&&t&&b){o=setTimeout(I,v);var e={rtcgw:"keepalive",session_id:T,transaction:ae.randomString(12)};null!==f&&void 0!==f&&(e["token"]=f),null!==g&&void 0!==g&&(e["apisecret"]=g),n.send(JSON.stringify(e))}}function x(d){var l=ae.randomString(12),c={rtcgw:"create",transaction:l,token:window.EZUIKit.opt.stream,device:window.EZUIKit.opt.deviceSerial,channel:window.EZUIKit.opt.channelNo};if(d["reconnect"]&&(b=!1,c["rtcgw"]="claim",c["session_id"]=T,n&&(n.onopen=null,n.onerror=null,n.onclose=null,o&&(clearTimeout(o),o=null))),null!==f&&void 0!==f&&(c["token"]=f),null!==g&&void 0!==g&&(c["apisecret"]=g),null===s&&ae.isArray(r)&&(s=r[a],0===s.indexOf("ws")?(t=!0,ae.log("Server #"+(a+1)+": trying WebSockets to contact Janus ("+s+")")):(t=!1,ae.log("Server #"+(a+1)+": trying REST API to contact Janus ("+s+")"))),t)for(var u in n=ae.newWebSocket(s,"rtcgw-protocol"),i={error:function(){if(ae.error("Error connecting to the Janus WebSockets server... "+s),ae.isArray(r)&&!d["reconnect"])return a++,a==r.length?void d.error("Error connecting to any of the provided Janus servers: Is the server down?"):(s=null,void setTimeout((function(){x(d)}),200));d.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){E[l]=function(e){if(ae.debug(e),"success"!==e["rtcgw"])return ae.error("Ooops: "+e["error"].code+" "+e["error"].reason),void d.error(e["error"].reason);o=setTimeout(I,v),b=!0,T=e["session_id"]?e["session_id"]:e.data["id"],d["reconnect"]?ae.log("Claimed session: "+T):ae.log("Created session: "+T),ae.sessions[T]=C,d.success()},n.send(JSON.stringify(c))},message:function(e){P(JSON.parse(e.data))},close:function(){null!==s&&b&&(b=!1,e.error("Lost connection to the server (is it down?)"))}},i)n.addEventListener(u,i[u]);else ae.httpAPICall(s,{verb:"POST",withCredentials:p,body:c,success:function(e){if(ae.debug(e),"success"!==e["rtcgw"])return ae.error("Ooops: "+e["error"].code+" "+e["error"].reason),void d.error(e["error"].reason);b=!0,T=e["session_id"]?e["session_id"]:e.data["id"],d["reconnect"]?ae.log("Claimed session: "+T):ae.log("Created session: "+T),ae.sessions[T]=C,k(),d.success()},error:function(e,t){if(ae.error(e+":",t),ae.isArray(r)&&!d["reconnect"])return a++,a==r.length?void d.error("Error connecting to any of the provided Janus servers: Is the server down?"):(s=null,void setTimeout((function(){x(d)}),200));""===t?d.error(e+": Is the server down?"):d.error(e+": "+t)}})}function R(r){r=r||{},r.success="function"==typeof r.success?r.success:ae.noop;var a=!0;void 0!==r.asyncRequest&&null!==r.asyncRequest&&(a=!0===r.asyncRequest);var d=!0;void 0!==r.notifyDestroyed&&null!==r.notifyDestroyed&&(d=!0===r.notifyDestroyed);var l=!1;if(void 0!==r.cleanupHandles&&null!==r.cleanupHandles&&(l=!0===r.cleanupHandles),ae.log("Destroying session "+T+" (async="+a+")"),!b)return ae.warn("Is the server down? (connected=false)"),void r.success();if(void 0===T||null===T)return ae.warn("No session to destroy"),r.success(),void(d&&e.destroyed());if(l)for(var c in w)B(c,{noRequest:!0});var u={rtcgw:"destroy",transaction:ae.randomString(12)};if(null!==f&&void 0!==f&&(u["token"]=f),null!==g&&void 0!==g&&(u["apisecret"]=g),t){u["session_id"]=T;var m=function(){for(var e in i)n.removeEventListener(e,i[e]);n.removeEventListener("message",h),n.removeEventListener("error",v),o&&clearTimeout(o),n.close()},h=function(t){var n=JSON.parse(t.data);n.session_id==u.session_id&&n.transaction==u.transaction&&(m(),r.success(),d&&e.destroyed())},v=function(t){m(),r.error("Failed to destroy the server: Is the server down?"),d&&e.destroyed()};return n.addEventListener("message",h),n.addEventListener("error",v),void n.send(JSON.stringify(u))}ae.httpAPICall(s+"/"+T,{verb:"POST",async:a,withCredentials:p,body:u,success:function(t){ae.log("Destroyed session:"),ae.debug(t),T=null,b=!1,"success"!==t["rtcgw"]&&ae.error("Ooops: "+t["error"].code+" "+t["error"].reason),r.success(),d&&e.destroyed()},error:function(t,n){ae.error(t+":",n),T=null,b=!1,r.success(),d&&e.destroyed()}})}function A(e){if(e=e||{},e.success="function"==typeof e.success?e.success:ae.noop,e.error="function"==typeof e.error?e.error:ae.noop,e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:ae.noop,e.iceState="function"==typeof e.iceState?e.iceState:ae.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:ae.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:ae.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:ae.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:ae.noop,e.onlocalstream="function"==typeof e.onlocalstream?e.onlocalstream:ae.noop,e.onremotestream="function"==typeof e.onremotestream?e.onremotestream:ae.noop,e.ondata="function"==typeof e.ondata?e.ondata:ae.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:ae.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:ae.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:ae.noop,!b)return ae.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var i=e.plugin;if(void 0===i||null===i)return ae.error("Invalid plugin"),void e.error("Invalid plugin");var o=e.opaqueId,r=e.token?e.token:f,a=ae.randomString(12),d={rtcgw:"attach",plugin:i,opaque_id:o,transaction:a};if(null!==r&&void 0!==r&&(d["token"]=r),null!==g&&void 0!==g&&(d["apisecret"]=g),t)return E[a]=function(t){if(ae.debug(t),"success"!==t["rtcgw"])return ae.error("Ooops: "+t["error"].code+" "+t["error"].reason),void e.error("Ooops: "+t["error"].code+" "+t["error"].reason);var n=t.data["id"];ae.log("Created handle: "+n);var o={session:C,plugin:i,id:n,token:r,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return i},getVolume:function(){return G(n,!0)},getRemoteVolume:function(){return G(n,!0)},getLocalVolume:function(){return G(n,!1)},isAudioMuted:function(){return W(n,!1)},muteAudio:function(){return J(n,!1,!0)},unmuteAudio:function(){return J(n,!1,!1)},isVideoMuted:function(){return W(n,!0)},muteVideo:function(){return J(n,!0,!0)},unmuteVideo:function(){return J(n,!0,!1)},getBitrate:function(){return K(n)},send:function(e){D(n,e)},data:function(e){M(n,e)},dtmf:function(e){N(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){z(n,!0,e)},createAnswer:function(e){z(n,!1,e)},handleRemoteJsep:function(e){F(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){q(n,!0===e)},detach:function(e){B(n,e)}};w[n]=o,e.success(o)},d["session_id"]=T,void n.send(JSON.stringify(d));ae.httpAPICall(s+"/"+T,{verb:"POST",withCredentials:p,body:d,success:function(t){if(ae.debug(t),"success"!==t["rtcgw"])return ae.error("Ooops: "+t["error"].code+" "+t["error"].reason),void e.error("Ooops: "+t["error"].code+" "+t["error"].reason);var n=t.data["id"];ae.log("Created handle: "+n);var o={session:C,plugin:i,id:n,token:r,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return n},getPlugin:function(){return i},getVolume:function(){return G(n,!0)},getRemoteVolume:function(){return G(n,!0)},getLocalVolume:function(){return G(n,!1)},isAudioMuted:function(){return W(n,!1)},muteAudio:function(){return J(n,!1,!0)},unmuteAudio:function(){return J(n,!1,!1)},isVideoMuted:function(){return W(n,!0)},muteVideo:function(){return J(n,!0,!0)},unmuteVideo:function(){return J(n,!0,!1)},getBitrate:function(){return K(n)},send:function(e){D(n,e)},data:function(e){M(n,e)},dtmf:function(e){N(n,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){z(n,!0,e)},createAnswer:function(e){z(n,!1,e)},handleRemoteJsep:function(e){F(n,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){q(n,!0===e)},detach:function(e){B(n,e)}};w[n]=o,e.success(o)},error:function(e,t){ae.error(e+":",t)}})}function D(e,i){if(i=i||{},i.success="function"==typeof i.success?i.success:ae.noop,i.error="function"==typeof i.error?i.error:ae.noop,!b)return ae.warn("Is the server down? (connected=false)"),void i.error("Is the server down? (connected=false)");var o=w[e];if(null===o||void 0===o||null===o.webrtcStuff||void 0===o.webrtcStuff)return ae.warn("Invalid handle"),void i.error("Invalid handle");var r=i.message,a=i.jsep,d=ae.randomString(12),l={rtcgw:"message",body:r,transaction:d};if(null!==o.token&&void 0!==o.token&&(l["token"]=o.token),null!==g&&void 0!==g&&(l["apisecret"]=g),null!==a&&void 0!==a&&(l.jsep=a),ae.debug("Sending message to plugin (handle="+e+"):"),ae.debug(l),t)return l["session_id"]=T,l["handle_id"]=e,E[d]=function(e){if(ae.debug("Message sent!"),ae.debug(e),"success"===e["rtcgw"]){var t=e["plugindata"];if(void 0===t||null===t)return ae.warn("Request succeeded, but missing plugindata..."),void i.success();ae.log("Synchronous transaction successful ("+t["plugin"]+")");var n=t["data"];return ae.debug(n),void i.success(n)}"ack"===e["rtcgw"]?i.success():void 0!==e["error"]&&null!==e["error"]?(ae.error("Ooops: "+e["error"].code+" "+e["error"].reason),i.error(e["error"].code+" "+e["error"].reason)):(ae.error("Unknown error"),i.error("Unknown error"))},void n.send(JSON.stringify(l));ae.httpAPICall(s+"/"+T+"/"+e,{verb:"POST",withCredentials:p,body:l,success:function(e){if(ae.debug("Message sent!"),ae.debug(e),"success"===e["rtcgw"]){var t=e["plugindata"];if(void 0===t||null===t)return ae.warn("Request succeeded, but missing plugindata..."),void i.success();ae.log("Synchronous transaction successful ("+t["plugin"]+")");var n=t["data"];return ae.debug(n),void i.success(n)}"ack"===e["rtcgw"]?i.success():void 0!==e["error"]&&null!==e["error"]?(ae.error("Ooops: "+e["error"].code+" "+e["error"].reason),i.error(e["error"].code+" "+e["error"].reason)):(ae.error("Unknown error"),i.error("Unknown error"))},error:function(e,t){ae.error(e+":",t),i.error(e+": "+t)}})}function j(e,i){if(b){var o=w[e];if(null!==o&&void 0!==o&&null!==o.webrtcStuff&&void 0!==o.webrtcStuff){var r={rtcgw:"trickle",candidate:i,transaction:ae.randomString(12)};if(null!==o.token&&void 0!==o.token&&(r["token"]=o.token),null!==g&&void 0!==g&&(r["apisecret"]=g),ae.vdebug("Sending trickle candidate (handle="+e+"):"),ae.vdebug(r),t)return r["session_id"]=T,r["handle_id"]=e,void n.send(JSON.stringify(r));ae.httpAPICall(s+"/"+T+"/"+e,{verb:"POST",withCredentials:p,body:r,success:function(e){ae.vdebug("Candidate sent!"),ae.vdebug(e),"ack"===e["rtcgw"]||ae.error("Ooops: "+e["error"].code+" "+e["error"].reason)},error:function(e,t){ae.error(e+":",t)}})}else ae.warn("Invalid handle")}else ae.warn("Is the server down? (connected=false)")}function L(e,t,n,i){var o=w[e];if(null!==o&&void 0!==o&&null!==o.webrtcStuff&&void 0!==o.webrtcStuff){var r=o.webrtcStuff,a=function(e){ae.log("Received message on data channel:",e);var t=e.target.label;o.ondata(e.data,t)},s=function(e){ae.log("Received state change on data channel:",e);var t=e.target.label,n=r.dataChannel[t]?r.dataChannel[t].readyState:"null";if(ae.log("State change on <"+t+"> data channel: "+n),"open"===n){if(r.dataChannel[t].pending&&r.dataChannel[t].pending.length>0){for(var i in ae.log("Sending pending messages on <"+t+">:",r.dataChannel[t].pending.length),r.dataChannel[t].pending){var a=r.dataChannel[t].pending[i];ae.log("Sending string on data channel <"+t+">: "+a),r.dataChannel[t].send(a)}r.dataChannel[t].pending=[]}o.ondataopen(t)}},d=function(e){ae.error("Got error on data channel:",e)};r.dataChannel[t]=n||r.pc.createDataChannel(t,{ordered:!1}),r.dataChannel[t].onmessage=a,r.dataChannel[t].onopen=s,r.dataChannel[t].onclose=s,r.dataChannel[t].onerror=d,r.dataChannel[t].pending=[],i&&r.dataChannel[t].pending.push(i)}else ae.warn("Invalid handle")}function M(e,t){t=t||{},t.success="function"==typeof t.success?t.success:ae.noop,t.error="function"==typeof t.error?t.error:ae.noop;var n=w[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return ae.warn("Invalid handle"),void t.error("Invalid handle");var i=n.webrtcStuff,o=t.text;if(null===o||void 0===o)return ae.warn("Invalid text"),void t.error("Invalid text");var r=t.label?t.label:ae.dataChanDefaultLabel;return i.dataChannel[r]?"open"!==i.dataChannel[r].readyState?(i.dataChannel[r].pending.push(o),void t.success()):(ae.log("Sending string on data channel <"+r+">: "+o),i.dataChannel[r].send(o),void t.success()):(L(e,r,!1,o),void t.success())}function N(e,t){t=t||{},t.success="function"==typeof t.success?t.success:ae.noop,t.error="function"==typeof t.error?t.error:ae.noop;var n=w[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return ae.warn("Invalid handle"),void t.error("Invalid handle");var i=n.webrtcStuff;if(null===i.dtmfSender||void 0===i.dtmfSender){if(void 0!==i.pc&&null!==i.pc){var o=i.pc.getSenders(),r=o.find((function(e){return e.track&&"audio"===e.track.kind}));if(!r)return ae.warn("Invalid DTMF configuration (no audio track)"),void t.error("Invalid DTMF configuration (no audio track)");i.dtmfSender=r.dtmf,i.dtmfSender&&(ae.log("Created DTMF Sender"),i.dtmfSender.ontonechange=function(e){ae.debug("Sent DTMF tone: "+e.tone)})}if(null===i.dtmfSender||void 0===i.dtmfSender)return ae.warn("Invalid DTMF configuration"),void t.error("Invalid DTMF configuration")}var a=t.dtmf;if(null===a||void 0===a)return ae.warn("Invalid DTMF parameters"),void t.error("Invalid DTMF parameters");var s=a.tones;if(null===s||void 0===s)return ae.warn("Invalid DTMF string"),void t.error("Invalid DTMF string");var d=a.duration;null!==d&&void 0!==d||(d=500);var l=a.gap;null!==l&&void 0!==l||(l=50),ae.debug("Sending DTMF string "+s+" (duration "+d+"ms, gap "+l+"ms)"),i.dtmfSender.insertDTMF(s,d,l),t.success()}function B(e,i){i=i||{},i.success="function"==typeof i.success?i.success:ae.noop,i.error="function"==typeof i.error?i.error:ae.noop;var o=!0;void 0!==i.asyncRequest&&null!==i.asyncRequest&&(o=!0===i.asyncRequest);var r=!0;void 0!==i.noRequest&&null!==i.noRequest&&(r=!0===i.noRequest),ae.log("Destroying handle "+e+" (async="+o+")"),q(e);var a=w[e];if(null===a||void 0===a||a.detached)return delete w[e],void i.success();if(r)return delete w[e],void i.success();if(!b)return ae.warn("Is the server down? (connected=false)"),void i.error("Is the server down? (connected=false)");var d={rtcgw:"detach",transaction:ae.randomString(12)};if(null!==a.token&&void 0!==a.token&&(d["token"]=a.token),null!==g&&void 0!==g&&(d["apisecret"]=g),t)return d["session_id"]=T,d["handle_id"]=e,n.send(JSON.stringify(d)),delete w[e],void i.success();ae.httpAPICall(s+"/"+T+"/"+e,{verb:"POST",async:o,withCredentials:p,body:d,success:function(t){ae.log("Destroyed handle:"),ae.debug(t),"success"!==t["rtcgw"]&&ae.error("Ooops: "+t["error"].code+" "+t["error"].reason),delete w[e],i.success()},error:function(t,n){ae.error(t+":",n),delete w[e],i.success()}})}function O(e,t,n,i,o){var r=w[e];if(null===r||void 0===r||null===r.webrtcStuff||void 0===r.webrtcStuff)return ae.warn("Invalid handle"),void i.error("Invalid handle");var a=r.webrtcStuff;ae.debug("streamsDone:",o),o&&(ae.debug("  -- Audio tracks:",o.getAudioTracks()),ae.debug("  -- Video tracks:",o.getVideoTracks()));var s=!1;if(a.myStream&&n.update&&!a.streamExternal){if((!n.update&&X(n)||n.update&&(n.addAudio||n.replaceAudio))&&o.getAudioTracks()&&o.getAudioTracks().length)if(a.myStream.addTrack(o.getAudioTracks()[0]),ae.unifiedPlan){ae.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",o.getAudioTracks()[0]);var p=null,h=a.pc.getTransceivers();if(h&&h.length>0)for(var f in h){var g=h[f];if(g.sender&&g.sender.track&&"audio"===g.sender.track.kind||g.receiver&&g.receiver.track&&"audio"===g.receiver.track.kind){p=g;break}}p&&p.sender?p.sender.replaceTrack(o.getAudioTracks()[0]):a.pc.addTrack(o.getAudioTracks()[0],o)}else ae.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",o.getAudioTracks()[0]),a.pc.addTrack(o.getAudioTracks()[0],o);if((!n.update&&ee(n)||n.update&&(n.addVideo||n.replaceVideo))&&o.getVideoTracks()&&o.getVideoTracks().length)if(a.myStream.addTrack(o.getVideoTracks()[0]),ae.unifiedPlan){ae.log((n.replaceVideo?"Replacing":"Adding")+" video track:",o.getVideoTracks()[0]);var v=null;h=a.pc.getTransceivers();if(h&&h.length>0)for(var f in h){g=h[f];if(g.sender&&g.sender.track&&"video"===g.sender.track.kind||g.receiver&&g.receiver.track&&"video"===g.receiver.track.kind){v=g;break}}v&&v.sender?v.sender.replaceTrack(o.getVideoTracks()[0]):a.pc.addTrack(o.getVideoTracks()[0],o)}else ae.log((n.replaceVideo?"Replacing":"Adding")+" video track:",o.getVideoTracks()[0]),a.pc.addTrack(o.getVideoTracks()[0],o)}else a.myStream=o,s=!0;if(!a.pc){var y={iceServers:d,iceTransportPolicy:c,bundlePolicy:u};"chrome"===ae.webRTCAdapter.browserDetails.browser&&(y["sdpSemantics"]=ae.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var b={optional:[{DtlsSrtpKeyAgreement:!0}]};if(!0===m&&b.optional.push({googIPv6:!0}),i.rtcConstraints&&"object"===l(i.rtcConstraints))for(var f in ae.debug("Adding custom PeerConnection constraints:",i.rtcConstraints),i.rtcConstraints)b.optional.push(i.rtcConstraints[f]);"edge"===ae.webRTCAdapter.browserDetails.browser&&(y.bundlePolicy="max-bundle"),ae.log("Creating PeerConnection"),ae.debug(b),a.pc=new RTCPeerConnection(y,b),ae.debug(a.pc),a.pc.getStats&&(a.volume={},a.bitrate.value="0 kbits/sec"),ae.log("Preparing local SDP and gathering candidates (trickle="+a.trickle+")"),a.pc.oniceconnectionstatechange=function(e){a.pc&&r.iceState(a.pc.iceConnectionState)},a.pc.onicecandidate=function(t){if(null==t.candidate||"edge"===ae.webRTCAdapter.browserDetails.browser&&t.candidate.candidate.indexOf("endOfCandidates")>0)ae.log("End of candidates."),a.iceDone=!0,!0===a.trickle?j(e,{completed:!0}):H(e,i);else{var n={candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex};!0===a.trickle&&j(e,n)}},a.pc.ontrack=function(e){ae.log("Handling Remote Track"),ae.debug(e),e.streams&&(a.remoteStream=e.streams[0],r.onremotestream(a.remoteStream),e.track.onended||(ae.log("Adding onended callback to track:",e.track),e.track.onended=function(e){ae.log("Remote track muted/removed:",e),a.remoteStream&&(a.remoteStream.removeTrack(e.target),r.onremotestream(a.remoteStream))},e.track.onmute=e.track.onended,e.track.onunmute=function(e){ae.log("Remote track flowing again:",e);try{a.remoteStream.addTrack(e.target),r.onremotestream(a.remoteStream)}catch(t){ae.error(t)}}))}}if(s&&null!==o&&void 0!==o){ae.log("Adding local stream");var T=!0===i.simulcast2;o.getTracks().forEach((function(e){if(ae.log("Adding local track:",e),T)if("audio"===e.kind)a.pc.addTrack(e,o);else{ae.log("Enabling rid-based simulcasting:",e);var t=S(i.simulcastMaxBitrates);a.pc.addTransceiver(e,{direction:"sendrecv",streams:[o],sendEncodings:[{rid:"h",active:!0,maxBitrate:t.high},{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:t.low,scaleResolutionDownBy:4}]})}else a.pc.addTrack(e,o)}))}oe(n)&&!a.dataChannel[ae.dataChanDefaultLabel]&&(ae.log("Creating data channel"),L(e,ae.dataChanDefaultLabel,!1),a.pc.ondatachannel=function(t){ae.log("Data channel created by Janus:",t),L(e,t.channel.label,t.channel)}),a.myStream&&r.onlocalstream(a.myStream),null===t||void 0===t?U(e,n,i):a.pc.setRemoteDescription(t).then((function(){if(ae.log("Remote description accepted!"),a.remoteSdp=t.sdp,a.candidates&&a.candidates.length>0){for(var o=0;o<a.candidates.length;o++){var r=a.candidates[o];ae.debug("Adding remote candidate:",r),r&&!0!==r.completed?a.pc.addIceCandidate(r):a.pc.addIceCandidate(ae.endOfCandidates)}a.candidates=[]}V(e,n,i)}),i.error)}function z(e,t,n){n=n||{},n.success="function"==typeof n.success?n.success:ae.noop,n.error="function"==typeof n.error?n.error:Z;var i=n.jsep;if(t&&i)return ae.error("Provided a JSEP to a createOffer"),void n.error("Provided a JSEP to a createOffer");if(!t&&(!i||!i.type||!i.sdp))return ae.error("A valid JSEP is required for createAnswer"),void n.error("A valid JSEP is required for createAnswer");n.media=n.media||{audio:!0,video:!0};var o=n.media,r=w[e];if(null===r||void 0===r||null===r.webrtcStuff||void 0===r.webrtcStuff)return ae.warn("Invalid handle"),void n.error("Invalid handle");var a=r.webrtcStuff;if(a.trickle=re(n.trickle),void 0===a.pc||null===a.pc)o.update=!1,o.keepAudio=!1,o.keepVideo=!1;else if(void 0!==a.pc&&null!==a.pc){if(ae.log("Updating existing media session"),o.update=!0,null!==n.stream&&void 0!==n.stream)n.stream!==a.myStream&&ae.log("Renegotiation involves a new external stream");else{if(o.addAudio){if(o.keepAudio=!1,o.replaceAudio=!1,o.removeAudio=!1,o.audioSend=!0,a.myStream&&a.myStream.getAudioTracks()&&a.myStream.getAudioTracks().length)return ae.error("Can't add audio stream, there already is one"),void n.error("Can't add audio stream, there already is one")}else o.removeAudio?(o.keepAudio=!1,o.replaceAudio=!1,o.addAudio=!1,o.audioSend=!1):o.replaceAudio&&(o.keepAudio=!1,o.addAudio=!1,o.removeAudio=!1,o.audioSend=!0);if(null===a.myStream||void 0===a.myStream?(o.replaceAudio&&(o.keepAudio=!1,o.replaceAudio=!1,o.addAudio=!0,o.audioSend=!0),X(o)&&(o.keepAudio=!1,o.addAudio=!0)):null===a.myStream.getAudioTracks()||void 0===a.myStream.getAudioTracks()||0===a.myStream.getAudioTracks().length?(o.replaceAudio&&(o.keepAudio=!1,o.replaceAudio=!1,o.addAudio=!0,o.audioSend=!0),X(o)&&(o.keepVideo=!1,o.addAudio=!0)):!X(o)||o.removeAudio||o.replaceAudio||(o.keepAudio=!0),o.addVideo){if(o.keepVideo=!1,o.replaceVideo=!1,o.removeVideo=!1,o.videoSend=!0,a.myStream&&a.myStream.getVideoTracks()&&a.myStream.getVideoTracks().length)return ae.error("Can't add video stream, there already is one"),void n.error("Can't add video stream, there already is one")}else o.removeVideo?(o.keepVideo=!1,o.replaceVideo=!1,o.addVideo=!1,o.videoSend=!1):o.replaceVideo&&(o.keepVideo=!1,o.addVideo=!1,o.removeVideo=!1,o.videoSend=!0);null===a.myStream||void 0===a.myStream||null===a.myStream.getVideoTracks()||void 0===a.myStream.getVideoTracks()||0===a.myStream.getVideoTracks().length?(o.replaceVideo&&(o.keepVideo=!1,o.replaceVideo=!1,o.addVideo=!0,o.videoSend=!0),ee(o)&&(o.keepVideo=!1,o.addVideo=!0)):!ee(o)||o.removeVideo||o.replaceVideo||(o.keepVideo=!0),o.addData&&(o.data=!0)}if(X(o)&&o.keepAudio&&ee(o)&&o.keepVideo)return r.consentDialog(!1),void O(e,i,o,n,a.myStream)}if(o.update&&!a.streamExternal){if(o.removeAudio||o.replaceAudio){if(a.myStream&&a.myStream.getAudioTracks()&&a.myStream.getAudioTracks().length){var s=a.myStream.getAudioTracks()[0];ae.log("Removing audio track:",s),a.myStream.removeTrack(s);try{s.stop()}catch(x){}}if(a.pc.getSenders()&&a.pc.getSenders().length){var d=!0;if(o.replaceAudio&&ae.unifiedPlan&&(d=!1),d)for(var c in a.pc.getSenders()){s=a.pc.getSenders()[c];s&&s.track&&"audio"===s.track.kind&&(ae.log("Removing audio sender:",s),a.pc.removeTrack(s))}}}if(o.removeVideo||o.replaceVideo){if(a.myStream&&a.myStream.getVideoTracks()&&a.myStream.getVideoTracks().length){s=a.myStream.getVideoTracks()[0];ae.log("Removing video track:",s),a.myStream.removeTrack(s);try{s.stop()}catch(x){}}if(a.pc.getSenders()&&a.pc.getSenders().length){var u=!0;if(o.replaceVideo&&ae.unifiedPlan&&(u=!1),u)for(var c in a.pc.getSenders()){s=a.pc.getSenders()[c];s&&s.track&&"video"===s.track.kind&&(ae.log("Removing video sender:",s),a.pc.removeTrack(s))}}}}if(null!==n.stream&&void 0!==n.stream){var m=n.stream;if(ae.log("MediaStream provided by the application"),ae.debug(m),o.update&&a.myStream&&a.myStream!==n.stream&&!a.streamExternal){try{var p=a.myStream.getTracks();for(var h in p){var f=p[h];ae.log(f),null!==f&&void 0!==f&&f.stop()}}catch(x){}a.myStream=null}return a.streamExternal=!0,r.consentDialog(!1),void O(e,i,o,n,m)}if(X(o)||ee(o)){if(!ae.isGetUserMediaAvailable())return void n.error("getUserMedia not available");var g={mandatory:{},optional:[]};r.consentDialog(!0);var v=X(o);!0===v&&void 0!=o&&null!=o&&"object"===l(o.audio)&&(v=o.audio);var y=ee(o);if(!0===y&&void 0!=o&&null!=o){var S=!0===n.simulcast,b=!0===n.simulcast2;if(!S&&!b||i||void 0!==o.video&&!1!==o.video||(o.video="hires"),o.video&&"screen"!=o.video&&"window"!=o.video)if("object"===l(o.video))y=o.video;else{var T=0,C=0;"lowres"===o.video?(C=240,T=320):"lowres-16:9"===o.video?(C=180,T=320):"hires"===o.video||"hires-16:9"===o.video||"hdres"===o.video?(C=720,T=1280):"fhdres"===o.video?(C=1080,T=1920):"4kres"===o.video?(C=2160,T=3840):"stdres"===o.video?(C=480,T=640):"stdres-16:9"===o.video?(C=360,T=640):(ae.log("Default video setting is stdres 4:3"),C=480,T=640),ae.log("Adding media constraint:",o.video),y={height:{ideal:C},width:{ideal:T}},ae.log("Adding video constraint:",y)}else if("screen"===o.video||"window"===o.video){var _=function(t,a){r.consentDialog(!1),t?n.error(t):O(e,i,o,n,a)},E=function(e,t,n){ae.log("Adding media constraint (screen capture)"),ae.debug(e),navigator.mediaDevices.getUserMedia(e).then((function(e){n?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(n){e.addTrack(n.getAudioTracks()[0]),t(null,e)})):t(null,e)}))["catch"]((function(e){r.consentDialog(!1),t(e)}))};if(o.screenshareFrameRate||(o.screenshareFrameRate=3),navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return void navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(t){r.consentDialog(!1),X(o)&&!o.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(r){t.addTrack(r.getAudioTracks()[0]),O(e,i,o,n,t)})):O(e,i,o,n,t)}),(function(e){r.consentDialog(!1),n.error(e)}));if("chrome"===ae.webRTCAdapter.browserDetails.browser){var k=ae.webRTCAdapter.browserDetails.version,P=33;window.navigator.userAgent.match("Linux")&&(P=35),k>=26&&k<=P?(g={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:o.screenshareFrameRate,maxFrameRate:o.screenshareFrameRate,chromeMediaSource:"screen"}},audio:X(o)&&!o.keepAudio},E(g,_)):ae.extension.getScreen((function(e,t){if(e)return r.consentDialog(!1),n.error(e);g={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:o.screenshareFrameRate,maxFrameRate:o.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},g.video.mandatory.chromeMediaSourceId=t,E(g,_,X(o)&&!o.keepAudio)}))}else if("firefox"===ae.webRTCAdapter.browserDetails.browser){if(!(ae.webRTCAdapter.browserDetails.version>=33)){var I=new Error("NavigatorUserMediaError");return I.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",r.consentDialog(!1),void n.error(I)}g={video:{mozMediaSource:o.video,mediaSource:o.video},audio:X(o)&&!o.keepAudio},E(g,(function(e,t){if(_(e,t),!e)var n=t.currentTime,i=window.setInterval((function(){t||window.clearInterval(i),t.currentTime==n&&(window.clearInterval(i),t.onended&&t.onended()),n=t.currentTime}),500)}))}return}}null!==o&&void 0!==o&&"screen"===o.video||navigator.mediaDevices.enumerateDevices().then((function(t){var a=t.some((function(e){return"audioinput"===e.kind})),s=ie(o)||t.some((function(e){return"videoinput"===e.kind})),d=X(o),l=ee(o),c=Q(o),u=te(o);if(d||l||c||u){var p=!!d&&a,h=!!l&&s;if(!p&&!h)return r.consentDialog(!1),n.error("No capture device found"),!1;if(!p&&c)return r.consentDialog(!1),n.error("Audio capture is required, but no capture device found"),!1;if(!h&&u)return r.consentDialog(!1),n.error("Video capture is required, but no capture device found"),!1}var f={audio:!(!a||o.keepAudio)&&v,video:!(!s||o.keepVideo)&&y};ae.debug("getUserMedia constraints",f),f.audio||f.video?navigator.mediaDevices.getUserMedia(f).then((function(t){r.consentDialog(!1),O(e,i,o,n,t)}))["catch"]((function(e){r.consentDialog(!1),n.error({code:e.code,name:e.name,message:e.message})})):(r.consentDialog(!1),O(e,i,o,n,m))}))["catch"]((function(e){r.consentDialog(!1),n.error("enumerateDevices error",e)}))}else O(e,i,o,n)}function F(e,t){t=t||{},t.success="function"==typeof t.success?t.success:ae.noop,t.error="function"==typeof t.error?t.error:Z;var n=t.jsep,i=w[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return ae.warn("Invalid handle"),void t.error("Invalid handle");var o=i.webrtcStuff;if(void 0!==n&&null!==n){if(null===o.pc)return ae.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void t.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");o.pc.setRemoteDescription(n).then((function(){if(ae.log("Remote description accepted!"),o.remoteSdp=n.sdp,o.candidates&&o.candidates.length>0){for(var e=0;e<o.candidates.length;e++){var i=o.candidates[e];ae.debug("Adding remote candidate:",i),i&&!0!==i.completed?o.pc.addIceCandidate(i):o.pc.addIceCandidate(ae.endOfCandidates)}o.candidates=[]}t.success()}),t.error)}else t.error("Invalid JSEP")}function U(e,t,n){n=n||{},n.success="function"==typeof n.success?n.success:ae.noop,n.error="function"==typeof n.error?n.error:ae.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:ae.noop;var i=w[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return ae.warn("Invalid handle"),void n.error("Invalid handle");var o=i.webrtcStuff,r=!0===n.simulcast;r?ae.log("Creating offer (iceDone="+o.iceDone+", simulcast="+r+")"):ae.log("Creating offer (iceDone="+o.iceDone+")");var a={};if(ae.unifiedPlan){var s=null,d=null,l=o.pc.getTransceivers();if(l&&l.length>0)for(var c in l){var u=l[c];u.sender&&u.sender.track&&"audio"===u.sender.track.kind||u.receiver&&u.receiver.track&&"audio"===u.receiver.track.kind?s||(s=u):(u.sender&&u.sender.track&&"video"===u.sender.track.kind||u.receiver&&u.receiver.track&&"video"===u.receiver.track.kind)&&(d||(d=u))}var m=X(t),p=$(t);m||p?m&&p?s&&(s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",ae.log("Setting audio transceiver to sendrecv:",s)):m&&!p?s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",ae.log("Setting audio transceiver to sendonly:",s)):!m&&p&&(s?(s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",ae.log("Setting audio transceiver to recvonly:",s)):(s=o.pc.addTransceiver("audio",{direction:"recvonly"}),ae.log("Adding recvonly audio transceiver:",s))):t.removeAudio&&s&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive",ae.log("Setting audio transceiver to inactive:",s));var h=ee(t),f=ne(t);h||f?h&&f?d&&(d.setDirection?d.setDirection("sendrecv"):d.direction="sendrecv",ae.log("Setting video transceiver to sendrecv:",d)):h&&!f?d&&(d.setDirection?d.setDirection("sendonly"):d.direction="sendonly",ae.log("Setting video transceiver to sendonly:",d)):!h&&f&&(d?(d.setDirection?d.setDirection("recvonly"):d.direction="recvonly",ae.log("Setting video transceiver to recvonly:",d)):(d=o.pc.addTransceiver("video",{direction:"recvonly"}),ae.log("Adding recvonly video transceiver:",d))):t.removeVideo&&d&&(d.setDirection?d.setDirection("inactive"):d.direction="inactive",ae.log("Setting video transceiver to inactive:",d))}else a["offerToReceiveAudio"]=$(t),a["offerToReceiveVideo"]=ne(t);var g=!0===n.iceRestart;g&&(a["iceRestart"]=!0),ae.debug(a);var v=ee(t);if(v&&r&&"firefox"===ae.webRTCAdapter.browserDetails.browser){ae.log("Enabling Simulcasting for Firefox (RID)");var y=o.pc.getSenders().find((function(e){return"video"==e.track.kind}));if(y){var b=y.getParameters();b||(b={});var T=S(n.simulcastMaxBitrates);b.encodings=[{rid:"h",active:!0,maxBitrate:T.high},{rid:"m",active:!0,maxBitrate:T.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:T.low,scaleResolutionDownBy:4}],y.setParameters(b)}}o.pc.createOffer(a).then((function(e){ae.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,ae.log("Setting local description"),v&&r&&("chrome"===ae.webRTCAdapter.browserDetails.browser||"safari"===ae.webRTCAdapter.browserDetails.browser?(ae.log("Enabling Simulcasting for Chrome (SDP munging)"),e.sdp=Y(e.sdp)):"firefox"!==ae.webRTCAdapter.browserDetails.browser&&ae.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),o.mySdp=e.sdp,o.pc.setLocalDescription(e)["catch"](n.error),o.mediaConstraints=a,o.iceDone||o.trickle?(ae.log("Offer ready"),ae.debug(n),n.success(e)):ae.log("Waiting for all candidates...")}),n.error)}function V(e,t,n){n=n||{},n.success="function"==typeof n.success?n.success:ae.noop,n.error="function"==typeof n.error?n.error:ae.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:ae.noop;var i=w[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return ae.warn("Invalid handle"),void n.error("Invalid handle");var o=i.webrtcStuff,r=!0===n.simulcast;r?ae.log("Creating answer (iceDone="+o.iceDone+", simulcast="+r+")"):ae.log("Creating answer (iceDone="+o.iceDone+")");var a=null;if(ae.unifiedPlan){a={};var s=null,d=null,l=o.pc.getTransceivers();if(l&&l.length>0)for(var c in l){var u=l[c];u.sender&&u.sender.track&&"audio"===u.sender.track.kind||u.receiver&&u.receiver.track&&"audio"===u.receiver.track.kind?s||(s=u):(u.sender&&u.sender.track&&"video"===u.sender.track.kind||u.receiver&&u.receiver.track&&"video"===u.receiver.track.kind)&&(d||(d=u))}var m=X(t),p=$(t);if(m||p){if(m&&p){if(s)try{s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",ae.log("Setting audio transceiver to sendrecv:",s)}catch(T){ae.error(T)}}else if(m&&!p)try{s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",ae.log("Setting audio transceiver to sendonly:",s))}catch(T){ae.error(T)}else if(!m&&p)if(s)try{s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",ae.log("Setting audio transceiver to recvonly:",s)}catch(T){ae.error(T)}else s=o.pc.addTransceiver("audio",{direction:"recvonly"}),ae.log("Adding recvonly audio transceiver:",s)}else if(t.removeAudio&&s)try{s.setDirection?s.setDirection("inactive"):s.direction="inactive",ae.log("Setting audio transceiver to inactive:",s)}catch(T){ae.error(T)}var h=ee(t),f=ne(t);if(h||f){if(h&&f){if(d)try{d.setDirection?d.setDirection("sendrecv"):d.direction="sendrecv",ae.log("Setting video transceiver to sendrecv:",d)}catch(T){ae.error(T)}}else if(h&&!f){if(d)try{d.setDirection?d.setDirection("sendonly"):d.direction="sendonly",ae.log("Setting video transceiver to sendonly:",d)}catch(T){ae.error(T)}}else if(!h&&f)if(d)try{d.setDirection?d.setDirection("recvonly"):d.direction="recvonly",ae.log("Setting video transceiver to recvonly:",d)}catch(T){ae.error(T)}else d=o.pc.addTransceiver("video",{direction:"recvonly"}),ae.log("Adding recvonly video transceiver:",d)}else if(t.removeVideo&&d)try{d.setDirection?d.setDirection("inactive"):d.direction="inactive",ae.log("Setting video transceiver to inactive:",d)}catch(T){ae.error(T)}}else a="firefox"==ae.webRTCAdapter.browserDetails.browser||"edge"==ae.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:$(t),offerToReceiveVideo:ne(t)}:{mandatory:{OfferToReceiveAudio:$(t),OfferToReceiveVideo:ne(t)}};ae.debug(a);var g=ee(t);if(g&&r&&"firefox"===ae.webRTCAdapter.browserDetails.browser){ae.log("Enabling Simulcasting for Firefox (RID)");var v=o.pc.getSenders()[1];ae.log(v);var y=v.getParameters();ae.log(y);var b=S(n.simulcastMaxBitrates);v.setParameters({encodings:[{rid:"high",active:!0,priority:"high",maxBitrate:b.high},{rid:"medium",active:!0,priority:"medium",maxBitrate:b.medium},{rid:"low",active:!0,priority:"low",maxBitrate:b.low}]})}o.pc.createAnswer(a).then((function(e){ae.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,ae.log("Setting local description"),g&&r&&("chrome"===ae.webRTCAdapter.browserDetails.browser?ae.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"):"firefox"!==ae.webRTCAdapter.browserDetails.browser&&ae.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),o.mySdp=e.sdp,o.pc.setLocalDescription(e)["catch"](n.error),o.mediaConstraints=a,o.iceDone||o.trickle?n.success(e):ae.log("Waiting for all candidates...")}),n.error)}function H(e,t){t=t||{},t.success="function"==typeof t.success?t.success:ae.noop,t.error="function"==typeof t.error?t.error:ae.noop;var n=w[e];if(null!==n&&void 0!==n&&null!==n.webrtcStuff&&void 0!==n.webrtcStuff){var i=n.webrtcStuff;ae.log("Sending offer/answer SDP..."),null!==i.mySdp&&void 0!==i.mySdp?(i.mySdp={type:i.pc.localDescription.type,sdp:i.pc.localDescription.sdp},!1===i.trickle&&(i.mySdp["trickle"]=!1),ae.debug(t),i.sdpSent=!0,t.success(i.mySdp)):ae.warn("Local SDP instance is invalid, not sending anything...")}else ae.warn("Invalid handle, not sending anything")}function G(e,t){var n=w[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return ae.warn("Invalid handle"),0;var i=t?"remote":"local",o=n.webrtcStuff;return o.volume[i]||(o.volume[i]={value:0}),o.pc.getStats&&"chrome"===ae.webRTCAdapter.browserDetails.browser?!t||null!==o.remoteStream&&void 0!==o.remoteStream?t||null!==o.myStream&&void 0!==o.myStream?null===o.volume[i].timer||void 0===o.volume[i].timer?(ae.log("Starting "+i+" volume monitor"),o.volume[i].timer=setInterval((function(){o.pc.getStats((function(e){for(var n=e.result(),r=0;r<n.length;r++){var a=n[r];"ssrc"==a.type&&(t&&a.stat("audioOutputLevel")?o.volume[i].value=parseInt(a.stat("audioOutputLevel")):!t&&a.stat("audioInputLevel")&&(o.volume[i].value=parseInt(a.stat("audioInputLevel"))))}}))}),200),0):o.volume[i].value:(ae.warn("Local stream unavailable"),0):(ae.warn("Remote stream unavailable"),0):(ae.warn("Getting the "+i+" volume unsupported by browser"),0)}function W(e,t){var n=w[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return ae.warn("Invalid handle"),!0;var i=n.webrtcStuff;return null===i.pc||void 0===i.pc?(ae.warn("Invalid PeerConnection"),!0):void 0===i.myStream||null===i.myStream?(ae.warn("Invalid local MediaStream"),!0):t?null===i.myStream.getVideoTracks()||void 0===i.myStream.getVideoTracks()||0===i.myStream.getVideoTracks().length?(ae.warn("No video track"),!0):!i.myStream.getVideoTracks()[0].enabled:null===i.myStream.getAudioTracks()||void 0===i.myStream.getAudioTracks()||0===i.myStream.getAudioTracks().length?(ae.warn("No audio track"),!0):!i.myStream.getAudioTracks()[0].enabled}function J(e,t,n){var i=w[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return ae.warn("Invalid handle"),!1;var o=i.webrtcStuff;return null===o.pc||void 0===o.pc?(ae.warn("Invalid PeerConnection"),!1):void 0===o.myStream||null===o.myStream?(ae.warn("Invalid local MediaStream"),!1):t?null===o.myStream.getVideoTracks()||void 0===o.myStream.getVideoTracks()||0===o.myStream.getVideoTracks().length?(ae.warn("No video track"),!1):(o.myStream.getVideoTracks()[0].enabled=!n,!0):null===o.myStream.getAudioTracks()||void 0===o.myStream.getAudioTracks()||0===o.myStream.getAudioTracks().length?(ae.warn("No audio track"),!1):(o.myStream.getAudioTracks()[0].enabled=!n,!0)}function K(e){var t=w[e];if(null===t||void 0===t||null===t.webrtcStuff||void 0===t.webrtcStuff)return ae.warn("Invalid handle"),"Invalid handle";var n=t.webrtcStuff;return null===n.pc||void 0===n.pc?"Invalid PeerConnection":n.pc.getStats?null===n.bitrate.timer||void 0===n.bitrate.timer?(ae.log("Starting bitrate timer (via getStats)"),n.bitrate.timer=setInterval((function(){n.pc.getStats().then((function(e){e.forEach((function(e){if(e){var t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t)if(n.bitrate.bsnow=e.bytesReceived,n.bitrate.tsnow=e.timestamp,null===n.bitrate.bsbefore||null===n.bitrate.tsbefore)n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow;else{var i=n.bitrate.tsnow-n.bitrate.tsbefore;"safari"==ae.webRTCAdapter.browserDetails.browser&&(i/=1e3);var o=Math.round(8*(n.bitrate.bsnow-n.bitrate.bsbefore)/i);"safari"===ae.webRTCAdapter.browserDetails.browser&&(o=parseInt(o/1e3)),n.bitrate.value=o+" kbits/sec",n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow}}}))}))}),1e3),"0 kbits/sec"):n.bitrate.value:(ae.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser")}function Z(e){ae.error("WebRTC error:",e)}function q(e,i){ae.log("Cleaning WebRTC stuff");var o=w[e];if(null!==o&&void 0!==o){var r=o.webrtcStuff;if(null!==r&&void 0!==r){if(!0===i){var a={rtcgw:"hangup",transaction:ae.randomString(12)};null!==o.token&&void 0!==o.token&&(a["token"]=o.token),null!==g&&void 0!==g&&(a["apisecret"]=g),ae.debug("Sending hangup request (handle="+e+"):"),ae.debug(a),t?(a["session_id"]=T,a["handle_id"]=e,n.send(JSON.stringify(a))):ae.httpAPICall(s+"/"+T+"/"+e,{verb:"POST",withCredentials:p,body:a})}r.remoteStream=null,r.volume&&(r.volume["local"]&&r.volume["local"].timer&&clearInterval(r.volume["local"].timer),r.volume["remote"]&&r.volume["remote"].timer&&clearInterval(r.volume["remote"].timer)),r.volume={},r.bitrate.timer&&clearInterval(r.bitrate.timer),r.bitrate.timer=null,r.bitrate.bsnow=null,r.bitrate.bsbefore=null,r.bitrate.tsnow=null,r.bitrate.tsbefore=null,r.bitrate.value=null;try{if(!r.streamExternal&&null!==r.myStream&&void 0!==r.myStream){ae.log("Stopping local stream tracks");var d=r.myStream.getTracks();for(var l in d){var c=d[l];ae.log(c),null!==c&&void 0!==c&&c.stop()}}}catch(u){}r.streamExternal=!1,r.myStream=null;try{r.pc.close()}catch(u){}r.pc=null,r.candidates=null,r.mySdp=null,r.remoteSdp=null,r.iceDone=!1,r.dataChannel={},r.dtmfSender=null}o.oncleanup()}}function Y(e){for(var t=e.split("\r\n"),n=!1,i=[-1],o=[-1],r=null,a=null,s=null,d=null,l=-1,c=0;c<t.length;c++){var u=t[c].match(/m=(\w+) */);if(u){var m=u[1];if("video"===m){if(!(i[0]<0)){l=c;break}n=!0}else if(i[0]>-1){l=c;break}}else if(n){var p=t[c].match(/a=ssrc-group:FID (\d+) (\d+)/);if(p)i[0]=p[1],o[0]=p[2],t.splice(c,1),c--;else{if(i[0]){var h=t[c].match("a=ssrc:"+i[0]+" cname:(.+)");if(h&&(r=h[1]),h=t[c].match("a=ssrc:"+i[0]+" msid:(.+)"),h&&(a=h[1]),h=t[c].match("a=ssrc:"+i[0]+" mslabel:(.+)"),h&&(s=h[1]),h=t[c].match("a=ssrc:"+i[0]+" label:(.+)"),h&&(d=h[1]),0===t[c].indexOf("a=ssrc:"+o[0])){t.splice(c,1),c--;continue}if(0===t[c].indexOf("a=ssrc:"+i[0])){t.splice(c,1),c--;continue}}0!=t[c].length||(t.splice(c,1),c--)}}}if(i[0]<0){l=-1,n=!1;for(c=0;c<t.length;c++){u=t[c].match(/m=(\w+) */);if(u){m=u[1];if("video"===m){if(!(i[0]<0)){l=c;break}n=!0}else if(i[0]>-1){l=c;break}}else if(n){if(i[0]<0){var f=t[c].match(/a=ssrc:(\d+)/);if(f){i[0]=f[1],t.splice(c,1),c--;continue}}else{h=t[c].match("a=ssrc:"+i[0]+" cname:(.+)");if(h&&(r=h[1]),h=t[c].match("a=ssrc:"+i[0]+" msid:(.+)"),h&&(a=h[1]),h=t[c].match("a=ssrc:"+i[0]+" mslabel:(.+)"),h&&(s=h[1]),h=t[c].match("a=ssrc:"+i[0]+" label:(.+)"),h&&(d=h[1]),0===t[c].indexOf("a=ssrc:"+o[0])){t.splice(c,1),c--;continue}if(0===t[c].indexOf("a=ssrc:"+i[0])){t.splice(c,1),c--;continue}}0!=t[c].length||(t.splice(c,1),c--)}}}if(i[0]<0)return ae.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),e;l<0&&(l=t.length),i[1]=Math.floor(4294967295*Math.random()),i[2]=Math.floor(4294967295*Math.random()),o[1]=Math.floor(4294967295*Math.random()),o[2]=Math.floor(4294967295*Math.random());for(c=0;c<i.length;c++)r&&(t.splice(l,0,"a=ssrc:"+i[c]+" cname:"+r),l++),a&&(t.splice(l,0,"a=ssrc:"+i[c]+" msid:"+a),l++),s&&(t.splice(l,0,"a=ssrc:"+i[c]+" mslabel:"+s),l++),d&&(t.splice(l,0,"a=ssrc:"+i[c]+" label:"+d),l++),r&&(t.splice(l,0,"a=ssrc:"+o[c]+" cname:"+r),l++),a&&(t.splice(l,0,"a=ssrc:"+o[c]+" msid:"+a),l++),s&&(t.splice(l,0,"a=ssrc:"+o[c]+" mslabel:"+s),l++),d&&(t.splice(l,0,"a=ssrc:"+o[c]+" label:"+d),l++);return t.splice(l,0,"a=ssrc-group:FID "+i[2]+" "+o[2]),t.splice(l,0,"a=ssrc-group:FID "+i[1]+" "+o[1]),t.splice(l,0,"a=ssrc-group:FID "+i[0]+" "+o[0]),t.splice(l,0,"a=ssrc-group:SIM "+i[0]+" "+i[1]+" "+i[2]),e=t.join("\r\n"),e.endsWith("\r\n")||(e+="\r\n"),e}function X(e){return ae.debug("isAudioSendEnabled:",e),void 0===e||null===e||!1!==e.audio&&(void 0===e.audioSend||null===e.audioSend||!0===e.audioSend)}function Q(e){return ae.debug("isAudioSendRequired:",e),void 0!==e&&null!==e&&(!1!==e.audio&&!1!==e.audioSend&&(void 0!==e.failIfNoAudio&&null!==e.failIfNoAudio&&!0===e.failIfNoAudio))}function $(e){return ae.debug("isAudioRecvEnabled:",e),void 0===e||null===e||!1!==e.audio&&(void 0===e.audioRecv||null===e.audioRecv||!0===e.audioRecv)}function ee(e){return ae.debug("isVideoSendEnabled:",e),void 0===e||null===e||!1!==e.video&&(void 0===e.videoSend||null===e.videoSend||!0===e.videoSend)}function te(e){return ae.debug("isVideoSendRequired:",e),void 0!==e&&null!==e&&(!1!==e.video&&!1!==e.videoSend&&(void 0!==e.failIfNoVideo&&null!==e.failIfNoVideo&&!0===e.failIfNoVideo))}function ne(e){return ae.debug("isVideoRecvEnabled:",e),void 0===e||null===e||!1!==e.video&&(void 0===e.videoRecv||null===e.videoRecv||!0===e.videoRecv)}function ie(e){if(ae.debug("isScreenSendEnabled:",e),void 0===e||null===e)return!1;if("object"!==l(e.video)||"object"!==l(e.video.mandatory))return!1;var t=e.video.mandatory;return t.chromeMediaSource?"desktop"===t.chromeMediaSource||"screen"===t.chromeMediaSource:t.mozMediaSource?"window"===t.mozMediaSource||"screen"===t.mozMediaSource:!!t.mediaSource&&("window"===t.mediaSource||"screen"===t.mediaSource)}function oe(e){return ae.debug("isDataEnabled:",e),"edge"==ae.webRTCAdapter.browserDetails.browser?(ae.warn("Edge doesn't support data channels yet"),!1):void 0!==e&&null!==e&&!0===e.data}function re(e){return ae.debug("isTrickleEnabled:",e),void 0===e||null===e||!0===e}x(e),this.getServer=function(){return s},this.isConnected=function(){return b},this.reconnect=function(e){e=e||{},e.success="function"==typeof e.success?e.success:ae.noop,e.error="function"==typeof e.error?e.error:ae.noop,e["reconnect"]=!0,x(e)},this.getSessionId=function(){return T},this.destroy=function(e){R(e)},this.attach=function(e){A(e)}}ae.useDefaultDependencies=function(e){var t=e&&e.fetch||fetch,n=e&&e.Promise||Promise,i=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new i(e,t)},extension:e&&e.extension||re,isArray:function(e){return Array.isArray(e)},webRTCAdapter:e&&e.adapter||window.adapter,httpAPICall:function(e,i){var o={method:i.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===i.verb&&(o.headers["Content-Type"]="application/json"),void 0!==i.withCredentials&&(o.credentials=!0===i.withCredentials?"include":i.withCredentials?i.withCredentials:"omit"),void 0!==i.body&&(o.body=JSON.stringify(i.body));var r=t(e,o)["catch"]((function(e){return n.reject({message:"Probably a network error, is the server down?",error:e})}));if(void 0!==i.timeout){var a=new n((function(e,t){var n=setTimeout((function(){return clearTimeout(n),t({message:"Request timed out",timeout:i.timeout})}),i.timeout)}));r=n.race([r,a])}return r.then((function(e){return e.ok?l(i.success)===l(ae.noop)?e.json().then((function(e){i.success(e)}))["catch"]((function(t){return n.reject({message:"Failed to parse response body",error:t,response:e})})):void 0:n.reject({message:"API call failed",response:e})}))["catch"]((function(e){l(i.error)===l(ae.noop)&&i.error(e.message||"<< internal error >>",e)})),r}}},ae.useOldDependencies=function(e){var t=e&&e.jQuery||jQuery,n=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new n(e,t)},isArray:function(e){return t.isArray(e)},extension:e&&e.extension||re,webRTCAdapter:e&&e.adapter||adapter,httpAPICall:function(e,n){var i=void 0!==n.body?{contentType:"application/json",data:JSON.stringify(n.body)}:{},o=void 0!==n.withCredentials?{xhrFields:{withCredentials:n.withCredentials}}:{};return t.ajax(t.extend(i,o,{url:e,type:n.verb,cache:!1,dataType:"json",async:n.async,timeout:n.timeout,success:function(e){l(n.success)===l(ae.noop)&&n.success(e)},error:function(e,t,i){l(n.error)===l(ae.noop)&&n.error(t,i)}}))}}},ae.noop=function(){},ae.dataChanDefaultLabel="JanusDataChannel",ae.endOfCandidates=null,ae.init=function(e){if(e=e||{},e.callback="function"==typeof e.callback?e.callback:ae.noop,!0===ae.initDone)e.callback();else{if("undefined"!=typeof console&&"undefined"!=typeof console.log||(console={log:function(){}}),ae.trace=ae.noop,ae.debug=ae.noop,ae.vdebug=ae.noop,ae.log=ae.noop,ae.warn=ae.noop,ae.error=ae.noop,!0===e.debug||"all"===e.debug)ae.trace=console.trace.bind(console),ae.debug=console.debug.bind(console),ae.vdebug=console.debug.bind(console),ae.log=console.log.bind(console),ae.warn=console.warn.bind(console),ae.error=console.error.bind(console);else if(Array.isArray(e.debug))for(var t in e.debug){var n=e.debug[t];switch(n){case"trace":ae.trace=console.trace.bind(console);break;case"debug":ae.debug=console.debug.bind(console);break;case"vdebug":ae.vdebug=console.debug.bind(console);break;case"log":ae.log=console.log.bind(console);break;case"warn":ae.warn=console.warn.bind(console);break;case"error":ae.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+n+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')");break}}ae.log("Initializing library");var i=e.dependencies||ae.useDefaultDependencies();ae.isArray=i.isArray,ae.webRTCAdapter=i.webRTCAdapter,ae.httpAPICall=i.httpAPICall,ae.newWebSocket=i.newWebSocket,ae.extension=i.extension,ae.extension.init(),ae.listDevices=function(e,t){e="function"==typeof e?e:ae.noop,null==t&&(t={audio:!0,video:!0}),ae.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(t).then((function(t){navigator.mediaDevices.enumerateDevices().then((function(n){ae.debug(n),e(n);try{var i=t.getTracks();for(var o in i){var r=i[o];null!==r&&void 0!==r&&r.stop()}}catch(a){}}))}))["catch"]((function(t){ae.error(t),e([])})):(ae.warn("navigator.mediaDevices unavailable"),e([]))},ae.attachMediaStream=function(e,t){if("chrome"===ae.webRTCAdapter.browserDetails.browser){var n=ae.webRTCAdapter.browserDetails.version;n>=52?e.srcObject=t:ae.error("Error attaching stream to element")}else e.srcObject=t},ae.reattachMediaStream=function(e,t){if("chrome"===ae.webRTCAdapter.browserDetails.browser){var n=ae.webRTCAdapter.browserDetails.version;n>=52?e.srcObject=t.srcObject:"undefined"!==typeof e.src?e.src=t.src:ae.error("Error reattaching stream to element")}else e.srcObject=t.srcObject};var o=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0,r=o?"pagehide":"beforeunload",a=window["on"+r];if(window.addEventListener(r,(function(e){for(var t in ae.log("Closing window"),ae.sessions)null!==ae.sessions[t]&&void 0!==ae.sessions[t]&&ae.sessions[t].destroyOnUnload&&(ae.log("Destroying session "+t),ae.sessions[t].destroy({asyncRequest:!1,notifyDestroyed:!1}));a&&"function"==typeof a&&a()})),ae.safariVp8=!1,"safari"===ae.webRTCAdapter.browserDetails.browser&&ae.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(var t in RTCRtpSender.getCapabilities("video").codecs){var s=RTCRtpSender.getCapabilities("video").codecs[t];if(s&&s.mimeType&&"video/vp8"===s.mimeType.toLowerCase()){ae.safariVp8=!0;break}}ae.safariVp8?ae.log("This version of Safari supports VP8"):ae.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var d=new RTCPeerConnection({},{});d.createOffer({offerToReceiveVideo:!0}).then((function(e){ae.safariVp8=-1!==e.sdp.indexOf("VP8"),ae.safariVp8?ae.log("This version of Safari supports VP8"):ae.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),d.close(),d=null}))}if(ae.unifiedPlan=!1,"firefox"===ae.webRTCAdapter.browserDetails.browser&&ae.webRTCAdapter.browserDetails.version>=59)ae.unifiedPlan=!0;else if("chrome"===ae.webRTCAdapter.browserDetails.browser&&ae.webRTCAdapter.browserDetails.version<72)ae.unifiedPlan=!1;else if("undefined"===typeof RTCRtpTransceiver||"currentDirection"in RTCRtpTransceiver.prototype){var l=new RTCPeerConnection;try{l.addTransceiver("audio"),ae.unifiedPlan=!0}catch(c){}l.close()}else ae.unifiedPlan=!1;ae.initDone=!0,e.callback()}},ae.isWebrtcSupported=function(){return void 0!==window.RTCPeerConnection&&null!==window.RTCPeerConnection},ae.isGetUserMediaAvailable=function(){return void 0!==navigator.mediaDevices&&null!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia&&null!==navigator.mediaDevices.getUserMedia},ae.randomString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",i=0;i<e;i++){var o=Math.floor(Math.random()*t.length);n+=t.substring(o,o+1)}return n},window.Janus_Talk=ae;var se=window.Janus_Talk,de=null,le=null,ce="tts-"+Janus_Talk.randomString(12),ue=null;se.init({debug:"all",callback:function(){window.stopTalk=function(){de.destroy()},window.startTalk=function(){se.isWebrtcSupported()?de=new se({server:window.EZUIKit.opt.rtcUrl,success:function(){de.attach({plugin:"rtcgw.plugin.tts",opaqueId:ce,success:function(e){le=e,se.log("Plugin attached! ("+le.getPlugin()+", id="+le.getId()+")");var t=window.EZUIKit.opt.talkLink;console.log("ttsUlr",t);var n={request:"start",url:t,codec:"opus",dir:"sendrecv",audio_debug:1};"gb28181"===window.EZUIKit.opt.talkType&&(n["devProto"]="gb28181"),se.debug("Trying a createOffer too (audio/video sendrecv)"),le.createOffer({media:{audio:!0,video:!1,data:!1},simulcast:!1,simulcast2:!1,success:function(e){se.debug("Got SDP!"),se.debug(e),le.send({message:n,jsep:e}),"undefined"!==typeof window.EZUIKit.handleTalkSuccess&&window.EZUIKit.handleTalkSuccess()},error:function(e){se.error("WebRTC error:",e),"undefined"!==typeof window.EZUIKit.handleTalkError&&window.EZUIKit.handleTalkError(e)}})},error:function(e){console.error("  -- Error attaching plugin...",e),bootbox.alert("Error attaching plugin... "+e),"undefined"!==window.EZUIKit.handleTalkError&&window.EZUIKit.handleTalkError(e)},consentDialog:function(e){se.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){se.log("ICE state changed to "+e)},mediaState:function(e,t){se.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){se.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},slowLink:function(e,t){se.warn("Janus reports problems "+(e?"sending":"receiving")+" packets on this PeerConnection ("+t+" lost packets)")},onmessage:function(e,t){se.debug(" ::: Got a message :::"),se.debug(e),void 0!==t&&null!==t&&(se.debug("Handling SDP as well..."),se.debug(t),le.handleRemoteJsep({jsep:t}));var n=e["result"];if(null!==n&&void 0!==n){if("done"===n)return bootbox.alert("The TTS Test is over"),null!==ue&&void 0!==ue&&ue.stop(),void(ue=null);"msg"===n&&"undefined"!==typeof window.EZUIKit.handleTalkMessage&&window.EZUIKit.handleTalkMessage(e);var i=n["status"];"slow_link"===i&&toastr.warning("Janus apparently missed many packets we sent, maybe we should reduce the bitrate","Packet loss?",{timeOut:2e3})}},onlocalstream:function(e){se.debug(" ::: Got a local stream :::"),se.debug(e),se.attachMediaStream(document.getElementById("myaudio"),e),"completed"!==le.webrtcStuff.pc.iceConnectionState&&"connected"!==le.webrtcStuff.pc.iceConnectionState&&(null==ue?document.getElementById("audioright"):ue.spin());var t=e.getAudioTracks();null===t||void 0===t||t.length},onremotestream:function(e){se.debug(" ::: Got a remote stream :::"),se.debug(e),se.attachMediaStream(document.getElementById("peeraudio"),e);var t=e.getAudioTracks();null===t||void 0===t||0===t.length||document.getElementById("peeraudio").play()},ondataopen:function(e){se.log("The DataChannel is available!")},ondata:function(e){se.debug("We got data from the DataChannel! "+e)},oncleanup:function(){se.log(" ::: Got a cleanup notification :::"),null!==ue&&void 0!==ue&&ue.stop(),ue=null}})},error:function(e){se.error(e),"undefined"!==window.EZUIKit.handleTalkError&&window.EZUIKit.handleTalkError(e)},destroyed:function(){}}):bootbox.alert("No WebRTC support... ")}}}),window.janus=de,window.tts=le;var me=function(){function e(t){var n=this;c(this,e),this.jSPlugin=t,this.codeHandler=new ie,this.pluginStatus=new M(this,this.jSPlugin.params.id);var i=document.createElement("div");i.id="audioleft";var o=document.createElement("div");o.id="audioright",o.style="display:none;";var r=document.createElement("audio");r.id="myaudio",r.muted=!0,r.setAttribute("autoplay",!0),r.setAttribute("controls",!0),i.appendChild(r),i.style="display:none;";var a=document.createElement("audio");a.id="peeraudio",a.setAttribute("autoplay",!0),a.setAttribute("controls",!0),o.appendChild(a),window.EZUIKit["handleTalkError"]=function(e){console.log("talk err",e),"undefined"!==typeof n.jSPlugin.handleTalkError&&n.jSPlugin.handleTalkError(e)},window.EZUIKit["handleTalkSuccess"]=function(e){console.log("talk success",e),"undefined"!==typeof n.jSPlugin.handleTalkSuccess&&n.jSPlugin.handleTalkSuccess(e)},window.EZUIKit.opt={rtcUrl:"",talkLink:"",ttsUrl:"",stream:"",deviceSerial:k(this.jSPlugin.url).deviceSerial,channelNo:k(this.jSPlugin.url).channelNo},document.body.appendChild(i),document.body.appendChild(o)}return m(e,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"startTalk",value:function(){var e=this;if(this.jSPlugin.capacity&&this.jSPlugin.capacity.support_talk&&(!this.jSPlugin.capacity||"3"!==this.jSPlugin.capacity.support_talk&&"1"!==this.jSPlugin.capacity.support_talk))return"function"===typeof this.jSPlugin.params.handleError&&(this.pluginStatus.loadingSetText({text:"设备不支持对讲",color:"red",delayClear:2e3}),this.jSPlugin.params.handleError({msg:"设备不支持对讲",retcode:-1e3,id:this.jSPlugin.params.id,type:"handleError"})),console.log("设备不支持对讲"),!1;var t=new FormData;t.append("accessToken",this.jSPlugin.accessToken),t.append("deviceSerial",k(this.jSPlugin.url).deviceSerial),t.append("channelNo",k(this.jSPlugin.url).channelNo),fetch(this.jSPlugin.env.domain+"/api/lapp/live/talk/url",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(t){if(200==t.code){var n=t.data;if(n){var i=n.rtcUrl;-1===i.indexOf("ws")&&(i=i.replace("https","wss").replace("rtcgw","rtcgw-ws")),window.EZUIKit.opt.rtcUrl=i,window.EZUIKit.opt.ttsUrl="tts://"+n.ttsUrl,window.EZUIKit.opt.deviceSerial=k(e.jSPlugin.url).deviceSerial,window.EZUIKit.opt.channelNo=k(e.jSPlugin.url).channelNo;var o=window.EZUIKit.opt.ttsUrl.split("?");if(2===o.length){var r="talk?dev="+window.EZUIKit.opt.deviceSerial+"&chann="+window.EZUIKit.opt.channelNo+"&encodetype=2";window.EZUIKit.opt.talkLink=window.EZUIKit.opt.ttsUrl.split("?")[0]+"/"+r,window.EZUIKit.opt.talkType="gb28181"}else{r="talk://"+window.EZUIKit.opt.deviceSerial+":0:"+window.EZUIKit.opt.channelNo+":cas.ys7.com:6500";window.EZUIKit.opt.talkLink=window.EZUIKit.opt.ttsUrl.split("?")[0]+"/"+r}window.EZUIKit.opt.stream=n.stream,window.startTalk()}}else console.log(t.code,e.codeHandler.matchInfo(t.code,"talk")),e.pluginStatus.loadingSetText({text:e.codeHandler.matchInfo(t.code,"talk").msg||t.msg,color:"red",delayClear:2e3}),"function"===typeof e.jSPlugin.params.handleError&&e.jSPlugin.params.handleError({msg:t.msg,retcode:t.code,id:e.jSPlugin.params.id,type:"handleError"})}))["catch"]((function(e){console.log("err",e)}))}},{key:"stopTalk",value:function(){window.stopTalk(),document.getElementById("myaudio")&&document.getElementById("myaudio").srcObject&&document.getElementById("myaudio").srcObject.getTracks()[0].stop()}}]),e}(),pe=function(){function e(t){var n=this;c(this,e),this.jSPlugin=t;var i=document.createElement("style");i.innerHTML="\n    body{\n      padding: 0;\n      margin: 0;\n    }\n    #mobile-ez-ptz-container {\n      display: inline-block;\n      width: 375px;\n      text-align: center;\n    }\n    .live-ptz-title{\n      height: 25px;\n      font-size: 18px;\n      color: #2c2c2c;\n      text-align: center;\n      font-weight: 700;\n      margin: 24px 0 12px;\n    }\n    .live-ptz-intro {\n      margin-bottom: 24px;\n      color: #aaaaaa;\n    }\n    .mobile-ez-ptz-wrap {\n      background-image: linear-gradient(180deg, #f6f8ff 0%, #ededed6b 50%)\n    }\n    #mobile-ez-ptz-container .mobile-ez-ptz-container {\n      position: relative;\n      width: 260px;\n      height: 260px;\n      background: rgba(255, 255, 255, 0.80);\n      border: 1px solid rgba(255, 255, 255, 0.80);\n      border-radius: 100%;\n      cursor: pointer;\n      overflow: hidden;\n      margin: auto;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.top {\n      width: 0;\n      height: 0;\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-bottom: 6px solid #aaaaaa;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 6px);\n      top: 10px;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.top.active {\n      border-bottom-color: #1890FF;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.bottom {\n      width: 0;\n      height: 0;\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-top: 6px solid #aaaaaa;\n      position: absolute;\n      display: inline-block;\n      left: calc(50% - 6px);\n      bottom: 10px;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.bottom.active {\n      border-top-color: #1890FF;\n\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.right {\n      width: 0;\n      height: 0;\n      border-top: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-left: 6px solid #aaaaaa;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 6px);\n      right: 10px;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.right.active {\n      border-left-color: #1890FF;\n\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.left {\n      width: 0;\n      height: 0;\n      border-top: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-right: 6px solid #aaaaaa;\n      position: absolute;\n      display: inline-block;\n      top: calc(50% - 6px);\n      left: 10px;\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.left.active {\n      border-right-color: #1890FF;\n\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-container .ez-ptz-main.center {\n      width: 52px;\n      height: 52px;\n      background: #FFFFFF;\n      border: 2px solid #eee;\n      border-radius: 100%;\n      top: calc(50% - 26px);\n      left: calc(50% - 26px);\n      position: absolute;\n      /* box-shadow: 0px -39px 40px 6px #1890ff; */\n    }\n\n    #mobile-ez-ptz-container .mobile-ez-ptz-wrap {\n      display: inline-block;\n      padding: 24px 24px;\n      border-radius: 100%;\n      overflow: hidden;\n    }\n\n    #mobile-ez-ptz-container .ez-ptz-close {\n      position: absolute;\n      color: #FFFFFF;\n      top: 0;\n      right: 0px;\n    }",document.getElementsByTagName("head")[0].appendChild(i);var o=document.createElement("div");o.className="mobile-ez-ptz-container",o.id="mobile-ez-ptz-container",o.style="display:inline-block;width: ".concat(this.jSPlugin.width,"px;text-align:center;");var r=document.createElement("div");r.className="live-ptz-title",r.id="live-ptz-title",r.innerHTML="云台控制",document.getElementById("live-ptz-title")||o.appendChild(r);var a=document.createElement("div");a.className="live-ptz-intro",a.id="live-ptz-intro",a.innerHTML="请通过操控云台来调整摄像机视角",document.getElementById("live-ptz-intro")||o.appendChild(a);var s=document.createElement("div");s.id="mobile-ez-ptz-item",s.className="mobile-ez-ptz-wrap",s.innerHTML='\n    <div class="mobile-ez-ptz-container" id="mobile-ez-ptz-container">\n      <div class="ez-ptz-main center"></div>\n      <div class="mobile-ez-ptz-icon top default"></div>\n      <div class="mobile-ez-ptz-icon left default"></div>\n      <div class="mobile-ez-ptz-icon bottom default"></div>\n      <div class="mobile-ez-ptz-icon right default"></div>\n    </div>\n      ',document.getElementById("mobile-ez-ptz-item")||o.appendChild(s),S(o,document.getElementById("".concat(this.jSPlugin.id,"-wrap"))),document.getElementById("mobile-ez-ptz-item").ontouchstart=function(e){e.preventDefault(),console.log("触摸开始"),n._handlePtzTouch(e,"start")},document.getElementById("mobile-ez-ptz-item").ontouchend=function(e){e.preventDefault(),console.log("触摸结束",e),n._handlePtzTouch(e,"stop")},document.getElementById("mobile-ez-ptz-item").onmousedown=function(e){e.preventDefault(),console.log("触摸开始"),n._handlePtzTouch(e,"start")},document.getElementById("mobile-ez-ptz-item").onmouseup=function(e){e.preventDefault(),console.log("触摸结束",e),n._handlePtzTouch(e,"stop")}}return m(e,[{key:"show",value:function(){document.getElementById("mobile-ez-ptz-item").style="display: inline-block"}},{key:"hide",value:function(){document.getElementById("mobile-ez-ptz-item").style="display: none"}},{key:"_handlePtzTouch",value:function(e,t){var n=document.getElementById("mobile-ez-ptz-item").getBoundingClientRect(),i=n.left+130,o=n.top+130,r=e.x||e.changedTouches[0].clientX,a=e.y||e.changedTouches[0].clientY,s=r-i,d=a-o,l=0,c=this.jSPlugin.env.domain+"/api/lapp/device/ptz/start";Math.abs(s)>Math.abs(d)?s>0?(l=3,document.getElementsByClassName("mobile-ez-ptz-icon")[3].className=document.getElementsByClassName("mobile-ez-ptz-icon")[3].className.replace("default","active")):(l=2,document.getElementsByClassName("mobile-ez-ptz-icon")[1].className=document.getElementsByClassName("mobile-ez-ptz-icon")[1].className.replace("default","active")):d>0?(l=1,document.getElementsByClassName("mobile-ez-ptz-icon")[2].className=document.getElementsByClassName("mobile-ez-ptz-icon")[2].className.replace("default","active")):(l=0,document.getElementsByClassName("mobile-ez-ptz-icon")[0].className=document.getElementsByClassName("mobile-ez-ptz-icon")[0].className.replace("default","active")),document.getElementById("mobile-ez-ptz-item").style="background-image:linear-gradient(".concat(0===l?180:1===l?0:2===l?90:270,"deg, #c0ddf1 0%, rgba(100,143,252,0.00) 50%)"),"stop"===t&&(c=this.jSPlugin.env.domain+"/api/lapp/device/ptz/stop",document.getElementById("mobile-ez-ptz-item").style="",document.getElementsByClassName("mobile-ez-ptz-icon")[3].className=document.getElementsByClassName("mobile-ez-ptz-icon")[3].className.replace("active","default"),document.getElementsByClassName("mobile-ez-ptz-icon")[1].className=document.getElementsByClassName("mobile-ez-ptz-icon")[1].className.replace("active","default"),document.getElementsByClassName("mobile-ez-ptz-icon")[2].className=document.getElementsByClassName("mobile-ez-ptz-icon")[2].className.replace("active","default"),document.getElementsByClassName("mobile-ez-ptz-icon")[0].className=document.getElementsByClassName("mobile-ez-ptz-icon")[0].className.replace("active","default"));var u=new FormData;u.append("deviceSerial",k(this.jSPlugin.url).deviceSerial),u.append("channelNo",k(this.jSPlugin.url).channelNo),u.append("speed",1),u.append("direction",l),u.append("accessToken",this.jSPlugin.accessToken),fetch(c,{method:"POST",body:u}).then((function(e){return e.json()})).then((function(e){200==e.code||60005!=e.code&&60002!=e.code&&60003!=e.code&&60004!=e.code||(document.getElementById("mobile-ez-ptz-item").style="background-image:linear-gradient(".concat(0===l?180:1===l?0:2===l?90:270,"deg, #f45656 0%, rgba(100,143,252,0.00) 50%)"))}))["catch"]((function(e){console.log("云台调用异常",e)}))}}]),e}(),he=0,fe="成功",ge={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-0",iconId:"deviceID",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-1",iconId:"deviceName",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-2",iconId:"cloudRec",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-3",iconId:"rec",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"}]},footer:{color:"#FFFFFF",backgroundColor:"rgb(0 0 0 / 0%)",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-0",iconId:"play",part:"left",defaultActive:1,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-1",iconId:"capturePicture",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-2",iconId:"sound",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-3",iconId:"pantile",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-4",iconId:"recordvideo",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-5",iconId:"talk",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-6",iconId:"hd",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-7",iconId:"webExpend",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-8",iconId:"expend",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"}]}},ve={retcode:he,msg:fe,data:ge},ye={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Se={data:ye},be={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:1},{iconId:"rec",part:"right",defaultActive:0,isrender:1}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Te={data:be},we={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-0",iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-1",iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-2",iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-3",iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:1},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Ce={data:we},_e={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-0",iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-1",iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-2",iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-3",iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Ee={data:_e},ke={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:0},{iconId:"deviceName",part:"left",defaultActive:0,isrender:0},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:0},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:0},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:0}]}},Pe={data:ke},Ie={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},xe={data:Ie},Re={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:1},{iconId:"rec",part:"right",defaultActive:0,isrender:1}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:1},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Ae={data:Re},De=[{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"pcLive",themeIntro:"PC直播全量版",themeName:"PC直播全量版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Ce.data.header,footer:Ce.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"security",themeIntro:"PC直播安防版",themeName:"PC直播安防版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Ee.data.header,footer:Ee.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"voice",themeIntro:"PC直播语音版",themeName:"PC直播语音版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:xe.data.header,footer:xe.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"simple",themeIntro:"PC直播极简版",themeName:"PC直播极简版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"",header:Pe.data.header,footer:Pe.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"pcRec",themeIntro:"PC回放全量版",themeName:"PC回放全量版",themeType:"webRec",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Ae.data.header,footer:Ae.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"mobileLive",themeIntro:"Mobile直播全量版",themeName:"Mobile直播全量版",themeType:"mobileLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_GmAL5IhAABZs1vUK0s564.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Se.data.header,footer:Se.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"mobileRec",themeIntro:"Mobile回放全量版",themeName:"Mobile回放全量版",themeType:"mobileRec",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_GmAL5IhAABZs1vUK0s564.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Te.data.header,footer:Te.data.footer}],je=function(){function e(t){var n=this;c(this,e),this.jSPlugin=t,this.enableZoom=!1,this.isMouseDown=!1,this.videoWidth=1920,this.videoHeight=1080,this.currentScale=1,this.currentPosition={x:0,y:0,xPercent:.1,yPercent:.1,xCurrentVideo:0,yCurrentVideo:0,left:0,top:0,right:1920,bottom:1080},this.DOM=document.getElementById(t.id),this.clientRect=document.getElementById(t.id).getBoundingClientRect();var i=document.createElement("div");i.id="".concat(t.id,"-zoom-container"),i.style="position: absolute;\n    display:none;\n    left: 12px;\n    bottom: 80px;";var o='\n    <div\n    style="display: inline-flex;flex-direction: column;width: 38px;height: 160px;background:rgba(0,0,0,0.60);border-radius: 8px;align-items: center;">\n    <div id="'.concat(this.jSPlugin.id,'-scale-value" style="font-size: 12px;color:#FFFFFF;margin-top:10px;margin-bottom:4px;">2.0X</div>\n    <div style="width: 24px;" id="').concat(this.jSPlugin.id,'-addScale">\n      <?xml version="1.0" encoding="utf-8"?>\n      <svg version="1.1" fill="#FFFFFF" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n         viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">\n      <title>放大</title>\n      <g id="矩形">\n        <rect class="st0" width="20" height="20" fill="none"/>\n      </g>\n      <g id="形状结合">\n        <path class="st1" d="M10,3.8c3.5,0,6.2,2.8,6.2,6.2s-2.8,6.2-6.2,6.2S3.8,13.5,3.8,10S6.5,3.8,10,3.8z M10,5c-2.8,0-5,2.2-5,5\n          s2.2,5,5,5s5-2.2,5-5S12.8,5,10,5z"/>\n      </g>\n      <g id="路径-4">\n        <path class="st2" d="M12.5,10.7h-5c-0.3,0-0.6-0.3-0.6-0.6s0.3-0.6,0.6-0.6h5c0.3,0,0.6,0.3,0.6,0.6S12.8,10.7,12.5,10.7z"/>\n      </g>\n      <g id="路径-4备份">\n        <path class="st2" d="M10,13.2c-0.3,0-0.6-0.3-0.6-0.6v-5c0-0.3,0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6v5C10.6,12.9,10.3,13.2,10,13.2z"/>\n      </g>\n      </svg>\n    </div>\n    <div style="\n    position: relative;\n    width: 1px;\n    height: 64px;\n    border: 1px solid rgba(255,255,255,0.75);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: flex-end;">\n    <div class="scale-body-line-dot" id="').concat(this.jSPlugin.id,'-scale-body-line-dot" style="width: 8px;\n      height: 8px;\n      background: #FFFFFF;\n      border-radius: 100%;\n      position: absolute;\n      border: 1.5px solid rgba(64,122,255,1);"></div>\n      <div id="').concat(this.jSPlugin.id,'-line-dot" style="width: 1px;\n      height: 0%;\n      background: #1890FF;\n      bottom: 0;"></div>\n    </div>\n    <div style="width: 24px;margin-top: 6px;" id="').concat(this.jSPlugin.id,'-subScale">\n      <?xml version="1.0" encoding="utf-8"?>\n      <svg fill="#FFFFFF" version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n        viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">\n        <title>缩小</title>\n        <g id="矩形">\n          <rect class="st0" width="20" height="20" fill="none"/>\n        </g>\n        <g id="形状结合">\n          <path class="st1" d="M10,3.8c3.5,0,6.2,2.8,6.2,6.2s-2.8,6.2-6.2,6.2S3.8,13.5,3.8,10S6.5,3.8,10,3.8z M10,5c-2.8,0-5,2.2-5,5\n            s2.2,5,5,5s5-2.2,5-5S12.8,5,10,5z"/>\n        </g>\n        <g id="路径-4">\n          <path class="st2" d="M12.5,10.7h-5c-0.3,0-0.6-0.3-0.6-0.6s0.3-0.6,0.6-0.6h5c0.3,0,0.6,0.3,0.6,0.6S12.8,10.7,12.5,10.7z"/>\n        </g>\n      </svg>\n    </div>\n  </div>\n    ');i.innerHTML=o,document.getElementById("".concat(t.id,"-audioControls-left")).parentNode.appendChild(i),document.getElementById("".concat(t.id,"-addScale")).onclick=function(){n.addScale()},document.getElementById("".concat(t.id,"-subScale")).onclick=function(){n.subScale()}}return m(e,[{key:"onMouseDown",value:function(e){this.currentPosition,this.currentScale;var t=this.enableZoom;if(!t)return!1;this.moveX=e.clientX,this.moveY=e.clientY,this.isMouseDown=!0}},{key:"onMouseUp",value:function(e){var t=this.currentPosition,n=this.enableZoom;if(!n)return!1;this.isMouseDown=!1,t.left=t.left-(e.clientX-this.moveX),t.top=t.top-(e.clientY-this.moveY),this.doScale()}},{key:"onMouseOut",value:function(e){var t=this.enableZoom;if(!t)return!1;this.isMouseDown&&(console.log("鼠标按上",e),this.isMouseDown=!1),this.isMouseDown=!1}},{key:"renderDot",value:function(){var e=this.currentScale;document.getElementById("".concat(this.jSPlugin.id,"-scale-value"))&&(document.getElementById("".concat(this.jSPlugin.id,"-scale-value")).innerHTML="".concat(e,".0X")),document.getElementById("".concat(this.jSPlugin.id,"-line-dot"))&&(document.getElementById("".concat(this.jSPlugin.id,"-line-dot")).style.height="".concat((e-1)/7*100,"%")),document.getElementById("".concat(this.jSPlugin.id,"-scale-body-line-dot"))&&(document.getElementById("".concat(this.jSPlugin.id,"-scale-body-line-dot")).style.bottom="calc(".concat((e-1)/7*100,"% - 6px)"))}},{key:"startZoom",value:function(){var e=this,t=this.jSPlugin.jSPlugin._JSPlayM4_GetFrameInfo(0);this.videoWidth=t.width,this.videoHeight=t.height,this.currentPosition.right=t.width,this.currentPosition.bottom=t.height,this.currentScale=1,document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-zoom-container")).style.display="block");try{this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight),this.jSPlugin.jSPlugin.bEZoom=!0}catch(n){console.log(n)}this.renderDot(),this.enableZoom=!0,document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0"))?(document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0")).addEventListener("mousedown",(function(t){return e.onMouseDown(t)})),document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0")).addEventListener("mouseup",(function(t){return e.onMouseUp(t)})),document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0")).addEventListener("mouseout",(function(t){return e.onMouseOut(t)}))):document.getElementById("".concat(this.jSPlugin.id,"-player"))&&(document.getElementById("".concat(this.jSPlugin.id,"-player")).addEventListener("mousedown",(function(t){return e.onMouseDown(t)})),document.getElementById("".concat(this.jSPlugin.id,"-player")).addEventListener("mouseup",(function(t){return e.onMouseUp(t)})),document.getElementById("".concat(this.jSPlugin.id,"-player")).addEventListener("mouseout",(function(t){return e.onMouseOut(t)})))}},{key:"stopZoom",value:function(){var e=this;this.currentScale=1;try{this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight)}catch(t){console.log(t)}document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-zoom-container")).style.display="none"),this.renderDot(),this.enableZoom=!1,document.getElementById(this.jSPlugin.id).removeEventListener("mousedown",(function(t){return e.onMouseDown(t)})),document.getElementById(this.jSPlugin.id).removeEventListener("mouseup",(function(t){return e.onMouseUp(t)})),document.getElementById(this.jSPlugin.id).removeEventListener("mouseout",(function(t){return e.onMouseOut(t)}))}},{key:"doScale",value:function(){console.log("执行放大");var e=this.currentPosition,t=this.currentScale;e.left=e.left+e.xPercent*(e.right-e.left)-this.videoWidth/t*.5,e.left<0?e.left=0:e.left>this.videoWidth-this.videoWidth/t&&(e.left=this.videoWidth-this.videoWidth/t),e.right=e.left+this.videoWidth/t,e.top=e.top+e.yPercent*(e.bottom-e.top)-this.videoHeight/t*.5,e.top<0?e.top=0:e.top>this.videoHeight-this.videoHeight/t&&(e.top=this.videoHeight-this.videoHeight/t),e.bottom=e.top+this.videoHeight/t,e.left=parseInt(e.left,10),e.right=parseInt(e.right,10),e.top=parseInt(e.top,10),e.bottom=parseInt(e.bottom,10),console.log("计算后，",this.jSPlugin.jSPlugin,e.left,e.right,e.top,e.bottom,e.xPercent,e.yPercent);try{this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(e.left,e.right,e.top,e.bottom)}catch(n){console.log(n)}this.renderDot()}},{key:"calCurrentPosition",value:function(e){var t=this.currentPosition,n=this.clientRect;t.x=e.clientX,t.y=e.clientY,t.xPercent=(e.clientX-n.x)/n.width,t.yPercent=(e.clientY-n.y)/n.height,this.doScale()}},{key:"addScale",value:function(){var e=this.currentScale,t=this.currentPosition;if(e>=8)return console.log("达到最大倍率了"),this.jSPlugin.Message&&this.jSPlugin.Message["default"]("已经放大到最大倍数8.0X"),!1;this.currentScale++,t.xPercent=.5,t.yPercent=.5,this.doScale()}},{key:"subScale",value:function(){var e=this.currentScale,t=this.currentPosition;if(e<=1)return console.log("达到最小倍率了"),!1;this.currentScale--,t.xPercent=.5,t.yPercent=.5,this.doScale()}}]),e}();function Le(e,t){return Math.abs(t.clientX-e.clientX)*Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)*Math.abs(t.clientY-e.clientY)}var Me=function(){function e(t){var n=this;c(this,e),this.jSPlugin=t,this.enableZoom=!1,this.isDubboTouch=!1,this.videoWidth=0,this.videoHeight=0,this.currentScale=1,this.currentPosition={x:0,y:0,xPercent:.1,yPercent:.1,xCurrentVideo:0,yCurrentVideo:0,left:0,top:0,right:1920,bottom:1080},this.DOM=document.getElementById(t.id),this.clientRect=document.getElementById(t.id).getBoundingClientRect(),this.point1={clientX:0,clientY:0},this.point2={clientX:0,clientY:0},this.touchLineLength=0,this.inited=!1;var i=document.createElement("div");i.id="".concat(t.id,"-zoom-container"),i.style="display:none;\n    position: absolute;\n    left: 10px;\n    top: -30px;\n    border: 1px solid rgba(0,0,0,0.6);\n    color: #FFFFFF;\n    background: rgba(0,0,0,0.6);\n    border-radius: 10px;\n    width: 36px;\n    font-size: 12px;\n    text-align: center;\n    height: 22px;\n    line-height: 22px;";var o="1X";i.innerHTML=o,document.getElementById("".concat(t.id,"-audioControls-left")).parentNode.appendChild(i),t.use3DZoom||(document.getElementById(this.jSPlugin.id).addEventListener("touchstart",(function(e){return n.onTouchstart(e)})),document.getElementById(this.jSPlugin.id).addEventListener("touchmove",(function(e){return n.onTouchmove(e)})))}return m(e,[{key:"onTouchstart",value:function(e){if(!this.jSPlugin.use3DZoom){console.log("手势触摸：",e);var t=this.jSPlugin.beforeMobileZoomVerify();if(!t)return!1;if(!this.inited){var n=this.jSPlugin.jSPlugin._JSPlayM4_GetFrameInfo(0);this.videoWidth=n.width,this.videoHeight=n.height,this.currentPosition.right=n.width,this.currentPosition.bottom=n.height,this.inited=!0}var i=e.touches,o=i[0],r=i[1];o&&(this.point1.clientX=o.clientX,this.point1.clientY=o.clientY),r&&(this.point2.clientX=r.clientX,this.point2.clientY=r.clientY,this.touchLineLength=Le(this.point1,this.point2),this.isDubboTouch=!0,this.moveX=o.clientX,this.moveY=o.clientY)}}},{key:"onTouchmove",value:function(e){if(!this.jSPlugin.use3DZoom){var t=this.isDubboTouch,n=this.currentPosition,i=this.clientRect,o=this.jSPlugin.beforeMobileZoomVerify();if(!o)return!1;if(1===e.touches.length){var r=e.touches[0];return n.xPercent=n.xPercent+(this.point1.clientX-r.clientX)/i.width/this.currentScale,n.yPercent=n.yPercent+(this.point1.clientY-r.clientY)/i.height/this.currentScale,this.doScale(),this.point1.clientX=r.clientX,this.point1.clientY=r.clientY,!1}if(!t)return!1;var a=e.touches,s=(r=a[0],a[1]);if(r&&(this.point1.clientX=r.clientX,this.point1.clientY=r.clientY),s){this.point2.clientX=s.clientX,this.point2.clientY=s.clientY;var d=Le(this.point1,this.point2);d!==this.touchLineLength&&(d>this.touchLineLength?this.currentScale<8?(++this.currentScale,n.xPercent=(this.point1.clientX+this.point2.clientX)/2/i.width,n.yPercent=(this.point1.clientY+this.point2.clientY)/2/i.height,this.doScale()):console.log("已经是最大8倍率了"):this.currentScale>1?(--this.currentScale,n.xPercent=(this.point1.clientX+this.point2.clientX)/2/i.width,n.yPercent=(this.point1.clientY+this.point2.clientY)/2/i.height,this.doScale()):console.log("已经是最小1倍率了"),this.isDubboTouch=!1)}}}},{key:"renderDot",value:function(){var e=this.currentScale;document.getElementById("".concat(this.jSPlugin.id,"-scale-value"))&&(document.getElementById("".concat(this.jSPlugin.id,"-scale-value")).innerHTML="".concat(e,".0X")),document.getElementById("".concat(this.jSPlugin.id,"-line-dot"))&&(document.getElementById("".concat(this.jSPlugin.id,"-line-dot")).style.height="".concat((e-1)/7*100,"%")),document.getElementById("".concat(this.jSPlugin.id,"-scale-body-line-dot"))&&(document.getElementById("".concat(this.jSPlugin.id,"-scale-body-line-dot")).style.bottom="calc(".concat((e-1)/7*100,"% - 6px)"))}},{key:"startZoom",value:function(){var e=this.jSPlugin.jSPlugin._JSPlayM4_GetFrameInfo(0);this.videoWidth=e.width,this.videoHeight=e.height,this.currentPosition.right=e.width,this.currentPosition.bottom=e.height,this.currentScale=1,document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-zoom-container")).style.display="block"),this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight),this.renderDot()}},{key:"stopZoom",value:function(){this.currentScale=1,this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight),document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-zoom-container")).style.display="none"),this.renderDot()}},{key:"resetZoom",value:function(){this.currentScale=1,document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-zoom-container")).style.display="none")}},{key:"doScale",value:function(){var e=this.currentPosition,t=this.currentScale;e.left=e.left+e.xPercent*(e.right-e.left)-this.videoWidth/t*.5,e.left<0?e.left=0:e.left>this.videoWidth-this.videoWidth/t&&(e.left=this.videoWidth-this.videoWidth/t),e.right=e.left+this.videoWidth/t,e.top=e.top+e.yPercent*(e.bottom-e.top)-this.videoHeight/t*.5,e.top<0?e.top=0:e.top>this.videoHeight-this.videoHeight/t&&(e.top=this.videoHeight-this.videoHeight/t),e.bottom=e.top+this.videoHeight/t,e.left=parseInt(e.left,10),e.right=parseInt(e.right,10),e.top=parseInt(e.top,10),e.bottom=parseInt(e.bottom,10),console.log("视频宽高",this.videoWidth,this.videoHeight),console.log("计算后，",e.left,e.right,e.top,e.bottom,e.xPercent,e.yPercent),e.left<e.right&&e.top<e.bottom&&e.bottom<=this.videoHeight&&e.right<=this.videoWidth&&this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(e.left,e.right,e.top,e.bottom),document.getElementById("".concat(this.jSPlugin.id,"-zoom-container")).innerHTML="".concat(t,".0X"),document.getElementById("".concat(this.jSPlugin.id,"-zoom-container")).style.display=1===t?"none":"inline-block"}},{key:"calCurrentPosition",value:function(e){var t=this.currentPosition,n=this.clientRect;t.x=e.clientX,t.y=e.clientY,t.xPercent=(e.clientX-n.x)/n.width,t.yPercent=(e.clientY-n.y)/n.height,this.doScale()}}]),e}(),Ne=function(e){var t="";return Object.keys(e).map((function(n,i){t+="".concat(n,":").concat(e[n]).concat(i<Object.keys(e).length-1?";":"")})),t},Be=500,Oe=function(){function e(t){var n=this;if(c(this,e),this.jSPlugin=t,this.isNeedRenderHeader=!1,this.isNeedRenderFooter=!1,this.autoFocus=0,this.autoFocusTimer=null,this.recordTimer=null,this.nextRate=1,this.showHD=!1,this.themeInited=!1,this.decoderState={state:{isEditing:!1,play:!1,sound:!1,recordvideo:!1,recordCount:"00:00",talk:!1,zoom:!1,pantile:!1,hd:!1,speed:!1,expend:!1,webExpend:!1,cloudRec:"cloud.rec"===k(t.url).type,rec:"rec"===k(t.url).type,type:k(t.url).type}},this.allowZoom=!this.jSPlugin.use3DZoom,this.zoomDisable=!1,this.pluginStatus=new M(this,this.jSPlugin.params.id),console.log(" matchEzopenUrl(jSPlugin.url)",k(t.url),this.decoderState.state),this.inited=!1,this.isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),"undefined"!==typeof t.isMobile&&(this.isMobile=t.isMobile),this.pauseTime=null,this.themeData=ve.data,this.jSPlugin.themeId)switch(this.jSPlugin.themeId){case"pcLive":case"pcRec":case"mobileLive":case"mobileRec":case"security":case"voice":case"simple":var i=j.find(De,(function(e){return e.themeId===n.jSPlugin.themeId}));i&&(this.themeData=i),this.initThemeData(),this.renderThemeData();break;case"themeData":this.themeData=this.jSPlugin.params.themeData,this.initThemeData(),this.renderThemeData();break;default:this.fetchThemeData(this.jSPlugin.themeId);break}this.jSPlugin.Talk||(this.jSPlugin.Talk=new me(this.jSPlugin)),g("".concat(this.jSPlugin.staticPath,"/speed/speed.css")),g("".concat(this.jSPlugin.staticPath,"/css/theme.css"))}return m(e,[{key:"fetchThemeData",value:function(e){var t=this,n="".concat(this.jSPlugin.env.domain,"/console/jssdk/ezopen/template/getDetail?accessToken=").concat(this.jSPlugin.accessToken,"&id=").concat(e);"test11open.ys7.com"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname&&"jianboyu.top"!==window.location.hostname||(n=n.replace("test12open.ys7.com/console/jssdk","test11open.ys7.com/console/jssdk")),fetch(n,{method:"GET"}).then((function(e){return e.json()})).then((function(e){console.log("get theme data",e),0===e.meta.code&&e.data&&(t.themeData=e.data,e.data.header&&(t.themeData.header=e.data.header,t.themeData.header.btnList=t.themeData.header.btnList.sort((function(e,t){return e.btnKey.split("-")[3]-t.btnKey.split("-")[3]}))),e.data.footer&&(t.themeData.footer=e.data.footer,t.themeData.footer.btnList=t.themeData.footer.btnList.sort((function(e,t){return e.btnKey.split("-")[3]-t.btnKey.split("-")[3]}))),t.initThemeData(),t.renderThemeData())}))["catch"]((function(e){t.renderThemeData()}))}},{key:"changeTheme",value:function(e){var t=this;if("string"===typeof e)switch(this.jSPlugin.themeId=e,this.jSPlugin.themeId){case"pcLive":case"pcRec":case"mobileLive":case"mobileRec":case"security":case"voice":case"simple":var n=j.find(De,(function(e){return e.themeId===t.jSPlugin.themeId}));n&&(this.themeData=n),this.initThemeData(),this.renderThemeData();break;default:this.fetchThemeData(e);break}else"object"===l(e)&&(this.themeData=e,this.initThemeData(),this.renderThemeData(),this.decoderState.state.isEditing&&this.editStart());this.jSPlugin&&this.jSPlugin.handleThemeChange&&this.jSPlugin.handleThemeChange(e)}},{key:"renderThemeData",value:function(){var e=this,t=this.themeData,n=t.header,i=t.footer;if(this.isNeedRenderHeader&&n&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=n.backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=n.color.replace("-diy",""),n.btnList.map((function(t,n){t.isrender&&e.setDecoderState(p({},t.iconId,e.decoderState.state[t.iconId]))}))),this.isNeedRenderFooter&&i)document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=i.backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=i.color.replace("-diy",""),i.btnList.map((function(t,n){if(t.isrender&&e.setDecoderState(p({},t.iconId,e.decoderState.state[t.iconId])),"play"===t.iconId&&t.defaultActive&&!e.themeInited)var i=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(i),e.jSPlugin.play(),e.themeInited=!0)}),50)})),-1!==this.jSPlugin.url.indexOf("hd.live")&&this.setDecoderState({hd:!0}),this.themeData.autoFocus>0&&(this.autoFocus=parseInt(this.themeData.autoFocus),this.startAutoFocus(),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).addEventListener("click",(function(){e.stopAutoFocus()}))),this.setDecoderState({cloudRec:"cloud.rec"===k(this.jSPlugin.url).type,rec:"rec"===k(this.jSPlugin.url).type,type:k(this.jSPlugin.url).type});else if(!this.themeInited)var o=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(o),e.jSPlugin.play(),e.themeInited=!0)}),50);var r=j.findIndex(this.themeData.footer.btnList,(function(e){return"zoom"===e.iconId&&e.isrender>0}))>=0;r&&(this.isMobile&&!this.jSPlugin.use3DZoom?(this.jSPlugin.beforeMobileZoomVerify=function(){var t=e.decoderState.state.play;return console.log("手机端电子放大前校验回调play------------",t),!!t},this.jSPlugin.Zoom=new Me(this.jSPlugin)):this.jSPlugin.Zoom=new je(this.jSPlugin));var a=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(a),e.jSPlugin.reSize(e.jSPlugin.params.width,e.jSPlugin.params.height))}),50)}},{key:"setDecoderState",value:function(e){var t=this,n=this.themeData,i=n.header,o=n.footer;Object.keys(e).map((function(n,r){var a="#FFFFFF",s="#FFFFFF",d=i.btnList.findIndex((function(e){return e.iconId===n}));switch(-1===d?(a=o.color.replace("-diy",""),s=o.activeColor.replace("-diy","")):(a=i.color.replace("-diy",""),s=o.activeColor.replace("-diy","")),n){case"play":e[n]?document.getElementById("".concat(t.jSPlugin.id,"-play"))&&(document.getElementById("".concat(t.jSPlugin.id,"-play-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-play-content")).children[0].children[1].style="display:none",document.getElementById("".concat(t.jSPlugin.id,"-play")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-play-content")).childNodes[0].children[0].style.fill=e[n]?s:a):document.getElementById("".concat(t.jSPlugin.id,"-play"))&&(document.getElementById("".concat(t.jSPlugin.id,"-play-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-play-content")).children[0].children[0].style="display:none",document.getElementById("".concat(t.jSPlugin.id,"-play")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-play-content")).childNodes[0].children[1].style.fill=e[n]?s:a);break;case"sound":document.getElementById("".concat(t.jSPlugin.id,"-sound"))&&(e[n]?(document.getElementById("".concat(t.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:none",document.getElementById("".concat(t.jSPlugin.id,"-sound")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-sound-content")).childNodes[0].children[1].style.fill=e[n]?s:a):(document.getElementById("".concat(t.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:none",document.getElementById("".concat(t.jSPlugin.id,"-sound")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-sound-content")).childNodes[0].children[0].style.fill=e[n]?s:a));break;case"recordvideo":document.getElementById("".concat(t.jSPlugin.id,"-recordvideo"))&&(document.getElementById("".concat(t.jSPlugin.id,"-recordvideo")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-recordvideo-content")).childNodes[0].style.fill=e[n]?s:a,e[n]?t.countTime("add",0):t.countTime("destroy",0));break;case"talk":document.getElementById("".concat(t.jSPlugin.id,"-talk"))&&(document.getElementById("".concat(t.jSPlugin.id,"-talk")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-talk-content")).childNodes[1].style.fill=e[n]?s:a);break;case"zoom":document.getElementById("".concat(t.jSPlugin.id,"-zoom"))&&(document.getElementById("".concat(t.jSPlugin.id,"-zoom")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-zoom-content")).childNodes[1].style.fill=e[n]?s:a);break;case"pantile":document.getElementById("".concat(t.jSPlugin.id,"-pantile"))&&(document.getElementById("".concat(t.jSPlugin.id,"-pantile")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-pantile-content")).childNodes[0].style.fill=e[n]?s:a);break;case"webExpend":e[n]?(document.getElementById("".concat(t.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-webExpend-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-webExpend-content")).children[0].children[0].style="display:none"),document.getElementById("".concat(t.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-expend")).className="disabled")):(document.getElementById("".concat(t.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-webExpend-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-webExpend-content")).children[0].children[1].style="display:none"),document.getElementById("".concat(t.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-expend")).className="")),document.getElementById("".concat(t.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-webExpend")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-webExpend-content")).childNodes[0].childNodes[0].style.fill=e[n]?s:a,document.getElementById("".concat(t.jSPlugin.id,"-webExpend-content")).childNodes[0].childNodes[1].style.fill=e[n]?s:a);break;case"capturePicture":document.getElementById("".concat(t.jSPlugin.id,"-capturePicture"))&&(document.getElementById("".concat(t.jSPlugin.id,"-capturePicture")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-capturePicture-content")).childNodes[0].style.fill=e[n]?s:a);break;case"expend":e[n]?(document.getElementById("".concat(t.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-expend-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-expend-content")).children[0].children[0].style="display:none"),document.getElementById("".concat(t.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-webExpend")).className="disabled")):(document.getElementById("".concat(t.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-expend-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(t.jSPlugin.id,"-expend-content")).children[0].children[1].style="display:none"),document.getElementById("".concat(t.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-webExpend")).className="")),document.getElementById("".concat(t.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(t.jSPlugin.id,"-expend")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-expend-content")).childNodes[0].childNodes[0].style.fill=e[n]?s:a,document.getElementById("".concat(t.jSPlugin.id,"-expend-content")).childNodes[0].childNodes[1].style.fill=e[n]?s:a);break;case"hd":e[n]?document.getElementById("".concat(t.jSPlugin.id,"-hd"))&&(document.getElementById("".concat(t.jSPlugin.id,"-hd-content")).children[1].children[0].style="display:block",document.getElementById("".concat(t.jSPlugin.id,"-hd-content")).children[1].children[1].style="display:none"):document.getElementById("".concat(t.jSPlugin.id,"-hd"))&&(document.getElementById("".concat(t.jSPlugin.id,"-hd-content")).children[1].children[1].style="display:block",document.getElementById("".concat(t.jSPlugin.id,"-hd-content")).children[1].children[0].style="display:none");break;case"speed":document.getElementById("".concat(t.jSPlugin.id,"-speed"))&&(document.getElementById("".concat(t.jSPlugin.id,"-speed-content")).children[1].children[0].style.color=e[n]?s:a,document.getElementById("".concat(t.jSPlugin.id,"-speed-content")).children[1].children[0].style.borderColor=e[n]?s:a),document.getElementById("".concat(t.jSPlugin.id,"-select-mask"))&&(t.isMobile&&e[n]?document.getElementById("".concat(t.jSPlugin.id,"-select-mask")).style.display="block":document.getElementById("".concat(t.jSPlugin.id,"-select-mask")).style.display="none");break;case"cloudRec":document.getElementById("".concat(t.jSPlugin.id,"-cloudRec"))&&(console.log("document.getElementById(`${this.jSPlugin.id}-cloudRec-content`)",document.getElementById("".concat(t.jSPlugin.id,"-cloudRec"))),document.getElementById("".concat(t.jSPlugin.id,"-cloudRec")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-cloudRec-content")).children[0].children[0].style.fill=e[n]?s:a),document.getElementById("".concat(t.jSPlugin.id,"-rec"))&&(document.getElementById("".concat(t.jSPlugin.id,"-rec")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-rec-content")).children[0].children[0].style.fill=e[n]?a:s);break;case"rec":document.getElementById("".concat(t.jSPlugin.id,"-cloudRec"))&&(document.getElementById("".concat(t.jSPlugin.id,"-cloudRec")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-cloudRec-content")).children[0].children[0].style.fill=e[n]?a:s),document.getElementById("".concat(t.jSPlugin.id,"-rec"))&&(document.getElementById("".concat(t.jSPlugin.id,"-rec")).className=e[n]?"active":"",document.getElementById("".concat(t.jSPlugin.id,"-rec-content")).children[0].children[0].style.fill=e[n]?s:a);break}t.decoderState.state=Object.assign(t.decoderState.state,e)}))}},{key:"startAutoFocus",value:function(){var e=this,t=this.autoFocus;this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.autoFocusTimer=setTimeout((function(){document.getElementById("".concat(e.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(e.jSPlugin.id,"-audioControls")).style.opacity=0,document.getElementById("".concat(e.jSPlugin.id,"-audioControls")).style.pointerEvents="none")}),1e3*t)}},{key:"stopAutoFocus",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.opacity=1,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.pointerEvents="all"),this.autoFocusTimer&&clearTimeout(this.autoFocusTimer)}},{key:"hideFooter",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.display="none")}},{key:"showFooter",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.display="block")}},{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"renderFooter",value:function(e,t){var n=this,i=this.matchBtn(e);if(this.isMobile&&"zoom"===i.id)return!1;var o=document.createElement("div");o.className="theme-icon-item",o.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(i.id,'" style="position:relative;">')+'<div id="'.concat(this.jSPlugin.id,"-").concat(i.id,'-content" title="').concat(i.title,'" style="height:').concat(this.jSPlugin.width>Be?48:32,'px;display: flex;align-items: center;position:relative;">')).concat(i.domString,"</div>")+"</span>",o.onclick=function(e){if(n.decoderState.state.isEditing)return!1;i.onclick(e)},i.onmouseenter&&(o.onmouseenter=function(e){if(n.decoderState.state.isEditing)return!1;i.onmouseenter(e)}),i.onmouseleave&&(o.onmouseleave=function(e){if(n.decoderState.state.isEditing)return!1;i.onmouseleave(e)});var r=document.createElement("span");r.className="icon-move left",r.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(i.id,'-left" title="左移" style="position: absolute;top: calc(50% - 10px);left: -4px;"><svg fill="#ffffff" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="24" viewBox="0 0 10 15" style="background:#00000080;"><path d="M7.4,10V5.3c0-0.3-0.3-0.6-0.6-0.6c-0.1,0-0.3,0.1-0.4,0.2L3.7,7.4c-0.2,0.2-0.3,0.6,0,0.8 c0,0,0,0,0.1,0.1l2.7,2.2c0.2,0.2,0.6,0.2,0.8-0.1C7.3,10.3,7.4,10.2,7.4,10z"></path></svg></span>'),r.onclick=function(){n.editIcon(i.id,"left","footer")},o.appendChild(r);var a=document.createElement("span");a.className="icon-move right",a.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(i.id,'-right" class="ezuikit-theme-icon" title="右移" style="position: absolute;top: calc(50% - 10px);left: calc(100% - 8px);"><svg fill="#ffffff" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="24" viewBox="0 0 10 15" style="background:#00000080"><path d="M3.4,5.2v4.7c0,0.3,0.3,0.6,0.6,0.6c0.1,0,0.3-0.1,0.4-0.2l2.7-2.5c0.2-0.2,0.3-0.6,0-0.8 c0,0,0,0-0.1-0.1L4.4,4.8C4.1,4.6,3.8,4.6,3.6,4.9C3.5,5,3.4,5.1,3.4,5.2z"></path></svg></span>'),a.onclick=function(){n.editIcon(i.id,"right","footer")},o.appendChild(a);var s=document.createElement("span");s.className="icon-move close",s.innerHTML='<span id="'.concat(i.id,'-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: -10px;right: -10px;">')+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15"><circle style="fill-rule:evenodd;clip-rule:evenodd;fill-opacity:0.8011;" cx="7.5" cy="7.6" r="7" /><rect x="3.9" y="3.5" class="st1" style="fill:none;" width="8.1" height="8.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="5" x2="10" y2="10.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="10.1" x2="10" y2="5" /></svg></span>',s.onclick=function(){n.editIcon(i.id,"delete","footer")},o.appendChild(s),"left"===t?document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).childNodes[0].appendChild(o):document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).childNodes[1].appendChild(o)}},{key:"editIcon",value:function(e,t,n){console.log("编辑组件",e,t,n);var i=this.themeData;console.log("themeData",this.themeData);var o=this.themeData[n].btnList,r=j.findIndex(o,(function(t){return t.iconId===e})),a=o[r];switch(t){case"delete":if("rec"===e){if(-1===j.findIndex(o,(function(e){return"cloudRec"===e.iconId&&1==e.isrender})))return this.jSPlugin.Message&&this.jSPlugin.Message["default"]("必须选中一种存储介质"),!1}else if("cloudRec"===e&&-1===j.findIndex(o,(function(e){return"rec"===e.iconId&&1==e.isrender})))return this.jSPlugin.Message&&this.jSPlugin.Message["default"]("必须选中一种存储介质"),!1;o[r].isrender=0;break;case"right":for(var s=-1,d=r+1;d<o.length;d++)if(o[d].part===o[r].part&&1==o[d].isrender){s=d;break}-1!==s&&(o[r]=o[s],o[s]=a);break;case"left":for(var l=-1,c=r-1;c>=0;c--)if(o[c].part===o[r].part&&1==o[c].isrender){l=c;break}-1!==l&&(o[r]=o[l],o[l]=a);break}console.log("new btnList",o),i[n].btnList=o,this.changeTheme(i)}},{key:"renderHeader",value:function(e,t){var n=this,i=this.matchBtn(e),o=document.createElement("div");o.className="theme-icon-item",o.style="max-width:50%;",o.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(i.id,'" style="position:relative;";>')+'<span id="'.concat(this.jSPlugin.id,"-").concat(i.id,'-content" title="').concat(i.title,'" style="display:inline-block;height:').concat(this.width>Be?48:32,'px;">')).concat(i.domString,"</span>")+'<span id="'.concat(this.jSPlugin.id,"-").concat(i.id,'-remove" title="移除" style="position: absolute;top: -6px;left: 38px;display: none;">')+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15"><circle style="fill-rule:evenodd;clip-rule:evenodd;fill-opacity:0.8011;" cx="7.5" cy="7.6" r="7" /><rect x="3.9" y="3.5" class="st1" style="fill:none;" width="8.1" height="8.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="5" x2="10" y2="10.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="10.1" x2="10" y2="5" /></svg></span></span>',o.onclick=function(e){if(n.decoderState.state.isEditing)return!1;i.onclick(e)};var r=document.createElement("span");r.className="icon-move close",r.innerHTML='<span id="'.concat(i.id,'-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: -6px;right: -6px;">')+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15"><circle style="fill-rule:evenodd;clip-rule:evenodd;fill-opacity:0.8011;" cx="7.5" cy="7.6" r="7" /><rect x="3.9" y="3.5" class="st1" style="fill:none;" width="8.1" height="8.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="5" x2="10" y2="10.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="10.1" x2="10" y2="5" /></svg></span>',r.onclick=function(){n.editIcon(i.id,"delete","header")},o.appendChild(r),"left"===t?document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[0].appendChild(o):document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[1].appendChild(o)}},{key:"countTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this;if(!document.getElementById(this.jSPlugin.id+"time-area")){var i=document.createElement("div");i.id=this.jSPlugin.id+"time-area",i.className="time-area",i.innerHTML='<span class="dot"></span><span class="value">00:00</span>',document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).appendChild(i)}if(this.countTimer&&clearInterval(this.countTimer),"add"===e){var o=t;document.getElementById(n.jSPlugin.id+"time-area").style.display="flex",this.countTimer=setInterval((function(){++o,document.getElementById(n.jSPlugin.id+"time-area").children[1].innerHTML=r(o)}),1e3)}else"destroy"===e&&(this.countTimer&&clearInterval(this.countTimer),this.countTimer=void 0,document.getElementById(n.jSPlugin.id+"time-area")&&(document.getElementById(n.jSPlugin.id+"time-area").children[1].innerHTML="00:00",document.getElementById(n.jSPlugin.id+"time-area").style.display="none"));function r(e){var t=parseInt(e),n=0,i=0,o="00",r="00",a="00";return t>59&&(n=parseInt(t/60),t=parseInt(t%60),n>59&&(i=parseInt(n/60),n=parseInt(n%60))),o=parseInt(t)>9?parseInt(t):"0"+parseInt(t),r=parseInt(n)>9?parseInt(n):"0"+parseInt(n),a=parseInt(i)>9?parseInt(i):"0"+parseInt(i),i>0?a+":"+r+":"+o:n>0?r+":"+o:"00:"+o}}},{key:"setDisabled",value:function(e){var t=this.decoderState.state,n=t.sound,i=t.hd;null!=document.getElementById("".concat(this.jSPlugin.id,n?"-sound-icon":"-nosound-icon"))&&document.getElementById("".concat(this.jSPlugin.id,n?"-sound-icon":"-nosound-icon")).setAttribute("style",e?"cursor: not-allowed;fill: gray":"cursor: default"),null!=document.getElementById("".concat(this.jSPlugin.id,"-recordvideo-icon"))&&document.getElementById("".concat(this.jSPlugin.id,"-recordvideo-icon")).setAttribute("style",e?"cursor: not-allowed;fill: gray":"cursor: default"),null!=document.getElementById("".concat(this.jSPlugin.id,"-capturePicture-icon"))&&document.getElementById("".concat(this.jSPlugin.id,"-capturePicture-icon")).setAttribute("style",e?"cursor: not-allowed;fill: gray":"cursor: default"),null!=document.getElementById("".concat(this.jSPlugin.id,"-talk-icon"))&&document.getElementById("".concat(this.jSPlugin.id,"-talk-icon")).setAttribute("style",e?"cursor: not-allowed;fill: gray":"cursor: default"),this.allowZoom||null!=document.getElementById("".concat(this.jSPlugin.id,"-zoom-icon"))&&document.getElementById("".concat(this.jSPlugin.id,"-zoom-icon")).setAttribute("style",e?"cursor: not-allowed;fill: gray":"cursor: default"),null!=document.getElementById("".concat(this.jSPlugin.id,"-pantile-icon"))&&document.getElementById("".concat(this.jSPlugin.id,"-pantile-icon")).setAttribute("style",e?"cursor: not-allowed;fill: gray":"cursor: default"),null!=document.getElementById("".concat(this.jSPlugin.id,i?"-hdSelect-icon":"-sdSelect-icon"))&&document.getElementById("".concat(this.jSPlugin.id,i?"-hdSelect-icon":"-sdSelect-icon")).setAttribute("style",e?"cursor: not-allowed;fill: gray":"cursor: default"),null!=document.getElementById("".concat(this.jSPlugin.id,"-speed-text"))&&document.getElementById("".concat(this.jSPlugin.id,"-speed-text")).setAttribute("style",document.getElementById("".concat(this.jSPlugin.id,"-speed-text")).getAttribute("style")+";"+(e?"cursor: not-allowed;color: gray;border-color: gray;":"cursor: default;color: #ffffff;border-color: #ffffff;")),this.zoomDisable=this.jSPlugin.use3DZoom&&e}},{key:"matchBtn",value:function(e){var t=this,n=this.themeData,i=n.header,o=n.footer,r={title:"",id:"",domString:"",color:"#FFFFFF",activeColor:"#FFFFFF",onclick:function(){},onmoveleft:function(){},onmoveright:function(){},onremove:function(){}},a=i.btnList.findIndex((function(t){return t.iconId===e}));switch(-1===a?(r.color=o.color,r.backgroundColor=o.backgroundColor,r.activeColor=o.activeColor):(r.color=i.color,r.backgroundColor=i.backgroundColor,r.activeColor=i.activeColor),e){case"play":return r.title="播放/结束播放",r.id=e,r.domString='<div style="height: 100%">'+'<svg id="'.concat(this.jSPlugin.id+"-play-icon",'" class="theme-icon-item-icon" style="display:none" width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'"  fill="').concat(r.color,'" viewBox="-6 -6 32 32">\n            <path id="Stroke-1" class="st1" d="M10.5,1.7c-4.9,0-8.8,4-8.8,8.8s4,8.8,8.8,8.8s8.8-4,8.8-8.8S15.4,1.7,10.5,1.7z M10.5,2.7\n              c4.3,0,7.8,3.5,7.8,7.8s-3.5,7.8-7.8,7.8s-7.8-3.5-7.8-7.8S6.2,2.7,10.5,2.7z"/>\n            <path class="st2" d="M8.7,8C9,8,9.3,8.3,9.3,8.6v3.8C9.3,12.7,9,13,8.7,13C8.3,13,8,12.7,8,12.4V8.6C8,8.3,8.3,8,8.7,8z"/>\n            <path id="Rectangle-Copy-10" class="st2" d="M12.8,8c0.3,0,0.6,0.3,0.6,0.6v3.8c0,0.3-0.3,0.6-0.6,0.6c-0.3,0-0.6-0.3-0.6-0.6V8.6\n              C12.2,8.3,12.5,8,12.8,8z"/>\n          </svg>')+'<svg id="'.concat(this.jSPlugin.id+"-stop-icon",'" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M13,9.8L10.1,8C9.9,7.9,9.7,7.9,9.5,7.9c-0.6,0-1,0.4-1,1v3.7c0,0.2,0.1,0.4,0.2,0.5c0.3,0.5,0.9,0.6,1.4,0.3 l2.9-1.8c0.1-0.1,0.2-0.2,0.3-0.3C13.6,10.7,13.4,10.1,13,9.8z" /><path d="M10.5,1.9c-4.9,0-8.8,4-8.8,8.8c0,4.9,4,8.8,8.8,8.8s8.8-4,8.8-8.8C19.4,5.8,15.4,1.9,10.5,1.9z M10.5,18.5 c-4.3,0-7.8-3.5-7.8-7.8s3.5-7.8,7.8-7.8c4.3,0,7.8,3.5,7.8,7.8S14.9,18.5,10.5,18.5z" /></svg></div>',r.onclick=function(){var e=t.decoderState.state,n=e.play,i=e.isEditing,o=e.rec,r=e.cloudRec,a=e.recordvideo;if(i)return!1;n?(o||r?t.isMobile?t.jSPlugin.jSPlugin.JS_GetOSDTime(0).then((function(e){var n=new Date(1e3*e),i="".concat(n.getFullYear())+(n.getMonth()>8?n.getMonth()+1:"0".concat(n.getMonth()+1))+(n.getDate()>9?n.getDate():"0".concat(n.getDate()))+(n.getHours()>9?n.getHours():"0".concat(n.getHours()))+(n.getMinutes()>9?n.getMinutes():"0".concat(n.getMinutes()))+(n.getSeconds()>9?n.getSeconds():"0".concat(n.getSeconds()));t.pauseTime=i,t.jSPlugin.pause(i)})):t.jSPlugin.pause():(t.jSPlugin.stop(),t.jSPlugin.Zoom.stopZoom(),t.jSPlugin.close3DZoom()),a&&t.setDecoderState({recordvideo:!1})):(o||r?t.isMobile?(t.jSPlugin.resume(t.pauseTime),t.pauseTime=null):t.jSPlugin.resume():t.jSPlugin.play(),t.jSPlugin.use3DZoom&&t.resetMobileZoomStatus()),t.jSPlugin.use3DZoom?(t.setDecoderState({zoom:!1}),t.allowZoom=!1):t.allowZoom=o||r,t.setDecoderState({play:!n}),t.setDisabled(n)},r;case"sound":return r.title="声音",r.id=e,r.domString='<span style="height: 100%">'+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-nosound-icon" style="display:none" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="-6 -6 32 32">\n            <path d="M8.5,4.2c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8C5,13.2,5,12.9,5.1,12.7 c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3L9.2,5L5.9,7.8 C5.6,7.9,5.3,7.9,5.1,7.7C5,7.5,5,7.3,5.1,7.1L5.2,7L8.5,4.2z"/>\n            <path d="M5.5,6.9C5.8,6.9,6,7.1,6,7.4c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2C3.4,7.9,3.3,8,3.2,8.2l0,0.1v4 c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,12.5,6,12.7,6,13c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4 c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>\n            <path d="M17.4,7.9c0.2-0.2,0.5-0.2,0.7,0c0.2,0.2,0.2,0.4,0.1,0.6l-0.1,0.1l-3.8,3.8c-0.2,0.2-0.5,0.2-0.7,0 c-0.2-0.2-0.2-0.4-0.1-0.6l0.1-0.1L17.4,7.9z"/>\n            <path d="M13.7,7.9c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.8,3.8c0.2,0.2,0.2,0.5,0,0.7c-0.2,0.2-0.4,0.2-0.6,0.1l-0.1-0.1 l-3.7-3.8C13.5,8.4,13.5,8.1,13.7,7.9z"/>\n            </svg>')+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-sound-icon" style="display:inline-block" width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" fill="').concat(r.color,'" viewBox="-6 -6 32 32">\n              <path d="M13.2,7.1c0.1-0.2,0.5-0.3,0.7-0.2c1.1,0.7,1.9,2.2,1.9,3.7c0,1.6-0.7,3-1.9,3.7\n                c-0.2,0.1-0.5,0.1-0.7-0.2c-0.1-0.2-0.1-0.5,0.2-0.7c0.8-0.5,1.4-1.6,1.4-2.9c0-1.3-0.6-2.4-1.4-2.9C13.1,7.6,13,7.3,13.2,7.1z"/>\n              <path d="M15.7,4.5c0.2-0.2,0.5-0.2,0.7-0.1C18,5.8,19,8.2,19,10.7c0,2.5-1,4.8-2.7,6.3\n                c-0.2,0.2-0.5,0.2-0.7-0.1c-0.2-0.2-0.2-0.5,0.1-0.7c1.4-1.2,2.3-3.3,2.3-5.5c0-2.2-0.9-4.3-2.3-5.5C15.5,5,15.5,4.7,15.7,4.5z"/>\n              <path id="Stroke-5" class="st1" d="M8.5,4.7c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8\n                C5,13.7,5,13.4,5.1,13.2c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3l-0.1,0\n                L5.9,8.3C5.6,8.4,5.3,8.4,5.1,8.2C5,8,5,7.7,5.1,7.6l0.1-0.1L8.5,4.7z"/>\n              <path  d="M5.5,7.4C5.8,7.4,6,7.6,6,7.9c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.2,0-0.3,0.1-0.3,0.3l0,0.1v4\n                c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,13,6,13.2,6,13.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4\n                c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>\n            </svg>')+"</span>",r.onclick=function(){var e=t.decoderState.state,n=e.play,i=e.sound,o=e.talk;n&&(i?(t.jSPlugin.closeSound(),t.setDecoderState({sound:!1})):o||(t.jSPlugin.openSound(),t.setDecoderState({sound:!0})))},r;case"recordvideo":return r.title="录屏",r.id=e,r.domString='<svg id="'.concat(this.jSPlugin.id,'-recordvideo-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M11.6,5.3H4.7c-1.4,0-2.5,1.1-2.5,2.5v5.9c0,1.4,1.1,2.5,2.5,2.5h6.9c1.4,0,2.5-1.1,2.5-2.5V7.7 C14.1,6.4,13,5.3,11.6,5.3z M4.7,6.3h6.9c0.8,0,1.5,0.7,1.5,1.5v5.9c0,0.8-0.7,1.5-1.5,1.5H4.7c-0.8,0-1.5-0.7-1.5-1.5V7.7 C3.3,6.9,3.9,6.3,4.7,6.3z" /><path d="M16.6,6.7c0.9-0.8,2.3-0.1,2.4,1l0,0.1v5.7c0,1.2-1.3,1.9-2.3,1.2l-0.1-0.1L13.3,12 c-0.2-0.2-0.2-0.5-0.1-0.7c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.7c0.3,0.2,0.7,0.1,0.8-0.3l0-0.1V7.8c0-0.4-0.4-0.6-0.7-0.4 l-0.1,0l-3.3,2.7c-0.2,0.2-0.5,0.1-0.7-0.1c-0.2-0.2-0.1-0.5,0-0.6l0.1-0.1L16.6,6.7z" /></svg>',r.onclick=function(){var e=t.decoderState.state,n=e.play,i=e.recordvideo;n&&(i?(t.jSPlugin.stopSave(),t.setDecoderState({recordvideo:!1})):(t.jSPlugin.startSave("".concat((new Date).getTime())),t.setDecoderState({recordvideo:!0})))},r;case"capturePicture":return r.title="截图",r.id=e,r.domString='<svg id="'.concat(this.jSPlugin.id,'-capturePicture-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.8,7.7c-2,0-3.7,1.6-3.7,3.7S8.7,15,10.8,15c2,0,3.7-1.6,3.7-3.7S12.8,7.7,10.8,7.7z M10.8,8.7c1.5,0,2.7,1.2,2.7,2.7S12.2,14,10.8,14c-1.5,0-2.7-1.2-2.7-2.7S9.3,8.7,10.8,8.7z" /><path d="M8.6,3.7l-0.1,0C8,3.7,7.7,4,7.5,4.3l-1,1.7l-1.3,0C4,6.1,3.1,7,3.1,8.2v7.1 c0,1.2,0.9,2.1,2.1,2.1h11.1c1.2,0,2.1-0.9,2.1-2.1V8.2l0-0.1c-0.1-1.1-1-1.9-2.1-1.9l-1.3,0l-1.1-1.8c-0.2-0.4-0.7-0.6-1.1-0.6H8.6 z M8.6,4.7h4.2c0.1,0,0.2,0.1,0.3,0.1l1.2,2c0.1,0.2,0.3,0.2,0.4,0.2h1.6c0.6,0,1.1,0.5,1.1,1.1v7.1c0,0.6-0.5,1.1-1.1,1.1H5.1 c-0.6,0-1.1-0.5-1.1-1.1V8.2c0-0.6,0.5-1.1,1.1-1.1h1.6c0.2,0,0.3-0.1,0.4-0.2l1.2-2C8.4,4.7,8.5,4.7,8.6,4.7z" /></svg>',r.onclick=function(){var e=t.decoderState.state.play;e?t.jSPlugin.capturePicture("".concat((new Date).getTime())):console.log("视频未播放，无法截图")},r;case"talk":return r.title="对讲",r.id=e,r.domString="<div></div>"+'<svg id="'.concat(this.jSPlugin.id,'-talk-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.1,2.7C8.5,2.7,7.2,4,7.2,5.6v5.2c0,1.6,1.3,2.9,2.9,2.9l0.2,0c1.5-0.1,2.7-1.4,2.7-2.9V5.6\tC13,4,11.7,2.7,10.1,2.7z M10.1,3.7c1.1,0,1.9,0.9,1.9,1.9v5.2c0,1-0.8,1.8-1.8,1.9l-0.1,0c-1,0-1.9-0.9-1.9-1.9V5.6 C8.2,4.5,9,3.7,10.1,3.7z" /><path d="M15.1,8.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,3-2.5,5.5-5.5,5.5c-3,0-5.4-2.3-5.5-5.3l0-0.2V9 c0-0.3,0.2-0.5,0.5-0.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,2.5,2,4.5,4.5,4.5c2.4,0,4.4-1.9,4.5-4.3l0-0.2V9 C14.6,8.7,14.8,8.5,15.1,8.5z" /><path d="M13.5,17.7c0.3,0,0.5,0.2,0.5,0.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-7c-0.3,0-0.5-0.2-0.5-0.5 c0-0.2,0.2-0.4,0.4-0.5l0.1,0H13.5z" /><path d="M10.1,15.2c0.2,0,0.4,0.2,0.5,0.4l0,0.1v2.5c0,0.3-0.2,0.5-0.5,0.5c-0.2,0-0.4-0.2-0.5-0.4l0-0.1 v-2.5C9.6,15.4,9.8,15.2,10.1,15.2z" /></svg>',r.onclick=function(){var e=t.decoderState.state,n=e.talk,i=e.sound,o=e.play;if(o)if(n){console.log("结束对讲"),t.setDecoderState({talk:!1}),t.jSPlugin.Talk.stopTalk();var r=j.findIndex(t.themeData.footer.btnList,(function(e){return"sound"===e.iconId&&1===e.isrender&&1===e.defaultActive}))>-1;t.themeData&&r&&(t.jSPlugin.openSound(),t.setDecoderState({sound:!0}))}else console.log("开始对讲"),t.setDecoderState({talk:!0}),i&&(t.jSPlugin.closeSound(),t.setDecoderState({sound:!1})),t.jSPlugin.Talk.startTalk()},r;case"zoom":return r.title=this.jSPlugin.use3DZoom?"3D定位":"电子放大",r.id=e,r.domString="<div></div>"+'<svg id="'.concat(this.jSPlugin.id,'-zoom-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n          width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="5 -6 5 32" style="enable-background:new 0 0 20 20.1;" xml:space="preserve">\n              <path class="st1" d="M8.8,2.6c3.5,0,6.2,2.8,6.2,6.2s-2.8,6.2-6.2,6.2s-6.2-2.8-6.2-6.2S5.3,2.6,8.8,2.6z M8.8,3.9\n                c-2.8,0-5,2.2-5,5s2.2,5,5,5s5-2.2,5-5S11.5,3.9,8.8,3.9z M12.7,12.7l3.9,3.9"/>\n              <path class="st2" d="M11.2,9.5h-5c-0.3,0-0.6-0.3-0.6-0.6s0.3-0.6,0.6-0.6h5c0.3,0,0.6,0.3,0.6,0.6S11.6,9.5,11.2,9.5z"/>\n              <path class="st2" d="M8.7,12c-0.3,0-0.6-0.3-0.6-0.6v-5c0-0.3,0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6v5C9.3,11.8,9.1,12,8.7,12z"/>\n              <path class="st2" d="M16.9,17.6c-0.1,0-0.3-0.1-0.4-0.2l-3.9-3.9c-0.2-0.2-0.2-0.6,0-0.8s0.6-0.2,0.8,0l3.9,3.9\n                c0.2,0.2,0.2,0.6,0,0.8C17.2,17.5,17,17.6,16.9,17.6z"/>\n          </svg>'),r.onclick=function(){var e=t.decoderState.state,n=e.zoom,i=e.play;if(t.jSPlugin.use3DZoom){if(!i)return!1;n?t.jSPlugin.close3DZoom():t.jSPlugin.enable3DZoom()}else{if(t.zoomDisable)return!1;n?(console.log("结束电子放大"),t.jSPlugin.Zoom.stopZoom()):(console.log("开始电子放大"),t.jSPlugin.Zoom.startZoom())}t.setDecoderState({zoom:!n})},r;case"pantile":return r.title="云台控制",r.id=e,r.domString='<svg id="'.concat(this.jSPlugin.id,'-pantile-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.2,7.8c1.6,0,2.9,1.3,2.9,2.9s-1.3,2.9-2.9,2.9s-2.9-1.3-2.9-2.9S8.5,7.8,10.2,7.8z M10.2,8.8c-1.1,0-1.9,0.9-1.9,1.9s0.9,1.9,1.9,1.9s1.9-0.9,1.9-1.9S11.2,8.8,10.2,8.8z" /><path d="M8.8,3.5c0.7-0.6,1.8-0.6,2.5-0.1l0.1,0.1l1.4,1.1c0.2,0.2,0.3,0.5,0.1,0.7 c-0.2,0.2-0.4,0.2-0.6,0.1l-0.1,0l-1.4-1.1C10.5,3.9,10,3.9,9.6,4.2L9.4,4.3L8,5.4C7.8,5.5,7.5,5.5,7.3,5.3c-0.2-0.2-0.1-0.5,0-0.6 l0.1-0.1L8.8,3.5z" /><path d="M2.5,12.3c-0.6-0.7-0.6-1.8-0.1-2.5l0.1-0.1l1.1-1.4c0.2-0.2,0.5-0.3,0.7-0.1 c0.2,0.2,0.2,0.4,0.1,0.6l0,0.1l-1.1,1.4C3,10.6,3,11.1,3.2,11.5l0.1,0.1L4.4,13c0.2,0.2,0.1,0.5-0.1,0.7c-0.2,0.2-0.5,0.1-0.6,0 l-0.1-0.1L2.5,12.3z" /><path d="M17.7,12.3c0.6-0.7,0.6-1.8,0.1-2.5l-0.1-0.1l-1.1-1.4c-0.2-0.2-0.5-0.3-0.7-0.1 c-0.2,0.2-0.2,0.4-0.1,0.6l0,0.1l1.1,1.4c0.3,0.4,0.3,0.9,0.1,1.3l-0.1,0.1L15.8,13c-0.2,0.2-0.1,0.5,0.1,0.7c0.2,0.2,0.5,0.1,0.6,0 l0.1-0.1L17.7,12.3z" /><path d="M8.8,18.2c0.7,0.6,1.8,0.6,2.5,0.1l0.1-0.1l1.4-1.1c0.2-0.2,0.3-0.5,0.1-0.7 c-0.2-0.2-0.4-0.2-0.6-0.1l-0.1,0l-1.4,1.1c-0.4,0.3-0.9,0.3-1.3,0.1l-0.1-0.1L8,16.3c-0.2-0.2-0.5-0.1-0.7,0.1 c-0.2,0.2-0.1,0.5,0,0.6l0.1,0.1L8.8,18.2z" /></svg>',r.onclick=function(){var e=t.decoderState.state,n=e.play,i=e.pantile,o=e.expend;if(n)if(i)console.log("隐藏云台"),t.Ptz.hide(),t.setDecoderState({pantile:!1});else{if(console.log("显示云台"),t.isMobile&&!o)return console.log("移动端，非全屏状态不展示云台"),!1;t.Ptz.show(),t.setDecoderState({pantile:!0})}},r;case"expend":return r.title="全局全屏",r.id=e,r.domString='<span><svg id="'.concat(this.jSPlugin.id,'-expend-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M3.4,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-1.2,1-2.3,2.2-2.3h1.8c0.3,0,0.5,0.2,0.5,0.5S7.2,4.1,6.9,4.1H5.2 c-0.7,0-1.2,0.6-1.2,1.3v1.8C3.9,7.4,3.7,7.6,3.4,7.6z" /><path d="M6.9,18.1H5.2c-1.2,0-2.2-1-2.2-2.2v-1.8c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8c0,0.7,0.6,1.2,1.2,1.2 h1.8c0.3,0,0.5,0.2,0.5,0.5S7.2,18.1,6.9,18.1z" /><path d="M15.7,18.1h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8c0.7,0,1.2-0.6,1.2-1.2v-1.8 c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8C17.9,17.1,16.9,18.1,15.7,18.1z" /><path d="M17.4,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-0.7-0.6-1.3-1.2-1.3h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8 c1.2,0,2.2,1,2.2,2.3v1.8C17.9,7.4,17.7,7.6,17.4,7.6z" /></svg>'+'<svg class="theme-icon-item-icon" style="display:none" width="'.concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" fill="').concat(r.color,'" viewBox="-6 -6 32 32">\n            <path class="st1" d="M5.7,8.1H3.9c-0.3,0-0.6-0.2-0.6-0.6S3.6,7,3.9,7h1.9c0.7,0,1.3-0.6,1.3-1.3V3.8c0-0.3,0.2-0.6,0.6-0.6\n              s0.6,0.2,0.6,0.6v1.9C8.2,7,7.1,8.1,5.7,8.1z"/>\n            <path class="st1" d="M7.6,17.7c-0.3,0-0.6-0.2-0.6-0.6v-1.9c0-0.7-0.6-1.3-1.3-1.3H3.9c-0.3,0-0.6-0.2-0.6-0.6s0.2-0.6,0.6-0.6h1.9\n              c1.3,0,2.4,1.1,2.4,2.4v1.9C8.2,17.5,7.9,17.7,7.6,17.7z"/>\n            <path class="st1" d="M13.4,17.7c-0.3,0-0.6-0.2-0.6-0.6v-1.9c0-1.3,1.1-2.4,2.4-2.4h1.9c0.3,0,0.6,0.2,0.6,0.6S17.5,14,17.2,14\n              h-1.9c-0.7,0-1.3,0.6-1.3,1.3v1.9C14,17.5,13.8,17.7,13.4,17.7z"/>\n            <path class="st1" d="M17.2,8.1h-1.9c-1.3,0-2.4-1.1-2.4-2.4V3.8c0-0.3,0.2-0.6,0.6-0.6S14,3.5,14,3.8v1.9C14,6.4,14.6,7,15.3,7h1.9\n              c0.3,0,0.6,0.2,0.6,0.6S17.5,8.1,17.2,8.1z"/>\n          </svg>\n          </span>'),r.onclick=function(){var e=t.decoderState.state;e.webExpend;var n=e.expend;e.play;var i=e.pantile;if(n)if(t.isMobile){r=parseInt(getComputedStyle(document.getElementById("".concat(t.jSPlugin.id,"-wrap"))).height,10)-parseInt(getComputedStyle(document.getElementById(t.jSPlugin.id)).height,10);document.getElementById("".concat(t.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(t.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-32px"),document.getElementById("".concat(t.jSPlugin.id,"-headControl"))&&(document.getElementById("".concat(t.jSPlugin.id,"-headControl")).style.position="relative"),C(document.getElementById("".concat(t.jSPlugin.id,"-wrap")),t.jSPlugin.width,t.jSPlugin.height+r),t.jSPlugin.jSPlugin.JS_Resize(t.jSPlugin.width,t.jSPlugin.height),i&&(t.Ptz.hide(),t.setDecoderState({pantile:!1}))}else{console.log("取消全局全屏");var o=E();o.then((function(e){console.log("取消全屏",e,t.jSPlugin),t.jSPlugin.jSPlugin.JS_Resize(t.jSPlugin.width,t.jSPlugin.height)}))}else if(console.log("执行全局全屏"),t.isMobile){var r=parseInt(getComputedStyle(document.getElementById("".concat(t.jSPlugin.id,"-wrap"))).height,10)-parseInt(getComputedStyle(document.getElementById(t.jSPlugin.id)).height,10);T(document.getElementById("".concat(t.jSPlugin.id,"-wrap"))),setTimeout((function(){var e=document.documentElement.clientWidth,n=document.documentElement.clientHeight;document.getElementById("".concat(t.jSPlugin.id)).style["backface-visibility"]="hidden",t.jSPlugin.jSPlugin.JS_Resize(n,e-r,!0),t.jSPlugin.fullScreenWidth=n,t.jSPlugin.fullScreenHeight=e-r}),100)}else{var a=window.screen.width,s=window.screen.height,d=w(document.getElementById("".concat(t.jSPlugin.id)));d.then((function(e){t.jSPlugin.jSPlugin.JS_Resize(a,s),t.jSPlugin.fullScreenWidth=a,t.jSPlugin.fullScreenHeight=s}))["catch"]((function(e){console.log(e)})),t.jSPlugin.close3DZoom()}t.setDecoderState({expend:!n})},r;case"webExpend":return r.title="网页全屏",r.id=e,r.domString='<span><svg id="'.concat(this.jSPlugin.id,'-webExpend-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M3.1,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-1.2,1-2.3,2.2-2.3h1.8c0.3,0,0.5,0.2,0.5,0.5S6.8,4.1,6.6,4.1H4.8 c-0.7,0-1.2,0.6-1.2,1.3v1.8C3.6,7.4,3.3,7.6,3.1,7.6z" /><path d="M15.3,18.1h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8c0.7,0,1.2-0.6,1.2-1.2v-1.8 c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8C17.6,17.1,16.6,18.1,15.3,18.1z" /><circle class="st2" cx="10.2" cy="10.4" r="1.1"/></svg>'+'<svg class="theme-icon-item-icon" fill="'.concat(r.color,'" style="display:none;" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="-6 -6 32 32">\n          <path class="st1" d="M5.4,8.1H3.5C3.2,8.1,3,7.9,3,7.6s0.2-0.5,0.5-0.5h1.9c0.8,0,1.4-0.6,1.4-1.4V3.8c0-0.3,0.2-0.5,0.5-0.5\n            s0.5,0.2,0.5,0.5v1.9C7.7,7,6.7,8.1,5.4,8.1z"/>\n          <path class="st1" d="M13.1,17.7c-0.3,0-0.5-0.2-0.5-0.5v-1.9c0-1.3,1.1-2.4,2.4-2.4h1.9c0.3,0,0.5,0.2,0.5,0.5s-0.2,0.5-0.5,0.5H15\n            c-0.8,0-1.4,0.6-1.4,1.4v1.9C13.6,17.4,13.4,17.7,13.1,17.7z"/>\n            <circle class="st2" cx="10.2" cy="10.4" r="1.1"/>\n          ')+"</svg></span>",r.onclick=function(){var e=t.decoderState.state,n=e.webExpend,i=e.expend;if(e.play,i)return console.log("正在全局全屏"),!1;if(t.jSPlugin.recTimer&&clearInterval(t.jSPlugin.recTimer),n){console.log("取消网页全屏");var o=E();o.then((function(e){t.jSPlugin.jSPlugin.JS_Resize(t.jSPlugin.width,t.jSPlugin.height),t.jSPlugin.Theme.Rec&&t.jSPlugin.Theme.Rec.recAutoSize()}))}else{console.log("执行网页全屏");var r=0,a=0,s=t;["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach((function(e){window.addEventListener(e,(function(e){var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;return t?document.getElementById("".concat(s.jSPlugin.id,"-loading-item-0"))&&(document.getElementById("".concat(s.jSPlugin.id,"-loading-item-0")).style.height=window.screen.height-parseInt(window.getComputedStyle(document.getElementById("".concat(s.jSPlugin.id,"-headControl"))).height,10)+"px"):document.getElementById("".concat(s.jSPlugin.id,"-loading-item-0"))&&(document.getElementById("".concat(s.jSPlugin.id,"-loading-item-0")).style.height=s.jSPlugin.height+parseInt(window.getComputedStyle(document.getElementById("".concat(s.jSPlugin.id,"-headControl"))).height,10)+"px"),t}))}));var d=window.screen.width,l=window.screen.height,c=w(document.getElementById("".concat(t.jSPlugin.id,"-wrap")));c.then((function(e){document.getElementById("".concat(t.jSPlugin.id,"-canvas-container"))&&(r=parseInt(window.getComputedStyle(document.getElementById("".concat(t.jSPlugin.id,"-canvas-container"))).height,10)),document.getElementById("".concat(t.jSPlugin.id,"-headControl"))&&(a=parseInt(window.getComputedStyle(document.getElementById("".concat(t.jSPlugin.id,"-headControl"))).height,10)),t.jSPlugin.jSPlugin.JS_Resize(d,l-r-a),t.jSPlugin.Theme.Rec&&t.jSPlugin.Theme.Rec.recAutoSize()}))["catch"]((function(e){console.log(e)}))}t.setDecoderState({webExpend:!n})},r;case"hd":return r.title="画面清晰度",r.id=e,r.domString='<ul id="'.concat(this.jSPlugin.id,'-hdSelect" class="hd speed-select ').concat(this.isMobile?"mobile":"",'" style="display:none;">')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;" name="option" id="'.concat(this.jSPlugin.id,'-select-hd">高清</li>')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;"  name="option" id="'.concat(this.jSPlugin.id,'-select-sd">标清</li>')+'<li class="selectOption cancel" style="'.concat(this.isMobile?"":"display:none;",'" name="option" id="').concat(this.jSPlugin.id,'-select-speed">取消</li>')+"</ul>"+'<span><svg  id="'.concat(this.jSPlugin.id,'-hdSelect-icon" class="theme-icon-item-icon" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M17.4,16.5H3.1c-0.8,0-1.4-0.6-1.4-1.4V5.4c0-0.9,0.7-1.6,1.6-1.6h14.1c0.8,0,1.4,0.6,1.4,1.4v9.8 C18.8,15.9,18.2,16.5,17.4,16.5z M3.3,5C3.1,5,2.9,5.2,2.9,5.4v9.7c0,0.2,0.1,0.3,0.3,0.3h14.3c0.2,0,0.3-0.1,0.3-0.3V5.3 c0-0.2-0.1-0.3-0.3-0.3H3.3z" /><path d="M13.3,13.6h-1.6c-0.4,0-0.7-0.3-0.7-0.7V7.4c0-0.4,0.3-0.7,0.7-0.7h1.6c1.2,0,2.2,1,2.2,2.2v2.4 C15.6,12.6,14.6,13.6,13.3,13.6z M12.2,12.5h1.1c0.6,0,1.1-0.5,1.1-1.1V9c0-0.6-0.5-1.1-1.1-1.1h-1.1V12.5z" /><path d="M5.5,13.6c-0.3,0-0.6-0.2-0.6-0.6V7.3C5,7,5.2,6.8,5.5,6.8S6.1,7,6.1,7.3v5.7C6.1,13.4,5.8,13.6,5.5,13.6z" /><path d="M9.2,13.6c-0.3,0-0.6-0.2-0.6-0.6V7.3c0-0.3,0.2-0.6,0.6-0.6S9.8,7,9.8,7.3v5.7C9.8,13.4,9.5,13.6,9.2,13.6z" /><rect x="5.6" y="9.6" width="3.6" height="1.1" /></svg>'+'<svg id="'.concat(this.jSPlugin.id,'-sdSelect-icon" class="theme-icon-item-icon" style="display:none" fill="').concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="-6 -8 40 44">\n                <path d="M24.1,23.8h-20c-1.1,0-1.9-0.9-1.9-1.9V8.4c0-1.2,1-2.2,2.1-2.2h19.7c1.1,0,1.9,0.9,1.9,1.9v13.8\n                    C26,23,25.1,23.8,24.1,23.8z M4.3,7.7C4,7.7,3.7,8,3.7,8.4v13.5c0,0.2,0.2,0.4,0.4,0.4h20c0.2,0,0.4-0.2,0.4-0.4V8.2\n                    c0-0.2-0.2-0.4-0.4-0.4H4.3z"/>\n                <path d="M18.4,19.8h-2.2c-0.5,0-0.9-0.4-0.9-0.9v-7.8c0-0.5,0.4-0.9,0.9-0.9h2.2c1.7,0,3.1,1.4,3.1,3.1v3.3\n                C21.5,18.4,20.1,19.8,18.4,19.8z M16.7,18.3h1.6c0.9,0,1.6-0.7,1.6-1.6v-3.3c0-0.9-0.7-1.6-1.6-1.6h-1.6V18.3z"/>\n                <path d="M10.5,19.8c1.2,0,2.1-0.3,2.7-0.9c0.6-0.6,0.9-1.3,0.9-2.1c0-0.8-0.3-1.4-0.9-1.8c-0.4-0.2-1.1-0.5-2.2-0.8\n                    l0,0l-1-0.2c-0.4-0.1-0.8-0.2-1-0.4c-0.4-0.2-0.6-0.5-0.6-0.9c0-0.4,0.1-0.6,0.4-0.9s0.7-0.3,1.3-0.3c0.8,0,1.4,0.2,1.8,0.6\n                    c0.2,0.3,0.3,0.6,0.4,0.9l0,0h1.4c0-0.6-0.2-1.1-0.5-1.6c-0.6-0.8-1.6-1.2-2.9-1.2c-1,0-1.8,0.3-2.4,0.8c-0.6,0.5-0.9,1.2-0.9,2\n                    c0,0.7,0.3,1.3,1,1.7c0.4,0.2,0.9,0.4,1.7,0.6l0,0l1.2,0.3c0.6,0.2,1.1,0.3,1.3,0.4c0.3,0.2,0.5,0.5,0.5,0.9c0,0.5-0.2,0.9-0.6,1.1\n                    s-0.9,0.4-1.5,0.4c-0.9,0-1.6-0.2-2-0.7c-0.2-0.3-0.3-0.6-0.4-1.1l0,0H6.8c0,0.9,0.3,1.6,0.9,2.2C8.2,19.5,9.2,19.8,10.5,19.8z"/>\n                <defs>\n                  <filter id="Adobe_OpacityMaskFilter" filterUnits="userSpaceOnUse" x="15.2" y="10.3" width="6.2" height="9.5">\n                    <feColorMatrix  type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"/>\n                  </filter>\n                </defs>\n                <mask maskUnits="userSpaceOnUse" x="15.2" y="10.3" width="6.2" height="9.5" id="mask-2_2_">\n                  <g class="st2">\n                    <path id="path-1_2_" class="st3" d="M24.1,23.1h-20c-0.6,0-1.2-0.5-1.2-1.2V8.2C2.9,7.5,3.5,7,4.1,7h19.7c0.8,0,1.4,0.6,1.4,1.4\n                      v13.5C25.2,22.6,24.7,23.1,24.1,23.1z"/>\n                  </g>\n                </mask>\n                <defs>\n                  <filter id="Adobe_OpacityMaskFilter_1_" filterUnits="userSpaceOnUse" x="6.8" y="10.3" width="7.3" height="9.5">\n                    <feColorMatrix  type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"/>\n                  </filter>\n                </defs>\n                <mask maskUnits="userSpaceOnUse" x="6.8" y="10.3" width="7.3" height="9.5" id="mask-2_3_">\n                  <g class="st5">\n                    <path id="path-1_3_" class="st3" d="M24.1,23.1h-20c-0.6,0-1.2-0.5-1.2-1.2V8.2C2.9,7.5,3.5,7,4.1,7h19.7c0.8,0,1.4,0.6,1.4,1.4\n                      v13.5C25.2,22.6,24.7,23.1,24.1,23.1z"/>\n                  </g>\n                </mask>\n                </svg>\n                ')+'<span class=\'speed-select-mask\' style="display:none" id="'.concat(this.jSPlugin.id,'-select-hd-mask"></span>')+"</span>",r.onclick=function(e){var n=t.decoderState.state,i=n.hd,o=n.expend,r=n.recordvideo,a=n.play;a&&(i&&e.target.id==="".concat(t.jSPlugin.id,"-select-sd")?(console.log("切换到标清"),t.jSPlugin.changeVideoLevel(0),t.setDecoderState({hd:!1}),t.resetMobileZoomStatus(),r&&t.setDecoderState({recordvideo:!1})):i||e.target.id!=="".concat(t.jSPlugin.id,"-select-hd")||(t.jSPlugin.changeVideoLevel(1),t.setDecoderState({hd:!0}),t.resetMobileZoomStatus(),r&&t.setDecoderState({recordvideo:!1})),t.showHD=!t.showHD,document.getElementById("".concat(t.jSPlugin.id,"-hdSelect"))&&(document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")).style.display="none"===document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")).style.display?"block":"none",t.isMobile&&(document.getElementById("".concat(t.jSPlugin.id,"-select-hd-mask")).style.display="none"===document.getElementById("".concat(t.jSPlugin.id,"-select-hd-mask")).style.display?"block":"none")),t.isMobile&&o&&t.showHD?document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")).className="hd speed-select mobile expend":document.getElementById("".concat(t.jSPlugin.id,"-hdSelect")).className=t.isMobile?"hd speed-select mobile":"speed-select")},r;case"speed":return r.title="回放倍速",r.id=e,r.domString='<ul id="'.concat(this.jSPlugin.id,'-speedSelect" class="speed speed-select ').concat(this.isMobile?"mobile":"",'" style="display:none;">')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed4">4倍</li>')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed2">2倍</li>')+'<li class="selectOption active" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed1">1倍（正常播放）</li>')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed05">0.5倍</li>')+'<li class="selectOption cancel" style="'.concat(this.isMobile?"":"display:none;",'" name="option" id="').concat(this.jSPlugin.id,'-select-speed">取消</li>')+"</ul>"+'<span>\n          <div style="font-size: 12px;\n          vertical-align: bottom;\n          display: inline-flex;\n          padding: 0px 7px;\n          width: 48px;\n          line-height: 24px;\n          justify-content: center;\n          border: 1px solid '.concat(r.color,';\n          text-align: center;border-radius: 12.5px;"\n          id="').concat(this.jSPlugin.id,'-speed-text"\n          >').concat(1===this.nextRate?"倍速":"".concat(this.nextRate,"倍").replace("3","0.5"),"</div>\n                ")+'<span class=\'speed-select-mask\' style="display:none" id="'.concat(this.jSPlugin.id,'-select-mask"></span>')+"</span>",this.isMobile||(r.onmouseenter=function(e){var n=t.decoderState.state.play;if(!n)return!1;console.log("鼠标移入",e),t.setDecoderState({speed:!0}),document.getElementById("".concat(t.jSPlugin.id,"-speedSelect"))&&(document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.display="block")},r.onmouseleave=function(e){var n=t.decoderState.state.play;if(!n)return!1;console.log("鼠标移出",e),t.setDecoderState({speed:!1}),document.getElementById("".concat(t.jSPlugin.id,"-speedSelect"))&&(document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.display="none")}),r.onclick=function(e){var n=t.decoderState.state,i=n.speed,o=n.expend,r=n.play;if(!r)return!1;if(!i&&t.isMobile&&(document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).className=o?"speed speed-select mobile expend":"speed speed-select mobile"),t.nextRate=1,e.target.id)switch(e.target.id){case"".concat(t.jSPlugin.id,"-select-speed1"):console.log("倍速1"),t.nextRate=1,t.jSPlugin.jSPlugin.JS_Speed(t.nextRate),t.changeRecSpeed(1),t.jSPlugin.speed=1,t.setDecoderState({speed:!i});break;case"".concat(t.jSPlugin.id,"-select-speed2"):console.log("倍速2"),t.nextRate=2,t.jSPlugin.jSPlugin.JS_Speed(t.nextRate),t.changeRecSpeed(2),t.jSPlugin.speed=2,t.setDecoderState({speed:!i});break;case"".concat(t.jSPlugin.id,"-select-speed4"):console.log("倍速4"),t.nextRate=4,t.jSPlugin.jSPlugin.JS_Speed(t.nextRate),t.changeRecSpeed(4),t.jSPlugin.speed=4,t.setDecoderState({speed:!i});break;case"".concat(t.jSPlugin.id,"-select-speed05"):console.log("倍速05"),t.nextRate=3,t.jSPlugin.jSPlugin.JS_Speed(t.nextRate),t.changeRecSpeed(.5),t.jSPlugin.speed=.5,t.setDecoderState({speed:!i});break;default:t.isMobile?t.setDecoderState({speed:!i}):t.setDecoderState({speed:!0});break}t.isMobile||e.target.id!=="".concat(t.jSPlugin.id,"-speed-text")?document.getElementById("".concat(t.jSPlugin.id,"-speedSelect"))&&(document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.display="none"===document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.display?"block":"none"):document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).style.display="block"},r;case"deviceName":return r.title="设备名称",r.id=e,r.domString="<span>设备名称</span>",r.onclick=function(){},r;case"deviceID":return r.title="设备序列号",r.id=e,r.domString="<span>设备序列号</span>",r.onclick=function(){},r;case"cloudRec":return r.title="云存储回放",r.id=e,r.domString='\n        <span>\n          <svg class="theme-icon-item-icon" fill="'.concat(r.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg"  width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="-10 0 40 15">\n\t<path d="M9.5,13.1c-0.3,0-0.5-0.2-0.5-0.5V8.8c0-0.3,0.2-0.5,0.5-0.5S10,8.5,10,8.8v3.8C10,12.8,9.8,13.1,9.5,13.1z"/>\n\t<path d="M7.6,10.6c-0.1,0-0.3-0.1-0.4-0.2C7,10.2,7,9.9,7.3,9.7l1.9-1.7c0.2-0.2,0.5-0.2,0.7,0l1.8,1.7\n\t\tc0.2,0.2,0.2,0.5,0,0.7c-0.2,0.2-0.5,0.2-0.7,0L9.5,9.1l-1.6,1.4C7.8,10.6,7.7,10.6,7.6,10.6z"/>\n\t<path d="M13.2,15.7H5.6c-2.1-0.1-3.8-1.8-3.8-3.9c0-1.8,1.3-3.4,3-3.8c0.4-2.2,2.3-3.9,4.6-3.9c2.3,0,4.2,1.7,4.6,3.8\n\t\tc1.8,0.4,3.1,1.9,3.1,3.8C17.1,13.9,15.4,15.7,13.2,15.7z M5.6,14.7h7.6c1.6,0,2.9-1.3,2.9-2.9c0-1.5-1.1-2.7-2.6-2.9l-0.4,0l0-0.4\n\t\tc-0.2-1.9-1.7-3.3-3.6-3.3C7.5,5.1,6,6.6,5.8,8.5l0,0.4l-0.4,0c-1.4,0.2-2.5,1.4-2.5,2.9C2.8,13.3,4.1,14.6,5.6,14.7z"/>\n          </svg>\n        </span>\n        '),r.onclick=function(){console.log("点击云回放"),t.setDecoderState({type:"cloud.rec",cloudRec:!0,rec:!1}),t.jSPlugin.changePlayUrl({type:"cloud.rec"},(function(){console.log(t.jSPlugin);var e=y("begin",t.jSPlugin.url)||(new Date).Format("yyyyMMdd");t.Rec.renderRec("".concat(e.slice(0,4),"-").concat(e.slice(4,6),"-").concat(e.slice(6,8)));var n=t.decoderState.state.zoom;n&&(t.setDecoderState({zoom:!1}),t.jSPlugin.Zoom.stopZoom(),t.jSPlugin.close3DZoom())})),console.log(t.jSPlugin)},r;case"rec":return r.title="本地存储",r.id=e,r.domString='\n        <span>\n        <svg class="theme-icon-item-icon" fill='.concat(r.color,' version="1.1" xmlns="http://www.w3.org/2000/svg"  width="').concat(this.jSPlugin.width>Be?48:32,'" height="').concat(this.jSPlugin.width>Be?48:32,'" viewBox="0 0 40 15">\n          <path d="M13,16.3H5.5c-1.1,0-2-0.9-2-2V3.8c0-1.1,0.9-2,2-2h5.4c0.5,0,1,0.2,1.4,0.6l2.1,2.1C14.8,4.8,15,5.3,15,5.9\n  v8.4C15,15.4,14.1,16.3,13,16.3z M5.5,2.8c-0.6,0-1,0.4-1,1v10.5c0,0.6,0.4,1,1,1H13c0.6,0,1-0.4,1-1V5.9c0-0.3-0.1-0.5-0.3-0.7\n  L11.6,3c-0.2-0.2-0.4-0.3-0.7-0.3H5.5z"/>\n<path d="M6.3,7.3C6,7.3,5.8,7,5.8,6.8V4.5C5.8,4.2,6,4,6.3,4s0.5,0.2,0.5,0.5v2.2C6.8,7,6.6,7.3,6.3,7.3z"/>\n<path d="M8.5,7.3C8.3,7.3,8,7,8,6.8V4.5C8,4.2,8.3,4,8.5,4S9,4.2,9,4.5v2.2C9,7,8.8,7.3,8.5,7.3z"/>\n<path d="M10.8,7.3c-0.3,0-0.5-0.2-0.5-0.5V4.5c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v2.2C11.3,7,11.1,7.3,10.8,7.3z"\n  />\n        </svg>\n      </span>\n        '),r.onclick=function(){console.log("点击本地回放"),t.setDecoderState({type:"rec",cloudRec:!1,rec:!0}),t.jSPlugin.changePlayUrl({type:"rec"},(function(){console.log("---------本地回放"),console.log(t.jSPlugin);var e=y("begin",t.jSPlugin.url)||(new Date).Format("yyyyMMdd");t.Rec.renderRec("".concat(e.slice(0,4),"-").concat(e.slice(4,6),"-").concat(e.slice(6,8)));var n=t.decoderState.state.zoom;n&&(t.setDecoderState({zoom:!1}),t.jSPlugin.Zoom.stopZoom(),t.jSPlugin.close3DZoom())})),console.log(t.jSPlugin)},r;default:return r}}},{key:"changeRecSpeed",value:function(e){var t=this,n=function(e){if(console.log("setLiActive",e),!document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")))return!1;document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[0].className=document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[0].className.replace("active","default"),document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[1].className=document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[1].className.replace("active","default"),document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[2].className=document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[2].className.replace("active","default"),document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[3].className=document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[3].className.replace("active","default"),document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[e].className=document.getElementById("".concat(t.jSPlugin.id,"-speedSelect")).childNodes[e].className.replace("default","active")},i="1";switch(e){case 1:n(2),i="倍速";break;case 2:n(1),i="".concat(e,"倍");break;case 4:n(0),i="".concat(e,"倍");break;case.5:n(3),i="".concat(e,"倍");break;default:n(2),i="".concat(e,"倍");break}document.getElementById("".concat(this.jSPlugin.id,"-speed-text"))&&(document.getElementById("".concat(this.jSPlugin.id,"-speed-text")).innerHTML=i)}},{key:"initThemeData",value:function(){var e=this,t=this.themeData,n=t.header,i=t.footer,o=this.jSPlugin.id;if(this.header=G.header,this.footer=G.footer,this.isNeedRenderHeader=j.findIndex(n.btnList,(function(e){return e.isrender>0}))>=0,this.isMobile&&(this.isNeedRenderHeader=j.findIndex(n.btnList,(function(e){return e.isrender>0&&"deviceID"===e.iconId||e.isrender>0&&"deviceName"===e.iconId}))>=0),this.isNeedRenderFooter=j.findIndex(i.btnList,(function(e){return e.isrender>0}))>=0,this.isNeedRenderTimeLine=j.findIndex(n.btnList,(function(e){return"cloudRec"===e.iconId&&1===e.isrender||"rec"===e.iconId&&1===e.isrender}))>=0&&!this.jSPlugin.disabledTimeLine,["date-switch-container-wrap","rec-type-container-wrap","mobile-rec-wrap","mobile-ez-ptz-container"].forEach((function(e,t){document.getElementById(e)&&document.getElementById(e).parentElement.removeChild(document.getElementById(e))})),this.isNeedRenderHeader)if(document.getElementById("".concat(this.jSPlugin.id,"-headControl")))document.getElementById("".concat(this.jSPlugin.id,"-headControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' style='display:flex;width: calc(100% - 100px);'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' style='display:flex'></div>");else{var r=document.createElement("div");r.setAttribute("id","".concat(this.jSPlugin.id,"-headControl")),r.setAttribute("class","header-controls"),r.innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' class=\"header-controls-left\" style='display:flex;width:calc(100% - 100px);overflow:hidden;'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' class=\"header-controls-right\" style='display:flex;'></div>");var a={height:this.jSPlugin.width>Be?"48px":"32px","line-height":this.jSPlugin.width>Be?"48px":"32px",display:"flex","justify-content":"space-between",top:0,"z-index":1,background:"#000000",color:"#FFFFFF",width:"100%"};r.style=Ne(a),document.getElementById("".concat(o,"-wrap")).insertBefore(r,document.getElementById(o));var s=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(s)}),50)}else document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&document.getElementById("".concat(this.jSPlugin.id,"-headControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-headControl")));if(this.isNeedRenderFooter)if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")))document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-".concat(this.jSPlugin.width>Be?48:32,"px"),document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML='<div id="'.concat(this.jSPlugin.id,'-audioControls"  class="footer-controls" style=\'display:flex;justify-content: space-between;height: ').concat(this.jSPlugin.width>Be?48:32,"px;width:100%;'><div id='").concat(this.jSPlugin.id,"-audioControls-left' class=\"footer-controls-left\" style='display:flex'></div><div id='").concat(this.jSPlugin.id,"-audioControls-right' class=\"footer-controls-right\" style='display:flex'></div></div>"));else{var d=document.createElement("div");d.setAttribute("id","".concat(this.jSPlugin.id,"-ez-iframe-footer-container")),d.setAttribute("class","ez-iframe-footer-container");var l={"min-height":this.jSPlugin.width>Be?"48px":"32px","max-height":this.jSPlugin.width>Be?"96px":"80px",position:"relative","margin-top":this.jSPlugin.width>Be?"-48px":"-32px",display:"flex","flex-wrap":"wrap","justify-content":"space-between","z-index":999,top:0,color:"#FFFFFF",width:"100%"};d.style=Ne(l),d.innerHTML='<div id="'.concat(this.jSPlugin.id,'-audioControls" class="footer-controls" style=\'display:flex;height:').concat(this.jSPlugin.width>Be?48:32,"px;justify-content: space-between;width:100%;z-index:999;position: relative;'><div id='").concat(this.jSPlugin.id,"-audioControls-left' class=\"footer-controls-left\" style='display:flex;margin-lefacti'></div><div id='").concat(this.jSPlugin.id,"-audioControls-right' class=\"footer-controls-right\" style='display:flex'></div></div>"),S(d,document.getElementById(o))}else document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")));if(this.isNeedRenderHeader&&document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=n.backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=n.color,n.btnList.map((function(t,n){t.isrender&&e.renderHeader(t.iconId,t.part)}))),this.isNeedRenderFooter&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=i.backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=i.color,i.btnList.map((function(t,n){t.isrender&&e.renderFooter(t.iconId,t.part)}))),this.isNeedRenderTimeLine)if(this.isMobile)document.getElementById("".concat(this.jSPlugin.id,"-headControl-right"))&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl-right")).style.display="none"),this.Rec=new Y(this.jSPlugin,this.changeRecSpeed,this.resetMobileZoomStatus);else{this.Rec?(this.Rec.unSyncTimeLine(),this.Rec.recInit()):(this.jSPlugin.decoderState=this.decoderState,this.jSPlugin.setDecoderState=this.setDecoderState,this.Rec=new J(this.jSPlugin));var c=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(c)}),50)}var u=j.findIndex(this.themeData.footer.btnList,(function(e){return"pantile"===e.iconId&&1===e.isrender}))>=0&&!this.jSPlugin.disabledPTZ;u&&(this.isMobile&&(this.MobilePtz=new pe(this.jSPlugin)),this.Ptz=new oe(this.jSPlugin));var m=function(){var t=e.decoderState.state,n=t.expend,i=t.webExpend,o=t.zoom,r=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;r||(e.jSPlugin.jSPlugin.JS_Resize(e.jSPlugin.width,e.jSPlugin.height),n&&(e.setDecoderState({expend:!1}),o&&e.jSPlugin.use3DZoom&&e.jSPlugin.enable3DZoom()),i&&e.setDecoderState({webExpend:!1})),e.jSPlugin.Theme.Rec&&e.jSPlugin.Theme.Rec.recAutoSize()};if(["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach((function(e){window.addEventListener(e,(function(e){return m()}))})),this.themeData.poster){this.jSPlugin.poster=this.themeData.poster;var p=setInterval((function(){window.EZUIKit[e.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(p),e.jSPlugin.setPoster(e.themeData.poster))}),50)}this.inited=!0,this.getDeviceInfo()}},{key:"resetMobileZoomStatus",value:function(){if(this.isMobile){var e=document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"));e&&e.style&&"none"!=e.style.display&&(console.log("结束电子放大"),e.style.display="none"),this.jSPlugin.Zoom.resetZoom()}}},{key:"getDeviceInfo",value:function(e){var t=this,n=function(n){200==n.code&&n.data&&(e&&e(n),document.getElementById("".concat(t.jSPlugin.id,"-deviceName-content"))&&(document.getElementById("".concat(t.jSPlugin.id,"-deviceName-content")).style.maxWidth="100%",document.getElementById("".concat(t.jSPlugin.id,"-deviceName-content")).style.overflow="hidden",document.getElementById("".concat(t.jSPlugin.id,"-deviceName-content")).style.textOverflow="ellipsis",document.getElementById("".concat(t.jSPlugin.id,"-deviceName-content")).style.whiteSpace="nowrap",document.getElementById("".concat(t.jSPlugin.id,"-deviceName-content")).innerHTML=n.data.deviceName),document.getElementById("".concat(t.jSPlugin.id,"-deviceID-content"))&&(document.getElementById("".concat(t.jSPlugin.id,"-deviceID-content")).style.maxWidth="100%",document.getElementById("".concat(t.jSPlugin.id,"-deviceID-content")).style.overflow="hidden",document.getElementById("".concat(t.jSPlugin.id,"-deviceID-content")).style.textOverflow="ellipsis",document.getElementById("".concat(t.jSPlugin.id,"-deviceID-content")).style.whiteSpace="nowrap",document.getElementById("".concat(t.jSPlugin.id,"-deviceID-content")).innerHTML=k(t.jSPlugin.url).deviceSerial))};I(this.jSPlugin.env.domain+"/api/lapp/device/info","POST",{accessToken:this.jSPlugin.accessToken,deviceSerial:k(this.jSPlugin.url).deviceSerial},"",n)}},{key:"editStart",value:function(e){var t=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),n=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));n&&n.setAttribute("class","header-controls themeEditing"),t&&t.setAttribute("class","footer-controls themeEditing"),this.setDecoderState({isEditing:!0})}},{key:"editEnd",value:function(e){var t=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),n=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));n&&n.setAttribute("class","header-controls"),t&&t.setAttribute("class","footer-controls"),this.setDecoderState({isEditing:!1})}},{key:"webExpend",value:function(){var e=this,t=this.decoderState.state;t.webExpend;var n=t.expend,i=t.play;if(!i)return!1;if(n)return console.log("正在全局全屏"),!1;console.log("执行网页全屏");var o=0,r=0,a=w(document.getElementById("".concat(this.jSPlugin.id,"-wrap")));a.then((function(t){console.log("全屏promise",window.screen.width),document.getElementById("".concat(e.jSPlugin.id,"-canvas-container"))&&(o=parseInt(window.getComputedStyle(document.getElementById("".concat(e.jSPlugin.id,"-canvas-container"))).height,10)),document.getElementById("".concat(e.jSPlugin.id,"-headControl"))&&(r=parseInt(window.getComputedStyle(document.getElementById("".concat(e.jSPlugin.id,"-headControl"))).height,10)),console.log("this.jSPlugin.JS_Resiz",o,r,document.body.clientWidth),e.jSPlugin.jSPlugin.JS_Resize(window.screen.width,window.screen.height-o-r)}))["catch"]((function(e){console.log(e)}))}},{key:"expend",value:function(){var e=this,t=this.decoderState.state,n=t.webExpend;t.expend;var i=t.play;if(t.pantile,!i)return!1;if(n)return console.log("正在网站全屏"),!1;if(console.log("执行全局全屏"),this.isMobile){var o=parseInt(getComputedStyle(document.getElementById("".concat(this.jSPlugin.id,"-wrap"))).height,10)-parseInt(getComputedStyle(document.getElementById(this.jSPlugin.id)).height,10);T(document.getElementById("".concat(this.jSPlugin.id,"-wrap"))),setTimeout((function(){var t=document.documentElement.clientWidth,n=document.documentElement.clientHeight;document.getElementById("".concat(e.jSPlugin.id)).style["backface-visibility"]="hidden",e.jSPlugin.jSPlugin.JS_Resize(n,t-o)}),100)}else{var r=w(document.getElementById("".concat(this.jSPlugin.id)));r.then((function(t){e.jSPlugin.jSPlugin.JS_Resize(window.screen.width,window.screen.height)}))["catch"]((function(e){console.log(e)}))}}}]),e}();Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};var ze=function(){function e(t,n){if(c(this,e),this.params=t,this.state={},this.jsPlugin=n,this.url="https://log.ys7.com/statistics.do?",t.env)switch(t.env){case"test12":this.url="https://test12dclog.ys7.com/statistics.do?";break;case"online":break;default:this.url=t.env;break}}return m(e,[{key:"uuid",value:function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var i=e.join("");return i}},{key:"dclog",value:function(e){var t=this.url,n=Object.assign({},{systemName:"open_website_monitor"},{bn:"ezuikit-js"},e,{un:e.url},{st:(new Date).getTime(),h:window.location.pathname});Object.keys(n).forEach((function(e,i){var o=n[e];"string"===typeof n[e]&&(o=n[e].replace("%","%25")),"undefined"!==typeof n[e]&&(t+="".concat(0===i?"":"&").concat(e,"=").concat(encodeURIComponent(o)))}));var i=new Image;i.src=t}},{key:"localInfoLog",value:function(e){var t=this.url,n=window.location.protocol+"//"+window.location.host,i={systemName:"open_netstream_localinfo",Ver:"v6.0.0",PlatAddr:n,ExterVer:"v6.0.0",OpId:this.uuid(),CltType:102,AppId:"",playurl:encodeURIComponent(this.jsPlugin.url),StartTime:(new Date).Format("yyyy-MM-dd hh:mm:ss.S"),OS:navigator.platform};i=Object.assign(i,e),Object.keys(i).forEach((function(e,n){var o=i[e];"string"===typeof i[e]&&(o=i[e].replace("%","%25")),"undefined"!==typeof i[e]&&(t+="".concat(0===n?"":"&").concat(e,"=").concat(encodeURIComponent(o)))}));var o=new Image;o.src=t}},{key:"playLog",value:function(e){var t=this.url,n=t,i={systemName:"open_netstream_play_main",playurl:encodeURIComponent(this.jsPlugin.url),Time:(new Date).Format("yyyy-MM-dd hh:mm:ss.S"),Via:2,OpId:this.uuid()};i=Object.assign(i,e),Object.keys(i).forEach((function(e,t){var o=i[e];"string"===typeof i[e]&&(o=i[e].replace("%","%25")),"undefined"!==typeof i[e]&&(n+="".concat(0===t?"":"&").concat(e,"=").concat(encodeURIComponent(o)))}));var o=new Image;o.src=n}}]),e}();(function(e,t){"object"===l(n)&&"object"===l(n.exports)?n.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("EZUIPlayer requires a window with a document");return t(e)}:t(e)})("undefined"!==typeof window?window:void 0,(function(e,t){var n;function i(e,t){for(var n=document.getElementsByTagName("head")[0].getElementsByTagName("script"),i=!1,o=0;o<n.length;o++)n[o].getAttribute("src")==e&&(i=!0,t());if(!i){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,document.getElementsByTagName("head")[0].appendChild(r)}}function o(e,t){for(var n=document.getElementsByTagName("head")[0].getElementsByTagName("link"),i=!1,o=0;o<n.length;o++)n[o].getAttribute("href")==e&&(i=!0,t());if(!i){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=e,r.onload=t,document.getElementsByTagName("head")[0].appendChild(r)}}function r(e,t,n,i,o,r){var a=e,s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var e=JSON.parse(s.responseText);o(e)}},s.open(t,a,!0);var d=new FormData;for(var l in n)d.append(l,n[l]);s.send(d)}var a={EZUIKitPlayer:void 0,EZUIKitTalk:void 0,opt:{apiDomain:"https://open.ys7.com/api/lapp/live/talk/url",filePath:"https://open.ys7.com/assets/ezuikit_v2.6.4",accessToken:"",url:"",deviceSerial:"",channelNo:"",id:"",talkLink:"",rtcUrl:"",ttsUrl:"",stream:"",isReliesReady:!1,template:"simple",plugin:[],audio:1,autoplay:1,videoLoading:!1},state:(n={countTimer:void 0,recodeTime:0,recodeTimer:void 0},p(n,"recodeTime",0),p(n,"fetchDefaultList",!1),p(n,"page",0),p(n,"pageSize",5),n),handleTalkSuccess:function(){},handleTalkError:function(){}},s="https://open.ys7.com",d=s,c=function(t){var n=this;this.opt={id:t.id,apiDomain:s+"/api/lapp/live/talk/url",filePath:d+"/assets/ezuikit_v2.6.4",decoderVersion:"",accessToken:"",url:"",deviceSerial:"",channelNo:"",talkLink:"",rtcUrl:"",ttsUrl:"",stream:"",isReliesReady:!1,template:"simple",plugin:[],audio:1,autoplay:1,fullScreenStatus:0,bSupporDoubleClickFull:!0,videoLoading:!1},this.params=t,t.id&&(this.opt.id=t.id),t.accessToken&&(this.opt.accessToken=t.accessToken),"undefined"!==typeof t.audio&&(this.opt.audio=t.audio),"undefined"!==typeof t.decoderVersion&&(this.opt.decoderVersion=t.decoderVersion),"undefined"!==typeof t.env&&("undefined"!==typeof t.env.domain&&(s=t.env.domain,this.opt.apiDomain=s+"/api/lapp/live/talk/url"),"undefined"!==typeof t.env.filePathDomain&&(d=t.env.filePathDomain,this.opt.filePathDomain=t.env.filePathDomain)),t.url&&(this.opt.url=t.url,this.opt.deviceSerial=t.url.split("/")[3],this.opt.channelNo=t.url.split("/")[4].split(".")[0]),"undefined"!==typeof t.template&&(this.opt.template=t.template),t.plugin&&(this.opt.plugin=t.plugin),"undefined"!==typeof t.autoplay&&(this.opt.autoplay=t.autoplay?1:0),"undefined"!==typeof t.bSupporDoubleClickFull&&(this.opt.bSupporDoubleClickFull=t.bSupporDoubleClickFull),"undefined"!==typeof t.handleTalkSuccess&&(e.EZUIKit.handleTalkSuccess=t.handleTalkSuccess),"undefined"!==typeof t.handleTalkError&&(e.EZUIKit.handleTalkError=t.handleTalkError);var c=this.opt.id,u=document.getElementById(c);u.style.fontSize=0,u.style.overflowY="auto",u.style.position="relative";var m=document.createElement("iframe");function p(){switch(n.opt.template){case"simple":var e=s+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+n.opt.url.replace("?","&")+"&autoplay="+n.opt.autoplay+"&audio="+n.opt.audio+"&accessToken="+t.accessToken+"&templete=0&id="+c+"&decoderVersion="+n.opt.decoderVersion,i="";return"undefined"!==typeof t.controls&&t.controls&&(console.log("typeof",l(t.controls)),i="play,voice,hd,fullScreen",t.controls.length>0&&(i=t.controls.join(","),e+="&controls="+i)),t.websocketParams&&(e+="&websocketParams="+JSON.stringify(t.websocketParams)),e;case"standard":return s+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+n.opt.url.replace("?","&")+"&autoplay="+n.opt.autoplay+"&audio="+n.opt.audio+"&accessToken="+t.accessToken+"&templete=1&id="+c+"&decoderVersion="+n.opt.decoderVersion;case"security":return s+"/ezopen/h5/iframe_se?bSupporDoubleClickFull=0&url="+n.opt.url.replace("?","&")+"&autoplay="+n.opt.autoplay+"&audio="+n.opt.audio+"&accessToken="+t.accessToken+"&templete=0&id="+c+"&decoderVersion="+n.opt.decoderVersion;case"theme":return e=s+"/jssdk/theme.html?url=".concat(t.url,"&accessToken=").concat(t.accessToken,"&id=").concat(c,"&isMobile=").concat(t.isMobile),"undefined"!==typeof t.isMobile&&(e+="&isMobile="+t.isMobile),"undefined"!==typeof t.autoplay&&(e+="&autoplay="+t.autoplay),"undefined"!==typeof t.domain&&"https://test12open.ys7.com"==t.domain&&(e+="&env=test12"),"undefined"!==typeof t.env&&"undefined"!==typeof t.env.domain&&"https://test12open.ys7.com"==t.env.domain&&(e+="&env=test12"),"undefined"!==typeof t.header&&(e+="&header="+t.header),e;default:return s+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+n.opt.url.replace("?","&")+"&autoplay="+n.opt.autoplay+"&audio="+n.opt.audio+"&accessToken="+t.accessToken+"&templete=0&id="+c+"&decoderVersion="+n.opt.decoderVersion}}m.src=p();var h=document.getElementById(c).offsetHeight,f=document.getElementById(c).offsetWidth;t.height&&(h=parseInt(t.height),/\%$/.test(t.height)&&(f=document.getElementById(c).offsetWidth*(parseInt(t.height)/100))),t.width&&(f=parseInt(t.width),/\%$/.test(t.width)&&(f=document.getElementById(c).offsetWidth*(parseInt(t.width)/100))),m.width=f,m.height=h,m.id="EZUIKitPlayer-"+c,m.setAttribute("allowfullscreen",!0),m.setAttribute("allow","autoplay"),m.setAttribute("frameborder",0),u.appendChild(m);var g=n.opt.filePath+"/js/jquery.js",v="https://open.ys7.com/assets/layer/layer.js";i(g,(function(){i(v,(function(){if(y().headerContainer){var d=document.createElement("div");d.setAttribute("class","panel-top");var l=document.createElement("div");if(l.setAttribute("class","contros"),d.appendChild(l),u.insertBefore(d,m),y().capturePictureModule){var c=document.createElement("span");c.innerHTML='<span title="截图"><svg id="capturePicture" title="截图" t="1578882764585" class="icon" viewBox="0 0 1024 1024" version="1.1"  xmlns="http://www.w3.org/2000/svg" p-id="5958" width="24" height="24">  <path    d="M887.296 315.904h-153.6c-51.2 0-68.096-102.4-119.296-102.4H392.704c-34.304 0-51.2 102.4-102.4 102.4h-153.6c-29.696 0-51.2 21.504-51.2 51.2v439.296c0 25.6 21.504 47.104 51.2 47.104h751.104c29.696 0 51.2-21.504 51.2-51.2v-435.2c-0.512-30.208-21.504-51.2-51.712-51.2zM512 768c-115.2 0-204.8-89.6-204.8-200.704s89.6-200.704 204.8-200.704 204.8 89.6 204.8 200.704-93.696 200.704-204.8 200.704z m247.296-354.304c-12.8 0-25.6-12.8-25.6-25.6s12.8-25.6 25.6-25.6 25.6 12.8 25.6 25.6c0 17.408-12.8 25.6-25.6 25.6zM256 264.704c0-8.704-8.704-16.896-16.896-16.896h-51.2c-8.704 0-16.896 8.704-16.896 16.896V281.6H256v-16.896z m256 148.992c-85.504 0-153.6 68.096-153.6 153.6s68.096 153.6 153.6 153.6 153.6-68.096 153.6-153.6-68.096-153.6-153.6-153.6z"    fill="#ffffff" p-id="5959"></path></svg></span>',c.onclick=function(){n.capturePicture()},l.appendChild(c)}if(console.log("matchHeaderOpt().saveModule",y().saveModule),y().saveModule){var p=document.createElement("span");p.innerHTML='<span title="开始录像">  <svg id="startSave" t="1578882716693" class="icon" viewBox="0 0 1024 1024" version="1.1"    xmlns="http://www.w3.org/2000/svg" p-id="3782" width="24" height="24">    <path      d="M915.2 729.6l-128-76.8c-25.6-12.8-44.8-32-44.8-51.2V435.2c0-25.6 19.2-38.4 44.8-51.2l128-76.8c25.6-12.8 44.8 0 44.8 19.2V704c0 32-19.2 38.4-44.8 25.6z m-332.8 89.6H96c-51.2 0-89.6-38.4-89.6-89.6V332.8c0-51.2 38.4-89.6 89.6-89.6h486.4c51.2 0 89.6 38.4 89.6 89.6v396.8c0 51.2-38.4 89.6-89.6 89.6zM192 364.8c-32 6.4-57.6 32-64 64-12.8 57.6 38.4 115.2 96 102.4 32-6.4 57.6-32 64-70.4 12.8-57.6-38.4-108.8-96-96z m0 0"      p-id="3783" fill="#ffffff"></path>  </svg></span>',p.onclick=function(){n.startSave(),document.getElementById("startSave").setAttribute("class","icon hide"),document.getElementById("stopSave").setAttribute("class","icon")},l.appendChild(p);var h=document.createElement("span");h.innerHTML='<span title="结束录像"> <svg id="stopSave" t="1578882716693" class="icon hide" viewBox="0 0 1024 1024" version="1.1"   xmlns="http://www.w3.org/2000/svg" p-id="3782" width="24" height="24">   <path     d="M915.2 729.6l-128-76.8c-25.6-12.8-44.8-32-44.8-51.2V435.2c0-25.6 19.2-38.4 44.8-51.2l128-76.8c25.6-12.8 44.8 0 44.8 19.2V704c0 32-19.2 38.4-44.8 25.6z m-332.8 89.6H96c-51.2 0-89.6-38.4-89.6-89.6V332.8c0-51.2 38.4-89.6 89.6-89.6h486.4c51.2 0 89.6 38.4 89.6 89.6v396.8c0 51.2-38.4 89.6-89.6 89.6zM192 364.8c-32 6.4-57.6 32-64 64-12.8 57.6 38.4 115.2 96 102.4 32-6.4 57.6-32 64-70.4 12.8-57.6-38.4-108.8-96-96z m0 0"     p-id="3783" fill="red"></path> </svg> </span>',h.onclick=function(){n.stopSave(),document.getElementById("stopSave").setAttribute("class","icon hide"),document.getElementById("startSave").setAttribute("class","icon")},l.appendChild(h)}if(y().zoomModule){var f=document.createElement("span");f.innerHTML='<span title="开启电子放大">  <svg id="enableZoom" t="1578882639834" class="icon" viewBox="0 0 1000 1000" version="1.1"    xmlns="http://www.w3.org/2000/svg" p-id="2227" width="24" height="24">    <path      d="M830.6119 441.1089c0-193.7756-157.0939-350.8641-350.8775-350.8641S128.8559 247.3333 128.8559 441.1089 285.9508 791.972 479.7344 791.972 830.6119 634.8845 830.6119 441.1089zM483.2821 710.4863c-146.7975 0-265.8187-118.9953-265.8187-265.8088S336.4847 178.8697 483.2821 178.8697s265.8197 118.9953 265.8197 265.8078S630.0796 710.4863 483.2821 710.4863zM770.6031 653.5739l-72.6417 75.9485 141.6917 160.1814 82.0737-90.0739L770.6031 653.5739zM527.5849 267.4727h-88.60655762279428v132.90489048425167H306.0690340253259v88.60292721534799h132.90933675248866v132.9038911617923h88.60655762279428V488.9794719180395h132.90933675248866v-88.60292721534799H527.5849284006089V267.4726535408993z"      p-id="2228" fill="#ffffff"></path>  </svg></span>',f.onclick=function(){n.enableZoom(),document.getElementById("enableZoom").setAttribute("class","icon hide"),document.getElementById("closeZoom").setAttribute("class","icon")},l.appendChild(f);var g=document.createElement("span");g.innerHTML='<span title="关闭电子放大">  <svg id="closeZoom" t="1578882639834" class="icon hide" viewBox="0 0 1000 1000" version="1.1"    xmlns="http://www.w3.org/2000/svg" p-id="2227" width="24" height="24">    <path      d="M830.6119 441.1089c0-193.7756-157.0939-350.8641-350.8775-350.8641S128.8559 247.3333 128.8559 441.1089 285.9508 791.972 479.7344 791.972 830.6119 634.8845 830.6119 441.1089zM483.2821 710.4863c-146.7975 0-265.8187-118.9953-265.8187-265.8088S336.4847 178.8697 483.2821 178.8697s265.8197 118.9953 265.8197 265.8078S630.0796 710.4863 483.2821 710.4863zM770.6031 653.5739l-72.6417 75.9485 141.6917 160.1814 82.0737-90.0739L770.6031 653.5739zM527.5849 267.4727h-88.60655762279428v132.90489048425167H306.0690340253259v88.60292721534799h132.90933675248866v132.9038911617923h88.60655762279428V488.9794719180395h132.90933675248866v-88.60292721534799H527.5849284006089V267.4726535408993z"      p-id="2228" fill="red"></path>  </svg></span>',g.onclick=function(){n.closeZoom(),document.getElementById("closeZoom").setAttribute("class","icon hide"),document.getElementById("enableZoom").setAttribute("class","icon")},l.appendChild(g)}}function v(){var e={footerContainer:!1,talkModule:!1,broadcastModule:!1,hdModule:!1,fullScreenModule:!1},i=n.opt.template;switch(i){case"simple":if(t.footer&&t.footer instanceof Array){var o=t.footer;e={footerContainer:!0,talkModule:-1!==o.indexOf("talk"),broadcastModule:-1!==o.indexOf("broadcast"),hdModule:-1!==o.indexOf("hd"),fullScreenModule:-1!==o.indexOf("fullScreen")}}break;case"standard":if(t.footer&&t.footer instanceof Array){o=t.footer;e={footerContainer:!0,talkModule:-1!==o.indexOf("talk"),broadcastModule:-1!==o.indexOf("broadcast"),hdModule:-1!==o.indexOf("hd"),fullScreenModule:-1!==o.indexOf("fullScreen")}}break;case"security":break;case"voice":e={footerContainer:!0,talkModule:!0,broadcastModule:!0,hdModule:!0,fullScreenModule:!0};break}return e}function y(){var e={headerContainer:!1,capturePictureModule:!1,saveModule:!1,zoomModule:!1},i=n.opt.template;switch(i){case"simple":if(t.header&&t.header instanceof Array){var o=t.header;e={headerContainer:!0,capturePictureModule:-1!==o.indexOf("capturePicture"),saveModule:-1!==o.indexOf("save"),zoomModule:-1!==o.indexOf("zoom")}}break;case"standard":break;case"security":break;case"voice":e={headerContainer:!0,capturePictureModule:!0,saveModule:!0,zoomModule:!0};break}return e}if(v().footerContainer||-1!==n.opt.plugin.indexOf("talk")){var S=n.opt.filePath+"/npm/css/recoder.css",b=n.opt.filePath+"/npm/js/recoder.js",T=n.opt.filePath+"/recorder.js";if(o(S,(function(){})),i(b,(function(){i(T,(function(){}))})),-1!==n.opt.plugin.indexOf("talk")||v().talkModule){var w=function(t){if(console.log("data",t),200==t.code){var o=t.data;if(o){var r=o.rtcUrl;-1===r.indexOf("ws")&&(r=r.replace("https","wss").replace("rtcgw","rtcgw-ws")),n.opt.rtcUrl=r,n.opt.ttsUrl="tts://"+o.ttsUrl;var s="talk://"+n.opt.deviceSerial+":0:"+n.opt.channelNo+":cas.ys7.com:6500";if(n.opt.talkLink=n.opt.ttsUrl+"/"+s,n.opt.stream=o.stream,console.log("_this.opt",n.opt),!n.opt.isReliesReady){var d=n.opt.filePath+"/npm/js/adapeter.js",l=n.opt.filePath+"/npm/js/janus.js",c=n.opt.filePath+"/npm/js/tts.js";console.log("加载jquery.js"),i(d,(function(){console.log("加载adapeter.js"),i(l,(function(){console.log("加载janus.js"),i(c,(function(){console.log("加载tts.js"),n.opt.isReliesReady=!0}))}))}),(function(){return!!e.adapter}))}if(!document.getElementById("audioleft")){var u=document.createElement("div");u.style.display="none",u.id="audioleft",document.body.appendChild(u)}if(!document.getElementById("audioright")){var m=document.createElement("div");m.style.display="none",m.id="audioright",document.body.appendChild(m)}}}a.opt=n.opt,e.EZUIKit&&(e.EZUIKit.opt=n.opt)};r(n.opt.apiDomain,"POST",{accessToken:n.opt.accessToken,deviceSerial:n.opt.deviceSerial,channelNo:n.opt.channelNo},"",w)}if(v().footerContainer){var C=function(e,t){if(clearInterval(a.state.countTimer),"add"===e){var n=t;a.state.countTimer=setInterval((function(){++n,document.getElementById("time-area").innerHTML=i(n)}),1e3)}else if("sub"===e){n=t;a.state.countTimer=setInterval((function(){n>0?(n--,document.getElementById("time-area").innerHTML=i(n)):(clearInterval(a.state.countTimer),a.state.countTimer=void 0,console.log("倒计时结束，开启声音"))}),1e3)}else"destory"===e&&(clearInterval(a.state.countTimer),a.state.countTimer=void 0,document.getElementById("time-area").innerHTML="00:00");function i(e){var t=parseInt(e),n=0,i=0,o="00",r="00",a="00";return t>59&&(n=parseInt(t/60),t=parseInt(t%60),n>59&&(i=parseInt(n/60),n=parseInt(n%60))),o=parseInt(t)>9?parseInt(t):"0"+parseInt(t),r=parseInt(n)>9?parseInt(n):"0"+parseInt(n),a=parseInt(i)>9?parseInt(i):"0"+parseInt(i),i>0?a+":"+r+":"+o:n>0?r+":"+o:"00:"+o}},_=document.createElement("div");if(_.setAttribute("class","audio-controls"),u.appendChild(_),v().hdModule||v().fullScreenModule){var E=document.createElement("div");if(E.setAttribute("class","contros"),_.appendChild(E),v().hdModule){var k=document.createElement("span");k.setAttribute("id","video-hd"),k.innerHTML=-1===n.opt.url.indexOf(".hd")?"标清":"高清",k.onclick=function(){if(n.opt.videoLoading)return layer.msg("视频加载中，请稍后"),!1;var e=n.stop();n.opt.videoLoading=!0,e.then((function(e){n.opt.videoLoading=!1,-1===n.opt.url.indexOf(".hd")?(n.opt.url=n.opt.url.replace(".live",".hd.live"),k.innerHTML=-1===n.opt.url.indexOf(".hd")?"标清":"高清"):(n.opt.url=n.opt.url.replace(".hd.live",".live"),k.innerHTML=-1===n.opt.url.indexOf(".hd")?"标清":"高清"),n.play(n.opt.url)}))["catch"]((function(e){console.log("error",e)}))},E.appendChild(k)}if(v().fullScreenModule){var P=document.createElement("span");P.setAttribute("class","hide"),P.setAttribute("id","ezuikit-open-sound"),P.setAttribute("title","打开声音"),P.setAttribute("style","vertical-align: top;"),P.innerHTML='<svg t="1590476263239" class="icon" viewBox="0 0 1178 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2273" width="16" height="16"><path d="M665.6 51.2 665.6 51.2c-10.24-30.72-40.96-51.2-71.68-51.2-5.12 0-15.36 0-20.48 5.12l0 0L358.4 153.6 51.2 209.92l0 0C20.48 220.16 0 250.88 0 281.6 0 286.72 0 291.84 0 307.2l0 0 0 409.6 0 0c0 15.36 0 20.48 0 25.6 0 30.72 20.48 61.44 51.2 71.68l0 0L358.4 870.4l97.28 71.68 107.52 76.8 0 0c5.12 5.12 15.36 5.12 25.6 5.12 40.96 0 76.8-35.84 76.8-76.8 0-10.24 0-10.24 0-25.6l0 0L665.6 51.2zM563.2 870.4l-153.6-102.4-307.2-51.2L102.4 307.2l307.2-51.2 153.6-102.4L563.2 870.4z" p-id="2274" fill="#FF0000"></path><path d="M1049.6 537.6l112.64-112.64c20.48-20.48 20.48-56.32 0-76.8-20.48-20.48-56.32-20.48-76.8 0L972.8 460.8l-112.64-112.64c0 0 0 0 0 0-20.48-20.48-56.32-20.48-76.8 0 0 0 0 0 0 0-20.48 20.48-20.48 56.32 0 76.8l112.64 112.64-112.64 112.64c-20.48 20.48-20.48 56.32 0 76.8 20.48 20.48 56.32 20.48 76.8 0L972.8 614.4l112.64 112.64c20.48 20.48 56.32 20.48 76.8 0s20.48-56.32 0-76.8L1049.6 537.6z" p-id="2275" fill="#FF0000"></path></svg>',P.onclick=function(){n.openSound(0),P.setAttribute("class","hide"),I.setAttribute("class","")};var I=document.createElement("span");P.setAttribute("id","ezuikit-close-sound"),I.setAttribute("class","hide"),I.setAttribute("title","关闭声音"),I.setAttribute("style","vertical-align: top;"),I.innerHTML='<svg t="1590414410633" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20545" width="16" height="16"><path d="M840.533333 98.133333c-17.066667-17.066667-42.666667-17.066667-59.733333 0-17.066667 17.066667-17.066667 42.666667 0 59.733334C883.2 256 938.666667 392.533333 938.666667 533.333333c0 140.8-55.466667 277.333333-157.866667 375.466667-17.066667 17.066667-17.066667 42.666667 0 59.733333 8.533333 8.533333 21.333333 12.8 29.866667 12.8 8.533333 0 21.333333-4.266667 29.866666-12.8 115.2-110.933333 183.466667-268.8 183.466667-435.2 0-166.4-68.266667-324.266667-183.466667-435.2zM571.733333 12.8c-17.066667-8.533333-34.133333-4.266667-46.933333 8.533333L281.6 256H42.666667c-25.6 0-42.666667 17.066667-42.666667 42.666667v426.666666c0 25.6 17.066667 42.666667 42.666667 42.666667h238.933333l243.2 234.666667c8.533333 8.533333 17.066667 12.8 29.866667 12.8 4.266667 0 12.8 0 17.066666-4.266667 17.066667-8.533333 25.6-21.333333 25.6-38.4V51.2c0-17.066667-8.533333-34.133333-25.6-38.4zM512 870.4l-183.466667-179.2c-8.533333-4.266667-17.066667-8.533333-29.866666-8.533333H85.333333V341.333333h213.333334c12.8 0 21.333333-4.266667 29.866666-12.8L512 153.6v716.8z" p-id="20546" fill="#ffffff"></path><path d="M759.466667 349.866667c-12.8-21.333333-38.4-25.6-59.733334-8.533334-21.333333 12.8-25.6 38.4-8.533333 59.733334 21.333333 29.866667 34.133333 76.8 34.133333 123.733333 0 46.933333-12.8 93.866667-34.133333 123.733333-12.8 21.333333-8.533333 46.933333 8.533333 59.733334 8.533333 4.266667 17.066667 8.533333 25.6 8.533333 12.8 0 25.6-4.266667 34.133334-17.066667 34.133333-46.933333 51.2-106.666667 51.2-174.933333 0-68.266667-17.066667-128-51.2-174.933333z" p-id="20547" fill="#ffffff"></path></svg>',I.onclick=function(){n.closeSound(0),P.setAttribute("class",""),I.setAttribute("class","hide")},E.appendChild(P),E.appendChild(I)}if(1==n.opt.audio?I.setAttribute("class",""):(P.setAttribute("class",""),n.closeSound(0)),v().fullScreenModule){var x=document.createElement("span");x.setAttribute("title","全屏"),x.setAttribute("style","vertical-align: top;"),x.innerHTML='<svg id="fullScreen" t="1578020167938" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5035" width="16" height="16"> <path d="M348.373333 625.706667l-128 128-64 64v-128a33.28 33.28 0 0 0-35.413333-35.413334A33.493333 33.493333 0 0 0 85.333333 689.706667v213.333333A33.706667 33.706667 0 0 0 120.96 938.666667h213.333333a35.626667 35.626667 0 0 0 0-71.04h-128l64-64 128-128a35.2 35.2 0 0 0-49.92-49.92zM206.293333 156.373333h128a33.28 33.28 0 0 0 35.413334-35.413333A33.493333 33.493333 0 0 0 334.293333 85.333333H113.706667c-7.04 0-14.08 7.04-21.333334 14.293334a26.026667 26.026667 0 0 0-7.04 21.333333v213.333333a33.493333 33.493333 0 0 0 35.626667 35.413334 33.28 33.28 0 0 0 35.413333-35.413334v-128l192 192a35.2 35.2 0 0 0 49.92-49.92zM903.04 85.333333h-213.333333a33.493333 33.493333 0 0 0-35.413334 35.626667 33.28 33.28 0 0 0 35.413334 35.413333h128l-64 64-128 128a35.2 35.2 0 0 0 49.92 49.92l128-128 64-64v128a35.626667 35.626667 0 0 0 71.04 0v-213.333333A33.706667 33.706667 0 0 0 903.04 85.333333zM903.04 654.293333a33.28 33.28 0 0 0-35.413333 35.413334v128l-64-64-128-128a35.2 35.2 0 0 0-49.92 49.92l128 128 64 64h-128a35.626667 35.626667 0 0 0 0 71.04h213.333333A33.706667 33.706667 0 0 0 938.666667 903.04v-213.333333a33.493333 33.493333 0 0 0-35.626667-35.413334z" p-id="5036" fill="#ffffff"></path></svg>',x.onclick=function(){n.fullScreen()},E.appendChild(x)}}if(v().talkModule){var R=document.createElement("div"),A=document.createElement("div");R.setAttribute("class","ptp-talk off"),R.innerHTML='<span title="对讲"><svg t="1581930496966" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"  p-id="1641" width="16" height="16">  <path    d="M715.648 647.872c-30.208-22.336-61.568 39.36-100.992 77.44-39.36 38.08-34.112 31.488-123.392-17.088S311.488 540.224 280 491.648C248.448 443.072 265.472 424.704 265.472 424.704s78.72-62.976 97.152-81.344c18.368-18.368 13.12-30.208 13.12-30.208l-128.64-190.144c-23.616-5.184-64.32 5.12-128.576 57.6C54.208 233.088 30.592 353.856 151.296 575.68c120.768 221.824 347.84 330.752 485.568 374.08 137.856 43.328 228.416-61.696 249.408-103.68 21.056-41.984 13.12-85.312 13.12-85.312S745.856 670.208 715.648 647.872z"    p-id="1642" fill="#ffffff"></path>  <path    d="M715.328 64C580.992 64 472.192 172.864 472.192 307.2s108.8 243.2 243.136 243.2 243.2-108.864 243.2-243.2S849.6 64 715.328 64zM715.328 461.056c-84.992 0-153.856-68.864-153.856-153.856s68.864-153.856 153.856-153.856 153.856 68.928 153.856 153.856S800.32 461.056 715.328 461.056z"    p-id="1643" fill="#ffffff"></path>  <path    d="M777.472 277.376c-18.176 0-32.96-14.784-32.96-33.024 0-8.448 3.136-16.064 8.32-21.888-11.52-5.12-24.128-8-37.568-8-51.2 0-92.672 41.472-92.672 92.736s41.472 92.736 92.672 92.736S808.064 358.4 808.064 307.2c0-13.696-3.072-26.688-8.384-38.4C793.728 274.112 786.048 277.376 777.472 277.376zM715.328 340.928c-18.624 0-33.664-15.104-33.664-33.728 0-18.624 15.04-33.728 33.664-33.728 18.688 0 33.728 15.104 33.728 33.728C749.056 325.824 734.016 340.928 715.328 340.928z"    p-id="1644" fill="#ffffff"></path> </svg> </span> <span>开启对讲</span>',R.onclick=function(){if(console.log("EZUIKit.state.countTimer",a.state.countTimer),a.state.countTimer)return e.layer.msg("语音设备正忙，请稍后重试"),!1;C("add",0),console.log("开始对讲，关闭声音"),n.closeSound(0),console.log(n.opt),n.startTalk(),this.setAttribute("class","ptp-talk off hide"),A.setAttribute("class","ptp-talk on")},A.setAttribute("class","ptp-talk on hide"),A.innerHTML='<span title="对讲"> <svg t="1581930496966" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1641" width="16" height="16">    <path      d="M715.648 647.872c-30.208-22.336-61.568 39.36-100.992 77.44-39.36 38.08-34.112 31.488-123.392-17.088S311.488 540.224 280 491.648C248.448 443.072 265.472 424.704 265.472 424.704s78.72-62.976 97.152-81.344c18.368-18.368 13.12-30.208 13.12-30.208l-128.64-190.144c-23.616-5.184-64.32 5.12-128.576 57.6C54.208 233.088 30.592 353.856 151.296 575.68c120.768 221.824 347.84 330.752 485.568 374.08 137.856 43.328 228.416-61.696 249.408-103.68 21.056-41.984 13.12-85.312 13.12-85.312S745.856 670.208 715.648 647.872z"      p-id="1642" fill="#ff0000"></path>    <path      d="M715.328 64C580.992 64 472.192 172.864 472.192 307.2s108.8 243.2 243.136 243.2 243.2-108.864 243.2-243.2S849.6 64 715.328 64zM715.328 461.056c-84.992 0-153.856-68.864-153.856-153.856s68.864-153.856 153.856-153.856 153.856 68.928 153.856 153.856S800.32 461.056 715.328 461.056z"      p-id="1643" fill="#ff0000"></path>    <path      d="M777.472 277.376c-18.176 0-32.96-14.784-32.96-33.024 0-8.448 3.136-16.064 8.32-21.888-11.52-5.12-24.128-8-37.568-8-51.2 0-92.672 41.472-92.672 92.736s41.472 92.736 92.672 92.736S808.064 358.4 808.064 307.2c0-13.696-3.072-26.688-8.384-38.4C793.728 274.112 786.048 277.376 777.472 277.376zM715.328 340.928c-18.624 0-33.664-15.104-33.664-33.728 0-18.624 15.04-33.728 33.664-33.728 18.688 0 33.728 15.104 33.728 33.728C749.056 325.824 734.016 340.928 715.328 340.928z"      p-id="1644" fill="#ff0000"></path>  </svg> </span><span>关闭对讲</span>',A.onclick=function(){console.log(n.opt),n.stopTalk(),C("destory",0),n.openSound(0),this.setAttribute("class","ptp-talk on hide"),R.setAttribute("class","ptp-talk off")},_.appendChild(R),_.appendChild(A)}if(v().broadcastModule){var D=function e(t){function i(n){console.log("data",n),200==n.code&&(j(n.data,5),a.state.page=n.page.page,0!=t||0!=n.data.length||a.state.fetchDefaultList||(a.state.fetchDefaultList=!0,e(0)))}r(s+"/api/lapp/voice/query","POST",{accessToken:n.opt.accessToken,pageStart:t,pageSize:a.state.pageSize,default:a.state.fetchDefaultList?"true":"false"},"",i)},j=function(e){if(console.log("renderVoliceList",e),e&&e.length>0){for(var t=0;t<e.length;t++){var n=document.createElement("li");n.innerHTML="<li class='voice-item' id='voice-item-"+t+"' data-time="+(e[t]["duration"]||20)+" data-url="+e[t]["fileUrl"]+">"+(e[t]["voiceName"].length>10?e[t]["voiceName"].substr(0,10)+"...":e[t]["voiceName"])+"</li>",document.getElementsByClassName("voice-list-ul")[0].append(n),n.onclick=function(e){console.log("点击元素",e.target,e.target.dataset.url);var t=e.target.dataset.url,n=e.target.dataset.time;L(t,n)}}e.length===a.state.pageSize?document.getElementById("voice-list-end").innerHTML="向下滚动加载更多":document.getElementById("voice-list-end").innerHTML="没有更多数据了"}},L=function(t,i){function o(t){console.log("data.data",t.data),200==t.code?C("sub",parseInt(i)):"10001"==t.code?e.layer.msg("未找到当前语音"):e.layer.msg(t.msg||"发送失败，请稍后再试")}console.log("播放语音",t,i),r(s+"/api/lapp/voice/send","POST",{accessToken:n.opt.accessToken,deviceSerial:n.opt.deviceSerial,channelNo:n.opt.channelNo,fileUrl:t},"",o)},M=document.createElement("div"),N=document.createElement("div");M.setAttribute("class","broadcast off"),N.setAttribute("class","broadcast on hide"),M.innerHTML=' <span title="语音播报">  <svg t="1583561695846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1126" width="16" height="16">    <path      d="M513.82044445 964.38044445c-8.192 0-15.47377778-2.73066667-21.84533334-8.192 0 0-46.42133333-41.87022222-99.21422222-86.47111112-89.20177778-73.728-117.41866667-88.29155555-123.79022222-90.112H35.04355555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666V271.70133333c0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666666H246.21511111c7.28177778-2.73066667 37.31911111-15.47377778 137.44355556-91.02222222 58.25422222-43.69066667 111.04711111-86.47111111 111.04711111-86.47111112 5.46133333-4.55111111 12.74311111-7.28177778 20.02488889-7.28177778 4.55111111 0 10.01244445 0.91022222 14.56355555 3.6408889 10.92266667 5.46133333 18.20444445 17.29422222 18.20444445 30.03733333v837.40444444c0 12.74311111-7.28177778 25.48622222-19.11466667 30.94755556-5.46133333 1.82044445-10.01244445 2.73066667-14.56355555 2.73066667zM270.79111111 724.992c19.11466667 0 48.24177778 8.192 167.48088889 106.496 16.384 13.65333333 33.67822222 28.21688889 51.88266667 43.69066667l5.46133333 4.55111111V139.71911111l-5.46133333 3.64088889c-22.75555555 17.29422222-44.60088889 34.58844445-65.536 50.06222222C293.54666667 291.72622222 264.41955555 299.008 245.30488889 299.008H82.37511111c-20.02488889 0-21.84533333 12.74311111-21.84533333 26.39644445V694.04444445c0 23.66577778 6.37155555 30.03733333 28.21688889 30.03733333h180.224l1.82044444 0.91022222z m520.64711111 162.01955555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666 0-11.83288889 8.192-20.02488889 16.384-24.576 112.86755555-67.35644445 182.04444445-191.14666667 182.04444444-324.03911111 0-132.89244445-70.08711111-256.68266667-182.04444444-324.03911111-10.01244445-5.46133333-15.47377778-14.56355555-15.47377778-24.576 0-14.56355555 11.83288889-27.30666667 26.39644445-27.30666667 5.46133333 0 10.01244445 1.82044445 16.384 5.46133333 128.34133333 76.45866667 207.53066667 218.45333333 207.53066666 369.55022222 0 152.00711111-80.09955555 293.09155555-208.44088889 369.55022223-6.37155555 5.46133333-10.92266667 7.28177778-16.384 7.28177777z m-90.112-152.91733333c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666667 0-10.01244445 4.55111111-18.20444445 12.74311111-23.66577777 61.89511111-34.58844445 100.12444445-100.12444445 100.12444444-171.12177778 0-70.08711111-37.31911111-134.71288889-96.48355555-170.21155555-8.192-4.55111111-12.74311111-13.65333333-12.74311111-23.66577778 0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666667 4.55111111 0 11.83288889 2.73066667 15.47377778 4.55111111 74.63822222 44.60088889 121.96977778 127.43111111 121.96977778 215.72266667 0 90.112-48.24177778 173.85244445-125.61066667 218.45333333-1.82044445 0-9.10222222 4.55111111-15.47377778 4.55111111z"      fill="#ffffff" p-id="1127"></path>  </svg></span><span>语音播报</span>',M.onclick=function(){this.setAttribute("class","broadcast off hide"),N.setAttribute("class","broadcast on")},N.innerHTML='<div class="pop-hover">  <div class="pop-hover-content">    <div class="vioce-list" id="voice-list">      <ul class="voice-list-ul">      </ul>      <div id="voice-list-end"></div>    </div>    <div id="voice-custom" style="text-align: center;">自定义语音</div>  </div></div><span title="语音播报">  <svg t="1583561695846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1126" width="16" height="16">    <path      d="M513.82044445 964.38044445c-8.192 0-15.47377778-2.73066667-21.84533334-8.192 0 0-46.42133333-41.87022222-99.21422222-86.47111112-89.20177778-73.728-117.41866667-88.29155555-123.79022222-90.112H35.04355555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666V271.70133333c0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666666H246.21511111c7.28177778-2.73066667 37.31911111-15.47377778 137.44355556-91.02222222 58.25422222-43.69066667 111.04711111-86.47111111 111.04711111-86.47111112 5.46133333-4.55111111 12.74311111-7.28177778 20.02488889-7.28177778 4.55111111 0 10.01244445 0.91022222 14.56355555 3.6408889 10.92266667 5.46133333 18.20444445 17.29422222 18.20444445 30.03733333v837.40444444c0 12.74311111-7.28177778 25.48622222-19.11466667 30.94755556-5.46133333 1.82044445-10.01244445 2.73066667-14.56355555 2.73066667zM270.79111111 724.992c19.11466667 0 48.24177778 8.192 167.48088889 106.496 16.384 13.65333333 33.67822222 28.21688889 51.88266667 43.69066667l5.46133333 4.55111111V139.71911111l-5.46133333 3.64088889c-22.75555555 17.29422222-44.60088889 34.58844445-65.536 50.06222222C293.54666667 291.72622222 264.41955555 299.008 245.30488889 299.008H82.37511111c-20.02488889 0-21.84533333 12.74311111-21.84533333 26.39644445V694.04444445c0 23.66577778 6.37155555 30.03733333 28.21688889 30.03733333h180.224l1.82044444 0.91022222z m520.64711111 162.01955555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666 0-11.83288889 8.192-20.02488889 16.384-24.576 112.86755555-67.35644445 182.04444445-191.14666667 182.04444444-324.03911111 0-132.89244445-70.08711111-256.68266667-182.04444444-324.03911111-10.01244445-5.46133333-15.47377778-14.56355555-15.47377778-24.576 0-14.56355555 11.83288889-27.30666667 26.39644445-27.30666667 5.46133333 0 10.01244445 1.82044445 16.384 5.46133333 128.34133333 76.45866667 207.53066667 218.45333333 207.53066666 369.55022222 0 152.00711111-80.09955555 293.09155555-208.44088889 369.55022223-6.37155555 5.46133333-10.92266667 7.28177778-16.384 7.28177777z m-90.112-152.91733333c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666667 0-10.01244445 4.55111111-18.20444445 12.74311111-23.66577777 61.89511111-34.58844445 100.12444445-100.12444445 100.12444444-171.12177778 0-70.08711111-37.31911111-134.71288889-96.48355555-170.21155555-8.192-4.55111111-12.74311111-13.65333333-12.74311111-23.66577778 0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666667 4.55111111 0 11.83288889 2.73066667 15.47377778 4.55111111 74.63822222 44.60088889 121.96977778 127.43111111 121.96977778 215.72266667 0 90.112-48.24177778 173.85244445-125.61066667 218.45333333-1.82044445 0-9.10222222 4.55111111-15.47377778 4.55111111z"      fill="#ff0000" p-id="1127"></path>  </svg></span><span>语音播报</span>',N.onclick=function(){this.setAttribute("class","broadcast on hide"),M.setAttribute("class","broadcast off")},_.appendChild(M),_.appendChild(N),document.getElementById("voice-custom").onclick=function(){console.log("显示自定义语音"),B.setAttribute("class","speak off")},D(0);var B=document.createElement("div"),O=document.createElement("div");B.setAttribute("class","speak off hide"),O.setAttribute("class","speak on hide"),B.setAttribute("id","startSpeak"),O.setAttribute("id","stopSpeak"),B.innerHTML='<span title="按住说话">  <svg t="1581994757678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1639" width="16" height="16">    <path      d="M757.059829 393.846154v-52.512821h262.564103v52.512821H757.059829z m-420.102564 481.367521v96.273504h175.042735a8.752137 8.752137 0 0 1 8.752137 8.752137v35.008547a8.752137 8.752137 0 0 1-8.752137 8.752137H109.401709a8.752137 8.752137 0 0 1-8.752136-8.752137v-35.008547a8.752137 8.752137 0 0 1 8.752136-8.752137h175.042735v-96.273504C129.767932 875.213675 4.376068 749.821812 4.376068 595.145299V463.863248a26.25641 26.25641 0 1 1 52.512821 0v113.777778c0 140.174222 113.637744 253.811966 253.811966 253.811965s253.811966-113.637744 253.811966-253.811965V463.863248a26.25641 26.25641 0 1 1 52.51282 0v131.282051c0 154.676513-125.391863 280.068376-280.068376 280.068376z m-26.25641-96.273504c-111.178393 0-201.299145-90.120752-201.299146-201.299145V201.299145C109.401709 90.120752 199.522462 0 310.700855 0s201.299145 90.120752 201.299145 201.299145v376.341881c0 111.178393-90.120752 201.299145-201.299145 201.299145z m691.418803-280.068376H757.059829v-52.512821h245.059829v52.512821z m-17.504273 105.025641H757.059829v-52.512821h227.555556v52.512821z m-17.504274 105.025641H757.059829v-52.512821h210.051282v52.512821z m-8.752137 105.025641H757.059829v-52.512821h201.299145v52.512821z m-17.504273 105.025641H757.059829v-52.512821h183.794872v52.512821z m-26.25641 105.025641H757.059829v-52.512821h157.538462v52.512821z"      p-id="1640" fill="#ffffff"></path>  </svg></span><span>按住说话</span>',O.innerHTML='<span title="按住说话"><svg t="1581994757678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"  p-id="1639" width="16" height="16">  <path    d="M757.059829 393.846154v-52.512821h262.564103v52.512821H757.059829z m-420.102564 481.367521v96.273504h175.042735a8.752137 8.752137 0 0 1 8.752137 8.752137v35.008547a8.752137 8.752137 0 0 1-8.752137 8.752137H109.401709a8.752137 8.752137 0 0 1-8.752136-8.752137v-35.008547a8.752137 8.752137 0 0 1 8.752136-8.752137h175.042735v-96.273504C129.767932 875.213675 4.376068 749.821812 4.376068 595.145299V463.863248a26.25641 26.25641 0 1 1 52.512821 0v113.777778c0 140.174222 113.637744 253.811966 253.811966 253.811965s253.811966-113.637744 253.811966-253.811965V463.863248a26.25641 26.25641 0 1 1 52.51282 0v131.282051c0 154.676513-125.391863 280.068376-280.068376 280.068376z m-26.25641-96.273504c-111.178393 0-201.299145-90.120752-201.299146-201.299145V201.299145C109.401709 90.120752 199.522462 0 310.700855 0s201.299145 90.120752 201.299145 201.299145v376.341881c0 111.178393-90.120752 201.299145-201.299145 201.299145z m691.418803-280.068376H757.059829v-52.512821h245.059829v52.512821z m-17.504273 105.025641H757.059829v-52.512821h227.555556v52.512821z m-17.504274 105.025641H757.059829v-52.512821h210.051282v52.512821z m-8.752137 105.025641H757.059829v-52.512821h201.299145v52.512821z m-17.504273 105.025641H757.059829v-52.512821h183.794872v52.512821z m-26.25641 105.025641H757.059829v-52.512821h157.538462v52.512821z"    p-id="1640" fill="#ff0000"></path></svg></span><span>松开发送</span>',_.appendChild(B),_.appendChild(O),document.getElementById("voice-list").onscroll=function(e){var t=this.scrollHeight;console.log("sum",t,this.scrollTop,document.getElementById("voice-list").clientHeight),t<=this.scrollTop+this.clientHeight&&(console.log("拖动到底，执行加载",a.state.page),D(++a.state.page))};var z,F=document.createElement("div");F.setAttribute("class","time-area"),F.setAttribute("id","time-area"),F.innerHTML="00:00",_.appendChild(F),document.getElementById("startSpeak").onmousedown=function(){if(a.state.countTimer)return e.layer.msg("语音设备正忙，请稍后重试"),!1;var t;function i(n){var i=t.createMediaStreamSource(n);z=new e.Recorder(i)}function o(){z&&z.record()}function r(){console.log("run init");try{e.AudioContext=e.AudioContext||e.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,e.URL=e.URL||e.webkitURL,t=new AudioContext,console.log("Audio context set up."),console.log("navigator.getUserMedia "+(navigator.getUserMedia?"available.":"not present!"))}catch(n){console.log("err",n),e.layer.msg("No web audio support in this browser!")}navigator.getUserMedia({audio:!0},i,(function(e){console.log("No live audio input: "+e)}))}console.log("按住说话"),B.setAttribute("class","speak off hide"),O.setAttribute("class","speak on"),r(),C("add",0),setTimeout((function(){a.state.recodeTime=0,o()}),1e3),a.state.recodeTimer&&clearInterval(a.state.recodeTimer),a.state.recodeTimer=setInterval((function(){a.state.recodeTime>=59?(n.stopTalk(),C("destory",0),this.setAttribute("class","ptp-talk on hide"),R.setAttribute("class","ptp-talk off"),e.layer.msg("不超过1分钟")):a.state.recodeTime=a.state.recodeTime+1}),1e3)},document.getElementById("stopSpeak").onmouseup=function(){function t(){if(C("destory",0),a.state.recodeTime<1)return e.layer.msg("说话时间过短"),clearInterval(a.state.recodeTimer),!1;clearInterval(a.state.recodeTimer),i()}function i(){try{z&&z.stop(),z&&z.exportWAV((function(t){if(console.log("wav_file",t),t.size<1e3)return e.layer.msg("录音失败，请重试"),a.state.recodeTime=0,!1;C("sub",a.state.recodeTime+2);var i=new FormData;function o(t){console.log("data.data",t.data),200==t.code?C("sub",a.state.recodeTime+2):"10001"==t.code?e.layer.msg("未找到当前语音"):e.layer.msg(t.msg||"发送失败，请稍后再试")}function d(e){console.log("err",e)}i.append("voiceFile",t),i.append("accessToken",n.opt.accessToken),i.append("deviceSerial",n.opt.deviceSerial),i.append("channelNo",n.opt.channelNo),r(s+"/api/lapp/voice/sendonce","POST",{voiceFile:t,accessToken:n.opt.accessToken,deviceSerial:n.opt.deviceSerial,channelNo:n.opt.channelNo},"",o,d)})),z&&z.clear()}catch(t){console.log(t)}}console.log("松开发送"),O.setAttribute("class","speak on hide"),t()}}}}}))}));n=this;function y(e){n.opt.fullScreenStatus=e?1:0,t.fullScreenChangeCallBack&&t.fullScreenChangeCallBack({data:e,id:n.opt.id})}e.addEventListener("message",(function(i){i.origin;var o=n.opt.id;if(i.data.type)switch(i.data.type){case"openSound":o==i.data.id&&t.openSoundCallBack&&t.openSoundCallBack(i.data);break;case"closeSound":o==i.data.id&&t.closeSoundCallBack&&t.closeSoundCallBack(i.data);break;case"capturePicture":o==i.data.id&&t.capturePictureCallBack&&t.capturePictureCallBack(i.data);break;case"startSave":o==i.data.id&&t.startSaveCallBack&&t.startSaveCallBack(i.data);break;case"stopSave":o==i.data.id&&t.stopSaveCallBack&&t.stopSaveCallBack(i.data);break;case"fullScreen":o==i.data.id&&t.fullScreenCallBack&&t.fullScreenCallBack(i.data);break;case"getOSDTime":o==i.data.id&&t.getOSDTimeCallBack&&t.getOSDTimeCallBack(i.data);break;case"handleSuccess":o==i.data.id&&t.handleSuccess&&t.handleSuccess(i.data);break;case"handleError":o==i.data.id&&t.handleError&&t.handleError(i.data);break;case"dblclick":o==i.data.id&&n.opt.bSupporDoubleClickFull&&(0===n.opt.fullScreenStatus?n.fullScreen():n.cancelFullScreen());break;case"startTalk":n.startTalk(),n.closeSound();break;case"stopTalk":n.stopTalk(),n.openSound();break;case"clickEventHandle":console.log("event.data",i.data),t.clickEventHandle&&t.clickEventHandle(i.data);break;case"removeEventHandle":t.removeEventHandle&&t.removeEventHandle(i.data);break;case"esc":t.clickEventHandle&&t.clickEventHandle(i.data);break;case"iframeFullScreen":if(o==i.data.id){var r=function(t){var n=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(n)n.call(t);else if("undefined"!==typeof e.ActiveXObject){var i=new ActiveXObject("WScript.Shell");null!==i&&i.SendKeys("{F11}")}};r(document.getElementById("EZUIKitPlayer-"+i.data.id))}break}})),"undefined"!==typeof document.fullScreen?document.addEventListener("fullscreenchange",(function(){var e=document.fullscreen||!1;y(e)})):"undefined"!==typeof document.webkitIsFullScreen?document.addEventListener("webkitfullscreenchange",(function(){var e=document.webkitIsFullScreen||!1;y(e)})):"undefined"!==typeof document.mozFullScreen&&document.addEventListener("mozfullscreenchange",(function(){var e=document.mozFullScreen||!1;y(e)}))};c.prototype.play=function(t){var n="EZUIKitPlayer-"+this.opt.id,i=document.getElementById(n).contentWindow;"object"===l(t)&&t.url&&(this.opt.url=t.url),"object"===l(t)&&t.accessToken&&(this.opt.accessToken=t.accessToken),"string"===typeof t&&(this.opt.url=t),i.postMessage({action:"play",accessToken:this.opt.accessToken,url:this.opt.url},s+"/ezopen/h5/iframe");var o=this;this.opt.videoLoading=!0;var r=new Promise((function(t,n){e.addEventListener("message",(function(e){var n=o.opt.id;n==e.data.id&&"handleSuccess"===e.data.type&&(setTimeout((function(){o.opt.videoLoading=!1}),1e3),t(e.data))}))}));return r},c.prototype.stop=function(){var t="EZUIKitPlayer-"+this.opt.id,n=document.getElementById(t).contentWindow;n.postMessage("stop",s+"/ezopen/h5/iframe");var i=this,o=new Promise((function(t,n){e.addEventListener("message",(function(e){var n=i.opt.id;n==e.data.id&&"stop"===e.data.type&&t(e.data)}))}));return o},c.prototype.openSound=function(){var t="EZUIKitPlayer-"+this.opt.id,n=document.getElementById(t).contentWindow;n.postMessage("openSound",s+"/ezopen/h5/iframe");var i=this,o=new Promise((function(t,n){e.addEventListener("message",(function(e){var n=i.opt.id;n==e.data.id&&"openSound"===e.data.type&&t(e.data)}))}));return o},c.prototype.closeSound=function(){var t="EZUIKitPlayer-"+this.opt.id,n=document.getElementById(t).contentWindow;n.postMessage("closeSound",s+"/ezopen/h5/iframe");var i=this,o=new Promise((function(t,n){e.addEventListener("message",(function(e){var n=i.opt.id;n==e.data.id&&"closeSound"===e.data.type&&t(e.data)}))}));return o},c.prototype.startSave=function(t){var n="EZUIKitPlayer-"+this.opt.id,i=document.getElementById(n).contentWindow;i.postMessage({action:"startSave",fileName:t||"default"},s+"/ezopen/h5/iframe");var o=this,r=new Promise((function(t,n){e.addEventListener("message",(function(e){var n=o.opt.id;n==e.data.id&&"startSave"===e.data.type&&t(e.data)}))}));return r},c.prototype.stopSave=function(){var t="EZUIKitPlayer-"+this.opt.id,n=document.getElementById(t).contentWindow;n.postMessage("stopSave",s+"/ezopen/h5/iframe");var i=this,o=new Promise((function(t,n){e.addEventListener("message",(function(e){var n=i.opt.id;n==e.data.id&&"stopSave"===e.data.type&&t(e.data)}))}));return o},c.prototype.fullScreen=function(){if(1===this.opt.fullScreenStatus)return!1;var t="EZUIKitPlayer-"+this.opt.id,n=document.getElementById(t).contentWindow;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var i=document.documentElement.clientWidth,o=document.documentElement.clientHeight,r=document.body;r=document.getElementById(t);var a="";a+="width:"+o+"px;",a+="height:"+i+"px;",a+="-webkit-transform: rotate(90deg); transform: rotate(90deg);",a+="-webkit-transform-origin: "+i/2+"px "+i/2+"px;",a+="transform-origin: "+i/2+"px "+i/2+"px;",a+="position: fixed;top: 0;left: 0;z-index:10",r.style.cssText=a,setTimeout((function(){n.postMessage("autoResize",s+"/ezopen/h5/iframe")}),500)}else{var d=function(t){var n=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(n)n.call(t);else if("undefined"!==typeof e.ActiveXObject){var i=new ActiveXObject("WScript.Shell");null!==i&&i.SendKeys("{F11}")}};d(document.getElementById(t))}this.params.fullScreenCallBack&&this.params.fullScreenCallBack(this.opt.id),this.opt.fullScreenStatus=1},c.prototype.cancelFullScreen=function(){if(0===this.opt.fullScreenStatus)return!1;var e="EZUIKitPlayer-"+this.opt.id,t=document.getElementById(e).contentWindow;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var n=document.getElementById(e).width,i=document.getElementById(e).height,o=document.body;o=document.getElementById(e);var r="";r+="width:"+n+"px;",r+="height:"+i+"px;",r+="-webkit-transform: none; transform: none;",r+="-webkit-transform-origin: 0 0;",r+="transform-origin: 0 0;",o.style.cssText=r,setTimeout((function(){t.postMessage("autoResize",s+"/ezopen/h5/iframe")}),500);var a=e+"cancel-full-screen",d=document.getElementById(a);d&&document.body.removeChild(d)}else document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen();this.params.cancelFullScreenCallBack&&this.params.cancelFullScreenCallBack(this.opt.id),this.opt.fullScreenStatus=0},c.prototype.capturePicture=function(t,n){var i="EZUIKitPlayer-"+this.opt.id,o=document.getElementById(i).contentWindow;o.postMessage({action:"capturePicture",fileName:t||"default",isUndownload:n},s+"/ezopen/h5/iframe");var r=this,a=new Promise((function(t,n){e.addEventListener("message",(function(e){var n=r.opt.id;n==e.data.id&&"capturePicture"===e.data.type&&t(e.data)}))}));return a},c.prototype.enableZoom=function(){var e="EZUIKitPlayer-"+this.opt.id,t=document.getElementById(e).contentWindow;t.postMessage("enableZoom",s+"/ezopen/h5/iframe")},c.prototype.closeZoom=function(){var e="EZUIKitPlayer-"+this.opt.id,t=document.getElementById(e).contentWindow;t.postMessage("closeZoom",s+"/ezopen/h5/iframe")},c.prototype.getOSDTime=function(){var t="EZUIKitPlayer-"+this.opt.id,n=document.getElementById(t).contentWindow;n.postMessage("getOSDTime",s+"/ezopen/h5/iframe");var i=this,o=new Promise((function(t,n){e.addEventListener("message",(function(e){var n=i.opt.id;n==e.data.id&&"getOSDTime"===e.data.type&&t(e.data)}))}));return o},c.prototype.autoResize=function(){var e="EZUIKitPlayer-"+this.opt.id,t=document.getElementById(e).contentWindow;t.postMessage("autoResize",s+"/ezopen/h5/iframe")},c.prototype.reSize=function(e,t){var n="EZUIKitPlayer-"+this.opt.id,i=document.getElementById(n).contentWindow,o=document.getElementById(this.opt.id);o.style.width=e+"px",o.style.height=t+"px",document.getElementById(this.opt.id).style.width=e+"px",document.getElementById(this.opt.id).style.height=t+"px";var r=document.getElementById(n);r.setAttribute("width",e),r.setAttribute("height",t),r.style.width=e+"px",r.style.height=t+"px",setTimeout((function(){i.postMessage({action:"autoResize"},s+"/ezopen/h5/iframe")}),500)},c.prototype.startTalk=function(){console.log("执行开始对讲"),console.log(this.opt);var t=this;a.opt=this.opt,e.EZUIKit&&(e.EZUIKit.opt=this.opt);var n=function(n){if(200==n.code){var i=n.data;if(i){var o=i.rtcUrl;-1===o.indexOf("ws")&&(o=o.replace("https","wss").replace("rtcgw","rtcgw-ws")),t.opt.rtcUrl=o,t.opt.ttsUrl="tts://"+i.ttsUrl;var r="talk://"+t.opt.deviceSerial+":0:"+t.opt.channelNo+":cas.ys7.com:6500";t.opt.talkLink=t.opt.ttsUrl+"/"+r,t.opt.stream=i.stream,e.startTalk()}}};r(t.opt.apiDomain,"POST",{accessToken:t.opt.accessToken,deviceSerial:t.opt.deviceSerial,channelNo:t.opt.channelNo},"",n)},c.prototype.stopTalk=function(){console.log("执行结束对讲"),e.stopTalk()},c.prototype.edit=function(){var e="EZUIKitPlayer-"+this.opt.id,t=document.getElementById(e).contentWindow;t.postMessage("edit",s+"/ezopen/h5/iframe")},c.prototype.btnReRender=function(e){var t="EZUIKitPlayer-"+this.opt.id,n=document.getElementById(t).contentWindow;n.postMessage({action:"btnReRender",data:e},s+"/ezopen/h5/iframe")},c.prototype.changePlayUrl=function(e){e.deviceSerial&&(this.opt.deviceSerial=e.deviceSerial),e.channelNo&&(this.opt.channelNo=e.channelNo),e.accessToken&&(this.opt.accessToken=e.accessToken);var t="EZUIKitPlayer-"+this.opt.id,n=document.getElementById(t).contentWindow;n.postMessage({action:"changePlayUrl",data:e},s+"/ezopen/h5/iframe")},c.prototype.fetchThemeData=function(){var e="EZUIKitPlayer-"+this.opt.id,t=document.getElementById(e).contentWindow;t.postMessage({action:"fetchThemeData"},s+"/ezopen/h5/iframe")},c.prototype.setThemeData=function(e,t,n){var i="EZUIKitPlayer-"+this.opt.id,o=document.getElementById(i).contentWindow;o.postMessage({action:"setThemeData",data:{accessToken:e,header:t,footer:n}},s+"/ezopen/h5/iframe")},a.EZUIKitPlayer=c,e.EZUIKitV3=a;var u=a;return u}));var Fe=EZUIKitV3,Ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=void 0,o=void 0,r=void 0,a=[];return function(){var d=Ve(t),l=(new Date).getTime(),c=!i||l-i>d;i=l;for(var u=arguments.length,m=Array(u),p=0;p<u;p++)m[p]=arguments[p];if(c&&n.leading)return n.accumulate?Promise.resolve(e.call(this,[m])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(m)));if(o?clearTimeout(r):o=He(),a.push(m),r=setTimeout(s.bind(this),d),n.accumulate){var h=a.length-1;return o.promise.then((function(e){return e[h]}))}return o.promise};function s(){var t=o;clearTimeout(r),Promise.resolve(n.accumulate?e.call(this,a):e.apply(this,a[a.length-1])).then(t.resolve,t.reject),a=[],o=null}};function Ve(e){return"function"===typeof e?e():e}function He(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}(function(){var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function i(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof A&&A];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var o,r=i(this);function a(e,t){if(t)e:{var i=r;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}e=e[e.length-1],o=i[e],t=t(o),t!=o&&null!=t&&n(i,e,{configurable:!0,writable:!0,value:t})}}function s(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function d(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}if(a("Symbol",(function(e){function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new i(o+(e||"")+"_"+r++,e)}function i(e,t){this.A=e,n(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;i.prototype.toString=function(){return this.A};var o="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return t})),a("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<i.length;o++){var a=r[i[o]];"function"===typeof a&&"function"!=typeof a.prototype[e]&&n(a.prototype,e,{configurable:!0,writable:!0,value:function(){return s(t(this))}})}return e})),"function"==typeof Object.setPrototypeOf)o=Object.setPrototypeOf;else{var l;e:{var c={a:!0},u={};try{u.__proto__=c,l=u.a;break e}catch(O){}l=!1}o=l?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var m=o;function p(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function h(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function f(e,t){return e.h=3,{value:t}}function g(e){this.g=new p,this.G=e}function v(e,t){h(e.g);var n=e.g.j;return n?y(e,"return"in n?n["return"]:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),S(e))}function y(e,t,n,i){try{var o=t.call(e.g.j,n);if(!(o instanceof Object))throw new TypeError("Iterator result "+o+" is not an object");if(!o.done)return e.g.m=!1,o;var r=o.value}catch(a){return e.g.j=null,e.g.s(a),S(e)}return e.g.j=null,i.call(e.g,r),S(e)}function S(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(n){e.g.v=void 0,e.g.s(n)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function b(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return v(e,t)},this[Symbol.iterator]=function(){return this}}function T(e,t){return t=new b(new g(t)),m&&e.prototype&&m(t,e.prototype),t}function w(e,t){e instanceof String&&(e+="");var n=0,i=!1,o={next:function(){if(!i&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return i=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o}if(p.prototype.o=function(e){this.v=e},p.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},p.prototype.return=function(e){this.l={return:e},this.h=this.u},g.prototype.o=function(e){return h(this.g),this.g.j?y(this,this.g.j.next,e,this.g.o):(this.g.o(e),S(this))},g.prototype.s=function(e){return h(this.g),this.g.j?y(this,this.g.j["throw"],e,this.g.o):(this.g.s(e),S(this))},a("Array.prototype.entries",(function(e){return e||function(){return w(this,(function(e,t){return[e,t]}))}})),"undefined"!==typeof Blob&&("undefined"===typeof FormData||!FormData.prototype.keys)){var C=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},_=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},E=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"===typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},k=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},P="object"===typeof globalThis?globalThis:"object"===typeof window?window:"object"===typeof self?self:this,I=P.FormData,x=P.XMLHttpRequest&&P.XMLHttpRequest.prototype.send,R=P.Request&&P.fetch,D=P.navigator&&P.navigator.sendBeacon,j=P.Element&&P.Element.prototype,L=P.Symbol&&Symbol.toStringTag;L&&(Blob.prototype[L]||(Blob.prototype[L]="Blob"),"File"in P&&!File.prototype[L]&&(File.prototype[L]="File"));try{new File([],"")}catch(O){P.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),L&&Object.defineProperty(e,L,{value:"File"}),e}}var M=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},N=function(e){this.i=[];var t=this;e&&C(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];C(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?C(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?_(e.value):e.value,t.append(e.name,n))}))};if(e=N.prototype,e.append=function(e,t,n){k(arguments,2),this.i.push(E(e,t,n))},e.delete=function(e){k(arguments,1);var t=[];e=String(e),C(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},e.entries=function e(){var t,n=this;return T(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=f(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){k(arguments,1);for(var n=d(this),i=n.next();!i.done;i=n.next()){var o=d(i.value);i=o.next().value,o=o.next().value,e.call(t,o,i,this)}},e.get=function(e){k(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},e.getAll=function(e){k(arguments,1);var t=[];return e=String(e),C(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},e.has=function(e){k(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,n,i,o,r,a=this;return T(e,(function(e){if(1==e.h&&(t=d(a),n=t.next()),3!=e.h)return n.done?void(e.h=0):(i=n.value,o=d(i),r=o.next().value,f(e,r));n=t.next(),e.h=2}))},e.set=function(e,t,n){k(arguments,2),e=String(e);var i=[],o=E(e,t,n),r=!0;C(this.i,(function(t){t[0]===e?r&&(r=!i.push(o)):i.push(t)})),r&&i.push(o),this.i=i},e.values=function e(){var t,n,i,o,r,a=this;return T(e,(function(e){if(1==e.h&&(t=d(a),n=t.next()),3!=e.h)return n.done?void(e.h=0):(i=n.value,o=d(i),o.next(),r=o.next().value,f(e,r));n=t.next(),e.h=2}))},N.prototype._asNative=function(){for(var e=new I,t=d(this),n=t.next();!n.done;n=t.next()){var i=d(n.value);n=i.next().value,i=i.next().value,e.append(n,i)}return e},N.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,i){return"string"==typeof e?t.push(n+M(_(i))+'"\r\n\r\n'+_(e)+"\r\n"):t.push(n+M(_(i))+'"; filename="'+M(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},N.prototype[Symbol.iterator]=function(){return this.entries()},N.prototype.toString=function(){return"[object FormData]"},j&&!j.matches&&(j.matches=j.matchesSelector||j.mozMatchesSelector||j.msMatchesSelector||j.oMatchesSelector||j.webkitMatchesSelector||function(e){e=(this.document||this.ownerDocument).querySelectorAll(e);for(var t=e.length;0<=--t&&e.item(t)!==this;);return-1<t}),L&&(N.prototype[L]="FormData"),x){var B=P.XMLHttpRequest.prototype.setRequestHeader;P.XMLHttpRequest.prototype.setRequestHeader=function(e,t){B.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},P.XMLHttpRequest.prototype.send=function(e){e instanceof N?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),x.call(this,e)):x.call(this,e)}}R&&(P.fetch=function(e,t){return t&&t.body&&t.body instanceof N&&(t.body=t.body._blob()),R.call(this,e,t)}),D&&(P.navigator.sendBeacon=function(e,t){return t instanceof N&&(t=t._asNative()),D.call(this,e,t)}),P.FormData=N}})();var Ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function We(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Je=function(){var e=void 0;return function(t){return t&&(e=t),e}}();(function(){function e(){if(We(this,e),Je())return Je();if(void 0!==e.unique)return e.unique;e.unique=this,this.oAudioContext=null,this.currentVolume=80,this.bSetVolume=!1,this.gainNode=null,this.iWndNum=-1,this.mVolumes=new Map;var t=window.AudioContext||window.webkitAudioContext;this.oAudioContext=new t,this.writeString=function(e,t,n){for(var i=0;i<n.length;i++)e.setUint8(t+i,n.charCodeAt(i))},this.setBufferToDataview=function(e,t,n){for(var i=0;i<n.length;i++,t++)e.setUint8(t,n[i])},Je(this)}Ge(e,[{key:"Play",value:function(e,t,n){var i=new ArrayBuffer(44+t),o=new DataView(i),r=n.samplesPerSec,a=n.channels,s=n.bitsPerSample;this.writeString(o,0,"RIFF"),o.setUint32(4,32+2*t,!0),this.writeString(o,8,"WAVE"),this.writeString(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,a,!0),o.setUint32(24,r,!0),o.setUint32(28,2*r,!0),o.setUint16(32,a*s/8,!0),o.setUint16(34,s,!0),this.writeString(o,36,"data"),o.setUint32(40,t,!0),this.setBufferToDataview(o,44,e);var d=this;return this.oAudioContext.decodeAudioData(o.buffer,(function(e){var t=d.oAudioContext.createBufferSource();if(null==t)return-1;t.buffer=e,t.start(0),(null==d.gainNode||d.bSetVolume)&&(d.gainNode=d.oAudioContext.createGain(),d.bSetVolume=!1),d.gainNode.gain.value=d.currentVolume/100,d.gainNode.connect(d.oAudioContext.destination),t.connect(d.gainNode)}),(function(e){return console.log("decode error"),-1})),0}},{key:"Stop",value:function(){return null!=this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),!0}},{key:"SetVolume",value:function(e){return this.bSetVolume=!0,this.currentVolume=e,this.mVolumes.set(this.iWndNum,this.currentVolume),!0}},{key:"SetWndNum",value:function(e){this.iWndNum=e;var t=this.mVolumes.get(e);return void 0==t&&(t=80),this.currentVolume=t,!0}},{key:"GetVolume",value:function(){var e=this.mVolumes.get(this.iWndNum);return void 0==e&&(e=80),e}}]),window.AudioRenderer=e})();var Ke=["attribute vec4 vertexPos;","attribute vec2 texturePos;","varying vec2 textureCoord;","void main()","{","gl_Position = vertexPos;","textureCoord = texturePos;","}"].join("\n"),Ze=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","const mat4 YUV2RGB = mat4","(","1.1643828125, 0, 1.59602734375, -.87078515625,","1.1643828125, -.39176171875, -.81296875, .52959375,","1.1643828125, 2.017234375, 0, -1.081390625,","0, 0, 0, 1",");","void main(void) {","highp float y = texture2D(ySampler,  textureCoord).r;","highp float u = texture2D(uSampler,  textureCoord).r;","highp float v = texture2D(vSampler,  textureCoord).r;","gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join("\n");(function(e,t){window.SuperRender=t()})(0,(function(){function e(e){this.canvasElement=document.getElementById(e),this.initContextGL(),this.contextGL&&(this.YUVProgram=this.initProgram(Ke,Ze),this.initBuffers(),this.initTextures())}return e.prototype.initContextGL=function(){var e=this.canvasElement,t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(n){t=null}t&&"function"===typeof t.getParameter||(t=null),this.contextGL=t,console.log("WebGL1.0")},e.prototype.initProgram=function(e,t){var n=this.contextGL,i=n.createShader(n.VERTEX_SHADER);n.shaderSource(i,e),n.compileShader(i),n.getShaderParameter(i,n.COMPILE_STATUS)||console.log("Vertex shader failed to compile: "+n.getShaderInfoLog(i));var o=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(o,t),n.compileShader(o),n.getShaderParameter(o,n.COMPILE_STATUS)||console.log("Fragment shader failed to compile: "+n.getShaderInfoLog(o));var r=n.createProgram();return n.attachShader(r,i),n.attachShader(r,o),n.linkProgram(r),n.getProgramParameter(r,n.LINK_STATUS)||console.log("Program failed to compile: "+n.getProgramInfoLog(r)),n.deleteShader(i),n.deleteShader(o),r},e.prototype.initBuffers=function(){var e=this.contextGL,t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null);var n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.vertexPosBuffer=t,this.texturePosBuffer=n},e.prototype.initTexture=function(){var e=this.contextGL,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t},e.prototype.initTextures=function(){var e=this.contextGL,t=this.YUVProgram;e.useProgram(t);var n=this.initTexture(),i=e.getUniformLocation(t,"ySampler");e.uniform1i(i,0),this.yTextureRef=n;var o=this.initTexture(),r=e.getUniformLocation(t,"uSampler");e.uniform1i(r,1),this.uTextureRef=o;var a=this.initTexture(),s=e.getUniformLocation(t,"vSampler");e.uniform1i(s,2),this.vTextureRef=a,e.useProgram(null)},e.prototype.SR_DisplayFrameData=function(e,t,n,i,o){if(!(e<=0||t<=0)){var r=this.contextGL;if(null==n)return r.clearColor(0,0,0,0),void r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);var a=this.canvasElement;this.nWindowWidth=a.width,this.nWindowHeight=a.height;var s=this.nWindowWidth,d=this.nWindowHeight;r.clearColor(.8,.8,1,1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.viewport(0,0,s,d),this.updateFrameData(e,t,n,i,o);var l=this.YUVProgram;r.useProgram(l);var c=this.vertexPosBuffer;r.bindBuffer(r.ARRAY_BUFFER,c);var u=r.getAttribLocation(l,"vertexPos");r.enableVertexAttribArray(u),r.vertexAttribPointer(u,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,null);var m=this.texturePosBuffer;r.bindBuffer(r.ARRAY_BUFFER,m);var p=r.getAttribLocation(l,"texturePos");r.enableVertexAttribArray(p),r.vertexAttribPointer(p,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,null),r.drawArrays(r.TRIANGLE_STRIP,0,4),r.disableVertexAttribArray(u),r.disableVertexAttribArray(p),r.useProgram(null)}},e.prototype.updateFrameData=function(e,t,n,i,o){var r=this.contextGL,a=this.yTextureRef,s=this.uTextureRef,d=this.vTextureRef,l=n;if(e==i&&t==o){var c=e*t,u=l.subarray(0,c);r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,e,t,0,r.LUMINANCE,r.UNSIGNED_BYTE,u);var m=e/2*t/2,p=l.subarray(e*t,e*t+m);r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,d),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,e/2,t/2,0,r.LUMINANCE,r.UNSIGNED_BYTE,p);var h=m,f=l.subarray(e*t+e*t/4,e*t+e*t/4+h);r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,s),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,e/2,t/2,0,r.LUMINANCE,r.UNSIGNED_BYTE,f)}else{c=i*o,u=new Uint8Array(c);for(var g=0;g<o;g++)for(var v=l.subarray(g*e,g*e+i),y=0;y<i;y++)u[g*i+y]=v[y];r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,i,o,0,r.LUMINANCE,r.UNSIGNED_BYTE,u),u=null,v=null;for(m=i/2*o/2,p=new Uint8Array(m),g=0;g<o/2;g++){var S=l.subarray(e*t+g*e/2,e*t+g*e/2+i/2);for(y=0;y<i/2;y++)p[g*i/2+y]=S[y]}r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,d),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,i/2,o/2,0,r.LUMINANCE,r.UNSIGNED_BYTE,p),p=null,S=null;for(h=m,f=new Uint8Array(h),g=0;g<o/2;g++){var b=l.subarray(e*t*5/4+g*e/2,e*t*5/4+g*e/2+i/2);for(y=0;y<i/2;y++)f[g*i/2+y]=b[y]}r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,s),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,i/2,o/2,0,r.LUMINANCE,r.UNSIGNED_BYTE,f),f=null,b=null}},e.prototype.SR_SetDisplayRect=function(e){var t=this.contextGL,n=this.nWindowWidth,i=this.nWindowHeight,o=null;if(e&&n>0&&i>0){var r=e.left/n,a=e.top/i,s=e.right/n,d=e.bottom/i;o=new Float32Array([s,a,r,a,s,d,r,d])}else o=new Float32Array([1,0,0,0,1,1,0,1]);var l=this.texturePosBuffer;t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferSubData(t.ARRAY_BUFFER,0,o),t.bindBuffer(t.ARRAY_BUFFER,null)},e.prototype.SR_Destroy=function(){var e=this.contextGL,t=this.YUVProgram;e.deleteProgram(t);var n=this.vertexPosBuffer,i=this.texturePosBuffer;e.deleteBuffer(n),e.deleteBuffer(i);var o=this.yTextureRef,r=this.uTextureRef,a=this.vTextureRef;e.deleteTexture(o),e.deleteTexture(r),e.deleteTexture(a)},e}));var qe="https://open.ys7.com",Ye="".concat(qe,"/console/ezuikit_static/v66/v2"),Xe="".concat(qe,"/console/ezuikit_static/v66/v1"),Qe=function(e,t){var n=["theme","standard"],i=["pcLive","pcRec","mobileLive","mobileRec","noData","security","voice","simple"];if("undefined"===typeof e)return t.themeData?{templateType:"themeData",templateId:"themeData"}:{templateType:"local",templateId:""};if("string"===typeof e){if(32===e.length)return{templateType:"remote",templateId:e};if(-1!==n.indexOf(e))return"simple"===e&&"undefined"===typeof t.header&&"undefined"===typeof t.footer?{templateType:"local",templateId:""}:{templateType:"iframe",templateId:e};if(-1!==i.indexOf(e))return{templateType:"local",templateId:e}}},$e=function(){var e=window.navigator.userAgent.toLowerCase(),t={sa:/version.*safari/.test(e),ch:/chrome/.test(e),ff:/gecko/.test(e)&&!/webkit/.test(e)},n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(n)return!1;if(t.ch){var i=function(){for(var e=window.navigator.userAgent.split(" "),t="",n=0;n<e.length;n++)/chrome/i.test(e[n])&&(t=e[n]);return!!t&&Number(t.split("/")[1].split(".")[0])};return i()>91&&!!window.SharedArrayBuffer}return!1},et=function(){function e(t){var n=this;c(this,e),this.isStoping=!1;var i=t.autoplay,o=void 0===i||i;if((t.template||t.themeData)&&(o=!1),this.params=t,this.autoplay=o,window.EZUIKit[t.id]={state:{EZUIKitPlayer:{init:window.EZUIKit[t.id]&&window.EZUIKit[t.id].state&&window.EZUIKit[t.id].state.EZUIKitPlayer.init||!1,themeInit:window.EZUIKit[t.id]&&window.EZUIKit[t.id].state&&window.EZUIKit[t.id].state.EZUIKitPlayer.themeInit||!1,talkInit:window.EZUIKit[t.id]&&window.EZUIKit[t.id].state&&window.EZUIKit[t.id].state.EZUIKitPlayer.talkInit||!1}}},"iframe"===Qe(this.params.template,t).templateType)return new Fe.EZUIKitPlayer(t);this.Monitor=new ze({env:"undefined"!==typeof t.disableMonitor&&t.disableMonitor?"test12":"online"},this),this.id=t.id,this.width=t.width,this.height=t.height,this.fullScreenWidth=0,this.fullScreenHeight=0,this.url=t.url,this.accessToken=t.accessToken,this.deviceSerial=k(t.url).deviceSerial,this.themeId=Qe(t.template,t).templateId,this.id=t.id,this.audio=!0,this.poster=t.poster,this.speed=1,this.disabledTimeLine=!1,this.disabledPTZ=!1,this.enableSharedArrayBufferGuide=!1,this.capacity={},this.playTimer=null,this.env={domain:"https://open.ys7.com"};var r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);this.isMobile=r,this.support3DZoom=!1,this.use3DZoom=!1,this.is3DZooming=!1,document.getElementById("".concat(this.id,"-wrap"))&&(document.getElementById("".concat(this.id,"-wrap")).innerHTML="",document.getElementById("".concat(this.id,"-wrap")).id=this.id),this.staticPath=$e()?Ye:Xe,"string"===typeof t.staticPath&&(t.staticPath.startsWith("http")?this.staticPath=t.staticPath:this.staticPath=window.location.protocol+"//"+window.location.host+t.staticPath,$e()?this.staticPath+="/v2":this.staticPath+="/v1"),"undefined"!==typeof t.audio&&(this.audio=t.audio),"undefined"!==typeof t.env&&(this.env=Object.assign(this.env,t.env)),"undefined"!==typeof t.isMobile&&(this.isMobile=t.isMobile),"undefined"!==typeof t.disabledTimeLine&&(this.disabledTimeLine=t.disabledTimeLine),"undefined"!==typeof t.disabledPTZ&&(this.disabledPTZ=t.disabledPTZ),"undefined"!==typeof t.enableSharedArrayBufferGuide&&(this.enableSharedArrayBufferGuide=t.enableSharedArrayBufferGuide);var a="".concat(this.staticPath,"/js/jsPluginV1-1.0.0.min.js"),s=function(){if(window.addPluginUrlIng=!0,$e())console.log("启用多线程解析视频"),a="".concat(n.staticPath,"/js/jsPluginV2-2.0.1.min.js");else{var e=function(){for(var e=navigator.userAgent.split(" "),t="",n=0;n<e.length;n++)/chrome/i.test(e[n])&&(t=e[n]);return!!t&&Number(t.split("/")[1].split(".")[0])};if(!r&&91<e&&n.enableSharedArrayBufferGuide){console.log("提示用户开启谷歌实验室特性");var i="".concat(n.id,"-wrap"),o=document.createElement("div"),s=document.createElement("span");s.innerHTML="您当前浏览器可以开启谷歌实验室多线程特性，获取更好播放体验，避免浏览器卡顿及崩溃,详见",o.appendChild(s);var d=document.createElement("a");d.href="https://open.ys7.com/help/384",d.setAttribute("target","_blank"),o.appendChild(d),d.innerHTML="开启说明",o.id="".concat(n.id,"-guide"),o.style="font-size:12px;color:red;",setTimeout((function(){document.getElementById(i)&&document.getElementById(i).insertBefore(o,document.getElementById(n.id))}),5e3)}}n.pluginStatus=new M(n,n.id),f(a,(function(){if(n.autoplay){n.initTime=(new Date).getTime(),n.Monitor.dclog({url:n.url,action:0,text:"startInit",isVersion2Available:$e()?1:0}),n.Monitor.localInfoLog({Serial:k(n.url).deviceSerial,Channel:k(n.url).channelNo,Ver:$e()?"v7.0.0":"v6.0.0",ExterVer:$e()?"v7.0.0":"v6.0.0"}),console.log("初始化-");var e=n.initEZUIKitPlayer(t),i=n._getRealUrlPromise(t.accessToken,t.url);Promise.all([e,i]).then((function(e){e[1]?(n.playStartTime=(new Date).getTime(),n._pluginPlay(e[1],(function(){console.log("自动播放成功"),n.Monitor.dclog({url:n.url,action:202,d:(new Date).getTime()-n.initTime,text:"autoPlaySuccess"})}),(function(){console.log("自动播放失败"),n.Monitor.dclog({url:n.url,action:402,d:(new Date).getTime()-n.initTime,text:"autoPlayError"})}))):console.log("promise of one",e),window.EZUIKit[t.id].state.EZUIKitPlayer.init=!0,document.getElementById("".concat(t.id,"canvas_draw0"))&&(document.getElementById("".concat(t.id,"canvas_draw0")).style.border="none")}))["catch"]((function(e){console.log("err",e),n.Theme&&n.Theme.setDisabled(!0),n.pluginStatus.loadingClear(),n.pluginStatus.loadingSetText({text:e&&e.msg||"获取播放地址失败",color:"red"})}))}else{n.initTime=(new Date).getTime(),n.Monitor.dclog({url:n.url,action:0,text:"startInit",isVersion2Available:$e()?1:0}),n.Monitor.localInfoLog({Serial:k(n.url).deviceSerial,Channel:k(n.url).channelNo,Ver:$e()?"v7.0.0":"v6.0.0"});e=n.initEZUIKitPlayer(t);e.then((function(e){console.log("初始化成功",e),window.EZUIKit[t.id].state.EZUIKitPlayer.init=!0,document.getElementById("".concat(t.id,"canvas_draw0"))&&(document.getElementById("".concat(t.id,"canvas_draw0")).style.border="none"),n.initSuccessTime=(new Date).getTime(),n.Monitor.dclog({url:n.url,action:201,d:n.initSuccessTime-n.initTime,text:"initSuccess",isVersion2Available:$e()?1:0})}))}}),(function(){return $e()?!!window.JSPluginV2||!!window.addPluginUrled:!!window.JSPluginV1||!!window.addPluginUrled})),t.plugin&&-1!==t.plugin.indexOf("talk")&&(n.Talk=new me(n),window.EZUIKit[t.id].state.EZUIKitPlayer.talkInit=!0),n.getDeviceCapacity()};if(window.addPluginUrlIng)var d=setInterval((function(){(window.JSPluginV1||window.JSPluginV2)&&(clearInterval(d),s())}),50);else s();this.play=Ue((function(e){return n._play(e)}),500,!0),this.resume=Ue((function(e){return n._resume(e)}),500,!0),this.changePlayUrl=Ue((function(e,t){return n._changePlayUrl(e,t)}),500),window.addEventListener("beforeunload",(function(){console.log("退出页面，停止视频流"),n.stop()}))}return m(e,[{key:"initEZUIKitPlayer",value:function(e){var t=this,n=e.id,i=e.width,o=void 0===i?600:i,r=e.height,a=void 0===r?400:r;if(!e.width||!e.height){var s=document.getElementById(n).getBoundingClientRect();!e.width&&s.width>0&&(o=s.width),!e.height&&s.height>0&&(a=s.height)}if(!document.getElementById("".concat(n,"-wrap"))){var d=document.createElement("div");d.id="".concat(n,"-wrap"),d.style="display:inline-block;width:".concat(o,"px;position:relative;vertical-align: bottom;"),document.getElementById(n).parentNode.insertBefore(d,document.getElementById(n)),document.getElementById(n).parentNode.removeChild(document.getElementById(n)),d.innerHTML="<div id=".concat(n,"></div>"),document.getElementById(n).style="display:inline-block;width:".concat(o,"px;height:").concat(a,"px;"),document.getElementById(n).style.verticalAlign="top"}this.themeId&&(this.Theme=new Oe(this,e.id),window.EZUIKit[e.id].state.EZUIKitPlayer.themeInit=!0,this.Monitor.dclog({url:this.url,action:2,text:this.themeId}),"function"===typeof this.params.handleThemeChange&&(this.handleThemeChange=this.params.handleThemeChange));var l=new N(this,n);this.Message=l;var c=function(i,r){var s;if($e()){s=new window.JSPluginV2({szId:n,iType:2,iWidth:o,iHeight:a,iMaxSplit:1,iCurrentSplit:1,szBasePath:"",staticPath:t.staticPath,oStyle:{border:"none",background:"#000000"}}),t.pluginStatus.loadingStart(n),t.pluginStatus.loadingSetText({text:"初始化播放器完成"}),s.EventCallback={pluginErrorHandler:function(e,n,i){if(console.log(e,n,i),1003===n)console.log("断流"),t.Theme&&t.Theme.setDecoderState({play:!1}),t.pluginStatus.setPlayStatus({play:!1}),s.bPlay||(t.pluginStatus.loadingClear(),t.pluginStatus.loadingSetText({text:"连接断开，请重试",color:"red"})),"function"===typeof t.params.handleError&&t.params.handleError({msg:"连接断开，请重试",retcode:1003,id:t.params.id,type:"handleError"});else if(1!=i.errorCode){var o=t.errorHander.matchErrorInfo(i.errorCode),r="连接断开，请重试";o&&o.msg?r=o.msg:o&&o.description&&(r=o.description),t.Theme&&t.Theme.setDecoderState({play:!1}),t.pluginStatus.setPlayStatus({play:!1}),t.pluginStatus.loadingClear(),t.pluginStatus.loadingSetText({text:r,color:"red"})}else t.pluginStatus.loadingClear(),t.Theme&&t.Theme.setDisabled(!1)},openStreamCallback:function(){console.log("开启取流"),t.openStreamTime=(new Date).getTime(),t.Monitor.dclog({url:t.url,action:224,d:t.openStreamTime-t.gotWsUrlTime,text:"openStream",isVersion2Available:$e()?1:0})},getStreamHeaderCallback:function(){console.log("完成取流返回流头"),t.getStreamHeaderTime=(new Date).getTime(),t.Monitor.dclog({url:t.url,action:225,d:t.getStreamHeaderTime-t.openStreamTime,text:"getStreamHeader",isVersion2Available:$e()?1:0})},getVideoStreamCallback:function(){console.log("返回视频流(首次)"),t.getVideoStreamTime=(new Date).getTime(),t.Monitor.dclog({url:t.url,action:226,d:t.getVideoStreamTime-t.getStreamHeaderTime,text:"getVideoStream",isVersion2Available:$e()?1:0})},appearFirstFrameCallback:function(){console.log("出现首帧画面（播放成功）"),t.appearFirstFrameTime=(new Date).getTime(),t.Monitor.dclog({url:t.url,action:227,d:t.appearFirstFrameTime-t.getStreamHeaderTime,text:"appearFirstFrame",isVersion2Available:$e()?1:0})},averageStreamSuccessCallback:function(){console.log("平均成功取流的出流耗时"),t.averageStreamSuccessTime=t.initSuccessTime-t.initTime+(t.gotWsUrlTime-t.startGetWsUrlTime)+(t.appearFirstFrameTime-t.openStreamTime),t.Monitor.dclog({url:t.url,action:228,d:t.averageStreamSuccessTime,text:"averageStreamSuccess",isVersion2Available:$e()?1:0})}},t.env={domain:"https://open.ys7.com"},"undefined"!==typeof e.env&&(t.env=Object.assign(t.env,e.env)),"undefined"!==typeof e.handleTalkSuccess&&(t.handleTalkSuccess=e.handleTalkSuccess),"undefined"!==typeof e.handleTalkError&&(t.handleTalkError=e.handleTalkError),t.errorHander=new U,t.jSPlugin=s;var d=setInterval((function(){window.JSPlayerModuleLoaded&&(clearInterval(d),"function"===typeof t.params.handleInitSuccess&&t.params.handleInitSuccess({retcode:0,id:t.params.id,type:"handleInitSuccess"}),i({meta:{retcode:200,msg:"初始化成功"}}),-1!=e.url.indexOf("rec")&&e.template&&e.template.length<32&&"simple"!=e.template&&t.Theme&&t.Theme.changeTheme(t.isMobile?"mobileRec":"pcRec"))}),50)}else s=new window.JSPluginV1({szId:n,iType:2,iWidth:o,iHeight:a,iMaxSplit:1,iCurrentSplit:1,szBasePath:"",staticPath:t.staticPath,oStyle:{border:"none",background:"#000000"}}),t.pluginStatus.loadingStart(n),t.pluginStatus.loadingSetText({text:"初始化播放器完成"}),s.EventCallback={openStreamCallback:function(){console.log("开启取流---v1"),t.openStreamTime=(new Date).getTime(),t.Monitor.dclog({url:t.url,action:224,d:t.openStreamTime-t.gotWsUrlTime,text:"openStream",isVersion2Available:$e()?1:0})},getStreamHeaderCallback:function(){console.log("完成取流返回流头"),t.getStreamHeaderTime=(new Date).getTime(),t.Monitor.dclog({url:t.url,action:225,d:t.getStreamHeaderTime-t.openStreamTime,text:"getStreamHeader",isVersion2Available:$e()?1:0})},getVideoStreamCallback:function(){console.log("返回视频流(首次)"),t.getVideoStreamTime=(new Date).getTime(),t.Monitor.dclog({url:t.url,action:226,d:t.getVideoStreamTime-t.getStreamHeaderTime,text:"getVideoStream",isVersion2Available:$e()?1:0})},appearFirstFrameCallback:function(){console.log("出现首帧画面（播放成功）"),t.appearFirstFrameTime=(new Date).getTime(),t.Monitor.dclog({url:t.url,action:227,d:t.appearFirstFrameTime-t.getStreamHeaderTime,text:"appearFirstFrame",isVersion2Available:$e()?1:0})},averageStreamSuccessCallback:function(){console.log("平均成功取流的出流耗时"),t.averageStreamSuccessTime=t.initSuccessTime-t.initTime+(t.gotWsUrlTime-t.startGetWsUrlTime)+(t.appearFirstFrameTime-t.openStreamTime),t.Monitor.dclog({url:t.url,action:228,d:t.averageStreamSuccessTime,text:"averageStreamSuccess",isVersion2Available:$e()?1:0})},loadEventHandler:function(){},zoomEventResponse:function(){},windowEventSelect:function(e){},pluginErrorHandler:function(e,n,i){if(console.log(e,n,i),1003===n)console.log("断流"),t.Theme&&t.Theme.setDecoderState({play:!1}),t.pluginStatus.setPlayStatus({play:!1}),s.bPlay||(t.pluginStatus.loadingClear(),t.pluginStatus.loadingSetText({text:"连接断开，请重试",color:"red"})),"function"===typeof t.params.handleError&&t.params.handleError({msg:"连接断开，请重试",retcode:1003,id:t.params.id,type:"handleError"});else if(1!=i.errorCode){var o=t.errorHander.matchErrorInfo(i.errorCode),r="连接断开，请重试";o&&o.msg?r=o.msg:o&&o.description&&(r=o.description),t.Theme&&t.Theme.setDecoderState({play:!1}),t.pluginStatus.setPlayStatus({play:!1}),t.pluginStatus.loadingClear(),t.pluginStatus.loadingSetText({text:r,color:"red"})}else t.pluginStatus.loadingClear(),t.Theme&&t.Theme.setDisabled(!1)},windowEventOver:function(e){},windowEventOut:function(e){},windowEventUp:function(e){},windowFullCcreenChange:function(e){},firstFrameDisplay:function(e,t,n){console.log(t,n),s.JS_SetCanFullScreen(!1)},performanceLack:function(){},mouseEvent:function(e,t,n){}},t.env={domain:"https://open.ys7.com"},"undefined"!==typeof e.env&&(t.env=Object.assign(t.env,e.env)),"undefined"!==typeof e.handleTalkSuccess&&(t.handleTalkSuccess=e.handleTalkSuccess),"undefined"!==typeof e.handleTalkError&&(t.handleTalkError=e.handleTalkError),t.errorHander=new U,t.jSPlugin=s,"function"===typeof t.params.handleInitSuccess&&t.params.handleInitSuccess({retcode:0,id:t.params.id,type:"handleInitSuccess"}),i({meta:{retcode:200,msg:"初始化成功"}}),-1!=e.url.indexOf("rec")&&e.template&&e.template.length<32&&"simple"!=e.template&&t.Theme&&t.Theme.changeTheme(t.isMobile?"mobileRec":"pcRec")},u=new Promise(c);return u}},{key:"_getRealUrlPromise",value:function(e,t){var n=this;console.log("获取播放地址 url => ".concat(t," ").concat(this.accessToken)),console.log("开始获取wsurl"),this.startGetWsUrlTime=(new Date).getTime(),this.Monitor.dclog({url:this.url,action:222,text:"startGetWsUrl",isVersion2Available:$e()?1:0});var i=this.env.domain;this.env&&(i=this.env.domain);var o=function(o,s){var d="",l=i+"/api/lapp/live/url/ezopen",c=new FormData;c.append("ezopen",t),c.append("isFlv","false"),c.append("userAgent",window.navigator.userAgent),c.append("isHttp","false"),c.append("accessToken",e),fetch(l,{method:"POST",body:c}).then((function(e){return e.json()})).then((function(e){if(200==e.code||0==e.retcode){var l="",c="";e.ext&&e.ext.token?(d+=e.data,c=e.ext.token,l=e.data):e.data&&e.data.token&&(d+=e.data.url,c=e.data.token,l=e.data.url);var u=-1!==t.indexOf("live")?"live":"playback";d="live"===u?d+"&ssn="+c+"&auth=1&biz=4&cln=100":d+"&ssn="+c+"&auth=1&cln=100",console.log(d);var m=y("checkCode",d);if(m&&("undefined"!==typeof n.jSPlugin.decoderVersion&&"2.0"===n.jSPlugin.decoderVersion?n.validateCode=m:(console.log("设置密钥",m),n.jSPlugin.JS_SetSecretKey(0,m))),-1!==d.indexOf("playback")){var p=y("begin",l)||y("begin",t),h=y("end",l)||y("end",t);if(p)d=d.replace("&begin="+y("begin",l),"&begin="+r(p,"000000")),y("begin",d)||(d+="&begin="+r(p,"000000"));else{var f=new Date;d=d+"&begin="+f.Format("yyyyMMdd")+"T000000Z"}if(h?(d=d.replace("&end="+y("end",l),"&end="+r(h,"235959")),y("end",d)||(d+="&end="+r(h,"235959"))):d=d+"&end="+r(y("begin",d).substr(0,8),"235959"),y("stream",l)||(d=d.replace("stream","&stream")),-1!==t.indexOf(".cloud")){var g=function(e){if(200==e.code){var t=[];if(e.data&&e.data.files&&e.data.files.length>0){var n=e.data.files,i=(new Date).getTime(),r=e.data.isAll;if(r){t=c(n);var a=JSON.stringify(t).replace("\\","");d+="&recSlice="+a.replace("\\","")+"&r="+Math.random(),o(d)}else{var l=function e(){function r(r){if(r.data&&r.data.files&&r.data.files.length>0)if(0==r.data.isAll)r.data.files&&(n=n.concat(r.data.files)),i=r.data.nextFileTime>0?r.data.nextFileTime:(new Date).getTime(),e();else{t=c(n);var a=JSON.stringify(t).replace("\\","");d+="&recSlice="+a.replace("\\","")+"&r="+Math.random(),o(d)}else{t=c(n);a=JSON.stringify(t).replace("\\","");d+="&recSlice="+a.replace("\\","")+"&r="+Math.random(),o(d)}}C.startTime=i,I(w,"POST",C,"",r)};l()}}else s({retcode:-1,msg:"未找到录像片段"})}else s({retcode:-1,msg:"未找到录像片段"});function c(e){var t=[];return e.forEach((function(e,n){0==t.length||e.downloadPath!==t[t.length-1].downloadPath?t.push({downloadPath:e.downloadPath,ownerId:e.ownerId,iStorageVersion:e.iStorageVersion,videoType:e.videoType,iPlaySpeed:0,startTime:e.startTime,endTime:e.endTime}):t[t.length-1].endTime=e.endTime})),t}},v=a(y("begin",d)),S=a(y("end",d)),b=y("serial",d),T=y("chn",d),w=i+"/api/lapp/video/by/time",C={accessToken:n.accessToken,recType:1,deviceSerial:b,channelNo:T,startTime:v,endTime:S,version:"2.0"};I(w,"POST",C,"",g)}else if(-1!==t.indexOf("alarmId")){var _=function(e){if(200==e.code){var t=[];if(e.data){t=i([e.data]);var n=JSON.stringify(t).replace("\\","");d+="&recSlice="+n.replace("\\",""),console.log("realUrl",d,e.data.recType),d=1==e.data.recType?d.replace("/playback","/cloudplayback"):d.replace("/cloudplayback","/playback"),o(d)}}function i(e){var t=[];return e.forEach((function(e,n){0==t.length||e.downloadPath!==t[t.length-1].downloadPath?t.push({downloadPath:e.downloadPath,ownerId:e.ownerId,iStorageVersion:e.iStorageVersion,videoType:e.videoType,iPlaySpeed:0,startTime:e.startTime,endTime:e.endTime}):t[t.length-1].endTime=e.endTime})),console.log("downloadPathArr",t),t}};console.log("进入alarmId回放");var E=y("alarmId",d);v=a(y("begin",d)),S=a(y("end",d)),b=y("serial",d),T=y("chn",d),w=i+"/api/lapp/video/by/id",C={accessToken:n.accessToken,deviceSerial:b,channelNo:T,alarmId:E};I(w,"POST",C,"",_)}else o(d)}else o(d)}else n.Theme&&(n.Theme.setDisabled(!0),n.Theme.setDecoderState({play:!1})),n.pluginStatus.setPlayStatus({play:!1}),n.pluginStatus.loadingClear(),n.pluginStatus.loadingSetText({text:e.msg,color:"red"}),"function"===typeof n.params.handleError&&n.params.handleError({retcode:e.code,msg:e.msg,id:n.params.id,type:"handleError"}),s(e)}))};return new Promise((function(e,t){return o(e,t)}));function r(e,t){var n=/^[0-9]{8}T[0-9]{6}Z$/;if(n.test(e))return e;if(/[0-9]{8,14}/.test(e)){var i=6-(14-e.length),o=t.length,r=e+t.substring(i,o);return r.slice(0,8)+"T"+r.slice(8)+"Z"}throw new Error("回放时间格式有误，请确认")}function a(e){var t=e.slice(0,4),n=e.slice(4,6),i=e.slice(6,8),o=e.slice(9,11),r=e.slice(11,13),a=e.slice(13,15),s=t+"-"+n+"-"+i+" "+o+":"+r+":"+a;return new Date(s.replace(/-/g,"/")).getTime()}}},{key:"_pluginPlay",value:function(e,t,n){var i=this;if(console.log("执行播放 _pluginPlay",e),!e)return!1;function o(e){var t=e.split("?")[0].replace("/live","").replace("/playback",""),n=(-1===e.indexOf("/live")?-1!==e.indexOf("cloudplayback")?"/cloudplayback?":"/playback?":"/live?")+e.split("?")[1];return-1!==n.indexOf("/playback")&&(n=n.replace("stream=2","stream=1")),{websocketConnectUrl:t,websocketStreamingParam:n}}var r=o(e).websocketConnectUrl;this.env&&this.env.wsUrl&&(r=this.env.wsUrl),this.gotWsUrlTime=(new Date).getTime(),this.Monitor.dclog({url:this.url,action:223,d:this.gotWsUrlTime-this.startGetWsUrlTime,text:"getWsUrlSuccess",isVersion2Available:$e()?1:0});var a={playURL:o(e).websocketStreamingParam};console.log("播放前 stop 阶段 结束"),this.isStoping=!1;var s=Date.now();console.log("执行播放 ... this.jSPlugin.JS_Play at ",s),this.jSPlugin.JS_Play(r,a,0).then((function(){if(console.log("执行播放 ... this.jSPlugin.JS_Play 播放成功",r,a),console.log("执行播放耗时 ",Date.now()-s),i.isStoping)console.log("现在在播放前 stop 阶段，此次应为无效播放成功触发。不执行后续回调， 此次耗时无效");else{if(i.validateCode&&"undefined"!==typeof i.jSPlugin.decoderVersion&&"2.0"===i.jSPlugin.decoderVersion&&i.jSPlugin.JS_SetSecretKey(0,i.validateCode),i.pluginStatus.loadingClear(),i.pluginStatus.setPlayStatus({play:!0,loading:!1}),i.Theme){i.Theme.setDecoderState({play:!0});var e=j.findIndex(i.Theme.themeData.footer.btnList,(function(e){return"sound"===e.iconId&&1===e.isrender&&1===e.defaultActive}))>-1;i.audio=e}i.audio&&setTimeout((function(){i.openSound()}),500),"function"===typeof i.params.handleSuccess&&i.params.handleSuccess({retcode:0,id:i.params.id,type:"handleSuccess"}),t(a),i.Monitor.dclog({url:i.url,action:211,d:(new Date).getTime()-i.playStartTime,text:"startPlaySuccess"}),i.Monitor.playLog({Enc:-1===i.url.indexOf("@")?0:1,PlTp:-1===i.url.indexOf("back")?1:2,Via:2,ErrCd:0,Cost:(new Date).getTime()-i.playStartTime,Serial:k(i.url).deviceSerial,Channel:k(i.url).channelNo,Ver:$e()?"v7.0.0":"v6.0.0"})}}),(function(e){console.log("err",e);var t="播放失败，请检查设备及客户端网络",o=-1;if(i.jSPlugin.bPlay)return!1;if(e&&e.errorCode){var r=i.errorHander.matchErrorInfo(e.errorCode);i.Theme&&i.Theme.setDisabled(!0),t=r&&r.msg?r.msg:r&&r.description?r.description:"播放失败，请检查设备及客户端网络",o=e.errorCode}i.pluginStatus.loadingClear(),i.pluginStatus.loadingSetText({text:t,color:"red"}),"function"===typeof i.params.handleError&&i.params.handleError({retcode:o,msg:t,id:i.params.id,type:"handleError"}),n(),i.Monitor.dclog({url:i.url,action:411,d:(new Date).getTime()-i.playStartTime,text:"startPlayError"}),i.Monitor.playLog({Enc:-1===i.url.indexOf("@")?0:1,PlTp:-1===i.url.indexOf("back")?1:2,Via:2,ErrCd:o,Cost:-1,Serial:k(i.url).deviceSerial,Channel:k(i.url).channelNo,Ver:$e()?"v7.0.0":"v6.0.0"})}))}},{key:"_play",value:function(e){var t=this;console.log("执行播放 play options.url =>",e),this.pluginStatus.setPlayStatus({play:!1,loading:!0}),this.playStartTime=(new Date).getTime(),this.Monitor.dclog({url:this.url,action:1,d:(new Date).getTime()-this.initTime,text:"startPlay"}),e&&("string"===typeof e&&(this.url=e),"string"===typeof e.url&&(this.url=e.url),"string"===typeof e.accessToken&&(this.accessToken=e.accessToken),"string"===typeof k(this.url).deviceSerial&&(this.deviceSerial=k(this.url).deviceSerial),!this.Theme||"string"!==typeof e.url&&"string"!==typeof e.accessToken||this.Theme.getDeviceInfo((function(e){e.data.isEncrypt&&setTimeout((function(){t.pluginStatus.loadingClear(),t.pluginStatus.loadingSetText({text:"设备已加密",color:"red"})}),1500)})));var n=new Promise((function(e,n){console.log("执行 播放前 stop"),t.isStoping=!0,t.jSPlugin.JS_Stop(0).then((function(){console.log("播放前 stop 执行成功 this.url => ".concat(t.url," ").concat(t.accessToken)),t._getRealUrlPromise(t.accessToken,t.url).then((function(i){t._pluginPlay(i,(function(n){t.pluginStatus.loadingClear(),e(!0)}),(function(){return n(!1)}))}))["catch"]((function(e){var i=e.msg?e.msg:"播放失败，请检查设备及客户端网络";t.Theme&&t.Theme.setDisabled(!0),t.pluginStatus.loadingClear(),t.pluginStatus.loadingSetText({text:i,color:"red"}),"function"===typeof t.params.handleError&&t.params.handleError({retcode:e.oError?e.oError.errorCode:-1,msg:i,id:t.params.id,type:"handleError"}),n({retcode:e.oError?e.oError.errorCode:-1,msg:i,id:t.params.id,type:"handleError"})}))}))}));return n}},{key:"stop",value:function(){var e=this;return this.pluginStatus.setPlayStatus({loading:!0}),this.reSetTheme(),this.jSPlugin.JS_Stop(0).then((function(){console.log("停止成功"),e.pluginStatus.setPlayStatus({play:!1,loading:!1}),e.Theme&&e.Theme.setDecoderState({play:!1})}))}},{key:"changeVideoLevel",value:function(e){var t=this.url,n=e?t.replace(".live",".hd.live"):t.replace(".hd.live",".live");this.jSPlugin.playURL=e?this.jSPlugin.playURL.replace("stream=2","stream=1"):this.jSPlugin.playURL.replace("stream=1","stream=2"),console.log("changeVideoLevel",n,this.jSPlugin.playURL),this.url=n;var i=this.changePlayUrl({url:n});return v(i)?i:new Promise((function(e){e(i)}))}},{key:"reSetTheme",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.Theme&&this.Theme.Ptz&&(this.Theme.setDecoderState({pantile:!1}),this.Theme.Ptz.hide()),this.Theme&&this.Theme.decoderState.state.recordvideo&&this.Theme.setDecoderState({recordvideo:!1}),e.indexOf("zoom")>-1&&(this.use3DZoom?(this.is3DZooming=!1,this.close3DZoom()):this.Zoom&&this.Zoom.currentScale>1&&this.Zoom.stopZoom(),this.Theme&&this.Theme.setDecoderState({zoom:!1})),this.Theme&&this.Theme.decoderState.state.talk&&(this.stopTalk(),this.Theme.setDecoderState({talk:!1})),this.Theme&&this.Theme.Rec&&!this.Theme.isMobile&&this.Theme.Rec.datepickerHide(),this.Theme&&this.Theme.Rec&&(this.Theme.changeRecSpeed(1),this.Theme.nextRate=1,this.speed=1,this.Theme.setDecoderState({speed:!1}))}},{key:"_changePlayUrl",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};console.log("_changePlayUrl"),console.log(e),this.reSetTheme(["zoom"]),this.getDeviceCapacity({accessToken:e.accessToken||this.accessToken,deviceSerial:e.deviceSerial||this.deviceSerial});var i=this.url,o=a(i,e);e.accessToken&&(this.accessToken=e.accessToken,this.deviceSerial=e.deviceSerial),this.url=o,n(),this.pluginStatus.loadingStart(this.id),this.pluginStatus.loadingSetText({text:"加载中，请稍后"});var r=new Promise((function(n,i){var r={url:o};return e.accessToken&&(r["accessToken"]=e.accessToken),console.log("切换播放地址 参数 ",r),t.play(r).then((function(){console.log("切换播放地址 play 执行成功 ",t.url,t.accessToken),t.Theme&&t.Theme.decoderState.state.webExpend&&t.Theme.webExpend(),t.Theme&&t.Theme.decoderState.state.expend&&t.Theme.expend(),e.type?t.Theme&&("rec"==e.type||"cloud.rec"==e.type?t.Theme.changeTheme(t.isMobile?"mobileRec":"pcRec"):t.Theme.changeTheme(t.isMobile?"mobileLive":"pcLive")):t.Theme&&(t.url.indexOf(".rec")>-1?t.Theme.changeTheme(t.isMobile?"mobileRec":"pcRec"):t.Theme.changeTheme(t.isMobile?"mobileLive":"pcLive")),e&&e.begin&&e.deviceSerial&&t.Theme&&t.Theme.Rec.setDatepickerDate(e.begin),t.Theme&&t.Theme.setDisabled(!1),n(o)}))["catch"]((function(e){i(o),e&&e.msg&&(t.Theme&&t.Theme.setDisabled(!0),t.pluginStatus.loadingClear(),t.pluginStatus.loadingSetText({text:e.msg,color:"red"}))}))}));function a(e,t){if(t.url)return t.url;console.log("--------------matchInitUrl",e);var n=e.split("/")[4].split(".")[e.split("/")[4].split(".").length-1].split("?")[0];"rec"===n&&-1!==e.indexOf(".cloud.rec")&&(n="cloud.rec"),t.type&&(n=t.type);var i=e.split("/")[3];t.deviceSerial&&(i=t.deviceSerial);var o=e.split("/")[4].split(".")[0];t.channelNo&&(o=t.channelNo);var r=2===e.split("/")[2].split("@").length?e.split("/")[2].split("@")[0]:"";"undefined"!==typeof t.validCode&&(r=t.validCode);var a="undefined"===typeof t.hd?-1!==e.indexOf(".hd"):t.hd,s="ezopen://".concat(r?"".concat(r,"@"):"","open.ys7.com/").concat(i,"/").concat(o).concat(a?".hd":"",".").concat(n);return"live"===n||(s="ezopen://".concat(r?"".concat(r,"@"):"","open.ys7.com/").concat(i,"/").concat(o,".").concat(n),t.begin&&t.end?s+="?begin=".concat(t.begin,"&end=").concat(t.end):t.begin?s+="?begin=".concat(t.begin):y("begin",e)&&(s+="?begin=".concat(y("begin",e)))),s}return r}},{key:"getOSDTime",value:function(){var e=this,t=new Promise((function(t,n){e.jSPlugin.JS_GetOSDTime(0).then((function(n){t({code:0,retcode:0,data:n}),"function"===typeof e.params.getOSDTimeCallBack&&e.params.getOSDTimeCallBack({id:e.id,type:"getOSDTime",code:0,data:n})}))["catch"]((function(t){n({code:-1,retcode:-1,data:t}),"function"===typeof e.params.getOSDTimeCallBack&&e.params.getOSDTimeCallBack({id:e.id,type:"getOSDTime",code:-1,data:-1})}))}));return t}},{key:"capturePicture",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.jSPlugin.JS_CapturePicture(0,e,"JPEG",n,!!n);return v(i)?("function"===typeof this.params.capturePictureCallBack&&i.then((function(){t.params.capturePictureCallBack({id:t.id,type:"capturePicture",code:0})}))["catch"]((function(){t.params.capturePictureCallBack({id:t.id,type:"capturePicture",code:-1})})),i):new Promise((function(e){e(i)}))}},{key:"startSave",value:function(e){var t=this,n=this.jSPlugin.JS_StartSave(0,e);return v(n)?("function"===typeof this.params.startSaveCallBack&&n.then((function(){t.params.startSaveCallBack({id:t.id,type:"startSave",code:0})}))["catch"]((function(){t.params.startSaveCallBack({id:t.id,type:"startSave",code:-1})})),n):(this.Theme&&this.Theme.setDecoderState({recordvideo:!0}),new Promise((function(e){e(n)})))}},{key:"stopSave",value:function(){var e=this,t=this.jSPlugin.JS_StopSave(0);return v(t)?("function"===typeof this.params.startSaveCallBack&&t.then((function(){e.params.stopSaveCallBack({id:e.id,type:"stopSave",code:0})}))["catch"]((function(){e.params.stopSaveCallBack({id:e.id,type:"stopSave",code:-1})})),t):(this.Theme&&this.Theme.setDecoderState({recordvideo:!1}),new Promise((function(e){e(t)})))}},{key:"openSound",value:function(){var e=this.jSPlugin.JS_OpenSound(0);return console.log("打开声音",e),v(e)?e:(this.Theme&&this.Theme.setDecoderState({sound:!0}),"function"===typeof this.params.openSoundCallBack&&this.params.openSoundCallBack({id:this.id,type:"openSound",code:e}),new Promise((function(t){t(e)})))}},{key:"closeSound",value:function(){var e=this.jSPlugin.JS_CloseSound(0);return v(e)?e:(this.Theme&&this.Theme.setDecoderState({sound:!1}),"function"===typeof this.params.closeSoundCallBack&&this.params.closeSoundCallBack({id:this.id,type:"closeSound",code:e}),new Promise((function(t){t(e)})))}},{key:"enableZoom",value:function(){var e=this.jSPlugin.JS_EnableZoom(0);return v(e)?e:new Promise((function(t){t(e)}))}},{key:"closeZoom",value:function(){var e=this.jSPlugin.JS_DisableZoom(0);return v(e)?e:new Promise((function(t){t(e)}))}},{key:"enable3DZoom",value:function(){var e=this;if(!this.use3DZoom)return new Promise((function(e,t){t({code:-1,msg:"未启用3D定位功能"})}));function t(e,t){if(!e||!e.startPos||!e.endPos)return-1;var n=e.startPos[0],i=e.startPos[1],o=e.endPos[0],r=e.endPos[1];return t?o>n&&r<i?1:o<n&&r>i?0:-1:o>n&&r>i?1:o<n&&r<i?0:-1}function n(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;if(!e||!t||!n||!n.startPos||!n.endPos)return-1;var o=n.startPos[0],r=n.startPos[1],a=n.endPos[0],s=n.endPos[1],d=Math.abs(a-o),l=Math.abs(s-r),c=parseInt((o+a)/2),u=parseInt((r+s)/2),m=Math.round(e*t/(d*l));return console.log("最大缩放倍数：",i),console.log("计算缩放倍数：",e*t/(d*l)),console.log("下发缩放倍数：",m>i?i:m),{startPointX:parseInt(o/e*256),startPointY:parseInt(r/t*256),endPointX:parseInt(a/e*256),endPointY:parseInt(s/t*256),zoomRate:m>i?i:m,targetCenterX:c,targetCenterY:u,targetWidth:d,targetHeight:l}}if(this.is3DZooming)return new Promise((function(e,t){t({code:-1,msg:"3D定位已处于开启状态"})}));if(this.isMobile||(this.Zoom&&this.Zoom.stopZoom(),this.Theme&&this.Theme.setDecoderState({zoom:!1})),this.support3DZoom){this.is3DZooming=!0,this.Theme&&this.Theme.setDecoderState({zoom:!0}),document.getElementById("".concat(this.id,"-zoom-content"))&&(document.getElementById("".concat(this.id,"-zoom-content")).title="3D定位");var i=this.jSPlugin.JS_Enable3DZoom(0,(function(i){var o=e.Theme&&e.Theme.decoderState.state.expend&&e.isMobile?e.fullScreenWidth:e.width,r=e.Theme&&e.Theme.decoderState.state.expend&&e.isMobile?e.fullScreenHeight:e.height,a=t(i,e.Theme&&e.Theme.decoderState.state.expend);if(a>-1)try{var s=n(o,r,i,e.capacity&&e.capacity.support_zoomOut_maxTime?e.capacity.support_zoomOut_maxTime:5),d=e.env.domain+"/api/v3/das/device/3d/zoom?accessToken=".concat(e.accessToken,"&deviceSerial=").concat(k(e.url).deviceSerial,"&channelNo=").concat(k(e.url).channelNo,"&command=").concat(0==a?9:8,"&zoomTimes=").concat(s.zoomRate,"&startPointX=").concat(s.startPointX,"&startPointY=").concat(s.startPointY,"&endPointX=").concat(s.endPointX,"&endPointY=").concat(s.endPointY,"&length=").concat(parseInt(r),"&width=").concat(parseInt(o),"&midPointX=").concat(s.targetCenterX,"&midPointY=").concat(s.targetCenterY,"&lengthX=").concat(s.targetWidth,"&lengthY=").concat(s.targetHeight);fetch(d,{method:"POST"}).then((function(e){return e.json()})).then((function(t){200!=t.code&&e.pluginStatus.loadingSetText({text:t.msg,color:"red",delayClear:2e3})}))["catch"]((function(t){e.pluginStatus.loadingSetText({text:"3D定位失败，请重试",color:"red",delayClear:2e3})}))}catch(l){e.pluginStatus.loadingSetText({text:"3D定位失败，请重试",color:"red",delayClear:2e3})}}));return this.isMobile?this.Zoom=new Me(this):this.Zoom=new je(this),v(i)?i:new Promise((function(e){e(i)}))}return this.is3DZooming=!1,document.getElementById("".concat(this.id,"-zoom-content"))&&(document.getElementById("".concat(this.id,"-zoom-content")).title="电子放大"),new Promise((function(e,t){t({code:-1,msg:"当前设备不支持3D定位功能"})}))}},{key:"close3DZoom",value:function(){if(!this.use3DZoom)return new Promise((function(e,t){t({code:-1,msg:"未启用3D定位功能"})}));if(this.is3DZooming){this.Theme&&this.Theme.setDecoderState({zoom:!1});var e=this.jSPlugin.JS_Disable3DZoom(0);return this.isMobile?this.Zoom=new Me(this):this.Zoom=new je(this),this.is3DZooming=!1,v(e)?e:new Promise((function(t){t(e)}))}return new Promise((function(e,t){t({code:-1,msg:"3D定位已处于关闭状态"})}))}},{key:"changeZoomType",value:function(e){var t=this;if(e&&this.capacity&&!this.support3DZoom)return{code:-1,msg:"当前设备不支持开启3D定位功能"};this.is3DZooming?this.close3DZoom():this.Theme&&this.Theme.decoderState.state.zoom&&this.Zoom&&this.Zoom.stopZoom(),this.Theme&&this.Theme.setDecoderState({zoom:!1}),this.use3DZoom=e,this.isMobile?this.Zoom=new Me(this):this.Zoom=new je(this),setTimeout((function(){e?document.getElementById("".concat(t.id,"-zoom-content"))&&(document.getElementById("".concat(t.id,"-zoom-content")).title="3D定位"):document.getElementById("".concat(t.id,"-zoom-content"))&&(document.getElementById("".concat(t.id,"-zoom-content")).title="电子放大"),t.isMobile&&e&&t.enable3DZoom()}),500)}},{key:"setPoster",value:function(e){$e()?document.getElementById("".concat(this.id))&&(document.getElementById("".concat(this.id)).style.backgroundImage="url(".concat(e,")"),document.getElementById("".concat(this.id)).style.backgroundSize="100% 100%"):document.getElementById("".concat(this.id,"canvas0"))&&(document.getElementById("".concat(this.id,"canvas0")).style.backgroundImage="url(".concat(e,")"),document.getElementById("".concat(this.id,"canvas0")).style.backgroundSize="cover")}},{key:"reSize",value:function(e,t){var n=0,i=0;if(this.params.height=t,this.params.width=e,this.Theme&&this.Theme.isNeedRenderHeader&&document.getElementById("".concat(this.id,"-headControl"))&&(n=parseInt(document.getElementById("".concat(this.id,"-headControl")).style.height,10)),this.Theme&&this.Theme.isNeedRenderTimeLine&&!this.isMobile&&(i=48),t=t-n-i,this.width=e,this.height=t,document.getElementById("".concat(this.id,"-wrap")).style="width:".concat(e,"px;position:relative;display:inline-block;vertical-align: bottom;"),document.getElementById("".concat(this.id)).style.width=e+"px",document.getElementById("".concat(this.id)).style.height=t+"px",this.jSPlugin&&this.jSPlugin.bPlay)this.jSPlugin&&(this.jSPlugin.iHeight=t,this.jSPlugin.iWidth=e),this.jSPlugin.JS_Resize(e,t);else{document.getElementById("".concat(this.id,"-player"))&&(document.getElementById("".concat(this.id,"-player")).width=e,document.getElementById("".concat(this.id,"-player")).height=t,document.getElementById("".concat(this.id,"-player")).style.width=e+"px",document.getElementById("".concat(this.id,"-player")).style.height=t+"px");var o=1;if(document.getElementById("".concat(this.id,"canvas0"))){var r=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);r&&(o=2),document.getElementById("".concat(this.id,"canvas0")).style.width=e*o+"px",document.getElementById("".concat(this.id,"canvas0")).style.height=t*o+"px",document.getElementById("".concat(this.id,"canvas0")).width=e*o,document.getElementById("".concat(this.id,"canvas0")).height=t*o,document.getElementById("".concat(this.id,"canvas0")).parentNode.style.width=e*o+"px",document.getElementById("".concat(this.id,"canvas0")).parentNode.style.height=t*o+"px",document.getElementById("".concat(this.id,"canvas_draw0")).height=t*o}this.jSPlugin&&(this.jSPlugin.iHeight=t*o,this.jSPlugin.iWidth=e*o)}}},{key:"fast",value:function(e){var t=this,n=this.speed;if(e){var i=this.jSPlugin.JS_Speed(e);this.Theme&&(this.Theme.changeRecSpeed(e),this.Theme.nextRate=e)}else{if(1===n)n=2;else{if(2!==n)return console.log("当前已经是最大播放倍数"),"function"===typeof this.params.handleError&&this.params.handleError({msg:"播放速度最大为4倍速度",retcode:1003,id:this.id,type:"handleError"}),new Promise((function(e,i){t.speed=n,i({code:-1,data:{speed:n,result:"播放速度最大为4倍速度"}})}));n=4}i=this.jSPlugin.JS_Speed(n);this.Theme&&(this.Theme.changeRecSpeed(n),this.Theme.nextRate=n)}return new Promise((function(e){t.speed=n,e({code:0,data:{speed:n,result:i}})}))}},{key:"slow",value:function(){var e=this,t=this.speed;if(4===t)t=2;else{if(2!==t)return console.log("当前已经是最小播放倍数"),"function"===typeof this.params.handleError&&this.params.handleError({msg:"播放速度最小为1倍速度",retcode:1003,id:this.id,type:"handleError"}),new Promise((function(n,i){e.speed=t,i({code:-1,data:{speed:t,result:"播放速度最小为1倍速度"}})}));t=1}var n=this.jSPlugin.JS_Speed(t);return new Promise((function(i){e.speed=t,i({code:0,data:{speed:t,result:n}})}))}},{key:"seek",value:function(e,t){var n=this.url,i=(y("begin",n)||(new Date).Format("yyyyMMdd")).substr(0,8);if(t=o(i,"235959"),6===e.length)e=o(i,e);else{if(16!==e.length)return"function"===typeof this.params.handleError&&this.params.handleError({msg:"seek时间格式错误",retcode:-1,id:this.id,type:"handleError"}),!1;if(e.substr(0,8)!==i)return"function"===typeof this.params.handleError&&this.params.handleError({msg:"seek时间不能跨日期",retcode:-1,id:this.id,type:"handleError"}),!1}function o(e,t){var n=/^[0-9]{8}T[0-9]{6}Z$/;if(n.test(e))return e;if(/[0-9]{8,14}/.test(e)){var i=6-(14-e.length),o=t.length,r=e+t.substring(i,o);return r.slice(0,8)+"T"+r.slice(8)+"Z"}throw new Error("回放时间格式有误，请确认")}var r=this.jSPlugin.JS_Seek(0,e,t);return console.log("seekRT",r),v(r)?r:new Promise((function(e){e(r)}))}},{key:"fullScreen",value:function(){var e=this,t=w(document.getElementById("".concat(this.id)));t.then((function(t){console.log("全屏promise",window.screen.availWidth),e.jSPlugin.JS_Resize(window.screen.availWidth,window.screen.availHeight),"function"===typeof e.params.fullScreenCallBack&&e.params.fullScreenCallBack({id:e.id,type:"fullScreen",code:0})}));var n=function(){var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;t||e.jSPlugin.JS_Resize(e.width,e.height),"function"===typeof e.params.fullScreenChangeCallBack&&e.params.fullScreenChangeCallBack({id:e.id,type:"fullScreen",code:t})};["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach((function(e){window.addEventListener(e,(function(e){return n()}))}))}},{key:"cancelFullScreen",value:function(){var e=this,t=E();t.then((function(t){console.log("取消全屏",t,e.jSPlugin),e.jSPlugin.JS_Resize(e.width,e.height)}))}},{key:"startTalk",value:function(){this.Talk.startTalk()}},{key:"stopTalk",value:function(){this.Talk.stopTalk()}},{key:"destroy",value:function(){var e=this.jSPlugin.JS_DestroyWorker(0);return this.Theme&&(this.Theme=null,window.EZUIKit[this.params.id].state.EZUIKitPlayer.themeInit=!1),v(e)?e:new Promise((function(t){t(e)}))}},{key:"getDeviceCapacity",value:function(e){var t=this,n=this.env.domain;this.capacity={},this.env&&(n=this.env.domain);var i=n+"/api/lapp/device/capacity",o=function(e){t.support3DZoom=!1,document.getElementById("".concat(t.id,"-zoom-content"))&&(document.getElementById("".concat(t.id,"-zoom-content")).title="电子放大"),200==e.code&&e.data&&(t.capacity=e.data,t.capacity&&"1"==t.capacity.support_3d_position&&t.url.indexOf(".live")>-1&&(t.support3DZoom=!0,t.params.use3DZoom&&(t.use3DZoom=!0,document.getElementById("".concat(t.id,"-zoom-content"))&&(document.getElementById("".concat(t.id,"-zoom-content")).title="3D定位"))))},r=e||{accessToken:this.accessToken,deviceSerial:k(this.url).deviceSerial};I(i,"POST",r,"",o)}},{key:"pause",value:function(e){var t=this;return new Promise((function(n,i){t.jSPlugin.JS_CloseSound(0),t.jSPlugin.JS_Pause(0,e).then((function(e){t.Theme&&t.Theme.setDecoderState({play:!1}),n()}))["catch"]((function(e){console.log(e),i(e)}))}))}},{key:"_resume",value:function(e){var t=this;return new Promise((function(n,i){t.pluginStatus.setPlayStatus({play:!1,loading:!0}),t.jSPlugin.JS_Resume(e).then((function(e){if(setTimeout((function(){-1!==t.url.indexOf(".rec")&&1!=t.speed&&t.jSPlugin.JS_Speed(t.speed)}),500),t.Theme){t.Theme.setDecoderState({play:!0}),t.fast(t.speed);var i=t.Theme.decoderState.state.sound;i&&setTimeout((function(){t.openSound()}),500)}n(e)}))["catch"]((function(e){console.log("resume err",e),i(e)}))}))}},{key:"getDefinition",value:function(){return!!this.Theme&&(console.log("当前清晰度：",this.Theme.decoderState.state.hd?"hd":"sd"),this.Theme.decoderState.state.hd?"hd":"sd")}},{key:"setDefinition",value:function(e){var t=["hd","sd"];-1!==t.indexOf(e)?(this.changeVideoLevel("hd"===e?1:0),this.Theme&&(this.Theme.setDecoderState({hd:"hd"===e}),this.Theme.resetMobileZoomStatus()),this.Theme&&this.Theme.decoderState.state.recordvideo&&this.Theme.setDecoderState({recordvideo:!1})):console.log("请输入正确的清晰度")}},{key:"getPtzStatus",value:function(){if(this.Theme)return console.log("当前是否开启云台：",this.Theme.Ptz.showPtz),this.Theme.Ptz.showPtz}},{key:"openPtz",value:function(){return this.Theme?this.isMobile&&this.Theme&&!this.Theme.decoderState.state.expend?(console.log("移动端，非全屏状态不展示云台"),!1):(console.log("显示云台"),this.Theme.setDecoderState({pantile:!0}),void this.Theme.Ptz.show()):{code:-1,msg:"未加载Theme模块，无法操作云台"}}},{key:"closePtz",value:function(){if(!this.Theme)return{code:-1,msg:"未加载Theme模块，无法操作云台"};console.log("隐藏云台"),this.Theme.setDecoderState({pantile:!1}),this.Theme.Ptz.hide()}},{key:"isBrowserFullscreen",value:function(){if(this.Theme)return console.log("当前是否为浏览器全屏状态：",this.Theme.decoderState.state.webExpend),this.Theme.decoderState.state.webExpend}},{key:"browserFullscreen",value:function(){this.Theme&&(this.Theme.webExpend(),this.Theme.setDecoderState({webExpend:!0}))}},{key:"exitBrowserFullscreen",value:function(e,t){var n=this,i=E();i.then((function(i){n.jSPlugin.JS_Resize(e||n.width,t||n.height),n.Theme&&(n.Theme.Rec&&n.Theme.Rec.recAutoSize(),n.Theme.setDecoderState({webExpend:!1}))}))}},{key:"getPlayRate",value:function(){return console.log("当前播放速度：",this.speed),this.speed}}]),e}(),tt=null;function nt(e,t,n,i){return new WebControl({szPluginContainer:e,iServicePortStart:14510,iServicePortEnd:14519,cbConnectSuccess:t,cbConnectError:n,cbConnectClose:i})}function it(){null!=tt&&(tt.JS_DestroyWnd().then((function(){console.log("JS_DestroyWnd")}),(function(){})),tt.JS_StopService("window").then((function(){tt.JS_Disconnect().then((function(){console.log("JS_Disconnect")}),(function(){}))})))}function ot(e){e.responseMsg.eventName,console.log(e.responseMsg)}function rt(){tt.JS_SetWindowControlCallback({cbIntegrationCallBack:ot}),tt.JS_StartService("window",{dllPath:"./chain/cloudTransform.dll"}).then((function(){tt.JS_CreateWnd("playWnd",900,500).then((function(){console.log("JS_CreateWnd success")}))}))}function at(){console.log("cbConnectError"),tt=null,console.error("确认本地进程是否已安装并开启成功！")}function st(e){console.log("cbConnectClose"),tt=null}window.onscroll=function(){null!=tt&&tt.JS_Resize(900,500)},window.onresize=function(){null!=tt&&tt.JS_Resize(900,500)},window.onunload=function(){try{tt.JS_HideWnd(),it()}catch(e){console.error(e)}},window.onpagehide=function(){try{tt.JS_HideWnd()}catch(e){console.error(e)}};var dt=function(){function e(t){var n=this;c(this,e),p(this,"changeModel",(function(e,t){var i=n;n.switchVideo=parseInt(e),tt&&tt.JS_RequestInterface({funcName:"ChangeModel",arguments:encodeURI(JSON.stringify({model:e}))}).then((function(n){0==e?i.play({deviceSerial:t.deviceSerial,channelNo:t.channelNo,validateCode:t.validateCode}):i.play({deviceSerial:t.deviceSerial,channelNo:t.channelNo,validateCode:t.validateCode,startTime:t.startTime,endTime:t.endTime})}))})),p(this,"init",(function(e){var t,i=n;if(e.appKey&&e.accessToken){"undefined"!==typeof e.appKey&&(n.appKey=e.appKey),"undefined"!==typeof e.accessToken&&(n.accessToken=e.accessToken),"undefined"!==typeof e.platformId&&(n.platformId=e.platformId);var o=(t={layout:+i.layout,userName:"",waterMark:""},p(t,"waterMark","1"),p(t,"iWndType",0),p(t,"intelligenceEnable",1),p(t,"isRecord",1),p(t,"isSetPos",1),p(t,"motionDetectEnable",0),p(t,"playBackAlarmOverlyingEnable",0),p(t,"response",{code:0,message:null,data:{appKey:e.appKey,ezvizToken:e.accessToken,videoLevel:0,logLevel:3,showMainTool:1,showSubTool:1,waterMark:"1",userName:"openteam",platformId:e.platformId}}),t);console.log("初始化入参",o),tt.JS_RequestInterface({funcName:"Init",arguments:encodeURI(JSON.stringify(o))}).then((function(e){console.log(e.responseMsg),i.showTips(!0,"视频初始化成功！")}))}else i.showTips(!1,"请输入appkey和token")})),p(this,"play",(function(e){var t=n;if(e.deviceSerial&&e.channelNo){"undefined"!==typeof e.deviceSerial&&(n.deviceSerial=e.deviceSerial),"undefined"!==typeof e.channelNo&&(n.channelNo=e.channelNo),"undefined"!==typeof e.startTime&&e.startTime&&(n.startTime=e.startTime+" 00:00:00"),"undefined"!==typeof e.endTime&&e.endTime&&(n.endTime=e.endTime+" 23:59:59"),"undefined"!==typeof e.validateCode&&e.validateCode&&(n.validateCode=e.validateCode);var i={response:{code:0,message:null,data:{deviceSerial:e.deviceSerial,channelCode:e.channelNo,channelNo:+e.channelNo,codeIsEncrypt:0,validateCode:e.validateCode,deviceClass:t.deviceClass,deviceType:"10222",channelId:"2222222222",channelName:"channelNameTest",storeName:"storeName",storeId:"storeid",startTime:n.startTime,endTime:n.endTime}}};"1"===t.deviceClass?(i.response.data.channelCode=t.channelNo,i.response.data.platformId=t.platformId):i.response.data.channelNo=+t.channelNo,1===n.switchVideo&&(n.startTime&&(i.response.data.startTime=n.startTime),n.endTime&&(i.response.data.endTime=n.endTime)),console.log("预览/回放入参",i),tt.JS_RequestInterface({funcName:0===n.switchVideo?"StartPreview":"StartPlayback",arguments:encodeURI(JSON.stringify(i))}).then((function(e){console.log(e.responseMsg),t.showTips(!0,"预览/回放成功！")}))["catch"]((function(e){console.log("开始播放：",e)}))}})),p(this,"showCBInfo",(function(e){n.callbackMessage=n.callbackMessage+JSON.stringify(e)+"\n\n",console.log(n.callbackMessage)})),p(this,"showTips",(function(e,t){})),p(this,"hideVideo",(function(){tt.JS_HideWnd()})),p(this,"showVideo",(function(){tt.JS_ShowWnd()})),p(this,"GetLayout",(function(){var e=null;tt.JS_RequestInterface({funcName:"GetLayout",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:e}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),p(this,"capturePicture",(function(e){var t=null;tt.JS_RequestInterface({funcName:"CaptureJPGEx",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:t}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),p(this,"stop",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;tt.JS_RequestInterface({funcName:"StopPlay",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),p(this,"setLayout",(function(e){var t=parseInt(e);isNaN(t)||0==t||t>=13?console.log("不支持实际布局大于16的窗口数"):(n.layout=t,tt.JS_RequestInterface({funcName:"SetLayout",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{layout:t}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)})))})),p(this,"setSoundVolumn",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;tt.JS_RequestInterface({funcName:"SoundVolumn",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e),volumn:parseInt(t)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),p(this,"testMute",(function(){var e=parseInt(prompt("请输入窗口ID"));tt.JS_RequestInterface({funcName:"MuteOnOff",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:e}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),p(this,"testSelectWnd",(function(){var e=parseInt(prompt("请输入窗口ID"));tt.JS_RequestInterface({funcName:"SelectPlayWnd",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:e}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),p(this,"setVideoLevel",(function(e,t){tt.JS_RequestInterface({funcName:"SetVideoLevel",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:1==n.switchVideo?0:parseInt(e),level:parseInt(t,10)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),p(this,"startTalk",(function(e){tt.JS_RequestInterface({funcName:"StartTalk",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),p(this,"stopTalk",(function(e){tt.JS_RequestInterface({funcName:"StopTalk",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),p(this,"startSave",(function(e){tt.JS_RequestInterface({funcName:"StartRecord",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),p(this,"stopSave",(function(e){tt.JS_RequestInterface({funcName:"StopRecord",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(e)}}}))}).then((function(e){console.log(JSON.stringify(e.responseMsg)),console.log(e.responseMsg)}))})),this.appKey="b9a3ad6e8026410095d8252169fa430a",this.accessToken="at.2vtum8873rrcwbrv431qb6pn94dkbv23-8dw2twn355-1u3x014-wrthellzk",this.deviceSerial="C33368372",this.channelNo="1",this.validateCode="",this.deviceClass="0",this.platformId="",this.startTime="",this.endTime="",this.layout=2,this.switchVideo=0,this.tips="调用成功",this.successTip=!1,this.tipsShow=!1,tt=nt("playWnd",rt,at,st)}return m(e,[{key:"alarmMsg",value:function(){var e={request:{body:{alarmTypes:[10800,0,0,0,0],channelId:"066dde0465dd4abaab6afe355baf9d0b",endTime:"1621007999000",startTime:"1620921600000"},callBack:"GetAlarmMsgOrders",majorKey:"",method:"POST",storeId:"",url:"/videoplugin/message/getMessageByTypes"},response:{code:0,message:null,data:[{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620921217e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620920678e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620920586e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620919513e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620919483e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620919333e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620918913e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620918616e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620918305e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917858e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917658e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917244e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917064e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916994e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916668e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916571e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916529e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916343e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916081e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915825e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915676e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915531e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915394e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915197e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914971e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914644e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914533e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914457e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914376e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914284e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620913973e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620913431e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912771e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912354e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912275e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912093e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912024e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091189e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911839e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911807e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091176e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911682e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091127e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911184e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910982e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910931e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910851e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910781e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910727e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910677e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910647e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910588e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910544e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910484e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091041e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091035e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910278e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910217e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910124e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909976e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909939e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909847e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909817e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909736e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909664e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909605e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909575e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909346e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909247e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909216e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909149e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090912e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909028e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908999e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908969e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908909e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090888e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908835e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090875e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090872e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908652e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908612e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908582e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908552e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908456e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908426e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908299e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908268e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090805e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907918e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907758e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907625e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907386e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907292e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907127e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906864e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906828e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906797e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906747e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906717e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906632e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906501e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906368e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906329e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906142e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906112e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906013e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905946e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905823e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905697e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905622e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905571e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905541e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905511e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905481e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905442e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905382e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905352e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905322e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905262e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905196e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090515e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904994e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904931e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904813e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090473e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:16209047e5},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904618e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904286e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904173e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904143e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904112e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904053e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904023e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903854e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903789e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903723e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903643e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903612e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903573e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903505e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903383e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903329e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903299e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903268e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:16209032e5},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903149e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090312e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902977e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090286e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090277e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902639e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902609e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902517e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902373e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090232e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902253e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902198e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902132e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090194e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090185e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901789e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901746e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901685e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901638e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090152e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901489e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901424e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901271e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901233e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901157e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900915e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900774e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900744e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090065e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090044e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900409e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900175e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900134e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900069e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900016e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899976e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899908e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899879e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899826e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899756e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899599e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899559e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899467e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899406e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899265e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899211e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089914e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089911e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089905e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898991e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898926e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898785e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898746e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898697e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898666e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898507e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898293e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898248e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898218e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898157e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898088e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089802e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089796e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089785e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897807e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897771e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897719e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089769e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089763e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:16208976e5},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089757e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089754e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897475e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897369e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897339e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897279e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897237e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897207e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897172e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897142e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897112e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897024e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896985e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896874e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896843e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896814e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896783e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896736e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896621e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896478e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896447e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896358e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896307e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896277e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896247e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896214e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089604e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895953e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895921e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895868e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089577e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895704e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089559e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895559e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089548e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895442e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895377e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895347e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895293e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895171e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895136e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895017e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894926e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894896e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894864e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894738e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894599e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894539e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894426e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894359e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894297e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894213e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894183e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894051e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893964e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893934e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893843e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893754e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893676e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893606e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089353e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893452e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893423e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893357e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893288e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893143e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893051e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893006e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892904e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892824e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892764e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892541e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892479e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892311e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892281e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892209e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892063e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891991e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891931e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089187e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089181e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891708e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891655e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891585e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891531e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891501e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891401e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891297e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891257e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891216e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891178e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891128e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891033e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890973e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089094e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890879e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890794e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890714e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890616e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890586e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890469e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890414e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890346e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890288e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890179e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890108e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890041e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890011e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889937e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889719e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889635e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889481e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889451e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889317e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889227e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889139e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889034e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888973e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888902e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888837e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888767e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888737e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888706e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888633e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888571e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888413e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888353e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888323e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888249e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888162e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888e6},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887859e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887776e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887734e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887692e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887619e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887501e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887355e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162088732e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887289e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887126e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887066e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887034e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162088697e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886884e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886804e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886728e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886609e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886538e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886478e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886396e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886334e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886246e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886111e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886011e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885956e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885894e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885696e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885514e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885484e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885414e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885383e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885341e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885306e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885276e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885216e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885186e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885114e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885037e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885006e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884975e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884945e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884911e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884851e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162088478e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884696e3}],success:!0}};console.log(e),tt.JS_RequestInterface({funcName:"TransFunctionResult",arguments:encodeURI(JSON.stringify(e))})}}]),e}();ct.sessions={},ct.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var e=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),t=33;return window.navigator.userAgent.match("Linux")&&(t=35),e>=26&&e<=t||ct.extension.isInstalled()}return!0};var lt={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return null!==document.querySelector("#janus-extension-installed")},getScreen:function(e){var t=window.setTimeout((function(){var t=new Error("NavigatorUserMediaError");return t.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',e(t)}),1e3);this.cache[t]=e,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var e={};this.cache=e,window.addEventListener("message",(function(t){if(t.origin==window.location.origin)if("janusGotScreen"==t.data.type&&e[t.data.id]){var n=e[t.data.id];if(delete e[t.data.id],""===t.data.sourceId){var i=new Error("NavigatorUserMediaError");i.name="You cancelled the request for permission, giving up...",n(i)}else n(null,t.data.sourceId)}else"janusGetScreenPending"==t.data.type&&(console.log("clearing ",t.data.id),window.clearTimeout(t.data.id))}))}};function ct(e,t){if(void 0===ct.initDone)return e.error("Library not initialized"),{};if(!ct.isWebrtcSupported())return e.error("WebRTC not supported by this browser"),{};if(ct.log("Library initialized: "+ct.initDone),e=e||{},e.success="function"==typeof e.success?e.success:ct.noop,e.error="function"==typeof e.error?e.error:ct.noop,e.destroyed="function"==typeof e.destroyed?e.destroyed:ct.noop,null===e.server||void 0===e.server)return e.error("Invalid server url"),{};var n=!1,i=null,o={},r=null,a=null,s=0,d=e.server;ct.isArray(d)?(ct.log("Multiple servers provided ("+d.length+"), will use the first that works"),d=null,a=e.server,ct.debug(a)):0===d.indexOf("ws")?(n=!0,ct.log("Using WebSockets to contact Janus: "+d)):(n=!1,ct.log("Using REST API to contact Janus: "+d));var c=e.iceServers;void 0!==c&&null!==c||(c=[{urls:"stun:stun.l.google.com:19302"}]);var u=e.iceTransportPolicy,m=e.bundlePolicy,p=e.ipv6;void 0!==p&&null!==p||(p=!1);var h=!1;void 0!==e.withCredentials&&null!==e.withCredentials&&(h=!0===e.withCredentials);var f=10;void 0!==e.max_poll_events&&null!==e.max_poll_events&&(f=e.max_poll_events),f<1&&(f=1);var g=null;void 0!==e.token&&null!==e.token&&(g=e.token);var v=null;void 0!==e.apisecret&&null!==e.apisecret&&(v=e.apisecret),this.destroyOnUnload=!0,void 0!==e.destroyOnUnload&&null!==e.destroyOnUnload&&(this.destroyOnUnload=!0===e.destroyOnUnload);var y=25e3;void 0!==e.keepAlivePeriod&&null!==e.keepAlivePeriod&&(y=e.keepAlivePeriod),isNaN(y)&&(y=25e3);var S=6e4;function b(e){var t={high:9e5,medium:3e5,low:1e5};return void 0!==e&&null!==e&&(e.high&&(t.high=e.high),e.medium&&(t.medium=e.medium),e.low&&(t.low=e.low)),t}void 0!==e.longPollTimeout&&null!==e.longPollTimeout&&(S=e.longPollTimeout),isNaN(S)&&(S=6e4);var T=!1,w=null,C={},_=this,E=0,k={};function P(){if(null!=w)if(ct.debug("Long poll..."),T){var t=d+"/"+w+"?rid="+(new Date).getTime();void 0!==f&&null!==f&&(t=t+"&maxev="+f),null!==g&&void 0!==g&&(t=t+"&token="+encodeURIComponent(g)),null!==v&&void 0!==v&&(t=t+"&apisecret="+encodeURIComponent(v)),ct.httpAPICall(t,{verb:"GET",withCredentials:h,success:I,timeout:S,error:function(t,n){if(ct.error(t+":",n),E++,E>3)return T=!1,void e.error("Lost connection to the server (is it down?)");P()}})}else ct.warn("Is the server down? (connected=false)")}function I(e,t){if(E=0,n||void 0===w||null===w||!0===t||P(),n||!ct.isArray(e))if("keepalive"!==e["rtcgw"])if("ack"!==e["rtcgw"])if("success"!==e["rtcgw"])if("trickle"===e["rtcgw"]){var o=e["sender"];if(void 0===o||null===o)return void ct.warn("Missing sender...");var r=C[o];if(void 0===r||null===r)return void ct.debug("This handle is not attached to this session");var a=e["candidate"];ct.debug("Got a trickled candidate on session "+w),ct.debug(a);var s=r.webrtcStuff;s.pc&&s.remoteSdp?(ct.debug("Adding remote candidate:",a),a&&!0!==a.completed?s.pc.addIceCandidate(a):s.pc.addIceCandidate(ct.endOfCandidates)):(ct.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),s.candidates||(s.candidates=[]),s.candidates.push(a),ct.debug(s.candidates))}else{if("webrtcup"===e["rtcgw"]){ct.debug("Got a webrtcup event on session "+w),ct.debug(e);o=e["sender"];if(void 0===o||null===o)return void ct.warn("Missing sender...");r=C[o];return void 0===r||null===r?void ct.debug("This handle is not attached to this session"):void r.webrtcState(!0)}if("hangup"===e["rtcgw"]){ct.debug("Got a hangup event on session "+w),ct.debug(e);o=e["sender"];if(void 0===o||null===o)return void ct.warn("Missing sender...");r=C[o];if(void 0===r||null===r)return void ct.debug("This handle is not attached to this session");r.webrtcState(!1,e["reason"]),r.hangup()}else if("detached"===e["rtcgw"]){ct.debug("Got a detached event on session "+w),ct.debug(e);o=e["sender"];if(void 0===o||null===o)return void ct.warn("Missing sender...");r=C[o];if(void 0===r||null===r)return;r.detached=!0,r.ondetached(),r.detach()}else if("media"===e["rtcgw"]){ct.debug("Got a media event on session "+w),ct.debug(e);o=e["sender"];if(void 0===o||null===o)return void ct.warn("Missing sender...");r=C[o];if(void 0===r||null===r)return void ct.debug("This handle is not attached to this session");r.mediaState(e["type"],e["receiving"])}else if("slowlink"===e["rtcgw"]){ct.debug("Got a slowlink event on session "+w),ct.debug(e),console.log("json的所有信息打印-----------------------------------------------",e);o=e["sender"];if(void 0===o||null===o)return void ct.warn("Missing sender...");r=C[o];if(void 0===r||null===r)return void ct.debug("This handle is not attached to this session");r.slowLink(e["uplink"],e["lost"])}else{if("error"===e["rtcgw"]){ct.error("Ooops: "+e["error"].code+" "+e["error"].reason),ct.debug(e);m=e["transaction"];if(null!==m&&void 0!==m){p=k[m];null!==p&&void 0!==p&&p(e),delete k[m]}return}if("event"===e["rtcgw"]){ct.debug("Got a plugin event on session "+w),ct.debug(e);o=e["sender"];if(void 0===o||null===o)return void ct.warn("Missing sender...");var d=e["plugindata"];if(void 0===d||null===d)return void ct.warn("Missing plugindata...");ct.debug("  -- Event is coming from "+o+" ("+d["plugin"]+")");var l=d["data"];ct.debug(l);r=C[o];if(void 0===r||null===r)return void ct.warn("This handle is not attached to this session");var c=e["jsep"];void 0!==c&&null!==c&&(ct.debug("Handling SDP as well..."),ct.debug(c));var u=r.onmessage;null!==u&&void 0!==u?(ct.debug("Notifying application..."),u(l,c)):ct.debug("No provided notification callback")}else{if("timeout"===e["rtcgw"])return ct.error("Timeout on session "+w),ct.debug(e),void(n&&i.close(3504,"Gateway timeout"));ct.warn("Unknown message/event  '"+e["rtcgw"]+"' on session "+w),ct.debug(e)}}}else{ct.debug("Got a success on session "+w),ct.debug(e);var m=e["transaction"];if(null!==m&&void 0!==m){var p=k[m];null!==p&&void 0!==p&&p(e),delete k[m]}}else{ct.debug("Got an ack on session "+w),ct.debug(e);var m=e["transaction"];if(null!==m&&void 0!==m){var p=k[m];null!==p&&void 0!==p&&p(e),delete k[m]}}else ct.vdebug("Got a keepalive on session "+w);else for(var h=0;h<e.length;h++)I(e[h],!0)}function x(){if(null!==d&&n&&T){r=setTimeout(x,y);var e={rtcgw:"keepalive",session_id:w,transaction:ct.randomString(12)};null!==g&&void 0!==g&&(e["token"]=g),null!==v&&void 0!==v&&(e["apisecret"]=v),i.send(JSON.stringify(e))}}function R(e){var l=ct.randomString(12),c={rtcgw:"create",transaction:l,token:"testtoken"};if(c=Object.assign({},c,t),e["reconnect"]&&(T=!1,c["rtcgw"]="claim",c["session_id"]=w,i&&(i.onopen=null,i.onerror=null,i.onclose=null,r&&(clearTimeout(r),r=null))),null!==g&&void 0!==g&&(c["token"]=g),null!==v&&void 0!==v&&(c["apisecret"]=v),null===d&&ct.isArray(a)&&(d=a[s],0===d.indexOf("ws")?(n=!0,ct.log("Server #"+(s+1)+": trying WebSockets to contact Janus ("+d+")")):(n=!1,ct.log("Server #"+(s+1)+": trying REST API to contact Janus ("+d+")"))),n)for(var u in i=ct.newWebSocket(d,"rtcgw-protocol"),o={error:function(){if(ct.error("Error connecting to the Janus WebSockets server... "+d),ct.isArray(a)&&!e["reconnect"])return s++,s==a.length?void e.error("Error connecting to any of the provided Janus servers: Is the server down?"):(d=null,void setTimeout((function(){R(e)}),200));e.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){k[l]=function(t){if(ct.debug(t),"success"!==t["rtcgw"])return ct.error("Ooops: "+t["error"].code+" "+t["error"].reason),void e.error(t["error"].reason);r=setTimeout(x,y),T=!0,w=t["session_id"]?t["session_id"]:t.data["id"],e["reconnect"]?ct.log("Claimed session: "+w):ct.log("Created session: "+w),ct.sessions[w]=_,e.success(w)},i.send(JSON.stringify(c))},message:function(e){I(JSON.parse(e.data))}},o)i.addEventListener(u,o[u]);else ct.httpAPICall(d,{verb:"POST",withCredentials:h,body:c,success:function(t){if(ct.debug(t),"success"!==t["rtcgw"])return ct.error("Ooops: "+t["error"].code+" "+t["error"].reason),void e.error(t["error"].reason);T=!0,w=t["session_id"]?t["session_id"]:t.data["id"],e["reconnect"]?ct.log("Claimed session: "+w):ct.log("Created session: "+w),ct.sessions[w]=_,P(),e.success()},error:function(t,n){if(ct.error(t+":",n),ct.isArray(a)&&!e["reconnect"])return s++,s==a.length?void e.error("Error connecting to any of the provided Janus servers: Is the server down?"):(d=null,void setTimeout((function(){R(e)}),200));""===n?e.error(t+": Is the server down?"):e.error(t+": "+n)}})}function A(t){t=t||{},t.success="function"==typeof t.success?t.success:ct.noop;var a=!0;void 0!==t.asyncRequest&&null!==t.asyncRequest&&(a=!0===t.asyncRequest);var s=!0;void 0!==t.notifyDestroyed&&null!==t.notifyDestroyed&&(s=!0===t.notifyDestroyed);var l=!1;if(void 0!==t.cleanupHandles&&null!==t.cleanupHandles&&(l=!0===t.cleanupHandles),ct.log("Destroying session "+w+" (async="+a+")"),!T)return ct.warn("Is the server down? (connected=false)"),void t.success();if(void 0===w||null===w)return ct.warn("No session to destroy"),t.success(),void(s&&e.destroyed());if(l)for(var c in C)O(c,{noRequest:!0});var u={rtcgw:"destroy",transaction:ct.randomString(12)};if(null!==g&&void 0!==g&&(u["token"]=g),null!==v&&void 0!==v&&(u["apisecret"]=v),n){u["session_id"]=w;var m=function(){for(var e in o)i.removeEventListener(e,o[e]);i.removeEventListener("message",p),i.removeEventListener("error",f),r&&clearTimeout(r),i.close()},p=function(n){var i=JSON.parse(n.data);i.session_id==u.session_id&&i.transaction==u.transaction&&(m(),t.success(),s&&e.destroyed())},f=function(n){m(),t.error("Failed to destroy the server: Is the server down?"),s&&e.destroyed()};return i.addEventListener("message",p),i.addEventListener("error",f),void i.send(JSON.stringify(u))}ct.httpAPICall(d+"/"+w,{verb:"POST",async:a,withCredentials:h,body:u,success:function(n){ct.log("Destroyed session:"),ct.debug(n),w=null,T=!1,"success"!==n["rtcgw"]&&ct.error("Ooops: "+n["error"].code+" "+n["error"].reason),t.success(),s&&e.destroyed()},error:function(n,i){ct.error(n+":",i),w=null,T=!1,t.success(),s&&e.destroyed(),pluginHandlesp}})}function D(e){if(e=e||{},e.success="function"==typeof e.success?e.success:ct.noop,e.error="function"==typeof e.error?e.error:ct.noop,e.consentDialog="function"==typeof e.consentDialog?e.consentDialog:ct.noop,e.iceState="function"==typeof e.iceState?e.iceState:ct.noop,e.mediaState="function"==typeof e.mediaState?e.mediaState:ct.noop,e.webrtcState="function"==typeof e.webrtcState?e.webrtcState:ct.noop,e.slowLink="function"==typeof e.slowLink?e.slowLink:ct.noop,e.onmessage="function"==typeof e.onmessage?e.onmessage:ct.noop,e.onlocalstream="function"==typeof e.onlocalstream?e.onlocalstream:ct.noop,e.onremotestream="function"==typeof e.onremotestream?e.onremotestream:ct.noop,e.ondata="function"==typeof e.ondata?e.ondata:ct.noop,e.ondataopen="function"==typeof e.ondataopen?e.ondataopen:ct.noop,e.oncleanup="function"==typeof e.oncleanup?e.oncleanup:ct.noop,e.ondetached="function"==typeof e.ondetached?e.ondetached:ct.noop,!T)return ct.warn("Is the server down? (connected=false)"),void e.error("Is the server down? (connected=false)");var t=e.plugin;if(void 0===t||null===t)return ct.error("Invalid plugin"),void e.error("Invalid plugin");var o=e.opaqueId,r=e.token?e.token:g,a=ct.randomString(12),s={rtcgw:"attach",plugin:t,opaque_id:o,transaction:a};if(null!==r&&void 0!==r&&(s["token"]=r),null!==v&&void 0!==v&&(s["apisecret"]=v),n)return k[a]=function(n){if(ct.debug(n),"success"!==n["rtcgw"])return ct.error("Ooops: "+n["error"].code+" "+n["error"].reason),void e.error("Ooops: "+n["error"].code+" "+n["error"].reason);var i=n.data["id"];ct.log("Created handle: "+i);var o={session:_,plugin:t,id:i,token:r,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return i},getPlugin:function(){return t},getVolume:function(){return W(i,!0)},getRemoteVolume:function(){return W(i,!0)},getLocalVolume:function(){return W(i,!1)},isAudioMuted:function(){return J(i,!1)},muteAudio:function(){return K(i,!1,!0)},unmuteAudio:function(){return K(i,!1,!1)},isVideoMuted:function(){return J(i,!0)},muteVideo:function(){return K(i,!0,!0)},unmuteVideo:function(){return K(i,!0,!1)},getBitrate:function(){return q(i)},getNetworkQuality:function(e){Z(i,e)},send:function(e){j(i,e)},data:function(e){N(i,e)},dtmf:function(e){B(i,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){F(i,!0,e)},createAnswer:function(e){F(i,!1,e)},handleRemoteJsep:function(e){U(i,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){X(i,!0===e)},detach:function(e){O(i,e)}};C[i]=o,e.success(o)},s["session_id"]=w,void i.send(JSON.stringify(s));ct.httpAPICall(d+"/"+w,{verb:"POST",withCredentials:h,body:s,success:function(n){if(ct.debug(n),"success"!==n["rtcgw"])return ct.error("Ooops: "+n["error"].code+" "+n["error"].reason),void e.error("Ooops: "+n["error"].code+" "+n["error"].reason);var i=n.data["id"];ct.log("Created handle: "+i);var o={session:_,plugin:t,id:i,token:r,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return i},getPlugin:function(){return t},getVolume:function(){return W(i,!0)},getRemoteVolume:function(){return W(i,!0)},getLocalVolume:function(){return W(i,!1)},isAudioMuted:function(){return J(i,!1)},muteAudio:function(){return K(i,!1,!0)},unmuteAudio:function(){return K(i,!1,!1)},isVideoMuted:function(){return J(i,!0)},muteVideo:function(){return K(i,!0,!0)},unmuteVideo:function(){return K(i,!0,!1)},getBitrate:function(){return q(i)},getNetworkQuality:function(e){Z(i,e)},send:function(e){j(i,e)},data:function(e){N(i,e)},dtmf:function(e){B(i,e)},consentDialog:e.consentDialog,iceState:e.iceState,mediaState:e.mediaState,webrtcState:e.webrtcState,slowLink:e.slowLink,onmessage:e.onmessage,createOffer:function(e){F(i,!0,e)},createAnswer:function(e){F(i,!1,e)},handleRemoteJsep:function(e){U(i,e)},onlocalstream:e.onlocalstream,onremotestream:e.onremotestream,ondata:e.ondata,ondataopen:e.ondataopen,oncleanup:e.oncleanup,ondetached:e.ondetached,hangup:function(e){X(i,!0===e)},detach:function(e){O(i,e)}};C[i]=o,e.success(o)},error:function(e,t){ct.error(e+":",t)}})}function j(e,t){if(t=t||{},t.success="function"==typeof t.success?t.success:ct.noop,t.error="function"==typeof t.error?t.error:ct.noop,!T)return ct.warn("Is the server down? (connected=false)"),void t.error("Is the server down? (connected=false)");var o=C[e];if(null===o||void 0===o||null===o.webrtcStuff||void 0===o.webrtcStuff)return ct.warn("Invalid handle"),void t.error("Invalid handle");var r=t.message,a=t.jsep,s=ct.randomString(12),l={rtcgw:"message",body:r,transaction:s};if(null!==o.token&&void 0!==o.token&&(l["token"]=o.token),null!==v&&void 0!==v&&(l["apisecret"]=v),null!==a&&void 0!==a&&(l.jsep=a),ct.debug("Sending message to plugin (handle="+e+"):"),ct.debug(l),n)return l["session_id"]=w,l["handle_id"]=e,k[s]=function(e){if(ct.debug("Message sent!"),ct.debug(e),"success"===e["rtcgw"]){var n=e["plugindata"];if(void 0===n||null===n)return ct.warn("Request succeeded, but missing plugindata..."),void t.success();ct.log("Synchronous transaction successful ("+n["plugin"]+")");var i=n["data"];return ct.debug(i),void t.success(i)}"ack"===e["rtcgw"]?t.success():void 0!==e["error"]&&null!==e["error"]?(ct.error("Ooops: "+e["error"].code+" "+e["error"].reason),t.error(e["error"].code+" "+e["error"].reason)):(ct.error("Unknown error"),t.error("Unknown error"))},void i.send(JSON.stringify(l));ct.httpAPICall(d+"/"+w+"/"+e,{verb:"POST",withCredentials:h,body:l,success:function(e){if(ct.debug("Message sent!"),ct.debug(e),"success"===e["rtcgw"]){var n=e["plugindata"];if(void 0===n||null===n)return ct.warn("Request succeeded, but missing plugindata..."),void t.success();ct.log("Synchronous transaction successful ("+n["plugin"]+")");var i=n["data"];return ct.debug(i),void t.success(i)}"ack"===e["rtcgw"]?t.success():void 0!==e["error"]&&null!==e["error"]?(ct.error("Ooops: "+e["error"].code+" "+e["error"].reason),t.error(e["error"].code+" "+e["error"].reason)):(ct.error("Unknown error"),t.error("Unknown error"))},error:function(e,n){ct.error(e+":",n),t.error(e+": "+n)}})}function L(e,t){if(T){var o=C[e];if(null!==o&&void 0!==o&&null!==o.webrtcStuff&&void 0!==o.webrtcStuff){var r={rtcgw:"trickle",candidate:t,transaction:ct.randomString(12)};if(null!==o.token&&void 0!==o.token&&(r["token"]=o.token),null!==v&&void 0!==v&&(r["apisecret"]=v),ct.vdebug("Sending trickle candidate (handle="+e+"):"),ct.vdebug(r),n)return r["session_id"]=w,r["handle_id"]=e,void i.send(JSON.stringify(r));ct.httpAPICall(d+"/"+w+"/"+e,{verb:"POST",withCredentials:h,body:r,success:function(e){ct.vdebug("Candidate sent!"),ct.vdebug(e),"ack"===e["rtcgw"]||ct.error("Ooops: "+e["error"].code+" "+e["error"].reason)},error:function(e,t){ct.error(e+":",t)}})}else ct.warn("Invalid handle")}else ct.warn("Is the server down? (connected=false)")}function M(e,t,n,i){var o=C[e];if(null!==o&&void 0!==o&&null!==o.webrtcStuff&&void 0!==o.webrtcStuff){var r=o.webrtcStuff,a=function(e){ct.log("Received message on data channel:",e);var t=e.target.label;o.ondata(e.data,t)},s=function(e){ct.log("Received state change on data channel:",e);var t=e.target.label,n=r.dataChannel[t]?r.dataChannel[t].readyState:"null";if(ct.log("State change on <"+t+"> data channel: "+n),"open"===n){if(r.dataChannel[t].pending&&r.dataChannel[t].pending.length>0){for(var i in ct.log("Sending pending messages on <"+t+">:",r.dataChannel[t].pending.length),r.dataChannel[t].pending){var a=r.dataChannel[t].pending[i];ct.log("Sending string on data channel <"+t+">: "+a),r.dataChannel[t].send(a)}r.dataChannel[t].pending=[]}o.ondataopen(t)}},d=function(e){ct.error("Got error on data channel:",e)};r.dataChannel[t]=n||r.pc.createDataChannel(t,{ordered:!1}),r.dataChannel[t].onmessage=a,r.dataChannel[t].onopen=s,r.dataChannel[t].onclose=s,r.dataChannel[t].onerror=d,r.dataChannel[t].pending=[],i&&r.dataChannel[t].pending.push(i)}else ct.warn("Invalid handle")}function N(e,t){t=t||{},t.success="function"==typeof t.success?t.success:ct.noop,t.error="function"==typeof t.error?t.error:ct.noop;var n=C[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return ct.warn("Invalid handle"),void t.error("Invalid handle");var i=n.webrtcStuff,o=t.text;if(null===o||void 0===o)return ct.warn("Invalid text"),void t.error("Invalid text");var r=t.label?t.label:ct.dataChanDefaultLabel;return i.dataChannel[r]?"open"!==i.dataChannel[r].readyState?(i.dataChannel[r].pending.push(o),void t.success()):(ct.log("Sending string on data channel <"+r+">: "+o),i.dataChannel[r].send(o),void t.success()):(M(e,r,!1,o),void t.success())}function B(e,t){t=t||{},t.success="function"==typeof t.success?t.success:ct.noop,t.error="function"==typeof t.error?t.error:ct.noop;var n=C[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return ct.warn("Invalid handle"),void t.error("Invalid handle");var i=n.webrtcStuff;if(null===i.dtmfSender||void 0===i.dtmfSender){if(void 0!==i.pc&&null!==i.pc){var o=i.pc.getSenders(),r=o.find((function(e){return e.track&&"audio"===e.track.kind}));if(!r)return ct.warn("Invalid DTMF configuration (no audio track)"),void t.error("Invalid DTMF configuration (no audio track)");i.dtmfSender=r.dtmf,i.dtmfSender&&(ct.log("Created DTMF Sender"),i.dtmfSender.ontonechange=function(e){ct.debug("Sent DTMF tone: "+e.tone)})}if(null===i.dtmfSender||void 0===i.dtmfSender)return ct.warn("Invalid DTMF configuration"),void t.error("Invalid DTMF configuration")}var a=t.dtmf;if(null===a||void 0===a)return ct.warn("Invalid DTMF parameters"),void t.error("Invalid DTMF parameters");var s=a.tones;if(null===s||void 0===s)return ct.warn("Invalid DTMF string"),void t.error("Invalid DTMF string");var d=a.duration;null!==d&&void 0!==d||(d=500);var l=a.gap;null!==l&&void 0!==l||(l=50),ct.debug("Sending DTMF string "+s+" (duration "+d+"ms, gap "+l+"ms)"),i.dtmfSender.insertDTMF(s,d,l),t.success()}function O(e,t){t=t||{},t.success="function"==typeof t.success?t.success:ct.noop,t.error="function"==typeof t.error?t.error:ct.noop;var o=!0;void 0!==t.asyncRequest&&null!==t.asyncRequest&&(o=!0===t.asyncRequest);var r=!0;void 0!==t.noRequest&&null!==t.noRequest&&(r=!0===t.noRequest),ct.log("Destroying handle "+e+" (async="+o+")"),X(e);var a=C[e];if(null===a||void 0===a||a.detached)return delete C[e],void t.success();if(r)return delete C[e],void t.success();if(!T)return ct.warn("Is the server down? (connected=false)"),void t.error("Is the server down? (connected=false)");var s={rtcgw:"detach",transaction:ct.randomString(12)};if(null!==a.token&&void 0!==a.token&&(s["token"]=a.token),null!==v&&void 0!==v&&(s["apisecret"]=v),n)return s["session_id"]=w,s["handle_id"]=e,i.send(JSON.stringify(s)),delete C[e],void t.success();ct.httpAPICall(d+"/"+w+"/"+e,{verb:"POST",async:o,withCredentials:h,body:s,success:function(n){ct.log("Destroyed handle:"),ct.debug(n),"success"!==n["rtcgw"]&&ct.error("Ooops: "+n["error"].code+" "+n["error"].reason),delete C[e],t.success()},error:function(n,i){ct.error(n+":",i),delete C[e],t.success()}})}function z(e,t,n,i,o){var r=C[e];if(null===r||void 0===r||null===r.webrtcStuff||void 0===r.webrtcStuff)return ct.warn("Invalid handle"),void i.error("Invalid handle");var a=r.webrtcStuff;ct.debug("streamsDone:",o),o&&(ct.debug("  -- Audio tracks:",o.getAudioTracks()),ct.debug("  -- Video tracks:",o.getVideoTracks()));var s=!1;if(a.myStream&&n.update&&!a.streamExternal){if((!n.update&&$(n)||n.update&&(n.addAudio||n.replaceAudio))&&o.getAudioTracks()&&o.getAudioTracks().length)if(a.myStream.addTrack(o.getAudioTracks()[0]),ct.unifiedPlan){ct.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",o.getAudioTracks()[0]);var d=null,h=a.pc.getTransceivers();if(h&&h.length>0)for(var f in h){var g=h[f];if(g.sender&&g.sender.track&&"audio"===g.sender.track.kind||g.receiver&&g.receiver.track&&"audio"===g.receiver.track.kind){d=g;break}}d&&d.sender?d.sender.replaceTrack(o.getAudioTracks()[0]):a.pc.addTrack(o.getAudioTracks()[0],o)}else ct.log((n.replaceAudio?"Replacing":"Adding")+" audio track:",o.getAudioTracks()[0]),a.pc.addTrack(o.getAudioTracks()[0],o);if((!n.update&&ne(n)||n.update&&(n.addVideo||n.replaceVideo))&&o.getVideoTracks()&&o.getVideoTracks().length)if(a.myStream.addTrack(o.getVideoTracks()[0]),ct.unifiedPlan){ct.log((n.replaceVideo?"Replacing":"Adding")+" video track:",o.getVideoTracks()[0]);var v=null;h=a.pc.getTransceivers();if(h&&h.length>0)for(var f in h){g=h[f];if(g.sender&&g.sender.track&&"video"===g.sender.track.kind||g.receiver&&g.receiver.track&&"video"===g.receiver.track.kind){v=g;break}}v&&v.sender?v.sender.replaceTrack(o.getVideoTracks()[0]):a.pc.addTrack(o.getVideoTracks()[0],o)}else ct.log((n.replaceVideo?"Replacing":"Adding")+" video track:",o.getVideoTracks()[0]),a.pc.addTrack(o.getVideoTracks()[0],o)}else a.myStream=o,s=!0;if(!a.pc){var y={iceServers:c,iceTransportPolicy:u,bundlePolicy:m};"chrome"===ct.webRTCAdapter.browserDetails.browser&&(y["sdpSemantics"]=ct.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var S={optional:[{DtlsSrtpKeyAgreement:!0}]};if(!0===p&&S.optional.push({googIPv6:!0}),i.rtcConstraints&&"object"===l(i.rtcConstraints))for(var f in ct.debug("Adding custom PeerConnection constraints:",i.rtcConstraints),i.rtcConstraints)S.optional.push(i.rtcConstraints[f]);"edge"===ct.webRTCAdapter.browserDetails.browser&&(y.bundlePolicy="max-bundle"),ct.log("Creating PeerConnection"),ct.debug(S),a.pc=new RTCPeerConnection(y,S),ct.debug(a.pc),a.pc.getStats&&(a.volume={},a.bitrate.value="0 kbits/sec"),ct.log("Preparing local SDP and gathering candidates (trickle="+a.trickle+")"),a.pc.oniceconnectionstatechange=function(e){a.pc&&r.iceState(a.pc.iceConnectionState)},a.pc.onicecandidate=function(t){if(null==t.candidate||"edge"===ct.webRTCAdapter.browserDetails.browser&&t.candidate.candidate.indexOf("endOfCandidates")>0)ct.log("End of candidates."),a.iceDone=!0,!0===a.trickle?L(e,{completed:!0}):G(e,i);else{var n={candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex};!0===a.trickle&&L(e,n)}},a.pc.ontrack=function(e){ct.log("Handling Remote Track"),ct.debug(e),e.streams&&(a.remoteStream=e.streams[0],r.onremotestream(a.remoteStream),e.track.onended||(ct.log("Adding onended callback to track:",e.track),e.track.onended=function(e){ct.log("Remote track muted/removed:",e),a.remoteStream&&(a.remoteStream.removeTrack(e.target),r.onremotestream(a.remoteStream))},e.track.onmute=e.track.onended,e.track.onunmute=function(e){ct.log("Remote track flowing again:",e);try{a.remoteStream.addTrack(e.target),r.onremotestream(a.remoteStream)}catch(t){ct.error(t)}}))}}if(s&&null!==o&&void 0!==o)if(ct.log("Adding local stream"),console.log("callbacks",i),"screen"==i.media.video){var T=!0===i.simulcast2;o.getTracks().forEach((function(e){if(ct.log("Adding local track:",e),e.applyConstraints({frameRate:5}),T)if("audio"===e.kind)a.pc.addTrack(e,o);else{ct.log("Enabling rid-based simulcasting:",e);var t=b(i.simulcastMaxBitrates);a.pc.addTransceiver(e,{direction:"sendrecv",streams:[o],sendEncodings:[{rid:"h",active:!0,maxBitrate:t.high},{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:t.low,scaleResolutionDownBy:4}]})}else a.pc.addTrack(e,o)}))}else{T=!0===i.simulcast2;var w=o.getTracks(),_=w[0];if(_){var E=_.getSettings();console.log("videoTrack",_),console.log("videosettings",E)}var k=o.getAudioTracks(),P=k[0];if(P){var I=P.getSettings();console.log("audiosettings",I)}w.forEach((function(e){if(e.applyConstraints({frameRate:{max:i.frameRate}}),ct.log("Adding local track:",e),T){a.pc.addTrack(e,o);var t=null,n=a.pc.getSenders();for(var r in n){var s=n[r];s&&s.track&&"video"===s.track.kind&&(t=s)}var d=null;t&&(d=t.getParameters()),d&&d.encodings&&(d.encodings[0].maxBitrate=1e5,t.setParameters(d).then((function(e){console.log("Successed to set parameters!",d)}))["catch"]((function(e){console.log("err",e),console.error(e)})))}else if("audio"===e.kind)a.pc.addTrack(e,o);else{ct.log("Enabling rid-based simulcasting:",e);var l=i.bitrate||1e5;a.pc.addTransceiver(e,{direction:"sendrecv",streams:[o],sendEncodings:[{rid:"h",active:!0,maxBitrate:l}]})}}))}ae(n)&&!a.dataChannel[ct.dataChanDefaultLabel]&&(ct.log("Creating data channel"),M(e,ct.dataChanDefaultLabel,!1),a.pc.ondatachannel=function(t){ct.log("Data channel created by Janus:",t),M(e,t.channel.label,t.channel)}),a.myStream&&r.onlocalstream(a.myStream),null===t||void 0===t?V(e,n,i):a.pc.setRemoteDescription(t).then((function(){if(ct.log("Remote description accepted!"),a.remoteSdp=t.sdp,a.candidates&&a.candidates.length>0){for(var o=0;o<a.candidates.length;o++){var r=a.candidates[o];ct.debug("Adding remote candidate:",r),r&&!0!==r.completed?a.pc.addIceCandidate(r):a.pc.addIceCandidate(ct.endOfCandidates)}a.candidates=[]}H(e,n,i)}),i.error)}function F(e,t,n){n=n||{},n.success="function"==typeof n.success?n.success:ct.noop,n.error="function"==typeof n.error?n.error:Y;var i=n.jsep;if(t&&i)return ct.error("Provided a JSEP to a createOffer"),void n.error("Provided a JSEP to a createOffer");if(!t&&(!i||!i.type||!i.sdp))return ct.error("A valid JSEP is required for createAnswer"),void n.error("A valid JSEP is required for createAnswer");n.media=n.media||{audio:!0,video:!0};var o=n.media,r=C[e];if(null===r||void 0===r||null===r.webrtcStuff||void 0===r.webrtcStuff)return ct.warn("Invalid handle"),void n.error("Invalid handle");var a=r.webrtcStuff;if(a.trickle=se(n.trickle),void 0===a.pc||null===a.pc)o.update=!1,o.keepAudio=!1,o.keepVideo=!1;else if(void 0!==a.pc&&null!==a.pc){if(ct.log("Updating existing media session"),o.update=!0,null!==n.stream&&void 0!==n.stream)n.stream!==a.myStream&&ct.log("Renegotiation involves a new external stream");else{if(o.addAudio){if(o.keepAudio=!1,o.replaceAudio=!1,o.removeAudio=!1,o.audioSend=!0,a.myStream&&a.myStream.getAudioTracks()&&a.myStream.getAudioTracks().length)return ct.error("Can't add audio stream, there already is one"),void n.error("Can't add audio stream, there already is one")}else o.removeAudio?(o.keepAudio=!1,o.replaceAudio=!1,o.addAudio=!1,o.audioSend=!1):o.replaceAudio&&(o.keepAudio=!1,o.addAudio=!1,o.removeAudio=!1,o.audioSend=!0);if(null===a.myStream||void 0===a.myStream?(o.replaceAudio&&(o.keepAudio=!1,o.replaceAudio=!1,o.addAudio=!0,o.audioSend=!0),$(o)&&(o.keepAudio=!1,o.addAudio=!0)):null===a.myStream.getAudioTracks()||void 0===a.myStream.getAudioTracks()||0===a.myStream.getAudioTracks().length?(o.replaceAudio&&(o.keepAudio=!1,o.replaceAudio=!1,o.addAudio=!0,o.audioSend=!0),$(o)&&(o.keepVideo=!1,o.addAudio=!0)):!$(o)||o.removeAudio||o.replaceAudio||(o.keepAudio=!0),o.addVideo){if(o.keepVideo=!1,o.replaceVideo=!1,o.removeVideo=!1,o.videoSend=!0,a.myStream&&a.myStream.getVideoTracks()&&a.myStream.getVideoTracks().length)return ct.error("Can't add video stream, there already is one"),void n.error("Can't add video stream, there already is one")}else o.removeVideo?(o.keepVideo=!1,o.replaceVideo=!1,o.addVideo=!1,o.videoSend=!1):o.replaceVideo&&(o.keepVideo=!1,o.addVideo=!1,o.removeVideo=!1,o.videoSend=!0);null===a.myStream||void 0===a.myStream||null===a.myStream.getVideoTracks()||void 0===a.myStream.getVideoTracks()||0===a.myStream.getVideoTracks().length?(o.replaceVideo&&(o.keepVideo=!1,o.replaceVideo=!1,o.addVideo=!0,o.videoSend=!0),ne(o)&&(o.keepVideo=!1,o.addVideo=!0)):!ne(o)||o.removeVideo||o.replaceVideo||(o.keepVideo=!0),o.addData&&(o.data=!0)}if($(o)&&o.keepAudio&&ne(o)&&o.keepVideo)return r.consentDialog(!1),void z(e,i,o,n,a.myStream)}if(o.update&&!a.streamExternal){if(o.removeAudio||o.replaceAudio){if(a.myStream&&a.myStream.getAudioTracks()&&a.myStream.getAudioTracks().length){var s=a.myStream.getAudioTracks()[0];ct.log("Removing audio track:",s),a.myStream.removeTrack(s);try{s.stop()}catch(x){}}if(a.pc.getSenders()&&a.pc.getSenders().length){var d=!0;if(o.replaceAudio&&ct.unifiedPlan&&(d=!1),d)for(var c in a.pc.getSenders()){s=a.pc.getSenders()[c];s&&s.track&&"audio"===s.track.kind&&(ct.log("Removing audio sender:",s),a.pc.removeTrack(s))}}}if(o.removeVideo||o.replaceVideo){if(a.myStream&&a.myStream.getVideoTracks()&&a.myStream.getVideoTracks().length){s=a.myStream.getVideoTracks()[0];ct.log("Removing video track:",s),a.myStream.removeTrack(s);try{s.stop()}catch(x){}}if(a.pc.getSenders()&&a.pc.getSenders().length){var u=!0;if(o.replaceVideo&&ct.unifiedPlan&&(u=!1),u)for(var c in a.pc.getSenders()){s=a.pc.getSenders()[c];s&&s.track&&"video"===s.track.kind&&(ct.log("Removing video sender:",s),a.pc.removeTrack(s))}}}}if(null!==n.stream&&void 0!==n.stream){var m=n.stream;if(ct.log("MediaStream provided by the application"),ct.debug(m),o.update&&a.myStream&&a.myStream!==n.stream&&!a.streamExternal){try{var p=a.myStream.getTracks();for(var h in p){var f=p[h];ct.log(f),null!==f&&void 0!==f&&f.stop()}}catch(x){}a.myStream=null}return a.streamExternal=!0,r.consentDialog(!1),void z(e,i,o,n,m)}if($(o)||ne(o)){if(!ct.isGetUserMediaAvailable())return void n.error("getUserMedia not available");var g={mandatory:{},optional:[]};r.consentDialog(!0);var v=$(o);!0===v&&void 0!=o&&null!=o&&"object"===l(o.audio)&&(v=o.audio);var y=ne(o);if(!0===y&&void 0!=o&&null!=o){var S=!0===n.simulcast,b=!0===n.simulcast2;if(!S&&!b||i||void 0!==o.video&&!1!==o.video||(o.video="hires"),o.video&&"screen"!=o.video&&"window"!=o.video)if("object"===l(o.video))y=o.video;else{var T=0,w=0;"lowres"===o.video?(w=240,T=320):"lowres-16:9"===o.video?(w=180,T=320):"hires"===o.video||"hires-16:9"===o.video||"hdres"===o.video?(w=720,T=1280):"fhdres"===o.video?(w=1080,T=1920):"4kres"===o.video?(w=2160,T=3840):"stdres"===o.video?(w=480,T=640):"stdres-16:9"===o.video?(w=360,T=640):(ct.log("Default video setting is stdres 4:3"),w=480,T=640),ct.log("Adding media constraint:",o.video),y={height:{ideal:w},width:{ideal:T}},ct.log("Adding video constraint:",y)}else if("screen"===o.video||"window"===o.video){var _=function(t,a){r.consentDialog(!1),t?n.error(t):z(e,i,o,n,a)},E=function(e,t,n){ct.log("Adding media constraint (screen capture)"),ct.debug(e),navigator.mediaDevices.getUserMedia(e).then((function(e){n?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(n){e.addTrack(n.getAudioTracks()[0]),t(null,e)})):t(null,e)}))["catch"]((function(e){r.consentDialog(!1),t(e)}))};if(o.screenshareFrameRate||(o.screenshareFrameRate=3),navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return void navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(t){r.consentDialog(!1),$(o)&&!o.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(r){t.addTrack(r.getAudioTracks()[0]),z(e,i,o,n,t)})):z(e,i,o,n,t)}),(function(e){r.consentDialog(!1),n.error(e)}));if("chrome"===ct.webRTCAdapter.browserDetails.browser){var k=ct.webRTCAdapter.browserDetails.version,P=33;window.navigator.userAgent.match("Linux")&&(P=35),k>=26&&k<=P?(g={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:o.screenshareFrameRate,maxFrameRate:o.screenshareFrameRate,chromeMediaSource:"screen"}},audio:$(o)&&!o.keepAudio},E(g,_)):ct.extension.getScreen((function(e,t){if(e)return r.consentDialog(!1),n.error(e);g={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:o.screenshareFrameRate,maxFrameRate:o.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},g.video.mandatory.chromeMediaSourceId=t,E(g,_,$(o)&&!o.keepAudio)}))}else if("firefox"===ct.webRTCAdapter.browserDetails.browser){if(!(ct.webRTCAdapter.browserDetails.version>=33)){var I=new Error("NavigatorUserMediaError");return I.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",r.consentDialog(!1),void n.error(I)}g={video:{mozMediaSource:o.video,mediaSource:o.video},audio:$(o)&&!o.keepAudio},E(g,(function(e,t){if(_(e,t),!e)var n=t.currentTime,i=window.setInterval((function(){t||window.clearInterval(i),t.currentTime==n&&(window.clearInterval(i),t.onended&&t.onended()),n=t.currentTime}),500)}))}return}}null!==o&&void 0!==o&&"screen"===o.video||navigator.mediaDevices.enumerateDevices().then((function(t){var a=t.some((function(e){return"audioinput"===e.kind})),s=re(o)||t.some((function(e){return"videoinput"===e.kind})),d=$(o),l=ne(o),c=ee(o),u=ie(o);if(d||l||c||u){var p=!!d&&a,h=!!l&&s;if(!p&&!h)return r.consentDialog(!1),n.error("No capture device found"),!1;if(!p&&c)return r.consentDialog(!1),n.error("Audio capture is required, but no capture device found"),!1;if(!h&&u)return r.consentDialog(!1),n.error("Video capture is required, but no capture device found"),!1}var f={audio:!(!a||o.keepAudio)&&v,video:!(!s||o.keepVideo)&&y};o.encodings&&(f=o.encodings),ct.debug("getUserMedia constraints",f),f.audio||f.video?(console.log("gumConstraints_________",f,o.encodings),navigator.mediaDevices.getUserMedia(o.encodings?o.encodings:f).then((function(t){r.consentDialog(!1),z(e,i,o,n,t)}))["catch"]((function(e){r.consentDialog(!1),n.error({code:e.code,name:e.name,message:e.message})}))):(r.consentDialog(!1),z(e,i,o,n,m))}))["catch"]((function(e){r.consentDialog(!1),n.error("enumerateDevices error",e)}))}else z(e,i,o,n)}function U(e,t){t=t||{},t.success="function"==typeof t.success?t.success:ct.noop,t.error="function"==typeof t.error?t.error:Y;var n=t.jsep,i=C[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return ct.warn("Invalid handle"),void t.error("Invalid handle");var o=i.webrtcStuff;if(void 0!==n&&null!==n){if(null===o.pc)return ct.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),void t.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");o.pc.setRemoteDescription(n).then((function(){if(ct.log("Remote description accepted!"),o.remoteSdp=n.sdp,o.candidates&&o.candidates.length>0){for(var e=0;e<o.candidates.length;e++){var i=o.candidates[e];ct.debug("Adding remote candidate:",i),i&&!0!==i.completed?o.pc.addIceCandidate(i):o.pc.addIceCandidate(ct.endOfCandidates)}o.candidates=[]}t.success()}),t.error)}else t.error("Invalid JSEP")}function V(e,t,n){n=n||{},n.success="function"==typeof n.success?n.success:ct.noop,n.error="function"==typeof n.error?n.error:ct.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:ct.noop;var i=C[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return ct.warn("Invalid handle"),void n.error("Invalid handle");var o=i.webrtcStuff,r=!0===n.simulcast;r?ct.log("Creating offer (iceDone="+o.iceDone+", simulcast="+r+")"):ct.log("Creating offer (iceDone="+o.iceDone+")");var a={};if(ct.unifiedPlan){var s=null,d=null,l=o.pc.getTransceivers();if(l&&l.length>0)for(var c in l){var u=l[c];u.sender&&u.sender.track&&"audio"===u.sender.track.kind||u.receiver&&u.receiver.track&&"audio"===u.receiver.track.kind?s||(s=u):(u.sender&&u.sender.track&&"video"===u.sender.track.kind||u.receiver&&u.receiver.track&&"video"===u.receiver.track.kind)&&(d||(d=u))}var m=$(t),p=te(t);m||p?m&&p?s&&(s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",ct.log("Setting audio transceiver to sendrecv:",s)):m&&!p?s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",ct.log("Setting audio transceiver to sendonly:",s)):!m&&p&&(s?(s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",ct.log("Setting audio transceiver to recvonly:",s)):(s=o.pc.addTransceiver("audio",{direction:"recvonly"}),ct.log("Adding recvonly audio transceiver:",s))):t.removeAudio&&s&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive",ct.log("Setting audio transceiver to inactive:",s));var h=ne(t),f=oe(t);h||f?h&&f?d&&(d.setDirection?d.setDirection("sendrecv"):d.direction="sendrecv",ct.log("Setting video transceiver to sendrecv:",d)):h&&!f?d&&(d.setDirection?d.setDirection("sendonly"):d.direction="sendonly",ct.log("Setting video transceiver to sendonly:",d)):!h&&f&&(d?(d.setDirection?d.setDirection("recvonly"):d.direction="recvonly",ct.log("Setting video transceiver to recvonly:",d)):(d=o.pc.addTransceiver("video",{direction:"recvonly"}),ct.log("Adding recvonly video transceiver:",d))):t.removeVideo&&d&&(d.setDirection?d.setDirection("inactive"):d.direction="inactive",ct.log("Setting video transceiver to inactive:",d))}else a["offerToReceiveAudio"]=te(t),a["offerToReceiveVideo"]=oe(t);var g=!0===n.iceRestart;g&&(a["iceRestart"]=!0),ct.debug(a);var v=ne(t);if(v&&r&&"firefox"===ct.webRTCAdapter.browserDetails.browser){ct.log("Enabling Simulcasting for Firefox (RID)");var y=o.pc.getSenders().find((function(e){return"video"==e.track.kind}));if(y){var S=y.getParameters();S||(S={});var T=b(n.simulcastMaxBitrates);S.encodings=[{rid:"h",active:!0,maxBitrate:T.high},{rid:"m",active:!0,maxBitrate:T.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:T.low,scaleResolutionDownBy:4}],y.setParameters(S)}}o.pc.createOffer(a).then((function(e){ct.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,ct.log("Setting local description"),v&&r&&("chrome"===ct.webRTCAdapter.browserDetails.browser||"safari"===ct.webRTCAdapter.browserDetails.browser?(ct.log("Enabling Simulcasting for Chrome (SDP munging)"),e.sdp=Q(e.sdp)):"firefox"!==ct.webRTCAdapter.browserDetails.browser&&ct.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),o.mySdp=e.sdp,o.pc.setLocalDescription(e)["catch"](n.error),o.mediaConstraints=a,o.iceDone||o.trickle?(ct.log("Offer ready"),ct.debug(n),n.success(e)):ct.log("Waiting for all candidates...")}),n.error)}function H(e,t,n){n=n||{},n.success="function"==typeof n.success?n.success:ct.noop,n.error="function"==typeof n.error?n.error:ct.noop,n.customizeSdp="function"==typeof n.customizeSdp?n.customizeSdp:ct.noop;var i=C[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return ct.warn("Invalid handle"),void n.error("Invalid handle");var o=i.webrtcStuff,r=!0===n.simulcast;r?ct.log("Creating answer (iceDone="+o.iceDone+", simulcast="+r+")"):ct.log("Creating answer (iceDone="+o.iceDone+")");var a=null;if(ct.unifiedPlan){a={};var s=null,d=null,l=o.pc.getTransceivers();if(l&&l.length>0)for(var c in l){var u=l[c];u.sender&&u.sender.track&&"audio"===u.sender.track.kind||u.receiver&&u.receiver.track&&"audio"===u.receiver.track.kind?s||(s=u):(u.sender&&u.sender.track&&"video"===u.sender.track.kind||u.receiver&&u.receiver.track&&"video"===u.receiver.track.kind)&&(d||(d=u))}var m=$(t),p=te(t);if(m||p){if(m&&p){if(s)try{s.setDirection?s.setDirection("sendrecv"):s.direction="sendrecv",ct.log("Setting audio transceiver to sendrecv:",s)}catch(T){ct.error(T)}}else if(m&&!p)try{s&&(s.setDirection?s.setDirection("sendonly"):s.direction="sendonly",ct.log("Setting audio transceiver to sendonly:",s))}catch(T){ct.error(T)}else if(!m&&p)if(s)try{s.setDirection?s.setDirection("recvonly"):s.direction="recvonly",ct.log("Setting audio transceiver to recvonly:",s)}catch(T){ct.error(T)}else s=o.pc.addTransceiver("audio",{direction:"recvonly"}),ct.log("Adding recvonly audio transceiver:",s)}else if(t.removeAudio&&s)try{s.setDirection?s.setDirection("inactive"):s.direction="inactive",ct.log("Setting audio transceiver to inactive:",s)}catch(T){ct.error(T)}var h=ne(t),f=oe(t);if(h||f){if(h&&f){if(d)try{d.setDirection?d.setDirection("sendrecv"):d.direction="sendrecv",ct.log("Setting video transceiver to sendrecv:",d)}catch(T){ct.error(T)}}else if(h&&!f){if(d)try{d.setDirection?d.setDirection("sendonly"):d.direction="sendonly",ct.log("Setting video transceiver to sendonly:",d)}catch(T){ct.error(T)}}else if(!h&&f)if(d)try{d.setDirection?d.setDirection("recvonly"):d.direction="recvonly",ct.log("Setting video transceiver to recvonly:",d)}catch(T){ct.error(T)}else d=o.pc.addTransceiver("video",{direction:"recvonly"}),ct.log("Adding recvonly video transceiver:",d)}else if(t.removeVideo&&d)try{d.setDirection?d.setDirection("inactive"):d.direction="inactive",ct.log("Setting video transceiver to inactive:",d)}catch(T){ct.error(T)}}else a="firefox"==ct.webRTCAdapter.browserDetails.browser||"edge"==ct.webRTCAdapter.browserDetails.browser?{offerToReceiveAudio:te(t),offerToReceiveVideo:oe(t)}:{mandatory:{OfferToReceiveAudio:te(t),OfferToReceiveVideo:oe(t)}};ct.debug(a);var g=ne(t);if(g&&r&&"firefox"===ct.webRTCAdapter.browserDetails.browser){ct.log("Enabling Simulcasting for Firefox (RID)");var v=o.pc.getSenders()[1];ct.log(v);var y=v.getParameters();ct.log(y);var S=b(n.simulcastMaxBitrates);v.setParameters({encodings:[{rid:"high",active:!0,priority:"high",maxBitrate:S.high},{rid:"medium",active:!0,priority:"medium",maxBitrate:S.medium},{rid:"low",active:!0,priority:"low",maxBitrate:S.low}]})}o.pc.createAnswer(a).then((function(e){ct.debug(e);var t={type:e.type,sdp:e.sdp};n.customizeSdp(t),e.sdp=t.sdp,ct.log("Setting local description"),g&&r&&("chrome"===ct.webRTCAdapter.browserDetails.browser?ct.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"):"firefox"!==ct.webRTCAdapter.browserDetails.browser&&ct.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),o.mySdp=e.sdp,o.pc.setLocalDescription(e)["catch"](n.error),o.mediaConstraints=a,o.iceDone||o.trickle?n.success(e):ct.log("Waiting for all candidates...")}),n.error)}function G(e,t){t=t||{},t.success="function"==typeof t.success?t.success:ct.noop,t.error="function"==typeof t.error?t.error:ct.noop;var n=C[e];if(null!==n&&void 0!==n&&null!==n.webrtcStuff&&void 0!==n.webrtcStuff){var i=n.webrtcStuff;ct.log("Sending offer/answer SDP..."),null!==i.mySdp&&void 0!==i.mySdp?(i.mySdp={type:i.pc.localDescription.type,sdp:i.pc.localDescription.sdp},!1===i.trickle&&(i.mySdp["trickle"]=!1),ct.debug(t),i.sdpSent=!0,t.success(i.mySdp)):ct.warn("Local SDP instance is invalid, not sending anything...")}else ct.warn("Invalid handle, not sending anything")}function W(e,t){var n=C[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return ct.warn("Invalid handle"),0;var i=t?"remote":"local",o=n.webrtcStuff;return o.volume[i]||(o.volume[i]={value:0}),o.pc.getStats&&"chrome"===ct.webRTCAdapter.browserDetails.browser?!t||null!==o.remoteStream&&void 0!==o.remoteStream?t||null!==o.myStream&&void 0!==o.myStream?null===o.volume[i].timer||void 0===o.volume[i].timer?(ct.log("Starting "+i+" volume monitor"),o.volume[i].timer=setInterval((function(){o.pc.getStats((function(e){for(var n=e.result(),r=0;r<n.length;r++){var a=n[r];"ssrc"==a.type&&(t&&a.stat("audioOutputLevel")?o.volume[i].value=parseInt(a.stat("audioOutputLevel")):!t&&a.stat("audioInputLevel")&&(o.volume[i].value=parseInt(a.stat("audioInputLevel"))))}}))}),200),0):o.volume[i].value:(ct.warn("Local stream unavailable"),0):(ct.warn("Remote stream unavailable"),0):(ct.warn("Getting the "+i+" volume unsupported by browser"),0)}function J(e,t){var n=C[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return ct.warn("Invalid handle"),!0;var i=n.webrtcStuff;return null===i.pc||void 0===i.pc?(ct.warn("Invalid PeerConnection"),!0):void 0===i.myStream||null===i.myStream?(ct.warn("Invalid local MediaStream"),!0):t?null===i.myStream.getVideoTracks()||void 0===i.myStream.getVideoTracks()||0===i.myStream.getVideoTracks().length?(ct.warn("No video track"),!0):!i.myStream.getVideoTracks()[0].enabled:null===i.myStream.getAudioTracks()||void 0===i.myStream.getAudioTracks()||0===i.myStream.getAudioTracks().length?(ct.warn("No audio track"),!0):!i.myStream.getAudioTracks()[0].enabled}function K(e,t,n){var i=C[e];if(null===i||void 0===i||null===i.webrtcStuff||void 0===i.webrtcStuff)return ct.warn("Invalid handle"),!1;var o=i.webrtcStuff;return null===o.pc||void 0===o.pc?(ct.warn("Invalid PeerConnection"),!1):void 0===o.myStream||null===o.myStream?(ct.warn("Invalid local MediaStream"),!1):t?null===o.myStream.getVideoTracks()||void 0===o.myStream.getVideoTracks()||0===o.myStream.getVideoTracks().length?(ct.warn("No video track"),!1):(o.myStream.getVideoTracks()[0].enabled=!n,!0):null===o.myStream.getAudioTracks()||void 0===o.myStream.getAudioTracks()||0===o.myStream.getAudioTracks().length?(ct.warn("No audio track"),!1):(o.myStream.getAudioTracks()[0].enabled=!n,!0)}function Z(e,t){var n=C[e];if(null===n||void 0===n||null===n.webrtcStuff||void 0===n.webrtcStuff)return ct.warn("Invalid handle"),"Invalid handle";var i=n.webrtcStuff;return null===i.pc||void 0===i.pc?"Invalid PeerConnection":i.pc.getStats?void i.pc.getStats().then((function(e){e.forEach((function(e){if(e){var n=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?n=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(n=!0),n)if(t&&t(e),i.bitrate.bsnow=e.bytesReceived,i.bitrate.tsnow=e.timestamp,null===i.bitrate.bsbefore||null===i.bitrate.tsbefore)i.bitrate.bsbefore=i.bitrate.bsnow,i.bitrate.tsbefore=i.bitrate.tsnow;else{var o=i.bitrate.tsnow-i.bitrate.tsbefore;"safari"==ct.webRTCAdapter.browserDetails.browser&&(o/=1e3);var r=Math.round(8*(i.bitrate.bsnow-i.bitrate.bsbefore)/o);"safari"===ct.webRTCAdapter.browserDetails.browser&&(r=parseInt(r/1e3)),i.bitrate.value=r+" kbits/sec",i.bitrate.bsbefore=i.bitrate.bsnow,i.bitrate.tsbefore=i.bitrate.tsnow}}}))})):(ct.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser")}function q(e){var t=C[e];if(null===t||void 0===t||null===t.webrtcStuff||void 0===t.webrtcStuff)return ct.warn("Invalid handle"),"Invalid handle";var n=t.webrtcStuff;return null===n.pc||void 0===n.pc?"Invalid PeerConnection":n.pc.getStats?null===n.bitrate.timer||void 0===n.bitrate.timer?(ct.log("Starting bitrate timer (via getStats)"),n.bitrate.timer=setInterval((function(){n.pc.getStats().then((function(e){e.forEach((function(e){if(e){var t=!1;if(("video"===e.mediaType||e.id.toLowerCase().indexOf("video")>-1)&&"inbound-rtp"===e.type&&e.id.indexOf("rtcp")<0?t=!0:"ssrc"!=e.type||!e.bytesReceived||"VP8"!==e.googCodecName&&""!==e.googCodecName||(t=!0),t)if(n.bitrate.bsnow=e.bytesReceived,n.bitrate.tsnow=e.timestamp,null===n.bitrate.bsbefore||null===n.bitrate.tsbefore)n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow;else{var i=n.bitrate.tsnow-n.bitrate.tsbefore;"safari"==ct.webRTCAdapter.browserDetails.browser&&(i/=1e3);var o=Math.round(8*(n.bitrate.bsnow-n.bitrate.bsbefore)/i);"safari"===ct.webRTCAdapter.browserDetails.browser&&(o=parseInt(o/1e3)),n.bitrate.value=o+" kbits/sec",n.bitrate.bsbefore=n.bitrate.bsnow,n.bitrate.tsbefore=n.bitrate.tsnow}}}))}))}),1e3),"0 kbits/sec"):n.bitrate.value:(ct.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser")}function Y(e){ct.error("WebRTC error:",e)}function X(e,t){ct.log("Cleaning WebRTC stuff");var o=C[e];if(null!==o&&void 0!==o){var r=o.webrtcStuff;if(null!==r&&void 0!==r){if(!0===t){var a={rtcgw:"hangup",transaction:ct.randomString(12)};null!==o.token&&void 0!==o.token&&(a["token"]=o.token),null!==v&&void 0!==v&&(a["apisecret"]=v),ct.debug("Sending hangup request (handle="+e+"):"),ct.debug(a),n?(a["session_id"]=w,a["handle_id"]=e,i.send(JSON.stringify(a))):ct.httpAPICall(d+"/"+w+"/"+e,{verb:"POST",withCredentials:h,body:a})}r.remoteStream=null,r.volume&&(r.volume["local"]&&r.volume["local"].timer&&clearInterval(r.volume["local"].timer),r.volume["remote"]&&r.volume["remote"].timer&&clearInterval(r.volume["remote"].timer)),r.volume={},r.bitrate.timer&&clearInterval(r.bitrate.timer),r.bitrate.timer=null,r.bitrate.bsnow=null,r.bitrate.bsbefore=null,r.bitrate.tsnow=null,r.bitrate.tsbefore=null,r.bitrate.value=null;try{if(!r.streamExternal&&null!==r.myStream&&void 0!==r.myStream){ct.log("Stopping local stream tracks");var s=r.myStream.getTracks();for(var l in s){var c=s[l];ct.log(c),null!==c&&void 0!==c&&c.stop()}}}catch(u){}r.streamExternal=!1,r.myStream=null;try{r.pc.close()}catch(u){}r.pc=null,r.candidates=null,r.mySdp=null,r.remoteSdp=null,r.iceDone=!1,r.dataChannel={},r.dtmfSender=null}o.oncleanup()}}function Q(e){for(var t=e.split("\r\n"),n=!1,i=[-1],o=[-1],r=null,a=null,s=null,d=null,l=-1,c=0;c<t.length;c++){var u=t[c].match(/m=(\w+) */);if(u){var m=u[1];if("video"===m){if(!(i[0]<0)){l=c;break}n=!0}else if(i[0]>-1){l=c;break}}else if(n){var p=t[c].match(/a=ssrc-group:FID (\d+) (\d+)/);if(p)i[0]=p[1],o[0]=p[2],t.splice(c,1),c--;else{if(i[0]){var h=t[c].match("a=ssrc:"+i[0]+" cname:(.+)");if(h&&(r=h[1]),h=t[c].match("a=ssrc:"+i[0]+" msid:(.+)"),h&&(a=h[1]),h=t[c].match("a=ssrc:"+i[0]+" mslabel:(.+)"),h&&(s=h[1]),h=t[c].match("a=ssrc:"+i[0]+" label:(.+)"),h&&(d=h[1]),0===t[c].indexOf("a=ssrc:"+o[0])){t.splice(c,1),c--;continue}if(0===t[c].indexOf("a=ssrc:"+i[0])){t.splice(c,1),c--;continue}}0!=t[c].length||(t.splice(c,1),c--)}}}if(i[0]<0){l=-1,n=!1;for(c=0;c<t.length;c++){u=t[c].match(/m=(\w+) */);if(u){m=u[1];if("video"===m){if(!(i[0]<0)){l=c;break}n=!0}else if(i[0]>-1){l=c;break}}else if(n){if(i[0]<0){var f=t[c].match(/a=ssrc:(\d+)/);if(f){i[0]=f[1],t.splice(c,1),c--;continue}}else{h=t[c].match("a=ssrc:"+i[0]+" cname:(.+)");if(h&&(r=h[1]),h=t[c].match("a=ssrc:"+i[0]+" msid:(.+)"),h&&(a=h[1]),h=t[c].match("a=ssrc:"+i[0]+" mslabel:(.+)"),h&&(s=h[1]),h=t[c].match("a=ssrc:"+i[0]+" label:(.+)"),h&&(d=h[1]),0===t[c].indexOf("a=ssrc:"+o[0])){t.splice(c,1),c--;continue}if(0===t[c].indexOf("a=ssrc:"+i[0])){t.splice(c,1),c--;continue}}0!=t[c].length||(t.splice(c,1),c--)}}}if(i[0]<0)return ct.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),e;l<0&&(l=t.length),i[1]=Math.floor(4294967295*Math.random()),i[2]=Math.floor(4294967295*Math.random()),o[1]=Math.floor(4294967295*Math.random()),o[2]=Math.floor(4294967295*Math.random());for(c=0;c<i.length;c++)r&&(t.splice(l,0,"a=ssrc:"+i[c]+" cname:"+r),l++),a&&(t.splice(l,0,"a=ssrc:"+i[c]+" msid:"+a),l++),s&&(t.splice(l,0,"a=ssrc:"+i[c]+" mslabel:"+s),l++),d&&(t.splice(l,0,"a=ssrc:"+i[c]+" label:"+d),l++),r&&(t.splice(l,0,"a=ssrc:"+o[c]+" cname:"+r),l++),a&&(t.splice(l,0,"a=ssrc:"+o[c]+" msid:"+a),l++),s&&(t.splice(l,0,"a=ssrc:"+o[c]+" mslabel:"+s),l++),d&&(t.splice(l,0,"a=ssrc:"+o[c]+" label:"+d),l++);return t.splice(l,0,"a=ssrc-group:FID "+i[2]+" "+o[2]),t.splice(l,0,"a=ssrc-group:FID "+i[1]+" "+o[1]),t.splice(l,0,"a=ssrc-group:FID "+i[0]+" "+o[0]),t.splice(l,0,"a=ssrc-group:SIM "+i[0]+" "+i[1]+" "+i[2]),e=t.join("\r\n"),e.endsWith("\r\n")||(e+="\r\n"),e}function $(e){return ct.debug("isAudioSendEnabled:",e),void 0===e||null===e||!1!==e.audio&&(void 0===e.audioSend||null===e.audioSend||!0===e.audioSend)}function ee(e){return ct.debug("isAudioSendRequired:",e),void 0!==e&&null!==e&&(!1!==e.audio&&!1!==e.audioSend&&(void 0!==e.failIfNoAudio&&null!==e.failIfNoAudio&&!0===e.failIfNoAudio))}function te(e){return ct.debug("isAudioRecvEnabled:",e),void 0===e||null===e||!1!==e.audio&&(void 0===e.audioRecv||null===e.audioRecv||!0===e.audioRecv)}function ne(e){return ct.debug("isVideoSendEnabled:",e),void 0===e||null===e||!1!==e.video&&(void 0===e.videoSend||null===e.videoSend||!0===e.videoSend)}function ie(e){return ct.debug("isVideoSendRequired:",e),void 0!==e&&null!==e&&(!1!==e.video&&!1!==e.videoSend&&(void 0!==e.failIfNoVideo&&null!==e.failIfNoVideo&&!0===e.failIfNoVideo))}function oe(e){return ct.debug("isVideoRecvEnabled:",e),void 0===e||null===e||!1!==e.video&&(void 0===e.videoRecv||null===e.videoRecv||!0===e.videoRecv)}function re(e){if(ct.debug("isScreenSendEnabled:",e),void 0===e||null===e)return!1;if("object"!==l(e.video)||"object"!==l(e.video.mandatory))return!1;var t=e.video.mandatory;return t.chromeMediaSource?"desktop"===t.chromeMediaSource||"screen"===t.chromeMediaSource:t.mozMediaSource?"window"===t.mozMediaSource||"screen"===t.mozMediaSource:!!t.mediaSource&&("window"===t.mediaSource||"screen"===t.mediaSource)}function ae(e){return ct.debug("isDataEnabled:",e),"edge"==ct.webRTCAdapter.browserDetails.browser?(ct.warn("Edge doesn't support data channels yet"),!1):void 0!==e&&null!==e&&!0===e.data}function se(e){return ct.debug("isTrickleEnabled:",e),void 0===e||null===e||!0===e}R(e),this.getServer=function(){return d},this.isConnected=function(){return T},this.reconnect=function(e){e=e||{},e.success="function"==typeof e.success?e.success:ct.noop,e.error="function"==typeof e.error?e.error:ct.noop,e["reconnect"]=!0,R(e)},this.getSessionId=function(){return w},this.destroy=function(e){A(e)},this.attach=function(e){D(e)}}ct.useDefaultDependencies=function(e){var t=e&&e.fetch||fetch,n=e&&e.Promise||Promise,i=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new i(e,t)},extension:e&&e.extension||lt,isArray:function(e){return Array.isArray(e)},webRTCAdapter:e&&e.adapter||adapter,httpAPICall:function(e,i){var o={method:i.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};"POST"===i.verb&&(o.headers["Content-Type"]="application/json"),void 0!==i.withCredentials&&(o.credentials=!0===i.withCredentials?"include":i.withCredentials?i.withCredentials:"omit"),void 0!==i.body&&(o.body=JSON.stringify(i.body));var r=t(e,o)["catch"]((function(e){return n.reject({message:"Probably a network error, is the server down?",error:e})}));if(void 0!==i.timeout){var a=new n((function(e,t){var n=setTimeout((function(){return clearTimeout(n),t({message:"Request timed out",timeout:i.timeout})}),i.timeout)}));r=n.race([r,a])}return r.then((function(e){return e.ok?l(i.success)===l(ct.noop)?e.json().then((function(e){i.success(e)}))["catch"]((function(t){return n.reject({message:"Failed to parse response body",error:t,response:e})})):void 0:n.reject({message:"API call failed",response:e})}))["catch"]((function(e){l(i.error)===l(ct.noop)&&i.error(e.message||"<< internal error >>",e)})),r}}},ct.useOldDependencies=function(e){var t=e&&e.jQuery||jQuery,n=e&&e.WebSocket||WebSocket;return{newWebSocket:function(e,t){return new n(e,t)},isArray:function(e){return t.isArray(e)},extension:e&&e.extension||lt,webRTCAdapter:e&&e.adapter||adapter,httpAPICall:function(e,n){var i=void 0!==n.body?{contentType:"application/json",data:JSON.stringify(n.body)}:{},o=void 0!==n.withCredentials?{xhrFields:{withCredentials:n.withCredentials}}:{};return t.ajax(t.extend(i,o,{url:e,type:n.verb,cache:!1,dataType:"json",async:n.async,timeout:n.timeout,success:function(e){l(n.success)===l(ct.noop)&&n.success(e)},error:function(e,t,i){l(n.error)===l(ct.noop)&&n.error(t,i)}}))}}},ct.noop=function(){},ct.dataChanDefaultLabel="JanusDataChannel",ct.endOfCandidates=null,ct.init=function(e){if(e=e||{},e.callback="function"==typeof e.callback?e.callback:ct.noop,!0===ct.initDone)e.callback();else{if("undefined"!=typeof console&&"undefined"!=typeof console.log||(console={log:function(){}}),ct.trace=ct.noop,ct.debug=ct.noop,ct.vdebug=ct.noop,ct.log=ct.noop,ct.warn=ct.noop,ct.error=ct.noop,!0===e.debug||"all"===e.debug)ct.trace=console.trace.bind(console),ct.debug=console.debug.bind(console),ct.vdebug=console.debug.bind(console),ct.log=console.log.bind(console),ct.warn=console.warn.bind(console),ct.error=console.error.bind(console);else if(Array.isArray(e.debug))for(var t in e.debug){var n=e.debug[t];switch(n){case"trace":ct.trace=console.trace.bind(console);break;case"debug":ct.debug=console.debug.bind(console);break;case"vdebug":ct.vdebug=console.debug.bind(console);break;case"log":ct.log=console.log.bind(console);break;case"warn":ct.warn=console.warn.bind(console);break;case"error":ct.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+n+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')");break}}ct.log("Initializing library");var i=e.dependencies||ct.useDefaultDependencies();ct.isArray=i.isArray,ct.webRTCAdapter=i.webRTCAdapter,ct.httpAPICall=i.httpAPICall,ct.newWebSocket=i.newWebSocket,ct.extension=i.extension,ct.extension.init(),ct.listDevices=function(e,t){e="function"==typeof e?e:ct.noop,null==t&&(t={audio:!0,video:!0}),ct.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(t).then((function(t){navigator.mediaDevices.enumerateDevices().then((function(n){ct.debug(n),e(n);try{var i=t.getTracks();for(var o in i){var r=i[o];null!==r&&void 0!==r&&r.stop()}}catch(a){}}))}))["catch"]((function(t){ct.error(t),e([])})):(ct.warn("navigator.mediaDevices unavailable"),e([]))},ct.attachMediaStream=function(e,t){if("chrome"===ct.webRTCAdapter.browserDetails.browser){var n=ct.webRTCAdapter.browserDetails.version;n>=52?e.srcObject=t:"undefined"!==typeof e.src?e.src=URL.createObjectURL(t):ct.error("Error attaching stream to element")}else e.srcObject=t},ct.reattachMediaStream=function(e,t){if("chrome"===ct.webRTCAdapter.browserDetails.browser){var n=ct.webRTCAdapter.browserDetails.version;n>=52?e.srcObject=t.srcObject:"undefined"!==typeof e.src?e.src=t.src:ct.error("Error reattaching stream to element")}else e.srcObject=t.srcObject};var o=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0,r=o?"pagehide":"beforeunload",a=window["on"+r];if(window.addEventListener(r,(function(e){for(var t in ct.log("Closing window"),ct.sessions)null!==ct.sessions[t]&&void 0!==ct.sessions[t]&&ct.sessions[t].destroyOnUnload&&(ct.log("Destroying session "+t),ct.sessions[t].destroy({asyncRequest:!1,notifyDestroyed:!1}));a&&"function"==typeof a&&a()})),ct.safariVp8=!1,"safari"===ct.webRTCAdapter.browserDetails.browser&&ct.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(var t in RTCRtpSender.getCapabilities("video").codecs){var s=RTCRtpSender.getCapabilities("video").codecs[t];if(s&&s.mimeType&&"video/vp8"===s.mimeType.toLowerCase()){ct.safariVp8=!0;break}}ct.safariVp8?ct.log("This version of Safari supports VP8"):ct.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var d=new RTCPeerConnection({},{});d.createOffer({offerToReceiveVideo:!0}).then((function(e){ct.safariVp8=-1!==e.sdp.indexOf("VP8"),ct.safariVp8?ct.log("This version of Safari supports VP8"):ct.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),d.close(),d=null}))}if(ct.unifiedPlan=!1,"firefox"===ct.webRTCAdapter.browserDetails.browser&&ct.webRTCAdapter.browserDetails.version>=59)ct.unifiedPlan=!0;else if("chrome"===ct.webRTCAdapter.browserDetails.browser&&ct.webRTCAdapter.browserDetails.version<72)ct.unifiedPlan=!1;else if("currentDirection"in RTCRtpTransceiver.prototype){var l=new RTCPeerConnection;try{l.addTransceiver("audio"),ct.unifiedPlan=!0}catch(c){}l.close()}else ct.unifiedPlan=!1;ct.initDone=!0,e.callback()}},ct.isWebrtcSupported=function(){return void 0!==window.RTCPeerConnection&&null!==window.RTCPeerConnection},ct.isGetUserMediaAvailable=function(){return void 0!==navigator.mediaDevices&&null!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia&&null!==navigator.mediaDevices.getUserMedia},ct.randomString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",i=0;i<e;i++){var o=Math.floor(Math.random()*t.length);n+=t.substring(o,o+1)}return n},window.Janus=ct;var ut={version:"V1.0",apiDomain:"https://open.ys7.com"},mt={},pt=function(e,t){mt[e]||(mt[e]=[]),mt[e].push(t)},ht=function(){var e=Array.prototype.shift.call(arguments),t=mt[e];if(!t||0===t.length)return!1;for(var n,i=0;n=t[i];i++)n.apply(this,arguments)};function ft(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}var gt=function(){function e(t){c(this,e),p(this,"subscribe",(function(e){var t=ft(),n={cmdType:"subremote",streamtype:e.type,customId:e.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId},i=null;return window["ezuikit-webrtc"].opt.janus.attach({plugin:"rtcgw.plugin.sts",opaqueId:window["ezuikit-webrtc"].opt.opaqueId,success:function(o){console.log("pluginHandle",o),8==e.type?window["ezuikit-webrtc"].opt.subscribeScreenHandle=o:(window["ezuikit-webrtc"].opt["".concat(e.clientId)]=o,1==e.type&&window["ezuikit-webrtc"].opt["".concat(e.clientId)].send({message:{cmdType:"unsubremote",streamtype:2,customId:e.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId},success:function(){},error:function(e){}})),i=o,i.createOffer({media:{videoSend:!1,audioSend:!1,audioRecv:!0,videoRecv:!0,audio:!0,video:!0,data:!1},simulcast:!1,simulcast2:!1,success:function(e){Janus.debug("remoteFeed createOffer Got SDP!"),Janus.debug(e),i.send({message:n,jsep:e})},error:function(e){Janus.error("remoteFeed WebRTC error:",e),t.reject(e)}})},error:function(e){console.error("  -- Error attaching plugin...",e),t.reject(e)},consentDialog:function(e){Janus.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){switch(Janus.log("ICE state changed to "+e),e){case"connected":console.log("ice connect success");break;case"disconnected":console.log("ice connect loss");break}},mediaState:function(e,t){Janus.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){Janus.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},slowLink:function(e,t){Janus.warn("Janus reports problems "+(e?"sending":"receiving")+" packets on this PeerConnection ("+t+" lost packets)")},onmessage:function(e,t){Janus.debug(" ::: Got a message :::"),Janus.debug(e),void 0!==t&&null!==t&&(Janus.debug("Handling SDP as well..."),Janus.debug(t),i.handleRemoteJsep({jsep:t})),"subremoteack"===e["rtcgw"]&&ht("subremoteack",e)},onlocalstream:function(e){},onremotestream:function(n){console.log("remoteStream==================================",n);var i={clientId:e.clientId,stream:n,streamType:e.type};t.resolve(i),ht("remoteStream",i)},ondataopen:function(e){Janus.log("The DataChannel is available!")},ondata:function(e){Janus.debug("We got data from the DataChannel! "+e)},oncleanup:function(){Janus.log(" ::: Got a cleanup notification :::")}}),t.promise})),p(this,"subscribeStream",(function(e){var t=ft(),n={cmdType:"resumesubremote",streamtype:e.type,customId:e.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return window["ezuikit-webrtc"].opt["".concat(e.clientId)]&&window["ezuikit-webrtc"].opt["".concat(e.clientId)].send({message:n,success:function(){t.resolve("success")},error:function(e){t.reject(e)}}),t.promise})),p(this,"unsubscribe",(function(e){var t=ft(),n={cmdType:"unsubremote",streamtype:e.type,customId:e.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return 8==e.type?window["ezuikit-webrtc"].opt.subscribeScreenHandle.send({message:n,success:function(){window["ezuikit-webrtc"].opt.subscribeScreenHandle.detach({noRequest:!1,success:function(){t.resolve("success")}})},error:function(e){t.reject(e)}}):window["ezuikit-webrtc"].opt["".concat(e.clientId)].send({message:n,success:function(){3==e.type?window["ezuikit-webrtc"].opt["".concat(e.clientId)].detach({noRequest:!1,success:function(){t.resolve("success")}}):t.resolve("success")},error:function(e){t.reject(e)}}),t.promise})),p(this,"unsubscribeStream",(function(e){var t=ft(),n={cmdType:"pausesubremote",streamtype:e.type,customId:e.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return window["ezuikit-webrtc"].opt["".concat(e.clientId)].send({message:n,success:function(){t.resolve("success")},error:function(e){t.reject(e)}}),t.promise})),p(this,"listen",(function(){return pt.apply(void 0,arguments)})),this.initEZWEBPlayer(t)}return m(e,[{key:"initEZWEBPlayer",value:function(e){function t(t){if(console.log("data",t),200==t.meta.code){var n=t.data;n.clientId;var i=n.domain;n.internalRoomId;var o=n.wssPath;window["ezuikit-webrtc"].opt.server="wss://".concat(i,"/").concat(o),window["ezuikit-webrtc"].opt.roomParams.internalRoomId=t.data.internalRoomId,window["ezuikit-webrtc"].opt.roomParams.clientId=t.data.clientId;var r={token:"token=".concat(e.rtctoken,"&userId=").concat(e.userId,"&roomId=").concat(e.roomId,"&appId=").concat(e.appId),authtype:23};Janus.init({debug:"all",callback:function(){window["ezuikit-webrtc"].opt.janus=new Janus({server:window["ezuikit-webrtc"].opt.server,success:function(t){t&&e.onMessage(t)},error:function(t){e.handleError(t)},destroyed:function(){}},r)}})}else e.handleError(t.meta)}console.log("params",e),window["ezuikit-webrtc"]={opt:{roomParams:{room:0,userId:e.userId,video:1,internalRoomId:null,roomId:e.roomId,clientId:null,rtctoken:e.rtctoken},janus:null,mainHandle:null,sts:null,screenHandle:null,subscribeScreenHandle:null,opaqueId:"sts-"+Janus.randomString(12),localStreamType:null,server:null,accessToken:e.accessToken,stream:"",screenStream:null,apiDomain:ut.apiDomain,cln:{local:{username:"",client_id:""}}},videoParams:{},audioParams:{},cameraId:null,microphoneId:null,bitrate:1e5,frameRate:15,width:320,height:240},I("".concat(ut.apiDomain,"/api/v3/rtc/wss"),"POST",{appId:e.appId,roomId:e.roomId,customId:e.userId,accessToken:e.accessToken},{"Content-Type":"application/x-www-form-urlencoded",accessToken:e.accessToken},t)}},{key:"getVersion",value:function(){var e=ft();return e.resolve(ut.version),e.promise}},{key:"getSupport",value:function(){var e=ft(),t={isWebrtcSupport:!0,isH264Support:!0},n=document.createElement("video");return n.canPlayType&&(n.canPlayType("video/mp4;codecs=“avc1.64001E”")?t.isH264Support=!0:t.isH264Support=!1),navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia?(t.isWebrtcSupport=!0,e.resolve(t)):(t.isWebrtcSupport=!1,e.reject(t)),e.promise}},{key:"getMediaList",value:function(){var e=ft();return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then((function(t){e.resolve(t)})):e.reject("no devices"),e.promise}},{key:"getCamerasList",value:function(){var e=ft();return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then((function(t){var n=[];t.map((function(e){"videoinput"==e.kind&&n.push(e)})),e.resolve(n)})):e.reject("no devices"),e.promise}},{key:"getMicrophonesList",value:function(){var e=ft();return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then((function(t){var n=[];t.map((function(e){"audioinput"==e.kind&&n.push(e)})),e.resolve(n)})):e.reject("no devices"),e.promise}},{key:"getSpeakersList",value:function(){var e=ft();return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then((function(t){var n=[];t.map((function(e){"audiooutput"==e.kind&&n.push(e)})),e.resolve(n)})):e.reject("no devices"),e.promise}},{key:"play",value:function(e){var t=ft(),n=document.getElementById(e.domId),i=window["ezuikit-webrtc"].opt.cln.local.stream;return Janus.attachMediaStream(n,i),n.play(),document.getElementById(e.domId)?t.resolve("success"):t.reject("no video dom"),t.promise}},{key:"leaveRoom",value:function(e){var t=ft(),n={cmdType:"exitRoom",customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return window["ezuikit-webrtc"].opt.mainHandle.send({message:n,success:function(){window["ezuikit-webrtc"].opt.janus.destroy({success:function(){}}),t.resolve("success")},error:function(e){console.error("  -- Error attaching plugin...",e),t.reject(e)}}),t.promise}},{key:"setCameraDevice",value:function(e){var t=ft();return window["ezuikit-webrtc"].cameraId=e.deviceId,window["ezuikit-webrtc"].opt.sts&&window["ezuikit-webrtc"].opt.sts.createOffer({media:{video:{deviceId:e.deviceId},replaceVideo:!0,audio:1!=window["ezuikit-webrtc"].opt.localStreamType},simulcast:!1,simulcast2:!1,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function(e){console.log("createOffersuccess"),Janus.debug("Got SDP!"),Janus.debug(e),t.resolve("success")},error:function(e){console.log("createOffererror"),Janus.error("WebRTC error:",e),t.reject(e)}}),t.promise}},{key:"setMicrophoneDevice",value:function(e){var t=ft();return window["ezuikit-webrtc"].microphoneId=e.deviceId,window["ezuikit-webrtc"].opt.sts&&window["ezuikit-webrtc"].opt.sts.createOffer({media:{audio:{deviceId:e.deviceId},replaceAudio:!0,video:2!=window["ezuikit-webrtc"].opt.localStreamType},simulcast:!1,simulcast2:!1,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function(e){console.log("createOffersuccess"),Janus.debug("Got SDP!"),Janus.debug(e),t.resolve("success")},error:function(e){console.log("createOffererror"),Janus.error("WebRTC error:",e),t.reject(e)}}),t.promise}},{key:"setVideoProfile",value:function(e){var t=ft(),n={video:{width:e.video.width||360,height:e.video.height||640,frameRate:e.video.frameRate},bitrate:e.video.bitrate||5e5,id:e.id};return window["ezuikit-webrtc"].videoParams=n.video,window["ezuikit-webrtc"].bitrate=1e3*n.bitrate,window["ezuikit-webrtc"].frameRate=e.video.frameRate,window["ezuikit-webrtc"].width=e.video.width,window["ezuikit-webrtc"].height=e.video.height,t.resolve("success"),t.promise}},{key:"setAudioProfile",value:function(e){var t={audio:{deviceId:window["ezuikit-webrtc"].cameraId,sampleRate:e.audio.sampleRate||"32000HZ",sampleSize:e.audio.sampleSize||16,channelCount:e.audio.channelCount||1},id:e.id};window["ezuikit-webrtc"].audioParams=t.audio,console.log("window['ezuikit-webrtc'].videoParams",window["ezuikit-webrtc"])}},{key:"joinRoom",value:function(e){var t=ft();return window["ezuikit-webrtc"].opt.janus.attach({plugin:"rtcgw.plugin.sts",opaqueId:window["ezuikit-webrtc"].opt.opaqueId,success:function(e){console.log("pluginHandle",e),window["ezuikit-webrtc"].opt.mainHandle=e,Janus.debug("Trying a createOffer too (audio/video sendrecv)");var n={cmdType:"enterRoom",customId:window["ezuikit-webrtc"].opt.roomParams.userId,clientId:window["ezuikit-webrtc"].opt.roomParams.clientId,strroomId:window["ezuikit-webrtc"].opt.roomParams.roomId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId,authtype:23,authentication:window["ezuikit-webrtc"].opt.roomParams.rtctoken};e.send({message:n}),t.resolve(e.id)},error:function(e){console.error("  -- Error attaching plugin...",e),t.reject(e)},consentDialog:function(e){Janus.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){switch(Janus.log("ICE state changed to "+e),e){case"connected":console.log("ice connect success");break;case"disconnected":console.log("ice connect loss");break}},mediaState:function(e,t){Janus.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){Janus.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},slowLink:function(e,t){Janus.warn("Janus reports problems "+(e?"sending":"receiving")+" packets on this PeerConnection ("+t+" lost packets)")},onmessage:function(e,t){Janus.debug(" ::: Got a message :::"),Janus.debug(e),void 0!==t&&null!==t&&(Janus.debug("Handling SDP as well..."),Janus.debug(t),window["ezuikit-webrtc"].opt.mainHandle.handleRemoteJsep({jsep:t}));var n=e["result"];if(null!==n&&void 0!==n){if("done"===n)return;n["status"]}"enterRoomack"===e["rtcgw"]&&ht("enterRoomack",e),"clientJoin"===e["rtcgw"]&&ht("clientJoin",e),"clientLeave"===e["rtcgw"]&&ht("clientLeave",e),"stream-added"===e["rtcgw"]&&ht("steam-added",e),"stream-removed"===e["rtcgw"]&&ht("stream-removed",e),"audioleve"===e["rtcgw"]&&ht("audioleve",e),"networkquality"===e["rtcgw"]&&ht("networkquality",e),"error"===e["rtcgw"]&&ht("error",e),"audioleve"===e["rtcgw"]&&ht("audioleve",e),"publishlocalstreamack"===e["rtcgw"]&&ht("publishlocalstreamack",e),"subremoteack"===e["rtcgw"]&&ht("subremoteack",e)},onlocalstream:function(e){console.log("onlocalstream",e),Janus.debug(" ::: Got a local stream :::"),Janus.debug(e),window["ezuikit-webrtc"].opt.cln.local.stream=e},onremotestream:function(e){},ondataopen:function(e){Janus.log("The DataChannel is available!")},ondata:function(e){Janus.debug("We got data from the DataChannel! "+e)},oncleanup:function(){Janus.log(" ::: Got a cleanup notification :::")}}),t.promise}},{key:"getLocalStream",value:function(e){var t=ft();return window["ezuikit-webrtc"].opt.cln.local.stream?t.resolve(window["ezuikit-webrtc"].opt.cln.local.stream):t.reject("no stream"),t.promise}},{key:"getScreenStream",value:function(e){var t=ft();return window["ezuikit-webrtc"].opt.screenStream?t.resolve(window["ezuikit-webrtc"].opt.screenStream):t.reject("no stream"),t.promise}},{key:"suspendStream",value:function(e){var t=this;t.controlStream(e,"suspend")}},{key:"controlStream",value:function(e,t){var n=ft(),i={cmdType:"resume"==t?"resumelocalstream":"pauselocalstream",streamtype:e.type,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return 2==e.type&&window["ezuikit-webrtc"].opt.cln.local.stream.getTracks().forEach((function(e){"audio"==e.kind&&(e.enabled="resume"==t)})),1==e.type&&window["ezuikit-webrtc"].opt.cln.local.stream.getTracks().forEach((function(e){"video"==e.kind&&(e.enabled="resume"==t)})),8==e.type&&(console.log(" window['ezuikit-webrtc'].opt.screenStream.getTracks()",window["ezuikit-webrtc"].opt.screenStream.getTracks()),window["ezuikit-webrtc"].opt.screenStream.getTracks().forEach((function(e){e.enabled="resume"==t}))),3==e.type&&window["ezuikit-webrtc"].opt.cln.local.stream.getTracks().forEach((function(e){e.enabled="resume"==t})),8==e.type?window["ezuikit-webrtc"].opt.screenHandle.send({message:i,success:function(){n.resolve("success")},error:function(e){n.reject(e)}}):window["ezuikit-webrtc"].opt.sts.send({message:i,success:function(){n.resolve("success")},error:function(e){n.reject(e)}}),n.promise}},{key:"resumeStream",value:function(e){var t=this;t.controlStream(e,"resume")}},{key:"publishStream",value:function(e){var t=ft(),n={cmdType:"publishlocalstream",streamtype:e.type,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};8!=e.type&&(window["ezuikit-webrtc"].opt.localStreamType=e.type),window["ezuikit-webrtc"].videoParams;var i={videoSend:!0,audioSend:!0,audioRecv:!0,videoRecv:!0,data:!1,video:"stdres",audio:!0};switch(e.type){case 1:i={videoSend:!0,audioSend:!0,audioRecv:!0,videoRecv:!0,data:!1,video:{deviceId:window["ezuikit-webrtc"].cameraId,width:window["ezuikit-webrtc"].width,height:window["ezuikit-webrtc"].height},audio:!1};break;case 2:i={videoSend:!0,audioSend:!0,audioRecv:!0,videoRecv:!0,data:!1,video:!1,audio:{deviceId:window["ezuikit-webrtc"].microphoneId}};break;case 3:i={videoSend:!0,audioSend:!0,audioRecv:!0,videoRecv:!0,data:!1,video:{deviceId:window["ezuikit-webrtc"].cameraId,width:window["ezuikit-webrtc"].width,height:window["ezuikit-webrtc"].height},audio:{deviceId:window["ezuikit-webrtc"].microphoneId}};break;case 8:i={audioRecv:!1,videoRecv:!0,data:!1,audioSend:!1,videoSend:!0,video:"screen",screenshareFrameRate:3};break}return console.log("media-----------",i),console.log("window['ezuikit-webrtc'].bitrate",window["ezuikit-webrtc"].bitrate),console.log("window['ezuikit-webrtc'].opt.sts",window["ezuikit-webrtc"].opt.sts),window["ezuikit-webrtc"].opt.sts&&8!=e.type?window["ezuikit-webrtc"].opt.sts.createOffer({media:i,simulcast:!1,simulcast2:!1,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function(e){console.log("createOffersuccess"),Janus.debug("Got SDP!"),Janus.debug(e),window["ezuikit-webrtc"].opt.sts.send({message:n,jsep:e}),t.resolve("success")},error:function(e){console.log("createOffererror"),Janus.error("WebRTC error:",e),t.reject(e)}}):window["ezuikit-webrtc"].opt.janus.attach({plugin:"rtcgw.plugin.sts",opaqueId:window["ezuikit-webrtc"].opt.opaqueId,success:function(o){console.log("pluginHandle",o),8==e.type?window["ezuikit-webrtc"].opt.screenHandle=o:window["ezuikit-webrtc"].opt.sts=o,Janus.debug("Trying a createOffer too (audio/video sendrecv)"),o.createOffer({media:i,simulcast:!1,simulcast2:!1,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function(e){console.log("createOffersuccess"),Janus.debug("Got SDP!"),Janus.debug(e),o.send({message:n,jsep:e}),t.resolve("success")},error:function(e){console.log("createOffererror"),Janus.error("WebRTC error:",e),t.reject(e)}})},error:function(e){console.error("  -- Error attaching plugin...",e),t.reject(e)},consentDialog:function(e){Janus.debug("Consent dialog should be "+(e?"on":"off")+" now")},iceState:function(e){switch(Janus.log("ICE state changed to "+e),e){case"connected":console.log("ice connect success");break;case"disconnected":console.log("ice connect loss");break}},mediaState:function(e,t){Janus.log("Janus "+(t?"started":"stopped")+" receiving our "+e)},webrtcState:function(e){Janus.log("Janus says our WebRTC PeerConnection is "+(e?"up":"down")+" now")},slowLink:function(e,t){Janus.warn("Janus reports problems "+(e?"sending":"receiving")+" packets on this PeerConnection ("+t+" lost packets)")},onmessage:function(t,n){console.log("消息回调+++++++++++++++++++++++++++++++++++++++++",t,n),Janus.debug(" ::: Got a message :::"),Janus.debug(t),void 0!==n&&null!==n&&(Janus.debug("Handling SDP as well..."),Janus.debug(n),8==e.type?window["ezuikit-webrtc"].opt.screenHandle.handleRemoteJsep({jsep:n}):window["ezuikit-webrtc"].opt.sts.handleRemoteJsep({jsep:n}))},onlocalstream:function(t){console.log("onlocalstream",t),Janus.debug(" ::: Got a local stream :::"),Janus.debug(t),8==e.type?(window["ezuikit-webrtc"].opt.screenStream=t,t.getVideoTracks()[0].addEventListener("ended",(function(){console.log("停止了屏幕共享-----------------------");var e={cmdType:"unpublishlocalstream",streamtype:8,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};window["ezuikit-webrtc"].opt.screenHandle&&window["ezuikit-webrtc"].opt.screenHandle.send({message:e,success:function(){window["ezuikit-webrtc"].opt.screenHandle.detach({noRequest:!1}),window["ezuikit-webrtc"].opt.screenHandle=null},error:function(e){}})}))):window["ezuikit-webrtc"].opt.cln.local.stream=t},onremotestream:function(e){},ondataopen:function(e){Janus.log("The DataChannel is available!")},ondata:function(e){Janus.debug("We got data from the DataChannel! "+e)},oncleanup:function(){Janus.log(" ::: Got a cleanup notification :::")}}),t.promise}},{key:"unpublishStream",value:function(e){var t=ft(),n={cmdType:"unpublishlocalstream",streamtype:3,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return 8==e.type?window["ezuikit-webrtc"].opt.screenHandle.send({message:d(d({},n),{},{streamtype:8}),success:function(){window["ezuikit-webrtc"].opt.screenHandle.detach({noRequest:!1}),window["ezuikit-webrtc"].opt.screenHandle=null,t.resolve("success")},error:function(e){t.reject(e)}}):window["ezuikit-webrtc"].opt.sts.send({message:n,success:function(){window["ezuikit-webrtc"].opt.sts.detach({noRequest:!1}),window["ezuikit-webrtc"].opt.sts=null,t.resolve("success")},error:function(e){t.reject(e)}}),t.promise}},{key:"ezwebTrigger",value:function(e){var t=window["ezuikit-webrtc"].opt.cln.local.stream,n={stream:t,clientId:"cliendId-".concat(20*Math.random())};ht("steam-added",n)}},{key:"playRemoteSteam",value:function(e){var t=document.getElementById(e.domId);Janus.attachMediaStream(t,e.stream),t.load();var n=t.play();void 0!==n&&n.then((function(){t.play()}))["catch"]((function(e){}))}},{key:"getQuality",value:function(e){window["ezuikit-webrtc"].opt["z3"].getNetworkQuality(e.handleId,(function(e){console.log("NetworkQuality",e)}))}}]),e}();(function(e,t){"object"===l(n)&&"object"===l(n.exports)?n.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("EZUIPlayer requires a window with a document");return t(e)}:t(e)})("undefined"!==typeof window?window:void 0,(function(e,t){var n={Core:h,HLS:x,FLV:R,EZUIKitPlayer:et,EZUIKitHD:dt,EZWebRtc:gt};return e.EZUIKit=n,n}))}).call(this,n("c8ba"),n("62e4")(e))},c9c4:function(e,t,n){},caf3:function(e,t,n){e.exports=n.p+"img/direction-control.9c537859.png"},cfb4:function(e,t,n){"use strict";n("476f")},d7ac:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"status-icon"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.lastPushTime,placement:"top"}},[i("el-button",{staticClass:"tool-item",attrs:{size:"mini"}},[e.status.status?i("img",{attrs:{src:n("b34a"),alt:""}}):i("img",{attrs:{src:n("3e8b"),alt:""}})])],1)],1)},o=[],r={components:{},props:{status:{type:[Boolean,Object],default:function(){return{status:!1,lastPushTime:"无"}}},systime:{type:[String],default:""}},data:function(){return{lastPushTime:"上次推送时间: 无"}},methods:{flush:function(){this.lastPushTime="上次推送时间: "+this.status.lastPushTime}}},a=r,s=(n("f58f"),n("2877")),d=Object(s["a"])(a,i,o,!1,null,"5d2352da",null);t["default"]=d.exports},f1d1:function(e,t,n){},f58f:function(e,t,n){"use strict";n("c9c4")},fc78:function(e,t,n){(function(t){(function(t,n){e.exports=n()})(self,(function(){return function(){var e={"./node_modules/es6-promise/dist/es6-promise.js":
/*!******************************************************!*\
  !*** ./node_modules/es6-promise/dist/es6-promise.js ***!
  \******************************************************/function(e,n,i){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */
(function(t,n){e.exports=n()})(0,(function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function n(e){return"function"===typeof e}var o=void 0;o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var r=o,a=0,s=void 0,d=void 0,l=function(e,t){w[a]=e,w[a+1]=t,a+=2,2===a&&(d?d(C):E())};function c(e){d=e}function u(e){l=e}var m="undefined"!==typeof window?window:void 0,p=m||{},h=p.MutationObserver||p.WebKitMutationObserver,f="undefined"===typeof self&&"undefined"!==typeof t&&"[object process]"==={}.toString.call(t),g="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel;function v(){return function(){return t.nextTick(C)}}function y(){return"undefined"!==typeof s?function(){s(C)}:T()}function S(){var e=0,t=new h(C),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function b(){var e=new MessageChannel;return e.port1.onmessage=C,function(){return e.port2.postMessage(0)}}function T(){var e=setTimeout;return function(){return e(C,1)}}var w=new Array(1e3);function C(){for(var e=0;e<a;e+=2){var t=w[e],n=w[e+1];t(n),w[e]=void 0,w[e+1]=void 0}a=0}function _(){try{var e=Function("return this")().require("vertx");return s=e.runOnLoop||e.runOnContext,y()}catch(t){return T()}}var E=void 0;function k(e,t){var n=this,i=new this.constructor(x);void 0===i[I]&&q(i);var o=n._state;if(o){var r=arguments[o-1];l((function(){return W(o,i,r,n._result)}))}else H(n,i,e,t);return i}function P(e){var t=this;if(e&&"object"===typeof e&&e.constructor===t)return e;var n=new t(x);return z(n,e),n}E=f?v():h?S():g?b():void 0===m?_():T();var I=Math.random().toString(36).substring(2);function x(){}var R=void 0,A=1,D=2;function j(){return new TypeError("You cannot resolve a promise with itself")}function L(){return new TypeError("A promises callback cannot return that same promise.")}function M(e,t,n,i){try{e.call(t,n,i)}catch(o){return o}}function N(e,t,n){l((function(e){var i=!1,o=M(n,t,(function(n){i||(i=!0,t!==n?z(e,n):U(e,n))}),(function(t){i||(i=!0,V(e,t))}),"Settle: "+(e._label||" unknown promise"));!i&&o&&(i=!0,V(e,o))}),e)}function B(e,t){t._state===A?U(e,t._result):t._state===D?V(e,t._result):H(t,void 0,(function(t){return z(e,t)}),(function(t){return V(e,t)}))}function O(e,t,i){t.constructor===e.constructor&&i===k&&t.constructor.resolve===P?B(e,t):void 0===i?U(e,t):n(i)?N(e,t,i):U(e,t)}function z(t,n){if(t===n)V(t,j());else if(e(n)){var i=void 0;try{i=n.then}catch(o){return void V(t,o)}O(t,n,i)}else U(t,n)}function F(e){e._onerror&&e._onerror(e._result),G(e)}function U(e,t){e._state===R&&(e._result=t,e._state=A,0!==e._subscribers.length&&l(G,e))}function V(e,t){e._state===R&&(e._state=D,e._result=t,l(F,e))}function H(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+A]=n,o[r+D]=i,0===r&&e._state&&l(G,e)}function G(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,o=void 0,r=e._result,a=0;a<t.length;a+=3)i=t[a],o=t[a+n],i?W(n,i,o,r):o(r);e._subscribers.length=0}}function W(e,t,i,o){var r=n(i),a=void 0,s=void 0,d=!0;if(r){try{a=i(o)}catch(l){d=!1,s=l}if(t===a)return void V(t,L())}else a=o;t._state!==R||(r&&d?z(t,a):!1===d?V(t,s):e===A?U(t,a):e===D&&V(t,a))}function J(e,t){try{t((function(t){z(e,t)}),(function(t){V(e,t)}))}catch(n){V(e,n)}}var K=0;function Z(){return K++}function q(e){e[I]=K++,e._state=void 0,e._result=void 0,e._subscribers=[]}function Y(){return new Error("Array Methods must be provided an Array")}var X=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(x),this.promise[I]||q(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?U(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&U(this.promise,this._result))):V(this.promise,Y())}return e.prototype._enumerate=function(e){for(var t=0;this._state===R&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===P){var o=void 0,r=void 0,a=!1;try{o=e.then}catch(d){a=!0,r=d}if(o===k&&e._state!==R)this._settledAt(e._state,t,e._result);else if("function"!==typeof o)this._remaining--,this._result[t]=e;else if(n===ie){var s=new n(x);a?V(s,r):O(s,e,o),this._willSettleAt(s,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(i(e),t)},e.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===R&&(this._remaining--,e===D?V(i,n):this._result[t]=n),0===this._remaining&&U(i,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;H(e,void 0,(function(e){return n._settledAt(A,t,e)}),(function(e){return n._settledAt(D,t,e)}))},e}();function Q(e){return new X(this,e).promise}function $(e){var t=this;return r(e)?new t((function(n,i){for(var o=e.length,r=0;r<o;r++)t.resolve(e[r]).then(n,i)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function ee(e){var t=this,n=new t(x);return V(n,e),n}function te(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ne(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ie=function(){function e(t){this[I]=Z(),this._result=this._state=void 0,this._subscribers=[],x!==t&&("function"!==typeof t&&te(),this instanceof e?J(this,t):ne())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this,i=t.constructor;return n(e)?t.then((function(t){return i.resolve(e()).then((function(){return t}))}),(function(t){return i.resolve(e()).then((function(){throw t}))})):t.then(e,e)},e}();function oe(){var e=void 0;if("undefined"!==typeof i.g)e=i.g;else if("undefined"!==typeof self)e=self;else try{e=Function("return this")()}catch(o){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(o){}if("[object Promise]"===n&&!t.cast)return}e.Promise=ie}return ie.prototype.then=k,ie.all=Q,ie.race=$,ie.resolve=P,ie.reject=ee,ie._setScheduler=c,ie._setAsap=u,ie._asap=l,ie.polyfill=oe,ie.Promise=ie,ie}))},"./node_modules/events/events.js":
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/function(e){"use strict";var t,n="object"===typeof Reflect?Reflect:null,i=n&&"function"===typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function o(e){console&&console.warn&&console.warn(e)}t=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!==e};function a(){a.init.call(this)}e.exports=a,e.exports.once=y,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function d(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var r,a,s;if(d(n),a=e._events,void 0===a?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]),void 0===s)s=a[t]=n,++e._eventsCount;else if("function"===typeof s?s=a[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),r=l(e),r>0&&s.length>r&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,o(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=u.bind(i);return o.listener=n,i.wrapFn=o,o}function p(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"===typeof o?n?[o.listener||o]:[o]:n?v(o):f(o,o.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function v(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function y(e,t){return new Promise((function(n,i){function o(n){e.removeListener(t,r),i(n)}function r(){"function"===typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}b(e,t,r,{once:!0}),"error"!==t&&S(e,o,{once:!0})}))}function S(e,t,n){"function"===typeof e.on&&b(e,"error",t,n)}function b(e,t,n,i){if("function"===typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(r){i.once&&e.removeEventListener(t,o),n(r)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!==typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,r=this._events;if(void 0!==r)o=o&&void 0===r.error;else if(!o)return!1;if(o){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var d=r[e];if(void 0===d)return!1;if("function"===typeof d)i(d,this,t);else{var l=d.length,c=f(d,l);for(n=0;n<l;++n)i(c[n],this,t)}return!0},a.prototype.addListener=function(e,t){return c(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return c(this,e,t,!0)},a.prototype.once=function(e,t){return d(t),this.on(e,m(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return d(t),this.prependListener(e,m(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,o,r,a;if(d(t),i=this._events,void 0===i)return this;if(n=i[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(o=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){a=n[r].listener,o=r;break}if(o<0)return this;0===o?n.shift():g(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,r=Object.keys(n);for(i=0;i<r.length;++i)o=r[i],"removeListener"!==o&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},a.prototype.listenerCount=h,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},"./node_modules/webworkify-webpack/index.js":
/*!**************************************************!*\
  !*** ./node_modules/webworkify-webpack/index.js ***!
  \**************************************************/function(e,t,n){function i(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var i=n(n.s=ENTRY_MODULE);return i.default||i}var o="[\\.|\\-|\\+|\\w|/|@]+",r="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+o+").*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e){return!isNaN(1*e)}function d(e,t,i){var d={};d[i]=[];var l=t.toString(),c=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!c)return d;var u,m=c[1],p=new RegExp("(\\\\n|\\W)"+a(m)+r,"g");while(u=p.exec(l))"dll-reference"!==u[3]&&d[i].push(u[3]);p=new RegExp("\\("+a(m)+'\\("(dll-reference\\s('+o+'))"\\)\\)'+r,"g");while(u=p.exec(l))e[u[2]]||(d[i].push(u[1]),e[u[2]]=n(u[1]).m),d[u[2]]=d[u[2]]||[],d[u[2]].push(u[4]);for(var h=Object.keys(d),f=0;f<h.length;f++)for(var g=0;g<d[h[f]].length;g++)s(d[h[f]][g])&&(d[h[f]][g]=1*d[h[f]][g]);return d}function l(e){var t=Object.keys(e);return t.reduce((function(t,n){return t||e[n].length>0}),!1)}function c(e,t){var n={main:[t]},i={main:[]},o={main:{}};while(l(n))for(var r=Object.keys(n),a=0;a<r.length;a++){var s=r[a],c=n[s],u=c.pop();if(o[s]=o[s]||{},!o[s][u]&&e[s][u]){o[s][u]=!0,i[s]=i[s]||[],i[s].push(u);for(var m=d(e,e[s][u],s),p=Object.keys(m),h=0;h<p.length;h++)n[p[h]]=n[p[h]]||[],n[p[h]]=n[p[h]].concat(m[p[h]])}}return i}e.exports=function(e,t){t=t||{};var o={main:n.m},r=t.all?{main:Object.keys(o.main)}:c(o,e),a="";Object.keys(r).filter((function(e){return"main"!==e})).forEach((function(e){var t=0;while(r[e][t])t++;r[e].push(t),o[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+r[e].map((function(t){return JSON.stringify(t)+": "+o[e][t].toString()})).join(",")+"});\n"})),a=a+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+r.main.map((function(e){return JSON.stringify(e)+": "+o.main[e].toString()})).join(",")+"}))(self);";var s=new window.Blob([a],{type:"text/javascript"});if(t.bare)return s;var d=window.URL||window.webkitURL||window.mozURL||window.msURL,l=d.createObjectURL(s),u=new window.Worker(l);return u.objectURL=l,u}},"./src/config.js":
/*!***********************!*\
  !*** ./src/config.js ***!
  \***********************/function(e,t,n){"use strict";n.r(t),n.d(t,{defaultConfig:function(){return i},createDefaultConfig:function(){return o}});var i={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function o(){return Object.assign({},i)}},"./src/core/features.js":
/*!******************************!*\
  !*** ./src/core/features.js ***!
  \******************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! ../io/io-controller.js */"./src/io/io-controller.js"),o=n(/*! ../config.js */"./src/config.js"),r=function(){function e(){}return e.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},e.supportNetworkStreamIO=function(){var e=new i.default({},(0,o.createDefaultConfig)()),t=e.loaderType;return e.destroy(),"fetch-stream-loader"==t||"xhr-moz-chunked-loader"==t},e.getNetworkLoaderTypeName=function(){var e=new i.default({},(0,o.createDefaultConfig)()),t=e.loaderType;return e.destroy(),t},e.supportNativeMediaPlayback=function(t){void 0==e.videoElement&&(e.videoElement=window.document.createElement("video"));var n=e.videoElement.canPlayType(t);return"probably"===n||"maybe"==n},e.getFeatureList=function(){var t={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return t.mseFlvPlayback=e.supportMSEH264Playback(),t.networkStreamIO=e.supportNetworkStreamIO(),t.networkLoaderName=e.getNetworkLoaderTypeName(),t.mseLiveFlvPlayback=t.mseFlvPlayback&&t.networkStreamIO,t.nativeMP4H264Playback=e.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),t.nativeWebmVP8Playback=e.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),t.nativeWebmVP9Playback=e.supportNativeMediaPlayback('video/webm; codecs="vp9"'),t},e}();t["default"]=r},"./src/core/media-info.js":
/*!********************************!*\
  !*** ./src/core/media-info.js ***!
  \********************************/function(e,t,n){"use strict";n.r(t);var i=function(){function e(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return e.prototype.isComplete=function(){var e=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,t=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.refFrames&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&e&&t},e.prototype.isSeekable=function(){return!0===this.hasKeyframesIndex},e.prototype.getNearestKeyframe=function(e){if(null==this.keyframesIndex)return null;var t=this.keyframesIndex,n=this._search(t.times,e);return{index:n,milliseconds:t.times[n],fileposition:t.filepositions[n]}},e.prototype._search=function(e,t){var n=0,i=e.length-1,o=0,r=0,a=i;t<e[0]&&(n=0,r=a+1);while(r<=a){if(o=r+Math.floor((a-r)/2),o===i||t>=e[o]&&t<e[o+1]){n=o;break}e[o]<t?r=o+1:a=o-1}return n},e}();t["default"]=i},"./src/core/media-segment-info.js":
/*!****************************************!*\
  !*** ./src/core/media-segment-info.js ***!
  \****************************************/function(e,t,n){"use strict";n.r(t),n.d(t,{SampleInfo:function(){return i},MediaSegmentInfo:function(){return o},IDRSampleList:function(){return r},MediaSegmentInfoList:function(){return a}});var i=function(){function e(e,t,n,i,o){this.dts=e,this.pts=t,this.duration=n,this.originalDts=i,this.isSyncPoint=o,this.fileposition=null}return e}(),o=function(){function e(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return e.prototype.appendSyncPoint=function(e){e.isSyncPoint=!0,this.syncPoints.push(e)},e}(),r=function(){function e(){this._list=[]}return e.prototype.clear=function(){this._list=[]},e.prototype.appendArray=function(e){var t=this._list;0!==e.length&&(t.length>0&&e[0].originalDts<t[t.length-1].originalDts&&this.clear(),Array.prototype.push.apply(t,e))},e.prototype.getLastSyncPointBeforeDts=function(e){if(0==this._list.length)return null;var t=this._list,n=0,i=t.length-1,o=0,r=0,a=i;e<t[0].dts&&(n=0,r=a+1);while(r<=a){if(o=r+Math.floor((a-r)/2),o===i||e>=t[o].dts&&e<t[o+1].dts){n=o;break}t[o].dts<e?r=o+1:a=o-1}return this._list[n]},e}(),a=function(){function e(e){this._type=e,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return 0===this._list.length},e.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},e.prototype._searchNearestSegmentBefore=function(e){var t=this._list;if(0===t.length)return-2;var n=t.length-1,i=0,o=0,r=n,a=0;if(e<t[0].originalBeginDts)return a=-1,a;while(o<=r){if(i=o+Math.floor((r-o)/2),i===n||e>t[i].lastSample.originalDts&&e<t[i+1].originalBeginDts){a=i;break}t[i].originalBeginDts<e?o=i+1:r=i-1}return a},e.prototype._searchNearestSegmentAfter=function(e){return this._searchNearestSegmentBefore(e)+1},e.prototype.append=function(e){var t=this._list,n=e,i=this._lastAppendLocation,o=0;-1!==i&&i<t.length&&n.originalBeginDts>=t[i].lastSample.originalDts&&(i===t.length-1||i<t.length-1&&n.originalBeginDts<t[i+1].originalBeginDts)?o=i+1:t.length>0&&(o=this._searchNearestSegmentBefore(n.originalBeginDts)+1),this._lastAppendLocation=o,this._list.splice(o,0,n)},e.prototype.getLastSegmentBefore=function(e){var t=this._searchNearestSegmentBefore(e);return t>=0?this._list[t]:null},e.prototype.getLastSampleBefore=function(e){var t=this.getLastSegmentBefore(e);return null!=t?t.lastSample:null},e.prototype.getLastSyncPointBefore=function(e){var t=this._searchNearestSegmentBefore(e),n=this._list[t].syncPoints;while(0===n.length&&t>0)t--,n=this._list[t].syncPoints;return n.length>0?n[n.length-1]:null},e}()},"./src/core/mse-controller.js":
/*!************************************!*\
  !*** ./src/core/mse-controller.js ***!
  \************************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! events */"./node_modules/events/events.js"),o=n.n(i),r=n(/*! ../utils/logger.js */"./src/utils/logger.js"),a=n(/*! ../utils/browser.js */"./src/utils/browser.js"),s=n(/*! ./mse-events.js */"./src/core/mse-events.js"),d=n(/*! ./media-segment-info.js */"./src/core/media-segment-info.js"),l=n(/*! ../utils/exception.js */"./src/utils/exception.js"),c=function(){function e(e){this.TAG="MSEController",this._config=e,this._emitter=new(o()),this._config.isLive&&void 0==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new d.IDRSampleList}return e.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){if(this._mediaSource)throw new l.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var t=this._mediaSource=new window.MediaSource;t.addEventListener("sourceopen",this.e.onSourceOpen),t.addEventListener("sourceended",this.e.onSourceEnded),t.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=e,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),e.src=this._mediaSourceObjectURL},e.prototype.detachMediaElement=function(){if(this._mediaSource){var e=this._mediaSource;for(var t in this._sourceBuffers){var n=this._pendingSegments[t];n.splice(0,n.length),this._pendingSegments[t]=null,this._pendingRemoveRanges[t]=null,this._lastInitSegments[t]=null;var i=this._sourceBuffers[t];if(i){if("closed"!==e.readyState){try{e.removeSourceBuffer(i)}catch(o){r.default.e(this.TAG,o.message)}i.removeEventListener("error",this.e.onSourceBufferError),i.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[t]=null,this._sourceBuffers[t]=null}}if("open"===e.readyState)try{e.endOfStream()}catch(o){r.default.e(this.TAG,o.message)}e.removeEventListener("sourceopen",this.e.onSourceOpen),e.removeEventListener("sourceended",this.e.onSourceEnded),e.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},e.prototype.appendInitSegment=function(e,t){if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(e),void this._pendingSegments[e.type].push(e);var n=e,i=""+n.container;n.codec&&n.codec.length>0&&(i+=";codecs="+n.codec);var o=!1;if(r.default.v(this.TAG,"Received Initialization Segment, mimeType: "+i),this._lastInitSegments[n.type]=n,i!==this._mimeTypes[n.type]){if(this._mimeTypes[n.type])r.default.v(this.TAG,"Notice: "+n.type+" mimeType changed, origin: "+this._mimeTypes[n.type]+", target: "+i);else{o=!0;try{var d=this._sourceBuffers[n.type]=this._mediaSource.addSourceBuffer(i);d.addEventListener("error",this.e.onSourceBufferError),d.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(l){return r.default.e(this.TAG,l.message),void this._emitter.emit(s.default.ERROR,{code:l.code,msg:l.message})}}this._mimeTypes[n.type]=i}t||this._pendingSegments[n.type].push(n),o||this._sourceBuffers[n.type]&&!this._sourceBuffers[n.type].updating&&this._doAppendSegments(),a.default.safari&&"audio/mpeg"===n.container&&n.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=n.mediaDuration/1e3,this._updateMediaSourceDuration())},e.prototype.appendMediaSegment=function(e){var t=e;this._pendingSegments[t.type].push(t),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var n=this._sourceBuffers[t.type];!n||n.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()},e.prototype.seek=function(e){for(var t in this._sourceBuffers)if(this._sourceBuffers[t]){var n=this._sourceBuffers[t];if("open"===this._mediaSource.readyState)try{n.abort()}catch(c){r.default.e(this.TAG,c.message)}this._idrList.clear();var i=this._pendingSegments[t];if(i.splice(0,i.length),"closed"!==this._mediaSource.readyState){for(var o=0;o<n.buffered.length;o++){var s=n.buffered.start(o),d=n.buffered.end(o);this._pendingRemoveRanges[t].push({start:s,end:d})}if(n.updating||this._doRemoveRanges(),a.default.safari){var l=this._lastInitSegments[t];l&&(this._pendingSegments[t].push(l),n.updating||this._doAppendSegments())}}}},e.prototype.endOfStream=function(){var e=this._mediaSource,t=this._sourceBuffers;e&&"open"===e.readyState?t.video&&t.video.updating||t.audio&&t.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,e.endOfStream()):e&&"closed"===e.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)},e.prototype.getNearestKeyframe=function(e){return this._idrList.getLastSyncPointBeforeDts(e)},e.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var e=this._mediaElement.currentTime;for(var t in this._sourceBuffers){var n=this._sourceBuffers[t];if(n){var i=n.buffered;if(i.length>=1&&e-i.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},e.prototype._doCleanupSourceBuffer=function(){var e=this._mediaElement.currentTime;for(var t in this._sourceBuffers){var n=this._sourceBuffers[t];if(n){for(var i=n.buffered,o=!1,r=0;r<i.length;r++){var a=i.start(r),s=i.end(r);if(a<=e&&e<s+3){if(e-a>=this._config.autoCleanupMaxBackwardDuration){o=!0;var d=e-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[t].push({start:a,end:d})}}else s<e&&(o=!0,this._pendingRemoveRanges[t].push({start:a,end:s}))}o&&!n.updating&&this._doRemoveRanges()}}},e.prototype._updateMediaSourceDuration=function(){var e=this._sourceBuffers;if(0!==this._mediaElement.readyState&&"open"===this._mediaSource.readyState&&!(e.video&&e.video.updating||e.audio&&e.audio.updating)){var t=this._mediaSource.duration,n=this._pendingMediaDuration;n>0&&(isNaN(t)||n>t)&&(r.default.v(this.TAG,"Update MediaSource duration from "+t+" to "+n),this._mediaSource.duration=n),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},e.prototype._doRemoveRanges=function(){for(var e in this._pendingRemoveRanges)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating){var t=this._sourceBuffers[e],n=this._pendingRemoveRanges[e];while(n.length&&!t.updating){var i=n.shift();t.remove(i.start,i.end)}}},e.prototype._doAppendSegments=function(){var e=this._pendingSegments;for(var t in e)if(this._sourceBuffers[t]&&!this._sourceBuffers[t].updating&&e[t].length>0){var n=e[t].shift();if(n.timestampOffset){var i=this._sourceBuffers[t].timestampOffset,o=n.timestampOffset/1e3,a=Math.abs(i-o);a>.1&&(r.default.v(this.TAG,"Update MPEG audio timestampOffset from "+i+" to "+o),this._sourceBuffers[t].timestampOffset=o),delete n.timestampOffset}if(!n.data||0===n.data.byteLength)continue;try{this._sourceBuffers[t].appendBuffer(n.data),this._isBufferFull=!1,"video"===t&&n.hasOwnProperty("info")&&this._idrList.appendArray(n.info.syncPoints)}catch(d){this._pendingSegments[t].unshift(n),22===d.code?(this._isBufferFull||this._emitter.emit(s.default.BUFFER_FULL),this._isBufferFull=!0):(r.default.e(this.TAG,d.message),this._emitter.emit(s.default.ERROR,{code:d.code,msg:d.message}))}}},e.prototype._onSourceOpen=function(){if(r.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0){var e=this._pendingSourceBufferInit;while(e.length){var t=e.shift();this.appendInitSegment(t,!0)}}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(s.default.SOURCE_OPEN)},e.prototype._onSourceEnded=function(){r.default.v(this.TAG,"MediaSource onSourceEnded")},e.prototype._onSourceClose=function(){r.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},e.prototype._hasPendingSegments=function(){var e=this._pendingSegments;return e.video.length>0||e.audio.length>0},e.prototype._hasPendingRemoveRanges=function(){var e=this._pendingRemoveRanges;return e.video.length>0||e.audio.length>0},e.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(s.default.UPDATE_END)},e.prototype._onSourceBufferError=function(e){r.default.e(this.TAG,"SourceBuffer Error: "+e)},e}();t["default"]=c},"./src/core/mse-events.js":
/*!********************************!*\
  !*** ./src/core/mse-events.js ***!
  \********************************/function(e,t,n){"use strict";n.r(t);var i={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};t["default"]=i},"./src/core/transmuxer.js":
/*!********************************!*\
  !*** ./src/core/transmuxer.js ***!
  \********************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! events */"./node_modules/events/events.js"),o=n.n(i),r=n(/*! webworkify-webpack */"./node_modules/webworkify-webpack/index.js"),a=n.n(r),s=n(/*! ../utils/logger.js */"./src/utils/logger.js"),d=n(/*! ../utils/logging-control.js */"./src/utils/logging-control.js"),l=n(/*! ./transmuxing-controller.js */"./src/core/transmuxing-controller.js"),c=n(/*! ./transmuxing-events.js */"./src/core/transmuxing-events.js"),u=n(/*! ./media-info.js */"./src/core/media-info.js"),m=function(){function e(e,t){if(this.TAG="Transmuxer",this._emitter=new(o()),t.enableWorker&&"undefined"!==typeof Worker)try{this._worker=a()(/*! ./transmuxing-worker */"./src/core/transmuxing-worker.js"),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[e,t]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},d.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:d.default.getConfig()})}catch(i){s.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new l.default(e,t)}else this._controller=new l.default(e,t);if(this._controller){var n=this._controller;n.on(c.default.IO_ERROR,this._onIOError.bind(this)),n.on(c.default.DEMUX_ERROR,this._onDemuxError.bind(this)),n.on(c.default.INIT_SEGMENT,this._onInitSegment.bind(this)),n.on(c.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),n.on(c.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),n.on(c.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),n.on(c.default.MEDIA_INFO,this._onMediaInfo.bind(this)),n.on(c.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),n.on(c.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),n.on(c.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),n.on(c.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return e.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),d.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.hasWorker=function(){return null!=this._worker},e.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},e.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},e.prototype.seek=function(e){this._worker?this._worker.postMessage({cmd:"seek",param:e}):this._controller.seek(e)},e.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},e.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},e.prototype._onInitSegment=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(c.default.INIT_SEGMENT,e,t)}))},e.prototype._onMediaSegment=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(c.default.MEDIA_SEGMENT,e,t)}))},e.prototype._onLoadingComplete=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(c.default.LOADING_COMPLETE)}))},e.prototype._onRecoveredEarlyEof=function(){var e=this;Promise.resolve().then((function(){e._emitter.emit(c.default.RECOVERED_EARLY_EOF)}))},e.prototype._onMediaInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(c.default.MEDIA_INFO,e)}))},e.prototype._onMetaDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(c.default.METADATA_ARRIVED,e)}))},e.prototype._onScriptDataArrived=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(c.default.SCRIPTDATA_ARRIVED,e)}))},e.prototype._onStatisticsInfo=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(c.default.STATISTICS_INFO,e)}))},e.prototype._onIOError=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(c.default.IO_ERROR,e,t)}))},e.prototype._onDemuxError=function(e,t){var n=this;Promise.resolve().then((function(){n._emitter.emit(c.default.DEMUX_ERROR,e,t)}))},e.prototype._onRecommendSeekpoint=function(e){var t=this;Promise.resolve().then((function(){t._emitter.emit(c.default.RECOMMEND_SEEKPOINT,e)}))},e.prototype._onLoggingConfigChanged=function(e){this._worker&&this._worker.postMessage({cmd:"logging_config",param:e})},e.prototype._onWorkerMessage=function(e){var t=e.data,n=t.data;if("destroyed"===t.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(t.msg){case c.default.INIT_SEGMENT:case c.default.MEDIA_SEGMENT:this._emitter.emit(t.msg,n.type,n.data);break;case c.default.LOADING_COMPLETE:case c.default.RECOVERED_EARLY_EOF:this._emitter.emit(t.msg);break;case c.default.MEDIA_INFO:Object.setPrototypeOf(n,u.default.prototype),this._emitter.emit(t.msg,n);break;case c.default.METADATA_ARRIVED:case c.default.SCRIPTDATA_ARRIVED:case c.default.STATISTICS_INFO:this._emitter.emit(t.msg,n);break;case c.default.IO_ERROR:case c.default.DEMUX_ERROR:this._emitter.emit(t.msg,n.type,n.info);break;case c.default.RECOMMEND_SEEKPOINT:this._emitter.emit(t.msg,n);break;case"logcat_callback":s.default.emitter.emit("log",n.type,n.logcat);break;default:break}},e}();t["default"]=m},"./src/core/transmuxing-controller.js":
/*!********************************************!*\
  !*** ./src/core/transmuxing-controller.js ***!
  \********************************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! events */"./node_modules/events/events.js"),o=n.n(i),r=n(/*! ../utils/logger.js */"./src/utils/logger.js"),a=n(/*! ../utils/browser.js */"./src/utils/browser.js"),s=n(/*! ./media-info.js */"./src/core/media-info.js"),d=n(/*! ../demux/flv-demuxer.js */"./src/demux/flv-demuxer.js"),l=n(/*! ../remux/mp4-remuxer.js */"./src/remux/mp4-remuxer.js"),c=n(/*! ../demux/demux-errors.js */"./src/demux/demux-errors.js"),u=n(/*! ../io/io-controller.js */"./src/io/io-controller.js"),m=n(/*! ./transmuxing-events.js */"./src/core/transmuxing-events.js"),p=function(){function e(e,t){this.TAG="TransmuxingController",this._emitter=new(o()),this._config=t,e.segments||(e.segments=[{duration:e.duration,filesize:e.filesize,url:e.url}]),"boolean"!==typeof e.cors&&(e.cors=!0),"boolean"!==typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e,this._currentSegmentIndex=0;var n=0;this._mediaDataSource.segments.forEach((function(i){i.timestampBase=n,n+=i.duration,i.cors=e.cors,i.withCredentials=e.withCredentials,t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy)})),isNaN(n)||this._mediaDataSource.duration===n||(this._mediaDataSource.duration=n),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return e.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},e.prototype._loadSegment=function(e,t){this._currentSegmentIndex=e;var n=this._mediaDataSource.segments[e],i=this._ioctl=new u.default(n,this._config,e);i.onError=this._onIOException.bind(this),i.onSeeked=this._onIOSeeked.bind(this),i.onComplete=this._onIOComplete.bind(this),i.onRedirect=this._onIORedirect.bind(this),i.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),t?this._demuxer.bindDataSource(this._ioctl):i.onDataArrival=this._onInitChunkArrival.bind(this),i.open(t)},e.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},e.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},e.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},e.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},e.prototype.seek=function(e){if(null!=this._mediaInfo&&this._mediaInfo.isSeekable()){var t=this._searchSegmentIndexContains(e);if(t===this._currentSegmentIndex){var n=this._mediaInfo.segments[t];if(void 0==n)this._pendingSeekTime=e;else{var i=n.getNearestKeyframe(e);this._remuxer.seek(i.milliseconds),this._ioctl.seek(i.fileposition),this._pendingResolveSeekPoint=i.milliseconds}}else{var o=this._mediaInfo.segments[t];if(void 0==o)this._pendingSeekTime=e,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(t);else{i=o.getNearestKeyframe(e);this._internalAbort(),this._remuxer.seek(e),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[t].timestampBase,this._loadSegment(t,i.fileposition),this._pendingResolveSeekPoint=i.milliseconds,this._reportSegmentMediaInfo(t)}}this._enableStatisticsReporter()}},e.prototype._searchSegmentIndexContains=function(e){for(var t=this._mediaDataSource.segments,n=t.length-1,i=0;i<t.length;i++)if(e<t[i].timestampBase){n=i-1;break}return n},e.prototype._onInitChunkArrival=function(e,t){var n=this,i=null,o=0;if(t>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,o=this._demuxer.parseChunks(e,t);else if((i=d.default.probe(e)).match){this._demuxer=new d.default(i,this._config),this._remuxer||(this._remuxer=new l.default(this._config));var a=this._mediaDataSource;void 0==a.duration||isNaN(a.duration)||(this._demuxer.overridedDuration=a.duration),"boolean"===typeof a.hasAudio&&(this._demuxer.overridedHasAudio=a.hasAudio),"boolean"===typeof a.hasVideo&&(this._demuxer.overridedHasVideo=a.hasVideo),this._demuxer.timestampBase=a.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),o=this._demuxer.parseChunks(e,t)}else i=null,r.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then((function(){n._internalAbort()})),this._emitter.emit(m.default.DEMUX_ERROR,c.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),o=0;return o},e.prototype._onMediaInfo=function(e){var t=this;null==this._mediaInfo&&(this._mediaInfo=Object.assign({},e),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,s.default.prototype));var n=Object.assign({},e);Object.setPrototypeOf(n,s.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=n,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&Promise.resolve().then((function(){var e=t._pendingSeekTime;t._pendingSeekTime=null,t.seek(e)}))},e.prototype._onMetaDataArrived=function(e){this._emitter.emit(m.default.METADATA_ARRIVED,e)},e.prototype._onScriptDataArrived=function(e){this._emitter.emit(m.default.SCRIPTDATA_ARRIVED,e)},e.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},e.prototype._onIOComplete=function(e){var t=e,n=t+1;n<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(n)):(this._remuxer.flushStashedSamples(),this._emitter.emit(m.default.LOADING_COMPLETE),this._disableStatisticsReporter())},e.prototype._onIORedirect=function(e){var t=this._ioctl.extraData;this._mediaDataSource.segments[t].redirectedURL=e},e.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(m.default.RECOVERED_EARLY_EOF)},e.prototype._onIOException=function(e,t){r.default.e(this.TAG,"IOException: type = "+e+", code = "+t.code+", msg = "+t.msg),this._emitter.emit(m.default.IO_ERROR,e,t),this._disableStatisticsReporter()},e.prototype._onDemuxException=function(e,t){r.default.e(this.TAG,"DemuxException: type = "+e+", info = "+t),this._emitter.emit(m.default.DEMUX_ERROR,e,t)},e.prototype._onRemuxerInitSegmentArrival=function(e,t){this._emitter.emit(m.default.INIT_SEGMENT,e,t)},e.prototype._onRemuxerMediaSegmentArrival=function(e,t){if(null==this._pendingSeekTime&&(this._emitter.emit(m.default.MEDIA_SEGMENT,e,t),null!=this._pendingResolveSeekPoint&&"video"===e)){var n=t.info.syncPoints,i=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,a.default.safari&&n.length>0&&n[0].originalDts===i&&(i=n[0].pts),this._emitter.emit(m.default.RECOMMEND_SEEKPOINT,i)}},e.prototype._enableStatisticsReporter=function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},e.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype._reportSegmentMediaInfo=function(e){var t=this._mediaInfo.segments[e],n=Object.assign({},t);n.duration=this._mediaInfo.duration,n.segmentCount=this._mediaInfo.segmentCount,delete n.segments,delete n.keyframesIndex,this._emitter.emit(m.default.MEDIA_INFO,n)},e.prototype._reportStatisticsInfo=function(){var e={};e.url=this._ioctl.currentURL,e.hasRedirect=this._ioctl.hasRedirect,e.hasRedirect&&(e.redirectedURL=this._ioctl.currentRedirectedURL),e.speed=this._ioctl.currentSpeed,e.loaderType=this._ioctl.loaderType,e.currentSegmentIndex=this._currentSegmentIndex,e.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(m.default.STATISTICS_INFO,e)},e}();t["default"]=p},"./src/core/transmuxing-events.js":
/*!****************************************!*\
  !*** ./src/core/transmuxing-events.js ***!
  \****************************************/function(e,t,n){"use strict";n.r(t);var i={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"};t["default"]=i},"./src/core/transmuxing-worker.js":
/*!****************************************!*\
  !*** ./src/core/transmuxing-worker.js ***!
  \****************************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! ../utils/logging-control.js */"./src/utils/logging-control.js"),o=n(/*! ../utils/polyfill.js */"./src/utils/polyfill.js"),r=n(/*! ./transmuxing-controller.js */"./src/core/transmuxing-controller.js"),a=n(/*! ./transmuxing-events.js */"./src/core/transmuxing-events.js"),s=function(e){var t=null,n=y.bind(this);function s(t,n){var i={msg:a.default.INIT_SEGMENT,data:{type:t,data:n}};e.postMessage(i,[n.data])}function d(t,n){var i={msg:a.default.MEDIA_SEGMENT,data:{type:t,data:n}};e.postMessage(i,[n.data])}function l(){var t={msg:a.default.LOADING_COMPLETE};e.postMessage(t)}function c(){var t={msg:a.default.RECOVERED_EARLY_EOF};e.postMessage(t)}function u(t){var n={msg:a.default.MEDIA_INFO,data:t};e.postMessage(n)}function m(t){var n={msg:a.default.METADATA_ARRIVED,data:t};e.postMessage(n)}function p(t){var n={msg:a.default.SCRIPTDATA_ARRIVED,data:t};e.postMessage(n)}function h(t){var n={msg:a.default.STATISTICS_INFO,data:t};e.postMessage(n)}function f(t,n){e.postMessage({msg:a.default.IO_ERROR,data:{type:t,info:n}})}function g(t,n){e.postMessage({msg:a.default.DEMUX_ERROR,data:{type:t,info:n}})}function v(t){e.postMessage({msg:a.default.RECOMMEND_SEEKPOINT,data:t})}function y(t,n){e.postMessage({msg:"logcat_callback",data:{type:t,logcat:n}})}o.default.install(),e.addEventListener("message",(function(o){switch(o.data.cmd){case"init":t=new r.default(o.data.param[0],o.data.param[1]),t.on(a.default.IO_ERROR,f.bind(this)),t.on(a.default.DEMUX_ERROR,g.bind(this)),t.on(a.default.INIT_SEGMENT,s.bind(this)),t.on(a.default.MEDIA_SEGMENT,d.bind(this)),t.on(a.default.LOADING_COMPLETE,l.bind(this)),t.on(a.default.RECOVERED_EARLY_EOF,c.bind(this)),t.on(a.default.MEDIA_INFO,u.bind(this)),t.on(a.default.METADATA_ARRIVED,m.bind(this)),t.on(a.default.SCRIPTDATA_ARRIVED,p.bind(this)),t.on(a.default.STATISTICS_INFO,h.bind(this)),t.on(a.default.RECOMMEND_SEEKPOINT,v.bind(this));break;case"destroy":t&&(t.destroy(),t=null),e.postMessage({msg:"destroyed"});break;case"start":t.start();break;case"stop":t.stop();break;case"seek":t.seek(o.data.param);break;case"pause":t.pause();break;case"resume":t.resume();break;case"logging_config":var y=o.data.param;i.default.applyConfig(y),!0===y.enableCallback?i.default.addLogListener(n):i.default.removeLogListener(n);break}}))};t["default"]=s},"./src/demux/amf-parser.js":
/*!*********************************!*\
  !*** ./src/demux/amf-parser.js ***!
  \*********************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! ../utils/logger.js */"./src/utils/logger.js"),o=n(/*! ../utils/utf8-conv.js */"./src/utils/utf8-conv.js"),r=n(/*! ../utils/exception.js */"./src/utils/exception.js"),a=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}(),s=function(){function e(){}return e.parseScriptData=function(t,n,o){var r={};try{var a=e.parseValue(t,n,o),s=e.parseValue(t,n+a.size,o-a.size);r[a.data]=s.data}catch(d){i.default.e("AMF",d.toString())}return r},e.parseObject=function(t,n,i){if(i<3)throw new r.IllegalStateException("Data not enough when parse ScriptDataObject");var o=e.parseString(t,n,i),a=e.parseValue(t,n+o.size,i-o.size),s=a.objectEnd;return{data:{name:o.data,value:a.data},size:o.size+a.size,objectEnd:s}},e.parseVariable=function(t,n,i){return e.parseObject(t,n,i)},e.parseString=function(e,t,n){if(n<2)throw new r.IllegalStateException("Data not enough when parse String");var i,s=new DataView(e,t,n),d=s.getUint16(0,!a);return i=d>0?(0,o.default)(new Uint8Array(e,t+2,d)):"",{data:i,size:2+d}},e.parseLongString=function(e,t,n){if(n<4)throw new r.IllegalStateException("Data not enough when parse LongString");var i,s=new DataView(e,t,n),d=s.getUint32(0,!a);return i=d>0?(0,o.default)(new Uint8Array(e,t+4,d)):"",{data:i,size:4+d}},e.parseDate=function(e,t,n){if(n<10)throw new r.IllegalStateException("Data size invalid when parse Date");var i=new DataView(e,t,n),o=i.getFloat64(0,!a),s=i.getInt16(8,!a);return o+=60*s*1e3,{data:new Date(o),size:10}},e.parseValue=function(t,n,o){if(o<1)throw new r.IllegalStateException("Data not enough when parse Value");var s,d=new DataView(t,n,o),l=1,c=d.getUint8(0),u=!1;try{switch(c){case 0:s=d.getFloat64(1,!a),l+=8;break;case 1:var m=d.getUint8(1);s=!!m,l+=1;break;case 2:var p=e.parseString(t,n+1,o-1);s=p.data,l+=p.size;break;case 3:s={};var h=0;9===(16777215&d.getUint32(o-4,!a))&&(h=3);while(l<o-4){var f=e.parseObject(t,n+l,o-l-h);if(f.objectEnd)break;s[f.data.name]=f.data.value,l+=f.size}if(l<=o-3){var g=16777215&d.getUint32(l-1,!a);9===g&&(l+=3)}break;case 8:s={},l+=4;h=0;9===(16777215&d.getUint32(o-4,!a))&&(h=3);while(l<o-8){var v=e.parseVariable(t,n+l,o-l-h);if(v.objectEnd)break;s[v.data.name]=v.data.value,l+=v.size}if(l<=o-3){g=16777215&d.getUint32(l-1,!a);9===g&&(l+=3)}break;case 9:s=void 0,l=1,u=!0;break;case 10:s=[];var y=d.getUint32(1,!a);l+=4;for(var S=0;S<y;S++){var b=e.parseValue(t,n+l,o-l);s.push(b.data),l+=b.size}break;case 11:var T=e.parseDate(t,n+1,o-1);s=T.data,l+=T.size;break;case 12:var w=e.parseString(t,n+1,o-1);s=w.data,l+=w.size;break;default:l=o,i.default.w("AMF","Unsupported AMF value type "+c)}}catch(C){i.default.e("AMF",C.toString())}return{data:s,size:l,objectEnd:u}},e}();t["default"]=s},"./src/demux/demux-errors.js":
/*!***********************************!*\
  !*** ./src/demux/demux-errors.js ***!
  \***********************************/function(e,t,n){"use strict";n.r(t);var i={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"};t["default"]=i},"./src/demux/exp-golomb.js":
/*!*********************************!*\
  !*** ./src/demux/exp-golomb.js ***!
  \*********************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! ../utils/exception.js */"./src/utils/exception.js"),o=function(){function e(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}return e.prototype.destroy=function(){this._buffer=null},e.prototype._fillCurrentWord=function(){var e=this._total_bytes-this._buffer_index;if(e<=0)throw new i.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var t=Math.min(4,e),n=new Uint8Array(4);n.set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(n.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t},e.prototype.readBits=function(e){if(e>32)throw new i.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(e<=this._current_word_bits_left){var t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}var n=this._current_word_bits_left?this._current_word:0;n>>>=32-this._current_word_bits_left;var o=e-this._current_word_bits_left;this._fillCurrentWord();var r=Math.min(o,this._current_word_bits_left),a=this._current_word>>>32-r;return this._current_word<<=r,this._current_word_bits_left-=r,n=n<<r|a,n},e.prototype.readBool=function(){return 1===this.readBits(1)},e.prototype.readByte=function(){return this.readBits(8)},e.prototype._skipLeadingZero=function(){var e;for(e=0;e<this._current_word_bits_left;e++)if(0!==(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()},e.prototype.readUEG=function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1},e.prototype.readSEG=function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)},e}();t["default"]=o},"./src/demux/flv-demuxer.js":
/*!**********************************!*\
  !*** ./src/demux/flv-demuxer.js ***!
  \**********************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! ../utils/logger.js */"./src/utils/logger.js"),o=n(/*! ./amf-parser.js */"./src/demux/amf-parser.js"),r=n(/*! ./sps-parser.js */"./src/demux/sps-parser.js"),a=n(/*! ./demux-errors.js */"./src/demux/demux-errors.js"),s=n(/*! ../core/media-info.js */"./src/core/media-info.js"),d=n(/*! ../utils/exception.js */"./src/utils/exception.js");function l(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}var c=function(){function e(e,t){this.TAG="FLVDemuxer",this._config=t,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new s.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}()}return e.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},e.probe=function(e){var t=new Uint8Array(e),n={match:!1};if(70!==t[0]||76!==t[1]||86!==t[2]||1!==t[3])return n;var i=(4&t[4])>>>2!==0,o=0!==(1&t[4]),r=l(t,5);return r<9?n:{match:!0,consumed:r,dataOffset:r,hasAudioTrack:i,hasVideoTrack:o}},e.prototype.bindDataSource=function(e){return e.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(e.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(e){this._onTrackMetadata=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(e){this._onMediaInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(e){this._onMetaDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(e){this._onScriptDataArrived=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(e){this._onDataAvailable=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(e){this._timestampBase=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedDuration",{get:function(){return this._duration},set:function(e){this._durationOverrided=!0,this._duration=e,this._mediaInfo.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasAudio",{set:function(e){this._hasAudioFlagOverrided=!0,this._hasAudio=e,this._mediaInfo.hasAudio=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overridedHasVideo",{set:function(e){this._hasVideoFlagOverrided=!0,this._hasVideo=e,this._mediaInfo.hasVideo=e},enumerable:!1,configurable:!0}),e.prototype.resetMediaInfo=function(){this._mediaInfo=new s.default},e.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched},e.prototype.parseChunks=function(t,n){if(!this._onError||!this._onMediaInfo||!this._onTrackMetadata||!this._onDataAvailable)throw new d.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var o=0,r=this._littleEndian;if(0===n){if(!(t.byteLength>13))return 0;var a=e.probe(t);o=a.dataOffset}if(this._firstParse){this._firstParse=!1,n+o!==this._dataOffset&&i.default.w(this.TAG,"First time parsing but chunk byteStart invalid!");var s=new DataView(t,o),l=s.getUint32(0,!r);0!==l&&i.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),o+=4}while(o<t.byteLength){this._dispatch=!0;s=new DataView(t,o);if(o+11+4>t.byteLength)break;var c=s.getUint8(0),u=16777215&s.getUint32(0,!r);if(o+11+u+4>t.byteLength)break;if(8===c||9===c||18===c){var m=s.getUint8(4),p=s.getUint8(5),h=s.getUint8(6),f=s.getUint8(7),g=h|p<<8|m<<16|f<<24,v=16777215&s.getUint32(7,!r);0!==v&&i.default.w(this.TAG,"Meet tag which has StreamID != 0!");var y=o+11;switch(c){case 8:this._parseAudioData(t,y,u,g);break;case 9:this._parseVideoData(t,y,u,g,n+o);break;case 18:this._parseScriptData(t,y,u);break}var S=s.getUint32(11+u,!r);S!==11+u&&i.default.w(this.TAG,"Invalid PrevTagSize "+S),o+=11+u+4}else i.default.w(this.TAG,"Unsupported tag type "+c+", skipped"),o+=11+u+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),o},e.prototype._parseScriptData=function(e,t,n){var r=o.default.parseScriptData(e,t,n);if(r.hasOwnProperty("onMetaData")){if(null==r.onMetaData||"object"!==typeof r.onMetaData)return void i.default.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&i.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=r;var a=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},a)),"boolean"===typeof a.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=a.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"===typeof a.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=a.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"===typeof a.audiodatarate&&(this._mediaInfo.audioDataRate=a.audiodatarate),"number"===typeof a.videodatarate&&(this._mediaInfo.videoDataRate=a.videodatarate),"number"===typeof a.width&&(this._mediaInfo.width=a.width),"number"===typeof a.height&&(this._mediaInfo.height=a.height),"number"===typeof a.duration){if(!this._durationOverrided){var s=Math.floor(a.duration*this._timescale);this._duration=s,this._mediaInfo.duration=s}}else this._mediaInfo.duration=0;if("number"===typeof a.framerate){var d=Math.floor(1e3*a.framerate);if(d>0){var l=d/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=l,this._referenceFrameRate.fps_num=d,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=l}}if("object"===typeof a.keyframes){this._mediaInfo.hasKeyframesIndex=!0;var c=a.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(c),a.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=a,i.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(r).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},r))},e.prototype._parseKeyframesIndex=function(e){for(var t=[],n=[],i=1;i<e.times.length;i++){var o=this._timestampBase+Math.floor(1e3*e.times[i]);t.push(o),n.push(e.filepositions[i])}return{times:t,filepositions:n}},e.prototype._parseAudioData=function(e,t,n,o){if(n<=1)i.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){this._littleEndian;var r=new DataView(e,t,n),s=r.getUint8(0),d=s>>>4;if(2===d||10===d){var l=0,c=(12&s)>>>2;if(c>=0&&c<=4){l=this._flvSoundRateTable[c];var u=1&s,m=this._audioMetadata,p=this._audioTrack;if(m||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),m=this._audioMetadata={},m.type="audio",m.id=p.id,m.timescale=this._timescale,m.duration=this._duration,m.audioSampleRate=l,m.channelCount=0===u?1:2),10===d){var h=this._parseAACAudioData(e,t+1,n-1);if(void 0==h)return;if(0===h.packetType){m.config&&i.default.w(this.TAG,"Found another AudioSpecificConfig!");var f=h.data;m.audioSampleRate=f.samplingRate,m.channelCount=f.channelCount,m.codec=f.codec,m.originalCodec=f.originalCodec,m.config=f.config,m.refSampleDuration=1024/m.audioSampleRate*m.timescale,i.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",m);var g=this._mediaInfo;g.audioCodec=m.originalCodec,g.audioSampleRate=m.audioSampleRate,g.audioChannelCount=m.channelCount,g.hasVideo?null!=g.videoCodec&&(g.mimeType='video/x-flv; codecs="'+g.videoCodec+","+g.audioCodec+'"'):g.mimeType='video/x-flv; codecs="'+g.audioCodec+'"',g.isComplete()&&this._onMediaInfo(g)}else if(1===h.packetType){var v=this._timestampBase+o,y={unit:h.data,length:h.data.byteLength,dts:v,pts:v};p.samples.push(y),p.length+=h.data.length}else i.default.e(this.TAG,"Flv: Unsupported AAC data type "+h.packetType)}else if(2===d){if(!m.codec){f=this._parseMP3AudioData(e,t+1,n-1,!0);if(void 0==f)return;m.audioSampleRate=f.samplingRate,m.channelCount=f.channelCount,m.codec=f.codec,m.originalCodec=f.originalCodec,m.refSampleDuration=1152/m.audioSampleRate*m.timescale,i.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",m);g=this._mediaInfo;g.audioCodec=m.codec,g.audioSampleRate=m.audioSampleRate,g.audioChannelCount=m.channelCount,g.audioDataRate=f.bitRate,g.hasVideo?null!=g.videoCodec&&(g.mimeType='video/x-flv; codecs="'+g.videoCodec+","+g.audioCodec+'"'):g.mimeType='video/x-flv; codecs="'+g.audioCodec+'"',g.isComplete()&&this._onMediaInfo(g)}var S=this._parseMP3AudioData(e,t+1,n-1,!1);if(void 0==S)return;v=this._timestampBase+o;var b={unit:S,length:S.byteLength,dts:v,pts:v};p.samples.push(b),p.length+=S.length}}else this._onError(a.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+c)}else this._onError(a.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+d)}},e.prototype._parseAACAudioData=function(e,t,n){if(!(n<=1)){var o={},r=new Uint8Array(e,t,n);return o.packetType=r[0],0===r[0]?o.data=this._parseAACAudioSpecificConfig(e,t+1,n-1):o.data=r.subarray(1),o}i.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")},e.prototype._parseAACAudioSpecificConfig=function(e,t,n){var i=new Uint8Array(e,t,n),o=null,r=0,s=0,d=0,l=null;if(r=s=i[0]>>>3,d=(7&i[0])<<1|i[1]>>>7,d<0||d>=this._mpegSamplingRates.length)this._onError(a.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var c=this._mpegSamplingRates[d],u=(120&i[1])>>>3;if(!(u<0||u>=8)){5===r&&(l=(7&i[1])<<1|i[2]>>>7,(124&i[2])>>>2);var m=self.navigator.userAgent.toLowerCase();return-1!==m.indexOf("firefox")?d>=6?(r=5,o=new Array(4),l=d-3):(r=2,o=new Array(2),l=d):-1!==m.indexOf("android")?(r=2,o=new Array(2),l=d):(r=5,l=d,o=new Array(4),d>=6?l=d-3:1===u&&(r=2,o=new Array(2),l=d)),o[0]=r<<3,o[0]|=(15&d)>>>1,o[1]=(15&d)<<7,o[1]|=(15&u)<<3,5===r&&(o[1]|=(15&l)>>>1,o[2]=(1&l)<<7,o[2]|=8,o[3]=0),{config:o,samplingRate:c,channelCount:u,codec:"mp4a.40."+r,originalCodec:"mp4a.40."+s}}this._onError(a.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}},e.prototype._parseMP3AudioData=function(e,t,n,o){if(!(n<4)){this._littleEndian;var r=new Uint8Array(e,t,n),a=null;if(o){if(255!==r[0])return;var s=r[1]>>>3&3,d=(6&r[1])>>1,l=(240&r[2])>>>4,c=(12&r[2])>>>2,u=r[3]>>>6&3,m=3!==u?2:1,p=0,h=0,f="mp3";switch(s){case 0:p=this._mpegAudioV25SampleRateTable[c];break;case 2:p=this._mpegAudioV20SampleRateTable[c];break;case 3:p=this._mpegAudioV10SampleRateTable[c];break}switch(d){case 1:34,l<this._mpegAudioL3BitRateTable.length&&(h=this._mpegAudioL3BitRateTable[l]);break;case 2:33,l<this._mpegAudioL2BitRateTable.length&&(h=this._mpegAudioL2BitRateTable[l]);break;case 3:32,l<this._mpegAudioL1BitRateTable.length&&(h=this._mpegAudioL1BitRateTable[l]);break}a={bitRate:h,samplingRate:p,channelCount:m,codec:f,originalCodec:f}}else a=r;return a}i.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")},e.prototype._parseVideoData=function(e,t,n,o,r){if(n<=1)i.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else if(!0!==this._hasVideoFlagOverrided||!1!==this._hasVideo){var s=new Uint8Array(e,t,n)[0],d=(240&s)>>>4,l=15&s;7===l?this._parseAVCVideoPacket(e,t+1,n-1,o,r,d):this._onError(a.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+l)}},e.prototype._parseAVCVideoPacket=function(e,t,n,o,r,s){if(n<4)i.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var d=this._littleEndian,l=new DataView(e,t,n),c=l.getUint8(0),u=16777215&l.getUint32(0,!d),m=u<<8>>8;if(0===c)this._parseAVCDecoderConfigurationRecord(e,t+4,n-4);else if(1===c)this._parseAVCVideoData(e,t+4,n-4,o,r,s,m);else if(2!==c)return void this._onError(a.default.FORMAT_ERROR,"Flv: Invalid video packet type "+c)}},e.prototype._parseAVCDecoderConfigurationRecord=function(e,t,n){if(n<7)i.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var o=this._videoMetadata,s=this._videoTrack,d=this._littleEndian,l=new DataView(e,t,n);o?"undefined"!==typeof o.avcc&&i.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),o=this._videoMetadata={},o.type="video",o.id=s.id,o.timescale=this._timescale,o.duration=this._duration);var c=l.getUint8(0),u=l.getUint8(1);l.getUint8(2),l.getUint8(3);if(1===c&&0!==u)if(this._naluLengthSize=1+(3&l.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var m=31&l.getUint8(5);if(0!==m){m>1&&i.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+m);for(var p=6,h=0;h<m;h++){var f=l.getUint16(p,!d);if(p+=2,0!==f){var g=new Uint8Array(e,t+p,f);p+=f;var v=r.default.parseSPS(g);if(0===h){o.codecWidth=v.codec_size.width,o.codecHeight=v.codec_size.height,o.presentWidth=v.present_size.width,o.presentHeight=v.present_size.height,o.profile=v.profile_string,o.level=v.level_string,o.bitDepth=v.bit_depth,o.chromaFormat=v.chroma_format,o.sarRatio=v.sar_ratio,o.frameRate=v.frame_rate,!1!==v.frame_rate.fixed&&0!==v.frame_rate.fps_num&&0!==v.frame_rate.fps_den||(o.frameRate=this._referenceFrameRate);var y=o.frameRate.fps_den,S=o.frameRate.fps_num;o.refSampleDuration=o.timescale*(y/S);for(var b=g.subarray(1,4),T="avc1.",w=0;w<3;w++){var C=b[w].toString(16);C.length<2&&(C="0"+C),T+=C}o.codec=T;var _=this._mediaInfo;_.width=o.codecWidth,_.height=o.codecHeight,_.fps=o.frameRate.fps,_.profile=o.profile,_.level=o.level,_.refFrames=v.ref_frames,_.chromaFormat=v.chroma_format_string,_.sarNum=o.sarRatio.width,_.sarDen=o.sarRatio.height,_.videoCodec=T,_.hasAudio?null!=_.audioCodec&&(_.mimeType='video/x-flv; codecs="'+_.videoCodec+","+_.audioCodec+'"'):_.mimeType='video/x-flv; codecs="'+_.videoCodec+'"',_.isComplete()&&this._onMediaInfo(_)}}}var E=l.getUint8(p);if(0!==E){E>1&&i.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+E),p++;for(h=0;h<E;h++){f=l.getUint16(p,!d);p+=2,0!==f&&(p+=f)}o.avcc=new Uint8Array(n),o.avcc.set(new Uint8Array(e,t,n),0),i.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",o)}else this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(a.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(a.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}},e.prototype._parseAVCVideoData=function(e,t,n,o,r,a,s){var d=this._littleEndian,l=new DataView(e,t,n),c=[],u=0,m=0,p=this._naluLengthSize,h=this._timestampBase+o,f=1===a;while(m<n){if(m+4>=n){i.default.w(this.TAG,"Malformed Nalu near timestamp "+h+", offset = "+m+", dataSize = "+n);break}var g=l.getUint32(m,!d);if(3===p&&(g>>>=8),g>n-p)return void i.default.w(this.TAG,"Malformed Nalus near timestamp "+h+", NaluSize > DataSize!");var v=31&l.getUint8(m+p);5===v&&(f=!0);var y=new Uint8Array(e,t+m,p+g),S={type:v,data:y};c.push(S),u+=y.byteLength,m+=p+g}if(c.length){var b=this._videoTrack,T={units:c,length:u,isKeyframe:f,dts:h,cts:s,pts:h+s};f&&(T.fileposition=r),b.samples.push(T),b.length+=u}},e}();t["default"]=c},"./src/demux/sps-parser.js":
/*!*********************************!*\
  !*** ./src/demux/sps-parser.js ***!
  \*********************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! ./exp-golomb.js */"./src/demux/exp-golomb.js"),o=function(){function e(){}return e._ebsp2rbsp=function(e){for(var t=e,n=t.byteLength,i=new Uint8Array(n),o=0,r=0;r<n;r++)r>=2&&3===t[r]&&0===t[r-1]&&0===t[r-2]||(i[o]=t[r],o++);return new Uint8Array(i.buffer,0,o)},e.parseSPS=function(t){var n=e._ebsp2rbsp(t),o=new i.default(n);o.readByte();var r=o.readByte();o.readByte();var a=o.readByte();o.readUEG();var s=e.getProfileString(r),d=e.getLevelString(a),l=1,c=420,u=[0,420,422,444],m=8;if((100===r||110===r||122===r||244===r||44===r||83===r||86===r||118===r||128===r||138===r||144===r)&&(l=o.readUEG(),3===l&&o.readBits(1),l<=3&&(c=u[l]),m=o.readUEG()+8,o.readUEG(),o.readBits(1),o.readBool()))for(var p=3!==l?8:12,h=0;h<p;h++)o.readBool()&&(h<6?e._skipScalingList(o,16):e._skipScalingList(o,64));o.readUEG();var f=o.readUEG();if(0===f)o.readUEG();else if(1===f){o.readBits(1),o.readSEG(),o.readSEG();var g=o.readUEG();for(h=0;h<g;h++)o.readSEG()}var v=o.readUEG();o.readBits(1);var y=o.readUEG(),S=o.readUEG(),b=o.readBits(1);0===b&&o.readBits(1),o.readBits(1);var T=0,w=0,C=0,_=0,E=o.readBool();E&&(T=o.readUEG(),w=o.readUEG(),C=o.readUEG(),_=o.readUEG());var k=1,P=1,I=0,x=!0,R=0,A=0,D=o.readBool();if(D){if(o.readBool()){var j=o.readByte(),L=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],M=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];j>0&&j<16?(k=L[j-1],P=M[j-1]):255===j&&(k=o.readByte()<<8|o.readByte(),P=o.readByte()<<8|o.readByte())}if(o.readBool()&&o.readBool(),o.readBool()&&(o.readBits(4),o.readBool()&&o.readBits(24)),o.readBool()&&(o.readUEG(),o.readUEG()),o.readBool()){var N=o.readBits(32),B=o.readBits(32);x=o.readBool(),R=B,A=2*N,I=R/A}}var O=1;1===k&&1===P||(O=k/P);var z=0,F=0;if(0===l)z=1,F=2-b;else{var U=3===l?1:2,V=1===l?2:1;z=U,F=V*(2-b)}var H=16*(y+1),G=16*(S+1)*(2-b);H-=(T+w)*z,G-=(C+_)*F;var W=Math.ceil(H*O);return o.destroy(),o=null,{profile_string:s,level_string:d,bit_depth:m,ref_frames:v,chroma_format:c,chroma_format_string:e.getChromaFormatString(c),frame_rate:{fixed:x,fps:I,fps_den:A,fps_num:R},sar_ratio:{width:k,height:P},codec_size:{width:H,height:G},present_size:{width:W,height:G}}},e._skipScalingList=function(e,t){for(var n=8,i=8,o=0,r=0;r<t;r++)0!==i&&(o=e.readSEG(),i=(n+o+256)%256),n=0===i?n:i},e.getProfileString=function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},e.getLevelString=function(e){return(e/10).toFixed(1)},e.getChromaFormatString=function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},e}();t["default"]=o},"./src/flv.js":
/*!********************!*\
  !*** ./src/flv.js ***!
  \********************/function(e,t,n){"use strict";n.r(t);var i=n(/*! ./utils/polyfill.js */"./src/utils/polyfill.js"),o=n(/*! ./core/features.js */"./src/core/features.js"),r=n(/*! ./io/loader.js */"./src/io/loader.js"),a=n(/*! ./player/flv-player.js */"./src/player/flv-player.js"),s=n(/*! ./player/native-player.js */"./src/player/native-player.js"),d=n(/*! ./player/player-events.js */"./src/player/player-events.js"),l=n(/*! ./player/player-errors.js */"./src/player/player-errors.js"),c=n(/*! ./utils/logging-control.js */"./src/utils/logging-control.js"),u=n(/*! ./utils/exception.js */"./src/utils/exception.js");function m(e,t){var n=e;if(null==n||"object"!==typeof n)throw new u.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!n.hasOwnProperty("type"))throw new u.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(n.type){case"flv":return new a.default(n,t);default:return new s.default(n,t)}}function p(){return o.default.supportMSEH264Playback()}function h(){return o.default.getFeatureList()}i.default.install();var f={};f.createPlayer=m,f.isSupported=p,f.getFeatureList=h,f.BaseLoader=r.BaseLoader,f.LoaderStatus=r.LoaderStatus,f.LoaderErrors=r.LoaderErrors,f.Events=d.default,f.ErrorTypes=l.ErrorTypes,f.ErrorDetails=l.ErrorDetails,f.FlvPlayer=a.default,f.NativePlayer=s.default,f.LoggingControl=c.default,Object.defineProperty(f,"version",{enumerable:!0,get:function(){return"1.6.2"}}),t["default"]=f},"./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/function(e,t,n){e.exports=n(/*! ./flv.js */"./src/flv.js").default},"./src/io/fetch-stream-loader.js":
/*!***************************************!*\
  !*** ./src/io/fetch-stream-loader.js ***!
  \***************************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! ../utils/browser.js */"./src/utils/browser.js"),o=n(/*! ./loader.js */"./src/io/loader.js"),r=n(/*! ../utils/exception.js */"./src/utils/exception.js"),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=function(e){function t(t,n){var i=e.call(this,"fetch-stream-loader")||this;return i.TAG="FetchStreamLoader",i._seekHandler=t,i._config=n,i._needStash=!0,i._requestAbort=!1,i._contentLength=null,i._receivedLength=0,i}return a(t,e),t.isSupported=function(){try{var e=i.default.msedge&&i.default.version.minor>=15048,t=!i.default.msedge||e;return self.fetch&&self.ReadableStream&&t}catch(n){return!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),e.prototype.destroy.call(this)},t.prototype.open=function(e,t){var n=this;this._dataSource=e,this._range=t;var i=e.url;this._config.reuseRedirectedURL&&void 0!=e.redirectedURL&&(i=e.redirectedURL);var a=this._seekHandler.getConfig(i,t),s=new self.Headers;if("object"===typeof a.headers){var d=a.headers;for(var l in d)d.hasOwnProperty(l)&&s.append(l,d[l])}var c={method:"GET",headers:s,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if("object"===typeof this._config.headers)for(var l in this._config.headers)s.append(l,this._config.headers[l]);!1===e.cors&&(c.mode="same-origin"),e.withCredentials&&(c.credentials="include"),e.referrerPolicy&&(c.referrerPolicy=e.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,c.signal=this._abortController.signal),this._status=o.LoaderStatus.kConnecting,self.fetch(a.url,c).then((function(e){if(n._requestAbort)return n._status=o.LoaderStatus.kIdle,void e.body.cancel();if(e.ok&&e.status>=200&&e.status<=299){if(e.url!==a.url&&n._onURLRedirect){var t=n._seekHandler.removeURLParameters(e.url);n._onURLRedirect(t)}var i=e.headers.get("Content-Length");return null!=i&&(n._contentLength=parseInt(i),0!==n._contentLength&&n._onContentLengthKnown&&n._onContentLengthKnown(n._contentLength)),n._pump.call(n,e.body.getReader())}if(n._status=o.LoaderStatus.kError,!n._onError)throw new r.RuntimeException("FetchStreamLoader: Http code invalid, "+e.status+" "+e.statusText);n._onError(o.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})})).catch((function(e){if(!n._abortController||!n._abortController.signal.aborted){if(n._status=o.LoaderStatus.kError,!n._onError)throw e;n._onError(o.LoaderErrors.EXCEPTION,{code:-1,msg:e.message})}}))},t.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==o.LoaderStatus.kBuffering||!i.default.chrome)&&this._abortController)try{this._abortController.abort()}catch(e){}},t.prototype._pump=function(e){var t=this;return e.read().then((function(n){if(n.done)if(null!==t._contentLength&&t._receivedLength<t._contentLength){t._status=o.LoaderStatus.kError;var i=o.LoaderErrors.EARLY_EOF,a={code:-1,msg:"Fetch stream meet Early-EOF"};if(!t._onError)throw new r.RuntimeException(a.msg);t._onError(i,a)}else t._status=o.LoaderStatus.kComplete,t._onComplete&&t._onComplete(t._range.from,t._range.from+t._receivedLength-1);else{if(t._abortController&&t._abortController.signal.aborted)return void(t._status=o.LoaderStatus.kComplete);if(!0===t._requestAbort)return t._status=o.LoaderStatus.kComplete,e.cancel();t._status=o.LoaderStatus.kBuffering;var s=n.value.buffer,d=t._range.from+t._receivedLength;t._receivedLength+=s.byteLength,t._onDataArrival&&t._onDataArrival(s,d,t._receivedLength),t._pump(e)}})).catch((function(e){if(t._abortController&&t._abortController.signal.aborted)t._status=o.LoaderStatus.kComplete;else if(11!==e.code||!i.default.msedge){t._status=o.LoaderStatus.kError;var n=0,a=null;if(19!==e.code&&"network error"!==e.message||!(null===t._contentLength||null!==t._contentLength&&t._receivedLength<t._contentLength)?(n=o.LoaderErrors.EXCEPTION,a={code:e.code,msg:e.message}):(n=o.LoaderErrors.EARLY_EOF,a={code:e.code,msg:"Fetch stream meet Early-EOF"}),!t._onError)throw new r.RuntimeException(a.msg);t._onError(n,a)}}))},t}(o.BaseLoader);t["default"]=s},"./src/io/io-controller.js":
/*!*********************************!*\
  !*** ./src/io/io-controller.js ***!
  \*********************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! ../utils/logger.js */"./src/utils/logger.js"),o=n(/*! ./speed-sampler.js */"./src/io/speed-sampler.js"),r=n(/*! ./loader.js */"./src/io/loader.js"),a=n(/*! ./fetch-stream-loader.js */"./src/io/fetch-stream-loader.js"),s=n(/*! ./xhr-moz-chunked-loader.js */"./src/io/xhr-moz-chunked-loader.js"),d=n(/*! ./xhr-range-loader.js */"./src/io/xhr-range-loader.js"),l=n(/*! ./websocket-loader.js */"./src/io/websocket-loader.js"),c=n(/*! ./range-seek-handler.js */"./src/io/range-seek-handler.js"),u=n(/*! ./param-seek-handler.js */"./src/io/param-seek-handler.js"),m=n(/*! ../utils/exception.js */"./src/utils/exception.js"),p=function(){function e(e,t,n){this.TAG="IOController",this._config=t,this._extraData=n,this._stashInitialSize=393216,void 0!=t.stashInitialSize&&t.stashInitialSize>0&&(this._stashInitialSize=t.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,!1===t.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize?e.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new o.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return e.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},e.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},e.prototype.isPaused=function(){return this._paused},Object.defineProperty(e.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extraData",{get:function(){return this._extraData},set:function(e){this._extraData=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(e){this._onSeeked=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(e){this._onRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(e){this._onRecoveredEarlyEof=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRedirect",{get:function(){return null!=this._redirectedURL||void 0!=this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentSpeed",{get:function(){return this._loaderClass===d.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),e.prototype._selectSeekHandler=function(){var e=this._config;if("range"===e.seekType)this._seekHandler=new c.default(this._config.rangeLoadZeroStart);else if("param"===e.seekType){var t=e.seekParamStart||"bstart",n=e.seekParamEnd||"bend";this._seekHandler=new u.default(t,n)}else{if("custom"!==e.seekType)throw new m.InvalidArgumentException("Invalid seekType in config: "+e.seekType);if("function"!==typeof e.customSeekHandler)throw new m.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new e.customSeekHandler}},e.prototype._selectLoader=function(){if(null!=this._config.customLoader)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=l.default;else if(a.default.isSupported())this._loaderClass=a.default;else if(s.default.isSupported())this._loaderClass=s.default;else{if(!d.default.isSupported())throw new m.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=d.default}},e.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},e.prototype.open=function(e){this._currentRange={from:0,to:-1},e&&(this._currentRange.from=e),this._speedSampler.reset(),e||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},e.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},e.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},e.prototype.resume=function(){if(this._paused){this._paused=!1;var e=this._resumeFrom;this._resumeFrom=0,this._internalSeek(e,!0)}},e.prototype.seek=function(e){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(e,!0)},e.prototype._internalSeek=function(e,t){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(t),this._loader.destroy(),this._loader=null;var n={from:e,to:-1};this._currentRange={from:n.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,n),this._onSeeked&&this._onSeeked()},e.prototype.updateUrl=function(e){if(!e||"string"!==typeof e||0===e.length)throw new m.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=e},e.prototype._expandBuffer=function(e){var t=this._stashSize;while(t+1048576<e)t*=2;if(t+=1048576,t!==this._bufferSize){var n=new ArrayBuffer(t);if(this._stashUsed>0){var i=new Uint8Array(this._stashBuffer,0,this._stashUsed),o=new Uint8Array(n,0,t);o.set(i,0)}this._stashBuffer=n,this._bufferSize=t}},e.prototype._normalizeSpeed=function(e){var t=this._speedNormalizeList,n=t.length-1,i=0,o=0,r=n;if(e<t[0])return t[0];while(o<=r){if(i=o+Math.floor((r-o)/2),i===n||e>=t[i]&&e<t[i+1])return t[i];t[i]<e?o=i+1:r=i-1}},e.prototype._adjustStashSize=function(e){var t=0;t=this._config.isLive||e<512?e:e>=512&&e<=1024?Math.floor(1.5*e):2*e,t>8192&&(t=8192);var n=1024*t+1048576;this._bufferSize<n&&this._expandBuffer(n),this._stashSize=1024*t},e.prototype._dispatchChunks=function(e,t){return this._currentRange.to=t+e.byteLength-1,this._onDataArrival(e,t)},e.prototype._onURLRedirect=function(e){this._redirectedURL=e,this._onRedirect&&this._onRedirect(e)},e.prototype._onContentLengthKnown=function(e){e&&this._fullRequestFlag&&(this._totalLength=e,this._fullRequestFlag=!1)},e.prototype._onLoaderChunkArrival=function(e,t,n){if(!this._onDataArrival)throw new m.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(e.byteLength);var i=this._speedSampler.lastSecondKBps;if(0!==i){var o=this._normalizeSpeed(i);this._speedNormalized!==o&&(this._speedNormalized=o,this._adjustStashSize(o))}if(this._enableStash)if(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=t),this._stashUsed+e.byteLength<=this._stashSize){d=new Uint8Array(this._stashBuffer,0,this._stashSize);d.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength}else{d=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){var r=this._stashBuffer.slice(0,this._stashUsed);a=this._dispatchChunks(r,this._stashByteStart);if(a<r.byteLength){if(a>0){l=new Uint8Array(r,a);d.set(l,0),this._stashUsed=l.byteLength,this._stashByteStart+=a}}else this._stashUsed=0,this._stashByteStart+=a;this._stashUsed+e.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+e.byteLength),d=new Uint8Array(this._stashBuffer,0,this._bufferSize)),d.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength}else{a=this._dispatchChunks(e,t);if(a<e.byteLength){s=e.byteLength-a;s>this._bufferSize&&(this._expandBuffer(s),d=new Uint8Array(this._stashBuffer,0,this._bufferSize)),d.set(new Uint8Array(e,a),0),this._stashUsed+=s,this._stashByteStart=t+a}}}else if(0===this._stashUsed){var a=this._dispatchChunks(e,t);if(a<e.byteLength){var s=e.byteLength-a;s>this._bufferSize&&this._expandBuffer(s);var d=new Uint8Array(this._stashBuffer,0,this._bufferSize);d.set(new Uint8Array(e,a),0),this._stashUsed+=s,this._stashByteStart=t+a}}else{this._stashUsed+e.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+e.byteLength);var d=new Uint8Array(this._stashBuffer,0,this._bufferSize);d.set(new Uint8Array(e),this._stashUsed),this._stashUsed+=e.byteLength;var a=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(a<this._stashUsed&&a>0){var l=new Uint8Array(this._stashBuffer,a);d.set(l,0)}this._stashUsed-=a,this._stashByteStart+=a}}},e.prototype._flushStashBuffer=function(e){if(this._stashUsed>0){var t=this._stashBuffer.slice(0,this._stashUsed),n=this._dispatchChunks(t,this._stashByteStart),o=t.byteLength-n;if(n<t.byteLength){if(!e){if(n>0){var r=new Uint8Array(this._stashBuffer,0,this._bufferSize),a=new Uint8Array(t,n);r.set(a,0),this._stashUsed=a.byteLength,this._stashByteStart+=n}return 0}i.default.w(this.TAG,o+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,o}return 0},e.prototype._onLoaderComplete=function(e,t){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},e.prototype._onLoaderError=function(e,t){switch(i.default.e(this.TAG,"Loader error, code = "+t.code+", msg = "+t.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,e=r.LoaderErrors.UNRECOVERABLE_EARLY_EOF),e){case r.LoaderErrors.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var n=this._currentRange.to+1;return void(n<this._totalLength&&(i.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(n,!1)))}e=r.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break;case r.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case r.LoaderErrors.CONNECTING_TIMEOUT:case r.LoaderErrors.HTTP_STATUS_CODE_INVALID:case r.LoaderErrors.EXCEPTION:break}if(!this._onError)throw new m.RuntimeException("IOException: "+t.msg);this._onError(e,t)},e}();t["default"]=p},"./src/io/loader.js":
/*!**************************!*\
  !*** ./src/io/loader.js ***!
  \**************************/function(e,t,n){"use strict";n.r(t),n.d(t,{LoaderStatus:function(){return o},LoaderErrors:function(){return r},BaseLoader:function(){return a}});var i=n(/*! ../utils/exception.js */"./src/utils/exception.js"),o={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},r={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},a=function(){function e(e){this._type=e||"undefined",this._status=o.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return e.prototype.destroy=function(){this._status=o.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},e.prototype.isWorking=function(){return this._status===o.kConnecting||this._status===o.kBuffering},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(e){this._onContentLengthKnown=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(e){this._onURLRedirect=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(e){this._onDataArrival=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},set:function(e){this._onError=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{get:function(){return this._onComplete},set:function(e){this._onComplete=e},enumerable:!1,configurable:!0}),e.prototype.open=function(e,t){throw new i.NotImplementedException("Unimplemented abstract function!")},e.prototype.abort=function(){throw new i.NotImplementedException("Unimplemented abstract function!")},e}()},"./src/io/param-seek-handler.js":
/*!**************************************!*\
  !*** ./src/io/param-seek-handler.js ***!
  \**************************************/function(e,t,n){"use strict";n.r(t);var i=function(){function e(e,t){this._startName=e,this._endName=t}return e.prototype.getConfig=function(e,t){var n=e;if(0!==t.from||-1!==t.to){var i=!0;-1===n.indexOf("?")&&(n+="?",i=!1),i&&(n+="&"),n+=this._startName+"="+t.from.toString(),-1!==t.to&&(n+="&"+this._endName+"="+t.to.toString())}return{url:n,headers:{}}},e.prototype.removeURLParameters=function(e){var t=e.split("?")[0],n=void 0,i=e.indexOf("?");-1!==i&&(n=e.substring(i+1));var o="";if(void 0!=n&&n.length>0)for(var r=n.split("&"),a=0;a<r.length;a++){var s=r[a].split("="),d=a>0;s[0]!==this._startName&&s[0]!==this._endName&&(d&&(o+="&"),o+=r[a])}return 0===o.length?t:t+"?"+o},e}();t["default"]=i},"./src/io/range-seek-handler.js":
/*!**************************************!*\
  !*** ./src/io/range-seek-handler.js ***!
  \**************************************/function(e,t,n){"use strict";n.r(t);var i=function(){function e(e){this._zeroStart=e||!1}return e.prototype.getConfig=function(e,t){var n={};if(0!==t.from||-1!==t.to){var i=void 0;i=-1!==t.to?"bytes="+t.from.toString()+"-"+t.to.toString():"bytes="+t.from.toString()+"-",n["Range"]=i}else this._zeroStart&&(n["Range"]="bytes=0-");return{url:e,headers:n}},e.prototype.removeURLParameters=function(e){return e},e}();t["default"]=i},"./src/io/speed-sampler.js":
/*!*********************************!*\
  !*** ./src/io/speed-sampler.js ***!
  \*********************************/function(e,t,n){"use strict";n.r(t);var i=function(){function e(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return e.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},e.prototype.addBytes=function(e){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=e,this._totalBytes+=e):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=e,this._totalBytes+=e):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=e,this._totalBytes+=e,this._lastCheckpoint=this._now())},Object.defineProperty(e.prototype,"currentKBps",{get:function(){this.addBytes(0);var e=(this._now()-this._lastCheckpoint)/1e3;return 0==e&&(e=1),this._intervalBytes/e/1024},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"averageKBps",{get:function(){var e=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/e/1024},enumerable:!1,configurable:!0}),e}();t["default"]=i},"./src/io/websocket-loader.js":
/*!************************************!*\
  !*** ./src/io/websocket-loader.js ***!
  \************************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! ./loader.js */"./src/io/loader.js"),o=n(/*! ../utils/exception.js */"./src/utils/exception.js"),r=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),a=function(e){function t(){var t=e.call(this,"websocket-loader")||this;return t.TAG="WebSocketLoader",t._needStash=!0,t._ws=null,t._requestAbort=!1,t._receivedLength=0,t}return r(t,e),t.isSupported=function(){try{return"undefined"!==typeof self.WebSocket}catch(e){return!1}},t.prototype.destroy=function(){this._ws&&this.abort(),e.prototype.destroy.call(this)},t.prototype.open=function(e){try{var t=this._ws=new self.WebSocket(e.url);t.binaryType="arraybuffer",t.onopen=this._onWebSocketOpen.bind(this),t.onclose=this._onWebSocketClose.bind(this),t.onmessage=this._onWebSocketMessage.bind(this),t.onerror=this._onWebSocketError.bind(this),this._status=i.LoaderStatus.kConnecting}catch(r){this._status=i.LoaderStatus.kError;var n={code:r.code,msg:r.message};if(!this._onError)throw new o.RuntimeException(n.msg);this._onError(i.LoaderErrors.EXCEPTION,n)}},t.prototype.abort=function(){var e=this._ws;!e||0!==e.readyState&&1!==e.readyState||(this._requestAbort=!0,e.close()),this._ws=null,this._status=i.LoaderStatus.kComplete},t.prototype._onWebSocketOpen=function(e){this._status=i.LoaderStatus.kBuffering},t.prototype._onWebSocketClose=function(e){!0!==this._requestAbort?(this._status=i.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1},t.prototype._onWebSocketMessage=function(e){var t=this;if(e.data instanceof ArrayBuffer)this._dispatchArrayBuffer(e.data);else if(e.data instanceof Blob){var n=new FileReader;n.onload=function(){t._dispatchArrayBuffer(n.result)},n.readAsArrayBuffer(e.data)}else{this._status=i.LoaderStatus.kError;var r={code:-1,msg:"Unsupported WebSocket message type: "+e.data.constructor.name};if(!this._onError)throw new o.RuntimeException(r.msg);this._onError(i.LoaderErrors.EXCEPTION,r)}},t.prototype._dispatchArrayBuffer=function(e){var t=e,n=this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,n,this._receivedLength)},t.prototype._onWebSocketError=function(e){this._status=i.LoaderStatus.kError;var t={code:e.code,msg:e.message};if(!this._onError)throw new o.RuntimeException(t.msg);this._onError(i.LoaderErrors.EXCEPTION,t)},t}(i.BaseLoader);t["default"]=a},"./src/io/xhr-moz-chunked-loader.js":
/*!******************************************!*\
  !*** ./src/io/xhr-moz-chunked-loader.js ***!
  \******************************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! ../utils/logger.js */"./src/utils/logger.js"),o=n(/*! ./loader.js */"./src/io/loader.js"),r=n(/*! ../utils/exception.js */"./src/utils/exception.js"),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=function(e){function t(t,n){var i=e.call(this,"xhr-moz-chunked-loader")||this;return i.TAG="MozChunkedLoader",i._seekHandler=t,i._config=n,i._needStash=!0,i._xhr=null,i._requestAbort=!1,i._contentLength=null,i._receivedLength=0,i}return a(t,e),t.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===e.responseType}catch(t){return i.default.w("MozChunkedLoader",t.message),!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),e.prototype.destroy.call(this)},t.prototype.open=function(e,t){this._dataSource=e,this._range=t;var n=e.url;this._config.reuseRedirectedURL&&void 0!=e.redirectedURL&&(n=e.redirectedURL);var i=this._seekHandler.getConfig(n,t);this._requestURL=i.url;var r=this._xhr=new XMLHttpRequest;if(r.open("GET",i.url,!0),r.responseType="moz-chunked-arraybuffer",r.onreadystatechange=this._onReadyStateChange.bind(this),r.onprogress=this._onProgress.bind(this),r.onloadend=this._onLoadEnd.bind(this),r.onerror=this._onXhrError.bind(this),e.withCredentials&&(r.withCredentials=!0),"object"===typeof i.headers){var a=i.headers;for(var s in a)a.hasOwnProperty(s)&&r.setRequestHeader(s,a[s])}if("object"===typeof this._config.headers){a=this._config.headers;for(var s in a)a.hasOwnProperty(s)&&r.setRequestHeader(s,a[s])}this._status=o.LoaderStatus.kConnecting,r.send()},t.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=o.LoaderStatus.kComplete},t.prototype._onReadyStateChange=function(e){var t=e.target;if(2===t.readyState){if(void 0!=t.responseURL&&t.responseURL!==this._requestURL&&this._onURLRedirect){var n=this._seekHandler.removeURLParameters(t.responseURL);this._onURLRedirect(n)}if(0!==t.status&&(t.status<200||t.status>299)){if(this._status=o.LoaderStatus.kError,!this._onError)throw new r.RuntimeException("MozChunkedLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(o.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}else this._status=o.LoaderStatus.kBuffering}},t.prototype._onProgress=function(e){if(this._status!==o.LoaderStatus.kError){null===this._contentLength&&null!==e.total&&0!==e.total&&(this._contentLength=e.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var t=e.target.response,n=this._range.from+this._receivedLength;this._receivedLength+=t.byteLength,this._onDataArrival&&this._onDataArrival(t,n,this._receivedLength)}},t.prototype._onLoadEnd=function(e){!0!==this._requestAbort?this._status!==o.LoaderStatus.kError&&(this._status=o.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1},t.prototype._onXhrError=function(e){this._status=o.LoaderStatus.kError;var t=0,n=null;if(this._contentLength&&e.loaded<this._contentLength?(t=o.LoaderErrors.EARLY_EOF,n={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(t=o.LoaderErrors.EXCEPTION,n={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new r.RuntimeException(n.msg);this._onError(t,n)},t}(o.BaseLoader);t["default"]=s},"./src/io/xhr-range-loader.js":
/*!************************************!*\
  !*** ./src/io/xhr-range-loader.js ***!
  \************************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! ../utils/logger.js */"./src/utils/logger.js"),o=n(/*! ./speed-sampler.js */"./src/io/speed-sampler.js"),r=n(/*! ./loader.js */"./src/io/loader.js"),a=n(/*! ../utils/exception.js */"./src/utils/exception.js"),s=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),d=function(e){function t(t,n){var i=e.call(this,"xhr-range-loader")||this;return i.TAG="RangeLoader",i._seekHandler=t,i._config=n,i._needStash=!1,i._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],i._currentChunkSizeKB=384,i._currentSpeedNormalized=0,i._zeroSpeedChunkCount=0,i._xhr=null,i._speedSampler=new o.default,i._requestAbort=!1,i._waitForTotalLength=!1,i._totalLengthReceived=!1,i._currentRequestURL=null,i._currentRedirectedURL=null,i._currentRequestRange=null,i._totalLength=null,i._contentLength=null,i._receivedLength=0,i._lastTimeLoaded=0,i}return s(t,e),t.isSupported=function(){try{var e=new XMLHttpRequest;return e.open("GET","https://example.com",!0),e.responseType="arraybuffer","arraybuffer"===e.responseType}catch(t){return i.default.w("RangeLoader",t.message),!1}},t.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),t.prototype.open=function(e,t){this._dataSource=e,this._range=t,this._status=r.LoaderStatus.kConnecting;var n=!1;void 0!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(n=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||n?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))},t.prototype._openSubRange=function(){var e=1024*this._currentChunkSizeKB,t=this._range.from+this._receivedLength,n=t+e;null!=this._contentLength&&n-this._range.from>=this._contentLength&&(n=this._range.from+this._contentLength-1),this._currentRequestRange={from:t,to:n},this._internalOpen(this._dataSource,this._currentRequestRange)},t.prototype._internalOpen=function(e,t){this._lastTimeLoaded=0;var n=e.url;this._config.reuseRedirectedURL&&(void 0!=this._currentRedirectedURL?n=this._currentRedirectedURL:void 0!=e.redirectedURL&&(n=e.redirectedURL));var i=this._seekHandler.getConfig(n,t);this._currentRequestURL=i.url;var o=this._xhr=new XMLHttpRequest;if(o.open("GET",i.url,!0),o.responseType="arraybuffer",o.onreadystatechange=this._onReadyStateChange.bind(this),o.onprogress=this._onProgress.bind(this),o.onload=this._onLoad.bind(this),o.onerror=this._onXhrError.bind(this),e.withCredentials&&(o.withCredentials=!0),"object"===typeof i.headers){var r=i.headers;for(var a in r)r.hasOwnProperty(a)&&o.setRequestHeader(a,r[a])}if("object"===typeof this._config.headers){r=this._config.headers;for(var a in r)r.hasOwnProperty(a)&&o.setRequestHeader(a,r[a])}o.send()},t.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=r.LoaderStatus.kComplete},t.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},t.prototype._onReadyStateChange=function(e){var t=e.target;if(2===t.readyState){if(void 0!=t.responseURL){var n=this._seekHandler.removeURLParameters(t.responseURL);t.responseURL!==this._currentRequestURL&&n!==this._currentRedirectedURL&&(this._currentRedirectedURL=n,this._onURLRedirect&&this._onURLRedirect(n))}if(t.status>=200&&t.status<=299){if(this._waitForTotalLength)return;this._status=r.LoaderStatus.kBuffering}else{if(this._status=r.LoaderStatus.kError,!this._onError)throw new a.RuntimeException("RangeLoader: Http code invalid, "+t.status+" "+t.statusText);this._onError(r.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}}},t.prototype._onProgress=function(e){if(this._status!==r.LoaderStatus.kError){if(null===this._contentLength){var t=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,t=!0;var n=e.total;this._internalAbort(),null!=n&0!==n&&(this._totalLength=n)}if(-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,t)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var i=e.loaded-this._lastTimeLoaded;this._lastTimeLoaded=e.loaded,this._speedSampler.addBytes(i)}},t.prototype._normalizeSpeed=function(e){var t=this._chunkSizeKBList,n=t.length-1,i=0,o=0,r=n;if(e<t[0])return t[0];while(o<=r){if(i=o+Math.floor((r-o)/2),i===n||e>=t[i]&&e<t[i+1])return t[i];t[i]<e?o=i+1:r=i-1}},t.prototype._onLoad=function(e){if(this._status!==r.LoaderStatus.kError)if(this._waitForTotalLength)this._waitForTotalLength=!1;else{this._lastTimeLoaded=0;var t=this._speedSampler.lastSecondKBps;if(0===t&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(t=this._speedSampler.currentKBps)),0!==t){var n=this._normalizeSpeed(t);this._currentSpeedNormalized!==n&&(this._currentSpeedNormalized=n,this._currentChunkSizeKB=n)}var i=e.target.response,o=this._range.from+this._receivedLength;this._receivedLength+=i.byteLength;var a=!1;null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():a=!0,this._onDataArrival&&this._onDataArrival(i,o,this._receivedLength),a&&(this._status=r.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},t.prototype._onXhrError=function(e){this._status=r.LoaderStatus.kError;var t=0,n=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(t=r.LoaderErrors.EARLY_EOF,n={code:-1,msg:"RangeLoader meet Early-Eof"}):(t=r.LoaderErrors.EXCEPTION,n={code:-1,msg:e.constructor.name+" "+e.type}),!this._onError)throw new a.RuntimeException(n.msg);this._onError(t,n)},t}(r.BaseLoader);t["default"]=d},"./src/player/flv-player.js":
/*!**********************************!*\
  !*** ./src/player/flv-player.js ***!
  \**********************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! events */"./node_modules/events/events.js"),o=n.n(i),r=n(/*! ../utils/logger.js */"./src/utils/logger.js"),a=n(/*! ../utils/browser.js */"./src/utils/browser.js"),s=n(/*! ./player-events.js */"./src/player/player-events.js"),d=n(/*! ../core/transmuxer.js */"./src/core/transmuxer.js"),l=n(/*! ../core/transmuxing-events.js */"./src/core/transmuxing-events.js"),c=n(/*! ../core/mse-controller.js */"./src/core/mse-controller.js"),u=n(/*! ../core/mse-events.js */"./src/core/mse-events.js"),m=n(/*! ./player-errors.js */"./src/player/player-errors.js"),p=n(/*! ../config.js */"./src/config.js"),h=n(/*! ../utils/exception.js */"./src/utils/exception.js"),f=function(){function e(e,t){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(o()),this._config=(0,p.createDefaultConfig)(),"object"===typeof t&&Object.assign(this._config,t),"flv"!==e.type.toLowerCase())throw new h.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var n=a.default.chrome&&(a.default.version.major<50||50===a.default.version.major&&a.default.version.build<2661);this._alwaysSeekKeyframe=!!(n||a.default.msedge||a.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return e.prototype.destroy=function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){var n=this;e===s.default.MEDIA_INFO?null!=this._mediaInfo&&Promise.resolve().then((function(){n._emitter.emit(s.default.MEDIA_INFO,n.mediaInfo)})):e===s.default.STATISTICS_INFO&&null!=this._statisticsInfo&&Promise.resolve().then((function(){n._emitter.emit(s.default.STATISTICS_INFO,n.statisticsInfo)})),this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){var t=this;if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),e.addEventListener("seeking",this.e.onvSeeking),e.addEventListener("canplay",this.e.onvCanPlay),e.addEventListener("stalled",this.e.onvStalled),e.addEventListener("progress",this.e.onvProgress),this._msectl=new c.default(this._config),this._msectl.on(u.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(u.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(u.default.SOURCE_OPEN,(function(){t._mseSourceOpened=!0,t._hasPendingLoad&&(t._hasPendingLoad=!1,t.load())})),this._msectl.on(u.default.ERROR,(function(e){t._emitter.emit(s.default.ERROR,m.ErrorTypes.MEDIA_ERROR,m.ErrorDetails.MEDIA_MSE_ERROR,e)})),this._msectl.attachMediaElement(e),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(n){}},e.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},e.prototype.load=function(){var e=this;if(!this._mediaElement)throw new h.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new h.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened?this._hasPendingLoad=!0:(this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new d.default(this._mediaDataSource,this._config),this._transmuxer.on(l.default.INIT_SEGMENT,(function(t,n){e._msectl.appendInitSegment(n)})),this._transmuxer.on(l.default.MEDIA_SEGMENT,(function(t,n){if(e._msectl.appendMediaSegment(n),e._config.lazyLoad&&!e._config.isLive){var i=e._mediaElement.currentTime;n.info.endDts>=1e3*(i+e._config.lazyLoadMaxDuration)&&null==e._progressChecker&&(r.default.v(e.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),e._suspendTransmuxer())}})),this._transmuxer.on(l.default.LOADING_COMPLETE,(function(){e._msectl.endOfStream(),e._emitter.emit(s.default.LOADING_COMPLETE)})),this._transmuxer.on(l.default.RECOVERED_EARLY_EOF,(function(){e._emitter.emit(s.default.RECOVERED_EARLY_EOF)})),this._transmuxer.on(l.default.IO_ERROR,(function(t,n){e._emitter.emit(s.default.ERROR,m.ErrorTypes.NETWORK_ERROR,t,n)})),this._transmuxer.on(l.default.DEMUX_ERROR,(function(t,n){e._emitter.emit(s.default.ERROR,m.ErrorTypes.MEDIA_ERROR,t,{code:-1,msg:n})})),this._transmuxer.on(l.default.MEDIA_INFO,(function(t){e._mediaInfo=t,e._emitter.emit(s.default.MEDIA_INFO,Object.assign({},t))})),this._transmuxer.on(l.default.METADATA_ARRIVED,(function(t){e._emitter.emit(s.default.METADATA_ARRIVED,t)})),this._transmuxer.on(l.default.SCRIPTDATA_ARRIVED,(function(t){e._emitter.emit(s.default.SCRIPTDATA_ARRIVED,t)})),this._transmuxer.on(l.default.STATISTICS_INFO,(function(t){e._statisticsInfo=e._fillStatisticsInfo(t),e._emitter.emit(s.default.STATISTICS_INFO,Object.assign({},e._statisticsInfo))})),this._transmuxer.on(l.default.RECOMMEND_SEEKPOINT,(function(t){e._mediaElement&&!e._config.accurateSeek&&(e._requestSetTime=!0,e._mediaElement.currentTime=t/1e3)})),this._transmuxer.open()))},e.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},e.prototype.play=function(){return this._mediaElement.play()},e.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._internalSeek(e):this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statisticsInfo",{get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),e.prototype._fillStatisticsInfo=function(e){if(e.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return e;var t=!0,n=0,i=0;if(this._mediaElement.getVideoPlaybackQuality){var o=this._mediaElement.getVideoPlaybackQuality();n=o.totalVideoFrames,i=o.droppedVideoFrames}else void 0!=this._mediaElement.webkitDecodedFrameCount?(n=this._mediaElement.webkitDecodedFrameCount,i=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=n,e.droppedFrames=i),e},e.prototype._onmseUpdateEnd=function(){if(this._config.lazyLoad&&!this._config.isLive){for(var e=this._mediaElement.buffered,t=this._mediaElement.currentTime,n=0,i=0;i<e.length;i++){var o=e.start(i),a=e.end(i);if(o<=t&&t<a){o,n=a;break}}n>=t+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(r.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},e.prototype._onmseBufferFull=function(){r.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()},e.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},e.prototype._checkProgressAndResume=function(){for(var e=this._mediaElement.currentTime,t=this._mediaElement.buffered,n=!1,i=0;i<t.length;i++){var o=t.start(i),a=t.end(i);if(e>=o&&e<a){e>=a-this._config.lazyLoadRecoverDuration&&(n=!0);break}}n&&(window.clearInterval(this._progressChecker),this._progressChecker=null,n&&(r.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},e.prototype._isTimepointBuffered=function(e){for(var t=this._mediaElement.buffered,n=0;n<t.length;n++){var i=t.start(n),o=t.end(n);if(e>=i&&e<o)return!0}return!1},e.prototype._internalSeek=function(e){var t=this._isTimepointBuffered(e),n=!1,i=0;if(e<1&&this._mediaElement.buffered.length>0){var o=this._mediaElement.buffered.start(0);(o<1&&e<o||a.default.safari)&&(n=!0,i=a.default.safari?.1:o)}if(n)this._requestSetTime=!0,this._mediaElement.currentTime=i;else if(t){if(this._alwaysSeekKeyframe){var r=this._msectl.getNearestKeyframe(Math.floor(1e3*e));this._requestSetTime=!0,this._mediaElement.currentTime=null!=r?r.dts/1e3:e}else this._requestSetTime=!0,this._mediaElement.currentTime=e;null!=this._progressChecker&&this._checkProgressAndResume()}else null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e)},e.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var e=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(e)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(e),this._transmuxer.seek(Math.floor(1e3*e)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=e))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},e.prototype._checkAndResumeStuckPlayback=function(e){var t=this._mediaElement;if(e||!this._receivedCanPlay||t.readyState<2){var n=t.buffered;n.length>0&&t.currentTime<n.start(0)&&(r.default.w(this.TAG,"Playback seems stuck at "+t.currentTime+", seek to "+n.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=n.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},e.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},e.prototype._onvSeeking=function(e){var t=this._mediaElement.currentTime,n=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(t<1&&n.length>0){var i=n.start(0);if(i<1&&t<i||a.default.safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=a.default.safari?.1:i)}if(this._isTimepointBuffered(t)){if(this._alwaysSeekKeyframe){var o=this._msectl.getNearestKeyframe(Math.floor(1e3*t));null!=o&&(this._requestSetTime=!0,this._mediaElement.currentTime=o.dts/1e3)}null!=this._progressChecker&&this._checkProgressAndResume()}else this._seekpointRecord={seekPoint:t,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}},e.prototype._onvCanPlay=function(e){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},e.prototype._onvStalled=function(e){this._checkAndResumeStuckPlayback(!0)},e.prototype._onvProgress=function(e){this._checkAndResumeStuckPlayback()},e}();t["default"]=f},"./src/player/native-player.js":
/*!*************************************!*\
  !*** ./src/player/native-player.js ***!
  \*************************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! events */"./node_modules/events/events.js"),o=n.n(i),r=n(/*! ./player-events.js */"./src/player/player-events.js"),a=n(/*! ../config.js */"./src/config.js"),s=n(/*! ../utils/exception.js */"./src/utils/exception.js"),d=function(){function e(e,t){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(o()),this._config=(0,a.createDefaultConfig)(),"object"===typeof t&&Object.assign(this._config,t),"flv"===e.type.toLowerCase())throw new s.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new s.InvalidArgumentException("NativePlayer("+e.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}return e.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},e.prototype.on=function(e,t){var n=this;e===r.default.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){n._emitter.emit(r.default.MEDIA_INFO,n.mediaInfo)})):e===r.default.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&Promise.resolve().then((function(){n._emitter.emit(r.default.STATISTICS_INFO,n.statisticsInfo)})),this._emitter.addListener(e,t)},e.prototype.off=function(e,t){this._emitter.removeListener(e,t)},e.prototype.attachMediaElement=function(e){if(this._mediaElement=e,e.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{e.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(t){}},e.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype.load=function(){if(!this._mediaElement)throw new s.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},e.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},e.prototype.play=function(){return this._mediaElement.play()},e.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(e){this._mediaElement.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(e){this._mediaElement.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(e){this._mediaElement?this._mediaElement.currentTime=e:this._pendingSeekTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaInfo",{get:function(){var e=this._mediaElement instanceof HTMLAudioElement?"audio/":"video/",t={mimeType:e+this._mediaDataSource.type};return this._mediaElement&&(t.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(t.width=this._mediaElement.videoWidth,t.height=this._mediaElement.videoHeight)),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statisticsInfo",{get:function(){var e={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return e;var t=!0,n=0,i=0;if(this._mediaElement.getVideoPlaybackQuality){var o=this._mediaElement.getVideoPlaybackQuality();n=o.totalVideoFrames,i=o.droppedVideoFrames}else void 0!=this._mediaElement.webkitDecodedFrameCount?(n=this._mediaElement.webkitDecodedFrameCount,i=this._mediaElement.webkitDroppedFrameCount):t=!1;return t&&(e.decodedFrames=n,e.droppedFrames=i),e},enumerable:!1,configurable:!0}),e.prototype._onvLoadedMetadata=function(e){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(r.default.MEDIA_INFO,this.mediaInfo)},e.prototype._reportStatisticsInfo=function(){this._emitter.emit(r.default.STATISTICS_INFO,this.statisticsInfo)},e}();t["default"]=d},"./src/player/player-errors.js":
/*!*************************************!*\
  !*** ./src/player/player-errors.js ***!
  \*************************************/function(e,t,n){"use strict";n.r(t),n.d(t,{ErrorTypes:function(){return r},ErrorDetails:function(){return a}});var i=n(/*! ../io/loader.js */"./src/io/loader.js"),o=n(/*! ../demux/demux-errors.js */"./src/demux/demux-errors.js"),r={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},a={NETWORK_EXCEPTION:i.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:i.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:i.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:i.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:o.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:o.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:o.default.CODEC_UNSUPPORTED}},"./src/player/player-events.js":
/*!*************************************!*\
  !*** ./src/player/player-events.js ***!
  \*************************************/function(e,t,n){"use strict";n.r(t);var i={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"};t["default"]=i},"./src/remux/aac-silent.js":
/*!*********************************!*\
  !*** ./src/remux/aac-silent.js ***!
  \*********************************/function(e,t,n){"use strict";n.r(t);var i=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t["default"]=i},"./src/remux/mp4-generator.js":
/*!************************************!*\
  !*** ./src/remux/mp4-generator.js ***!
  \************************************/function(e,t,n){"use strict";n.r(t);var i=function(){function e(){}return e.init=function(){for(var t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=e.constants={};n.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),n.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),n.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),n.STSC=n.STCO=n.STTS,n.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),n.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),n.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),n.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},e.box=function(e){for(var t=8,n=null,i=Array.prototype.slice.call(arguments,1),o=i.length,r=0;r<o;r++)t+=i[r].byteLength;n=new Uint8Array(t),n[0]=t>>>24&255,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n.set(e,4);var a=8;for(r=0;r<o;r++)n.set(i[r],a),a+=i[r].byteLength;return n},e.generateInitSegment=function(t){var n=e.box(e.types.ftyp,e.constants.FTYP),i=e.moov(t),o=new Uint8Array(n.byteLength+i.byteLength);return o.set(n,0),o.set(i,n.byteLength),o},e.moov=function(t){var n=e.mvhd(t.timescale,t.duration),i=e.trak(t),o=e.mvex(t);return e.box(e.types.moov,n,i,o)},e.mvhd=function(t,n){return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},e.trak=function(t){return e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.tkhd=function(t){var n=t.id,i=t.duration,o=t.presentWidth,r=t.presentHeight;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>>8&255,255&o,0,0,r>>>8&255,255&r,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t),e.hdlr(t),e.minf(t))},e.mdhd=function(t){var n=t.timescale,i=t.duration;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,i>>>24&255,i>>>16&255,i>>>8&255,255&i,85,196,0,0]))},e.hdlr=function(t){var n=null;return n="audio"===t.type?e.constants.HDLR_AUDIO:e.constants.HDLR_VIDEO,e.box(e.types.hdlr,n)},e.minf=function(t){var n=null;return n="audio"===t.type?e.box(e.types.smhd,e.constants.SMHD):e.box(e.types.vmhd,e.constants.VMHD),e.box(e.types.minf,n,e.dinf(),e.stbl(t))},e.dinf=function(){var t=e.box(e.types.dinf,e.box(e.types.dref,e.constants.DREF));return t},e.stbl=function(t){var n=e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.constants.STTS),e.box(e.types.stsc,e.constants.STSC),e.box(e.types.stsz,e.constants.STSZ),e.box(e.types.stco,e.constants.STCO));return n},e.stsd=function(t){return"audio"===t.type?"mp3"===t.codec?e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp3(t)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.mp4a(t)):e.box(e.types.stsd,e.constants.STSD_PREFIX,e.avc1(t))},e.mp3=function(t){var n=t.channelCount,i=t.audioSampleRate,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return e.box(e.types[".mp3"],o)},e.mp4a=function(t){var n=t.channelCount,i=t.audioSampleRate,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return e.box(e.types.mp4a,o,e.esds(t))},e.esds=function(t){var n=t.config||[],i=n.length,o=new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([i]).concat(n).concat([6,1,2]));return e.box(e.types.esds,o)},e.avc1=function(t){var n=t.avcc,i=t.codecWidth,o=t.codecHeight,r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,o>>>8&255,255&o,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return e.box(e.types.avc1,r,e.box(e.types.avcC,n))},e.mvex=function(t){return e.box(e.types.mvex,e.trex(t))},e.trex=function(t){var n=t.id,i=new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return e.box(e.types.trex,i)},e.moof=function(t,n){return e.box(e.types.moof,e.mfhd(t.sequenceNumber),e.traf(t,n))},e.mfhd=function(t){var n=new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t]);return e.box(e.types.mfhd,n)},e.traf=function(t,n){var i=t.id,o=e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i])),r=e.box(e.types.tfdt,new Uint8Array([0,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,255&n])),a=e.sdtp(t),s=e.trun(t,a.byteLength+16+16+8+16+8+8);return e.box(e.types.traf,o,r,s,a)},e.sdtp=function(t){for(var n=t.samples||[],i=n.length,o=new Uint8Array(4+i),r=0;r<i;r++){var a=n[r].flags;o[r+4]=a.isLeading<<6|a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return e.box(e.types.sdtp,o)},e.trun=function(t,n){var i=t.samples||[],o=i.length,r=12+16*o,a=new Uint8Array(r);n+=8+r,a.set([0,0,15,1,o>>>24&255,o>>>16&255,o>>>8&255,255&o,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0);for(var s=0;s<o;s++){var d=i[s].duration,l=i[s].size,c=i[s].flags,u=i[s].cts;a.set([d>>>24&255,d>>>16&255,d>>>8&255,255&d,l>>>24&255,l>>>16&255,l>>>8&255,255&l,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.isNonSync,0,0,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*s)}return e.box(e.types.trun,a)},e.mdat=function(t){return e.box(e.types.mdat,t)},e}();i.init(),t["default"]=i},"./src/remux/mp4-remuxer.js":
/*!**********************************!*\
  !*** ./src/remux/mp4-remuxer.js ***!
  \**********************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! ../utils/logger.js */"./src/utils/logger.js"),o=n(/*! ./mp4-generator.js */"./src/remux/mp4-generator.js"),r=n(/*! ./aac-silent.js */"./src/remux/aac-silent.js"),a=n(/*! ../utils/browser.js */"./src/utils/browser.js"),s=n(/*! ../core/media-segment-info.js */"./src/core/media-segment-info.js"),d=n(/*! ../utils/exception.js */"./src/utils/exception.js"),l=function(){function e(e){this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new s.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new s.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!a.default.chrome||!(a.default.version.major<50||50===a.default.version.major&&a.default.version.build<2661)),this._fillSilentAfterSeek=a.default.msedge||a.default.msie,this._mp3UseMpegAudio=!a.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return e.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},e.prototype.bindDataSource=function(e){return e.onDataAvailable=this.remux.bind(this),e.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(e.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(e){this._onInitSegment=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(e){this._onMediaSegment=e},enumerable:!1,configurable:!0}),e.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},e.prototype.seek=function(e){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},e.prototype.remux=function(e,t){if(!this._onMediaSegment)throw new d.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(e,t),this._remuxVideo(t),this._remuxAudio(e)},e.prototype._onTrackMetadataReceived=function(e,t){var n=null,i="mp4",r=t.codec;if("audio"===e)this._audioMeta=t,"mp3"===t.codec&&this._mp3UseMpegAudio?(i="mpeg",r="",n=new Uint8Array):n=o.default.generateInitSegment(t);else{if("video"!==e)return;this._videoMeta=t,n=o.default.generateInitSegment(t)}if(!this._onInitSegment)throw new d.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(e,{type:e,data:n.buffer,codec:r,container:e+"/"+i,mediaDuration:t.duration})},e.prototype._calculateDtsBase=function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].dts),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},e.prototype.flushStashedSamples=function(){var e=this._videoStashedLastSample,t=this._audioStashedLastSample,n={type:"video",id:1,sequenceNumber:0,samples:[],length:0};null!=e&&(n.samples.push(e),n.length=e.length);var i={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};null!=t&&(i.samples.push(t),i.length=t.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(n,!0),this._remuxAudio(i,!0)},e.prototype._remuxAudio=function(e,t){if(null!=this._audioMeta){var n=e,d=n.samples,l=void 0,c=-1,u=-1,m=this._audioMeta.refSampleDuration,p="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,h=this._dtsBaseInited&&void 0===this._audioNextDts,f=!1;if(d&&0!==d.length&&(1!==d.length||t)){var g=0,v=null,y=0;p?(g=0,y=n.length):(g=8,y=8+n.length);var S=null;if(d.length>1&&(S=d.pop(),y-=S.length),null!=this._audioStashedLastSample){var b=this._audioStashedLastSample;this._audioStashedLastSample=null,d.unshift(b),y+=b.length}null!=S&&(this._audioStashedLastSample=S);var T=d[0].dts-this._dtsBase;if(this._audioNextDts)l=T-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())l=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(f=!0);else{var w=this._audioSegmentInfoList.getLastSampleBefore(T);if(null!=w){var C=T-(w.originalDts+w.duration);C<=3&&(C=0);var _=w.dts+w.duration+C;l=T-_}else l=0}if(f){var E=T-l,k=this._videoSegmentInfoList.getLastSegmentBefore(T);if(null!=k&&k.beginDts<E){var P=r.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(P){var I=k.beginDts,x=E-k.beginDts;i.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+I+", duration: "+x),d.unshift({unit:P,dts:I,pts:I}),y+=P.byteLength}}else f=!1}for(var R=[],A=0;A<d.length;A++){b=d[A];var D=b.unit,j=b.dts-this._dtsBase,L=(I=j,!1),M=null,N=0;if(!(j<-.001)){if("mp3"!==this._audioMeta.codec){var B=j,O=3;if(this._audioNextDts&&(B=this._audioNextDts),l=j-B,l<=-O*m){i.default.w(this.TAG,"Dropping 1 audio frame (originalDts: "+j+" ms ,curRefDts: "+B+" ms)  due to dtsCorrection: "+l+" ms overlap.");continue}if(l>=O*m&&this._fillAudioTimestampGap&&!a.default.safari){L=!0;var z=Math.floor(l/m);i.default.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\noriginalDts: "+j+" ms, curRefDts: "+B+" ms, dtsCorrection: "+Math.round(l)+" ms, generate: "+z+" frames"),I=Math.floor(B),N=Math.floor(B+m)-I;P=r.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);null==P&&(i.default.w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),P=D),M=[];for(var F=0;F<z;F++){B+=m;var U=Math.floor(B),V=Math.floor(B+m)-U,H={dts:U,pts:U,cts:0,unit:P,size:P.byteLength,duration:V,originalDts:j,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};M.push(H),y+=H.size}this._audioNextDts=B+m}else I=Math.floor(B),N=Math.floor(B+m)-I,this._audioNextDts=B+m}else{if(I=j-l,A!==d.length-1){var G=d[A+1].dts-this._dtsBase-l;N=G-I}else if(null!=S){G=S.dts-this._dtsBase-l;N=G-I}else N=R.length>=1?R[R.length-1].duration:Math.floor(m);this._audioNextDts=I+N}-1===c&&(c=I),R.push({dts:I,pts:I,cts:0,unit:b.unit,size:b.unit.byteLength,duration:N,originalDts:j,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),L&&R.push.apply(R,M)}}if(0===R.length)return n.samples=[],void(n.length=0);p?v=new Uint8Array(y):(v=new Uint8Array(y),v[0]=y>>>24&255,v[1]=y>>>16&255,v[2]=y>>>8&255,v[3]=255&y,v.set(o.default.types.mdat,4));for(A=0;A<R.length;A++){D=R[A].unit;v.set(D,g),g+=D.byteLength}var W=R[R.length-1];u=W.dts+W.duration;var J=new s.MediaSegmentInfo;J.beginDts=c,J.endDts=u,J.beginPts=c,J.endPts=u,J.originalBeginDts=R[0].originalDts,J.originalEndDts=W.originalDts+W.duration,J.firstSample=new s.SampleInfo(R[0].dts,R[0].pts,R[0].duration,R[0].originalDts,!1),J.lastSample=new s.SampleInfo(W.dts,W.pts,W.duration,W.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(J),n.samples=R,n.sequenceNumber++;var K=null;K=p?new Uint8Array:o.default.moof(n,c),n.samples=[],n.length=0;var Z={type:"audio",data:this._mergeBoxes(K,v).buffer,sampleCount:R.length,info:J};p&&h&&(Z.timestampOffset=c),this._onMediaSegment("audio",Z)}}},e.prototype._remuxVideo=function(e,t){if(null!=this._videoMeta){var n=e,i=n.samples,r=void 0,a=-1,d=-1,l=-1,c=-1;if(i&&0!==i.length&&(1!==i.length||t)){var u=8,m=null,p=8+e.length,h=null;if(i.length>1&&(h=i.pop(),p-=h.length),null!=this._videoStashedLastSample){var f=this._videoStashedLastSample;this._videoStashedLastSample=null,i.unshift(f),p+=f.length}null!=h&&(this._videoStashedLastSample=h);var g=i[0].dts-this._dtsBase;if(this._videoNextDts)r=g-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())r=0;else{var v=this._videoSegmentInfoList.getLastSampleBefore(g);if(null!=v){var y=g-(v.originalDts+v.duration);y<=3&&(y=0);var S=v.dts+v.duration+y;r=g-S}else r=0}for(var b=new s.MediaSegmentInfo,T=[],w=0;w<i.length;w++){f=i[w];var C=f.dts-this._dtsBase,_=f.isKeyframe,E=C-r,k=f.cts,P=E+k;-1===a&&(a=E,l=P);var I=0;if(w!==i.length-1){var x=i[w+1].dts-this._dtsBase-r;I=x-E}else if(null!=h){x=h.dts-this._dtsBase-r;I=x-E}else I=T.length>=1?T[T.length-1].duration:Math.floor(this._videoMeta.refSampleDuration);if(_){var R=new s.SampleInfo(E,P,I,f.dts,!0);R.fileposition=f.fileposition,b.appendSyncPoint(R)}T.push({dts:E,pts:P,cts:k,units:f.units,size:f.length,isKeyframe:_,duration:I,originalDts:C,flags:{isLeading:0,dependsOn:_?2:1,isDependedOn:_?1:0,hasRedundancy:0,isNonSync:_?0:1}})}m=new Uint8Array(p),m[0]=p>>>24&255,m[1]=p>>>16&255,m[2]=p>>>8&255,m[3]=255&p,m.set(o.default.types.mdat,4);for(w=0;w<T.length;w++){var A=T[w].units;while(A.length){var D=A.shift(),j=D.data;m.set(j,u),u+=j.byteLength}}var L=T[T.length-1];if(d=L.dts+L.duration,c=L.pts+L.duration,this._videoNextDts=d,b.beginDts=a,b.endDts=d,b.beginPts=l,b.endPts=c,b.originalBeginDts=T[0].originalDts,b.originalEndDts=L.originalDts+L.duration,b.firstSample=new s.SampleInfo(T[0].dts,T[0].pts,T[0].duration,T[0].originalDts,T[0].isKeyframe),b.lastSample=new s.SampleInfo(L.dts,L.pts,L.duration,L.originalDts,L.isKeyframe),this._isLive||this._videoSegmentInfoList.append(b),n.samples=T,n.sequenceNumber++,this._forceFirstIDR){var M=T[0].flags;M.dependsOn=2,M.isNonSync=0}var N=o.default.moof(n,a);n.samples=[],n.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(N,m).buffer,sampleCount:T.length,info:b})}}},e.prototype._mergeBoxes=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n},e}();t["default"]=l},"./src/utils/browser.js":
/*!******************************!*\
  !*** ./src/utils/browser.js ***!
  \******************************/function(e,t,n){"use strict";n.r(t);var i={};function o(){var e=self.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(e)||[],n=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(android)/.exec(e)||/(windows)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||[],o={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",majorVersion:t[4]||t[2]||"0",platform:n[0]||""},r={};if(o.browser){r[o.browser]=!0;var a=o.majorVersion.split(".");r.version={major:parseInt(o.majorVersion,10),string:o.version},a.length>1&&(r.version.minor=parseInt(a[1],10)),a.length>2&&(r.version.build=parseInt(a[2],10))}if(o.platform&&(r[o.platform]=!0),(r.chrome||r.opr||r.safari)&&(r.webkit=!0),r.rv||r.iemobile){r.rv&&delete r.rv;var s="msie";o.browser=s,r[s]=!0}if(r.edge){delete r.edge;var d="msedge";o.browser=d,r[d]=!0}if(r.opr){var l="opera";o.browser=l,r[l]=!0}if(r.safari&&r.android){var c="android";o.browser=c,r[c]=!0}for(var u in r.name=o.browser,r.platform=o.platform,i)i.hasOwnProperty(u)&&delete i[u];Object.assign(i,r)}o(),t["default"]=i},"./src/utils/exception.js":
/*!********************************!*\
  !*** ./src/utils/exception.js ***!
  \********************************/function(e,t,n){"use strict";n.r(t),n.d(t,{RuntimeException:function(){return o},IllegalStateException:function(){return r},InvalidArgumentException:function(){return a},NotImplementedException:function(){return s}});var i=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=function(){function e(e){this._message=e}return Object.defineProperty(e.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this.name+": "+this.message},e}(),r=function(e){function t(t){return e.call(this,t)||this}return i(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),t}(o),a=function(e){function t(t){return e.call(this,t)||this}return i(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),t}(o),s=function(e){function t(t){return e.call(this,t)||this}return i(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),t}(o)},"./src/utils/logger.js":
/*!*****************************!*\
  !*** ./src/utils/logger.js ***!
  \*****************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! events */"./node_modules/events/events.js"),o=n.n(i),r=function(){function e(){}return e.e=function(t,n){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+n;e.ENABLE_CALLBACK&&e.emitter.emit("log","error",i),e.ENABLE_ERROR&&(console.error?console.error(i):console.warn?console.warn(i):console.log(i))},e.i=function(t,n){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+n;e.ENABLE_CALLBACK&&e.emitter.emit("log","info",i),e.ENABLE_INFO&&(console.info?console.info(i):console.log(i))},e.w=function(t,n){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+n;e.ENABLE_CALLBACK&&e.emitter.emit("log","warn",i),e.ENABLE_WARN&&(console.warn?console.warn(i):console.log(i))},e.d=function(t,n){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+n;e.ENABLE_CALLBACK&&e.emitter.emit("log","debug",i),e.ENABLE_DEBUG&&(console.debug?console.debug(i):console.log(i))},e.v=function(t,n){t&&!e.FORCE_GLOBAL_TAG||(t=e.GLOBAL_TAG);var i="["+t+"] > "+n;e.ENABLE_CALLBACK&&e.emitter.emit("log","verbose",i),e.ENABLE_VERBOSE&&console.log(i)},e}();r.GLOBAL_TAG="flv.js",r.FORCE_GLOBAL_TAG=!1,r.ENABLE_ERROR=!0,r.ENABLE_INFO=!0,r.ENABLE_WARN=!0,r.ENABLE_DEBUG=!0,r.ENABLE_VERBOSE=!0,r.ENABLE_CALLBACK=!1,r.emitter=new(o()),t["default"]=r},"./src/utils/logging-control.js":
/*!**************************************!*\
  !*** ./src/utils/logging-control.js ***!
  \**************************************/function(e,t,n){"use strict";n.r(t);var i=n(/*! events */"./node_modules/events/events.js"),o=n.n(i),r=n(/*! ./logger.js */"./src/utils/logger.js"),a=function(){function e(){}return Object.defineProperty(e,"forceGlobalTag",{get:function(){return r.default.FORCE_GLOBAL_TAG},set:function(t){r.default.FORCE_GLOBAL_TAG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"globalTag",{get:function(){return r.default.GLOBAL_TAG},set:function(t){r.default.GLOBAL_TAG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableAll",{get:function(){return r.default.ENABLE_VERBOSE&&r.default.ENABLE_DEBUG&&r.default.ENABLE_INFO&&r.default.ENABLE_WARN&&r.default.ENABLE_ERROR},set:function(t){r.default.ENABLE_VERBOSE=t,r.default.ENABLE_DEBUG=t,r.default.ENABLE_INFO=t,r.default.ENABLE_WARN=t,r.default.ENABLE_ERROR=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableDebug",{get:function(){return r.default.ENABLE_DEBUG},set:function(t){r.default.ENABLE_DEBUG=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableVerbose",{get:function(){return r.default.ENABLE_VERBOSE},set:function(t){r.default.ENABLE_VERBOSE=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableInfo",{get:function(){return r.default.ENABLE_INFO},set:function(t){r.default.ENABLE_INFO=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableWarn",{get:function(){return r.default.ENABLE_WARN},set:function(t){r.default.ENABLE_WARN=t,e._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e,"enableError",{get:function(){return r.default.ENABLE_ERROR},set:function(t){r.default.ENABLE_ERROR=t,e._notifyChange()},enumerable:!1,configurable:!0}),e.getConfig=function(){return{globalTag:r.default.GLOBAL_TAG,forceGlobalTag:r.default.FORCE_GLOBAL_TAG,enableVerbose:r.default.ENABLE_VERBOSE,enableDebug:r.default.ENABLE_DEBUG,enableInfo:r.default.ENABLE_INFO,enableWarn:r.default.ENABLE_WARN,enableError:r.default.ENABLE_ERROR,enableCallback:r.default.ENABLE_CALLBACK}},e.applyConfig=function(e){r.default.GLOBAL_TAG=e.globalTag,r.default.FORCE_GLOBAL_TAG=e.forceGlobalTag,r.default.ENABLE_VERBOSE=e.enableVerbose,r.default.ENABLE_DEBUG=e.enableDebug,r.default.ENABLE_INFO=e.enableInfo,r.default.ENABLE_WARN=e.enableWarn,r.default.ENABLE_ERROR=e.enableError,r.default.ENABLE_CALLBACK=e.enableCallback},e._notifyChange=function(){var t=e.emitter;if(t.listenerCount("change")>0){var n=e.getConfig();t.emit("change",n)}},e.registerListener=function(t){e.emitter.addListener("change",t)},e.removeListener=function(t){e.emitter.removeListener("change",t)},e.addLogListener=function(t){r.default.emitter.addListener("log",t),r.default.emitter.listenerCount("log")>0&&(r.default.ENABLE_CALLBACK=!0,e._notifyChange())},e.removeLogListener=function(t){r.default.emitter.removeListener("log",t),0===r.default.emitter.listenerCount("log")&&(r.default.ENABLE_CALLBACK=!1,e._notifyChange())},e}();a.emitter=new(o()),t["default"]=a},"./src/utils/polyfill.js":
/*!*******************************!*\
  !*** ./src/utils/polyfill.js ***!
  \*******************************/function(e,t,n){"use strict";n.r(t);var i=function(){function e(){}return e.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Object.assign=Object.assign||function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])}return t},"function"!==typeof self.Promise&&n(/*! es6-promise */"./node_modules/es6-promise/dist/es6-promise.js").polyfill()},e}();i.install(),t["default"]=i},"./src/utils/utf8-conv.js":
/*!********************************!*\
  !*** ./src/utils/utf8-conv.js ***!
  \********************************/function(e,t,n){"use strict";function i(e,t,n){var i=e;if(t+n<i.length){while(n--)if(128!==(192&i[++t]))return!1;return!0}return!1}function o(e){var t=[],n=e,o=0,r=e.length;while(o<r)if(n[o]<128)t.push(String.fromCharCode(n[o])),++o;else{if(n[o]<192);else if(n[o]<224){if(i(n,o,1)){var a=(31&n[o])<<6|63&n[o+1];if(a>=128){t.push(String.fromCharCode(65535&a)),o+=2;continue}}}else if(n[o]<240){if(i(n,o,2)){a=(15&n[o])<<12|(63&n[o+1])<<6|63&n[o+2];if(a>=2048&&55296!==(63488&a)){t.push(String.fromCharCode(65535&a)),o+=3;continue}}}else if(n[o]<248&&i(n,o,3)){a=(7&n[o])<<18|(63&n[o+1])<<12|(63&n[o+2])<<6|63&n[o+3];if(a>65536&&a<1114112){a-=65536,t.push(String.fromCharCode(a>>>10|55296)),t.push(String.fromCharCode(1023&a|56320)),o+=4;continue}}t.push(String.fromCharCode(65533)),++o}return t.join("")}n.r(t),t["default"]=o}},n={};function i(t){var o=n[t];if(void 0!==o)return o.exports;var r=n[t]={exports:{}};return e[t].call(r.exports,r,r.exports,i),r.exports}i.m=e,function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}();var o=i("./src/index.js");return o}()}))}).call(this,n("4362"))}}]);