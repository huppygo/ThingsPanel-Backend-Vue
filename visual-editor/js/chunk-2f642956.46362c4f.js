(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f642956"],{c4c8:function(t,e,a){"use strict";var o=a("18a6"),r=a("add0"),i="/tp_product",l="/tp_batch";e["a"]={add:function(t){return Object(o["a"])({url:i+"/add",method:"post",data:t})},edit:function(t){return Object(o["a"])({url:i+"/edit",method:"post",data:t})},del:function(t){return Object(o["a"])({url:i+"/delete",method:"post",data:t})},page:function(t){return Object(o["a"])({url:i+"/list",method:"post",data:t})},batchAdd:function(t){return Object(o["a"])({url:l+"/add",method:"post",data:t})},batchEdit:function(t){return Object(o["a"])({url:l+"/edit",method:"post",data:t})},batchDel:function(t){return Object(o["a"])({url:l+"/delete",method:"post",data:t})},batchPage:function(t){return Object(o["a"])({url:l+"/list",method:"post",data:t})},generateBatch:function(t){return Object(o["a"])({url:l+"/generate",method:"post",data:t})},uploadUrl:r["a"]+"api/file/up",importBatch:function(t){return Object(o["a"])({url:l+"/import",method:"post",data:t})},exportQRCodeAndData:function(t){return Object(o["a"])({url:l+"/export",method:"post",data:t})},getPreRegistration:function(t){return Object(o["a"])({url:"/tp_generate_device/list",method:"post",data:t})},generateDevice:function(t){return Object(o["a"])({url:"/tp_generate_device/activate",method:"post",data:t})},deletePreRegistration:function(t){return Object(o["a"])({url:"/tp_generate_device/delete",method:"post",data:t})},getDeviceListByProductId:function(t){return Object(o["a"])({url:"/device/listbyproduct",method:"post",data:t})},addTask:function(t){return Object(o["a"])({url:"/tp_ota_task/add",method:"post",data:t})}}},d985:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"el-dark-dialog",attrs:{title:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.IMPORTDATA"),visible:t.dialogVisible,width:"400px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"dialog-footer text-center",attrs:{slot:"head"},slot:"head"},[a("el-button",{attrs:{type:"save"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("COMMON.CONFIRM")))])],1),a("el-form",{ref:"formRef",attrs:{"label-position":"left","label-width":"80px",model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.BATCHNUMBER"),required:"",prop:"batch_number"}},[a("el-input",{model:{value:t.form.batch_number,callback:function(e){t.$set(t.form,"batch_number",e)},expression:"form.batch_number"}})],1),a("el-form-item",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.FILE"),required:"",prop:"file"}},[a("el-upload",{staticClass:"upload-demo",staticStyle:{float:"left"},attrs:{action:t.uploadUrl,headers:t.headers,data:{type:"importBatch"},"file-list":t.fileList,accept:".xlsx,.xls","on-success":t.onUploadSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.UPLOAD")))])],1),a("el-link",{staticStyle:{"margin-left":"20px"},attrs:{type:"success",href:t.downloadUrl,underline:!1}},[t._v(t._s(t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.DOWNLOAD_TEMPLATE")))])],1)],1),a("div",{staticClass:"dialog-footer text-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"save"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("COMMON.CONFIRM")))])],1)],1)],1)},r=[],i=a("c4c8"),l=a("30ab"),n=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BASE_URL||document.location.protocol+"//"+document.domain+":9999/",s={components:{},props:{visible:{type:Boolean,default:!1},data:{type:Object,default:function(){}}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},data:function(){return{fileList:[],uploadUrl:i["a"].uploadUrl,headers:{Authorization:"Bearer "+l["a"].getToken()},form:{batch_number:"",file:""},rules:{batch_number:[{required:!0,message:"请输入批次号",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],file:[{required:!0,message:"请上传文件",trigger:"blur"}]},downloadUrl:n+"/files/init-images/batch_devices_template.xlsx"}},methods:{onUploadSuccess:function(t,e,a){console.log(t,t.data),this.form.file=t.data},handleClose:function(){this.dialogVisible=!1},handleSubmit:function(){var t=this;console.log(this.form),this.form.product_id=this.$route.query.product_id,this.$refs.formRef.validate((function(e){if(!e)return!1;i["a"].importBatch(t.form).then((function(e){t.$message.success("导入成功"),t.dialogVisible=!1,t.$emit("submit")}))}))}}},d=s,c=a("2877"),u=Object(c["a"])(d,o,r,!1,null,"76263e2c",null);e["default"]=u.exports}}]);