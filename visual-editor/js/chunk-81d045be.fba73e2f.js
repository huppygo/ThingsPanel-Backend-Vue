(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-81d045be"],{"2cb1":function(e,t,a){"use strict";a("e3e7")},"6d09":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"el-dark-dialog el-dark-input dialog-css",attrs:{id:"screen",title:"属性时序图表",width:"50%","close-on-press-escape":!1,fullscreen:e.isDialogFullScreen,"show-close":"","append-to-body":"",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[a("div",[a("el-row",{attrs:{gutter:10,justify:"space-between"}},[a("el-col",{attrs:{span:15}},[a("el-select",{staticStyle:{width:"18%"},on:{change:function(t){return e.changeTimeRange()}},model:{value:e.selectedTimeRangeOptions,callback:function(t){e.selectedTimeRangeOptions=t},expression:"selectedTimeRangeOptions"}},e._l(e.timeRangeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-date-picker",{staticStyle:{width:"40%","margin-left":"10px"},attrs:{clearable:!1,"value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd",type:"datetimerange","start-placeholder":e.$t("DATA_MANAGEMENT.PLACEHOLDER5"),"range-separator":e.$t("DATA_MANAGEMENT.PLACEHOLDER6"),"end-placeholder":e.$t("DATA_MANAGEMENT.PLACEHOLDER7")},on:{change:function(t){return e.handleDatePickerChange()}},model:{value:e.choosedTimeRange,callback:function(t){e.choosedTimeRange=t},expression:"choosedTimeRange"}}),a("el-select",{staticStyle:{width:"18%","margin-left":"10px"},on:{change:function(t){return e.getStatisticValue()}},model:{value:e.selectedAggrigateOptions,callback:function(t){e.selectedAggrigateOptions=t},expression:"selectedAggrigateOptions"}},e._l(e.aggrigateOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.displayValueType,expression:"displayValueType"}],staticStyle:{width:"18%","margin-left":"10px"},on:{change:function(t){return e.getStatisticValue()}},model:{value:e.selectedValueType,callback:function(t){e.selectedValueType=t},expression:"selectedValueType"}},e._l(e.valueTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{staticStyle:{float:"right"},attrs:{span:9}},[a("el-button-group",[a("el-button",{staticStyle:{width:"47px","border-color":"#747474"},style:e.chartTypeOption.line,attrs:{icon:"el-icon-data-line",type:e.buttonType.line,size:"small"},on:{click:function(t){return e.changeChartType("line")}}}),a("el-button",{staticStyle:{width:"47px","border-color":"#747474",margin:"0"},style:e.chartTypeOption.bar,attrs:{icon:"el-icon-s-data",type:e.buttonType.bar,size:"small"},on:{click:function(t){return e.changeChartType("bar")}}}),a("el-button",{staticStyle:{width:"47px","border-color":"#747474",margin:"0"},style:e.chartTypeOption.scatter,attrs:{icon:"el-icon-data-analysis",type:e.buttonType.scatter,size:"small"},on:{click:function(t){return e.changeChartType("scatter")}}})],1),a("el-button",{staticStyle:{width:"47px","border-color":"#747474","margin-left":"22px"},attrs:{icon:"el-icon-refresh-right",type:"border",size:"small"},on:{click:function(t){return e.refreshChart()}}}),a("el-button",{staticStyle:{width:"47px","border-color":"#747474","margin-left":"22px"},attrs:{icon:"el-icon-full-screen",type:"border",size:"small"},on:{click:e.btn}})],1)],1),a("div",{style:e.chartStyle},[a("div",{ref:"chart",staticStyle:{width:"100%",height:"100%"},attrs:{id:"chart"}})]),a("div",[a("el-row",{staticStyle:{margin:"10px",padding:"10px","background-color":"#3c4c99"},attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[a("div",[e._v(e._s(e.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.MIN")))]),a("div",[e._v(e._s(e.calculateData.min))])]),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[a("div",[e._v(e._s(e.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.MAX")))]),a("div",[e._v(e._s(e.calculateData.max))])]),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[a("div",[e._v(e._s(e.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.AVERAGE")))]),a("div",[e._v(e._s(e.calculateData.avg))])]),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[a("div",[e._v(e._s(e.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.MEDIAN")))]),a("div",[e._v(e._s(e.calculateData.med))])]),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[a("div",[e._v(e._s(e.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.SUM")))]),a("div",[e._v(e._s(e.calculateData.sum))])]),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[a("div",[e._v(e._s(e.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.DATA_COUNT")))]),a("div",[e._v(e._s(e.calculateData.cnt))])])],1)],1),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:2}},[a("el-popconfirm",{attrs:{"confirm-button-text":e.$t("COMMON.CONFIRM"),"cancel-button-text":e.$t("COMMON.CANCEL"),title:e.$t("COMMON.EXPORT_CONFIRM")},on:{confirm:function(t){return e.handleExport()}}},[a("el-button",{attrs:{slot:"reference",type:"border",size:"medium"},slot:"reference"},[e._v(e._s(e.$t("COMMON.EXPORT")))])],1)],1)],1)],1),a("div",{staticStyle:{width:"100%","padding-bottom":"30px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.paginatedData},scopedSlots:e._u([{key:"empty",fn:function(){return[a("div",[e._v(e._s(e.$t("COMMON.TABLE_NO_DATA")))])]},proxy:!0}])},[a("el-table-column",{attrs:{prop:"time",label:e.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.TIMESTAMP"),"min-width":"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.transformTimestamp(t.row.ts)))])]}}])}),a("el-table-column",{attrs:{prop:"value",label:e.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.VALUE"),"min-width":"180",align:"center"}})],1),a("div",{staticStyle:{float:"right","margin-bottom":"20px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,50],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{staticClass:"el-dark-dialog el-dark-input",attrs:{width:"30%",title:e.$t("COMMON.EXPORT"),visible:e.exportVisible,"append-to-body":""},on:{"update:visible":function(t){e.exportVisible=t}}},[a("div",{staticClass:"text-center"},[a("p",[e._v(e._s(e.downloadUrl?e.downloadUrl.split("/").pop().toString():e.$t("COMMON.GENERATE_WAIT")))]),e.exporting?e._e():a("p",[a("a",{attrs:{href:e.downloadUrl}},[e._v(e._s(e.$t("COMMON.DOWNLOAD")))])])])])],1)])},n=[],l=a("2909"),s=(a("fb6a"),a("d3b7"),a("4e82"),a("99af"),a("d9e2"),a("b680"),a("4de4"),a("7db0"),a("b64b"),a("d81d"),a("93bf")),r=a.n(s),o=a("f570"),c=a("aa98"),u=a("3de1"),d={name:"DeviceDataChart",props:{visible:{type:[Boolean],default:!1},data:{type:Object,default:function(){return{}}},device:{type:[Object],default:function(){return{}}},attributeName:{type:String,default:""}},data:function(){var e=Date.now();return{myEcharts:{},echartOptions:{},choosedChartType:"line",defaultChartOptions:{line:{backgroundColor:"",grid:{left:"4%",right:"4%",bottom:"10%"},xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[150,230,224,218,135,147,260],type:"line",lineStyle:{width:3,color:"#1FC96E"}}]},bar:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[150,230,224,218,135,147,260],type:"bar"}]},scatter:{xAxis:{},yAxis:{},series:[{symbolSize:3,data:[[10,8.04],[8.07,6.95],[13,7.58],[9.05,8.81],[11,8.33],[14,7.66],[13.4,6.81],[10,6.33],[14,8.96],[12.5,6.82],[9.15,7.2],[11.5,7.2],[3.03,4.23],[12.2,7.83],[2.02,4.47],[1.05,3.33],[4.05,4.96],[6.03,7.24],[12,6.26],[12,8.84],[7.08,5.82],[5.02,5.68]],type:"scatter"}]}},historyData:[],tableData:[],historyValueList:[],calculateData:{min:0,max:0,avg:0,med:0,sum:0,cnt:0},chartTypeOption:{line:{backgroundColor:"#409eff"},bar:{},scatter:{}},buttonType:{line:"text",bar:"border",scatter:"border"},positionShow:!1,locationArray:[],isCopy:!1,choosedTimeRange:[new Date(e-36e5),new Date(e)],selectedTimeRangeOptions:"1_hour",timeRangeOptions:[{value:"custom",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.CUSTOM"),timeRange:[]},{value:"5_minutes",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.LAST_FIVE_MINUTES"),timeRange:[new Date(Date.now()-3e5),new Date(Date.now())],interval:3e5},{value:"15_minutes",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.LAST_FIFTEEN_MINUTES"),timeRange:[new Date(Date.now()-9e5),new Date(Date.now())],interval:9e5},{value:"30_minutes",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.LAST_THIRTY_MINUTES"),timeRange:[new Date(Date.now()-18e5),new Date(Date.now())],interval:18e5},{value:"1_hour",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.LAST_ONE_HOUR"),timeRange:[new Date(Date.now()-36e5),new Date(Date.now())],interval:36e5},{value:"3_hour",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.LAST_THREE_HOURS"),timeRange:[new Date(Date.now()-108e5),new Date(Date.now())],interval:108e5},{value:"1_day",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.LAST_ONE_DAY"),timeRange:[new Date(Date.now()-864e5),new Date(Date.now())],aggregateLimit:300,interval:864e5},{value:"3_day",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.LAST_THREE_DAYS"),timeRange:[new Date(Date.now()-2592e5),new Date(Date.now())],aggregateLimit:600,interval:2592e5},{value:"7_day",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.LAST_SEVEN_DAYS"),timeRange:[new Date(Date.now()-6048e5),new Date(Date.now())],aggregateLimit:1800,interval:6048e5},{value:"1_month",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.LAST_ONE_MONTH"),timeRange:[new Date(Date.now()-2592e6),new Date(Date.now())],aggregateLimit:3600,interval:2592e6},{value:"6_month",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.LAST_SIX_MONTHS"),timeRange:[new Date(Date.now()-15552e6),new Date(Date.now())],aggregateLimit:21600,interval:15552e6},{value:"1_year",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.LAST_ONE_YEAR"),timeRange:[new Date(Date.now()-31104e6),new Date(Date.now())],aggregateLimit:2592e3,interval:31104e6}],displayValueType:!1,selectedAggrigateOptions:"no_aggregate",aggrigateOptions:[{value:"no_aggregate",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.NO_AGGREGATE"),disabled:!1,sec:0},{value:"30s",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.THIRTY_SECONDS"),disabled:!1,sec:30},{value:"1m",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.ONE_MINUTE"),disabled:!1,sec:60},{value:"2m",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.TWO_MINUTES"),disabled:!1,sec:120},{value:"5m",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.FIVE_MINUTES"),disabled:!1,sec:300},{value:"10m",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.TEN_MINUTES"),disabled:!1,sec:600},{value:"30m",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.THIRTY_MINUTES"),disabled:!1,sec:1800},{value:"1h",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.ONE_HOUR"),disabled:!1,sec:3600},{value:"3h",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.THREE_HOURS"),disabled:!1,sec:10800},{value:"6h",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.SIX_HOURS"),disabled:!1,sec:21600},{value:"1d",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.ONE_DAY"),disabled:!1,sec:86400},{value:"7d",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.SEVEN_DAYS"),disabled:!1,sec:604800},{value:"1mo",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.ONE_MONTH"),disabled:!1,sec:2592e3}],selectedValueType:"avg",valueTypeOptions:[{value:"avg",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.AVERAGE")},{value:"max",label:o["a"].t("DEVICE_MANAGEMENT.DEVICE_CONFIG.RANGE.MAX")}],bindc:!0,isDialogFullScreen:!1,chartStyle:{width:"100%",height:"360px"},exporting:!1,exportVisible:!1,downloadUrl:"",currentPage:1,pageSize:10,systemTimeInterval:null}},computed:{formData:{get:function(){return this.data},set:function(e){this.$emit("update:data",e)}},dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},paginatedData:function(){var e=(this.currentPage-1)*this.pageSize,t=this.currentPage*this.pageSize;return this.tableData.slice(e,t)}},mounted:function(){var e=this;window.addEventListener("resize",(function(){console.debug("resize"),e.myEcharts.resize()}))},watch:{dialogVisible:{handler:function(e){var t=this;e&&Promise.resolve(this.refreshSystime()).then((function(){t.getStatisticValue(!0)})),this.$nextTick((function(){t.initEChart()}))}},selectedAggrigateOptions:{handler:function(e){this.displayValueType="no_aggregate"!==this.selectedAggrigateOptions}}},methods:{initEChart:function(){this.myEcharts=this.$echarts.init(document.getElementById("chart"),"dark"),this.myEcharts.setOption(this.defaultChartOptions[this.choosedChartType])},transformChartData:function(){for(var e=this,t=this.historyData,a=[],i=[],n=[],s=[],r=0,o=0;o<t.length;o++){var c=t[o];c.hasOwnProperty("x")&&c.hasOwnProperty("y")&&(a.push(Object(u["a"])(c.x)),i.push(c.y),n.push([Object(u["a"])(c.x),c.y]),s.push({ts:c.x,value:c.y}),r+=c.y)}this.defaultChartOptions.line.xAxis.data=a,this.defaultChartOptions.line.series[0].data=i,this.defaultChartOptions.bar.xAxis.data=a,this.defaultChartOptions.bar.series[0].data=i,this.defaultChartOptions.scatter.series[0].data=n,this.historyValueList=i,this.tableData=s,console.debug(this.historyData,this.defaultChartOptions),this.$nextTick((function(){e.initEChart()}));[].concat(i).sort();function d(e){if(!Array.isArray(e))throw new TypeError("Input should be an array");if(0===e.length)return 0;var t=Object(l["a"])(e).sort((function(e,t){return e-t})),a=Math.floor(t.length/2);return t.length%2===0?(t[a-1]+t[a])/2:t[a]}if(0===i.length)return this.calculateData.max=0,this.calculateData.min=0,this.calculateData.avg=0,this.calculateData.med=0,this.calculateData.sum=0,void(this.calculateData.cnt=0);this.calculateData.max=Math.max.apply(Math,i).toFixed(2),this.calculateData.min=Math.min.apply(Math,i).toFixed(2),this.calculateData.avg=(r/i.length).toFixed(2),this.calculateData.med=d(i).toFixed(2),this.calculateData.sum=r.toFixed(2),this.calculateData.cnt=i.length},getStatisticValue:function(){var e,t,a=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Date.now();if(i)this.systemTimeInterval&&(n+=this.systemTimeInterval,console.debug("修正时间",n,this.systemTimeInterval,Date.now())),e=1e3*new Date(n-36e5).getTime(),t=1e3*new Date(n).getTime(),console.debug("初始化时间范围",new Date(e/1e3),new Date(t/1e3));else{if(this.systemTimeInterval&&(n+=this.systemTimeInterval),"custom"!==this.selectedTimeRangeOptions){var l=0,s=this.timeRangeOptions.filter((function(e){return e.value===a.selectedTimeRangeOptions}));s.length>0&&(l=s[0].interval),console.debug("选择已有时间范围",s,n,l,this.selectedTimeRangeOptions),n=Date.now()+this.systemTimeInterval,e=1e3*new Date(n-l).getTime(),t=1e3*new Date(n).getTime()}else e=1e3*(new Date(this.choosedTimeRange[0]).getTime()+this.systemTimeInterval),t=1e3*(new Date(this.choosedTimeRange[1]).getTime()+this.systemTimeInterval);console.debug("自定义时间范围",new Date(e/1e3),new Date(t/1e3))}var r={device_id:this.device.id,key:this.attributeName,start_time:e,end_time:t,aggregate_window:this.selectedAggrigateOptions,time_range:"custom"};console.debug(r,this.choosedTimeRange),"no_aggregate"!==this.selectedAggrigateOptions&&(r.aggregate_function=this.selectedValueType),Object(c["v"])(r).then((function(e){var t=e.data;console.debug("====getHistoryData",t),200==t.code&&(a.historyData=t.data.time_series?t.data.time_series:[],a.historyData.reverse()),console.debug(a.historyData),a.transformChartData()}))},handleClose:function(){this.dialogVisible=!1,this.selectedTimeRangeOptions="1_hour",this.selectedAggrigateOptions="no_aggregate";var e=Date.now();this.choosedTimeRange=[new Date(e-36e5),new Date(e)],this.changeChartType("line",!1),this.bindc||this.btn()},changeTimeRange:function(){var e=this;if("custom"!==this.selectedTimeRangeOptions){var t=this.timeRangeOptions.filter((function(t){return t.value===e.selectedTimeRangeOptions}));this.choosedTimeRange=t[0].timeRange}for(var a=0;a<this.aggrigateOptions.length;a++)this.aggrigateOptions[a].disabled=!1;var i=this.aggrigateOptions,n=this.timeRangeOptions.find((function(t){return t.value===e.selectedTimeRangeOptions})),l="";if(n.aggregateLimit){for(var s=0;s<i.length;s++){var r=i[s];r.disabled=!1,(n.aggregateLimit>r.sec||"no_aggregate"===r.value)&&(r.disabled=!0,l=i[s+1].value)}""===l&&(l="no_aggregate"),this.aggrigateOptions=i,this.selectedAggrigateOptions=l}console.debug(this.selectedTimeRangeOptions,this.selectedAggrigateOptions),this.getStatisticValue()},handleDatePickerChange:function(){this.selectedTimeRangeOptions="custom";var e,t=new Date(this.choosedTimeRange[0]).getTime()/1e3,a=new Date(this.choosedTimeRange[1]).getTime()/1e3,i=a-t,n={300:"all",900:"all",1800:"all",3600:"all",10800:30,21600:60,43200:120,86400:300,259200:600,604800:1800,1296e3:3600,2592e3:3600,5184e3:10800,7776e3:21600,15552e3:21600,31104e3:2592e3};function s(e){var t=Object.keys(n).filter((function(t){return e<=t}));return 0===t.length?null:Math.min.apply(Math,Object(l["a"])(t.map((function(e){return parseInt(e)}))))}for(var r=0;r<this.aggrigateOptions.length;r++)this.aggrigateOptions[r].disabled=!1;var o=s(i);if(o&&(e=n[o],console.debug(i,o,e,"all"!==e),"all"!==e)){this.selectedAggrigateOptions=this.aggrigateOptions.find((function(t){return t.sec===e})).value;for(var c=0;c<this.aggrigateOptions.length;c++)this.aggrigateOptions[c].sec<e&&(this.aggrigateOptions[c].disabled=!0)}this.getStatisticValue()},changeChartType:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.choosedChartType=e,this.buttonType={line:"border",bar:"border",scatter:"border"},this.buttonType[e]="text",this.chartTypeOption={line:{},bar:{},scatter:{}},this.chartTypeOption[e]={backgroundColor:"#647bf3"},console.debug(this.chartTypeOption),t&&this.myEcharts.setOption(this.defaultChartOptions[e])},btn:function(){var e=this;this.bindc=!this.bindc,this.isDialogFullScreen=!this.isDialogFullScreen;var t=document.getElementById("screen");r.a.toggle(t),this.bindc||(this.chartStyle={width:"100%",height:"600px"}),this.$nextTick((function(){e.myEcharts=e.$echarts.init(document.getElementById("chart")),e.myEcharts.setOption(e.defaultChartOptions[e.choosedChartType]),e.myEcharts.resize()}))},transformTimestamp:function(e){return Object(u["a"])(e)},handleExport:function(){var e=this;if(!this.exporting){this.exporting=!0,this.exportVisible=!0;var t=1e3*new Date(this.choosedTimeRange[0]).getTime(),a=1e3*new Date(this.choosedTimeRange[1]).getTime(),i={device_id:this.device.id,key:this.attributeName,start_time:t,end_time:a,aggregate_window:this.selectedAggrigateOptions,time_range:"custom",export_excel:!0};"no_aggregate"!==this.selectedAggrigateOptions&&(i.aggregate_function=this.selectedValueType),Object(c["v"])(i).then((function(t){var a=t.data;console.debug("====handleExport",a),200==a.code&&(e.downloadUrl=a.data?a.data:"")})).finally((function(){e.exporting=!1}))}},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},refreshSystime:function(){var e=this;Object(c["s"])().then((function(t){var a=t.data;if(console.debug("====getHistoryData",a),200==a.code){var i=Date.now();e.systemTimeInterval=a.data.timestamp?a.data.timestamp-i:null,console.error(a.data.timestamp,i,e.systemTimeInterval,"====getHistoryData")}}))},refreshChart:function(){var e=this;this.getStatisticValue(),this.$nextTick((function(){e.myEcharts.clear(),e.myEcharts.setOption(e.defaultChartOptions[e.choosedChartType])}))}}},g=d,h=(a("2cb1"),a("2877")),E=Object(h["a"])(g,i,n,!1,null,"6ef51d2e",null);t["default"]=E.exports},"93bf":function(e,t,a){
/*!
* screenfull
* v4.2.1 - 2019-07-27
* (c) Sindre Sorhus; MIT License
*/
(function(){"use strict";var t="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},a=e.exports,i="undefined"!==typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,n=function(){for(var e,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,n=a.length,l={};i<n;i++)if(e=a[i],e&&e[1]in t){for(i=0;i<e.length;i++)l[a[0][i]]=e[i];return l}return!1}(),l={change:n.fullscreenchange,error:n.fullscreenerror},s={request:function(e){return new Promise(function(a,l){var s,r=n.requestFullscreen,o=function(){this.off("change",o),a()}.bind(this);this.on("change",o),e=e||t.documentElement,s=/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[r]():e[r](i?Element.ALLOW_KEYBOARD_INPUT:{}),Promise.resolve(s).catch(l)}.bind(this))},exit:function(){return new Promise(function(e){if(this.isFullscreen){var a=function(){this.off("change",a),e()}.bind(this);t[n.exitFullscreen](),this.on("change",a)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,a){var i=l[e];i&&t.addEventListener(i,a,!1)},off:function(e,a){var i=l[e];i&&t.removeEventListener(i,a,!1)},raw:n};n?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(t[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[n.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[n.fullscreenEnabled])}}}),a?(e.exports=s,e.exports.default=s):window.screenfull=s):a?e.exports=!1:window.screenfull=!1})()},e3e7:function(e,t,a){}}]);