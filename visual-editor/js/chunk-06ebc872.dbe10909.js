(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06ebc872","chunk-997c2b0e"],{"239d":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"table-title h3 font-weight-bolder m-0 pt-2"},[t._t("default")],2)},n=[],o={name:"TableTitle"},i=o,l=a("2877"),s=Object(l["a"])(i,r,n,!1,null,"2001a59c",null);e["a"]=s.exports},"2b6d":function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return o})),a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return l}));var r=a("18a6");function n(t){return Object(r["a"])({url:"/business/index",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/business/add",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/business/edit",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/business/delete",method:"post",data:t})}},"308f":function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"j",(function(){return i})),a.d(e,"d",(function(){return l})),a.d(e,"e",(function(){return s})),a.d(e,"f",(function(){return c})),a.d(e,"i",(function(){return d})),a.d(e,"g",(function(){return u})),a.d(e,"h",(function(){return p})),a.d(e,"a",(function(){return f})),a.d(e,"b",(function(){return T}));var r=a("5530"),n=(a("2ca0"),a("d3b7"),a("d81d"),a("18a6"));function o(){return Object(n["a"])({url:"/asset/index",method:"post"})}function i(t){return Object(n["a"])({url:"/structure/field",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/asset/list",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/asset/list/a",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/asset/list/b",method:"post",data:t})}function d(t){var e=function(t){return t&&t.startsWith("/")?t.substring(1):t};return new Promise((function(a,r){Object(n["a"])({url:"/asset/list/d",method:"post",data:t}).then((function(t){var r=t.data.data.map((function(t){return t.device_group=e(t.device_group),t}));t.data.data=r,a(t)})).catch((function(t){r(t)}))}))}function u(t){return Object(n["a"])({url:"/asset/list/c",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/asset/update_only",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/asset/add_only",method:"post",data:t})}function T(t){return Object(n["a"])({url:"/asset/delete",method:"post",data:Object(r["a"])({type:1},t)})}},"3cfe":function(t,e,a){"use strict";a("a9e3"),a("d3b7"),a("25f0");var r=a("2b0e");r["default"].mixin({methods:{formatDate:function(t){var e=1e3*parseInt(t),a=new Date(e),r=a.getFullYear(),n=a.getMonth()+1;n=n<10?"0"+n:n;var o=a.getDate();o=o<10?"0"+o:o;var i=a.getHours();i=i<10?"0"+i:i;var l=a.getMinutes();l=l<10?"0"+l:l;var s=a.getSeconds();s=s<10?"0"+s:s;var c=r+"-"+n+"-"+o+" "+i+":"+l+":"+s;return c},jsonTypeConvert:function(t,e){var a=(null===t||void 0===t?void 0:t.toLowerCase())||"";return"float"===a||"integer"===a||"number"===a?Number(e):e.toString()}}})},c4c8:function(t,e,a){"use strict";var r=a("18a6"),n=a("add0"),o="/tp_product",i="/tp_batch";e["a"]={add:function(t){return Object(r["a"])({url:o+"/add",method:"post",data:t})},edit:function(t){return Object(r["a"])({url:o+"/edit",method:"post",data:t})},del:function(t){return Object(r["a"])({url:o+"/delete",method:"post",data:t})},page:function(t){return Object(r["a"])({url:o+"/list",method:"post",data:t})},batchAdd:function(t){return Object(r["a"])({url:i+"/add",method:"post",data:t})},batchEdit:function(t){return Object(r["a"])({url:i+"/edit",method:"post",data:t})},batchDel:function(t){return Object(r["a"])({url:i+"/delete",method:"post",data:t})},batchPage:function(t){return Object(r["a"])({url:i+"/list",method:"post",data:t})},generateBatch:function(t){return Object(r["a"])({url:i+"/generate",method:"post",data:t})},uploadUrl:n["a"]+"api/file/up",importBatch:function(t){return Object(r["a"])({url:i+"/import",method:"post",data:t})},exportQRCodeAndData:function(t){return Object(r["a"])({url:i+"/export",method:"post",data:t})},getPreRegistration:function(t){return Object(r["a"])({url:"/tp_generate_device/list",method:"post",data:t})},generateDevice:function(t){return Object(r["a"])({url:"/tp_generate_device/activate",method:"post",data:t})},deletePreRegistration:function(t){return Object(r["a"])({url:"/tp_generate_device/delete",method:"post",data:t})},getDeviceListByProductId:function(t){return Object(r["a"])({url:"/device/listbyproduct",method:"post",data:t})},addTask:function(t){return Object(r["a"])({url:"/tp_ota_task/add",method:"post",data:t})}}},ca05:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"el-dark-dialog",attrs:{title:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.ADD_DEVICE"),visible:t.dialogVisible,width:"400px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"formRef",attrs:{inline:!1,"label-position":"left","label-width":"80px",model:t.formData,rules:t.formRules}},[a("el-row",[a("el-form-item",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.PROJECT"),prop:"projectId",required:""}},[a("el-select",{attrs:{filterable:"",placeholder:t.$t("COMMON.PLACEHOLDER5")},on:{change:t.handleChangeProject},model:{value:t.formData.projectId,callback:function(e){t.$set(t.formData,"projectId",e)},expression:"formData.projectId"}},t._l(t.projectList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.GROUP"),prop:"groupId"}},[a("el-select",{attrs:{filterable:"",required:"",placeholder:t.$t("COMMON.PLACEHOLDER5")},model:{value:t.formData.groupId,callback:function(e){t.$set(t.formData,"groupId",e)},expression:"formData.groupId"}},t._l(t.groupList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.device_group,value:t.id}})})),1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.DEVICE_NAME"),prop:"deviceName",required:""}},[a("el-input",{attrs:{placeholder:t.$t("COMMON.PLACEHOLDER4")},model:{value:t.formData.deviceName,callback:function(e){t.$set(t.formData,"deviceName",e)},expression:"formData.deviceName"}})],1)],1)],1),a("span",{staticClass:"dialog-footer text-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"save"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("COMMON.SAVE")))])],1)],1)},n=[],o=(a("e9c4"),a("2b6d")),i=a("308f"),l=a("c4c8"),s={props:{visible:{type:[Boolean],default:!1},data:{type:[Object],default:function(){return{}}}},data:function(){return{formData:{projectId:"",groupId:"",deviceName:""},formRules:{projectId:[{required:!0,message:this.$t("COMMON.PLACEHOLDER5")}],groupId:[{required:!0,message:this.$t("COMMON.PLACEHOLDER5")}],deviceName:[{required:!0,message:this.$t("COMMON.PLACEHOLDER4")}]},projectList:[],groupList:[]}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},watch:{visible:function(t){t&&this.initForm()}},methods:{initForm:function(){var t=this;this.formData=JSON.parse(JSON.stringify(this.data)),console.log("initForm",this.formData);var e={page:1,limit:100};Object(o["d"])(e).then((function(e){var a,r=e.data;200===r.code&&(t.projectList=(null===(a=r.data)||void 0===a?void 0:a.data)||[])}))},handleChangeProject:function(t){var e=this;console.log("handleChangeProject",t),Object(i["i"])({business_id:t}).then((function(t){var a=t.data;console.log("asset_index",a),e.groupList=a.data||[]}))},handleSubmit:function(){var t=this;this.$refs["formRef"].validate((function(e){if(e){var a={activation_code:t.formData.id,name:t.formData.deviceName,access_id:t.formData.groupId};l["a"].generateDevice(a).then((function(e){var a=e.data;200===a.code&&(t.$message.success("激活成功"),t.dialogVisible=!1,t.$emit("submit"))}))}}))},handleClose:function(){this.dialogVisible=!1}}},c=s,d=a("2877"),u=Object(d["a"])(c,r,n,!1,null,"17b610c5",null);e["default"]=u.exports},f70c:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rounded card p-4 el-table-transparent el-dark-input"},[a("el-row",{staticClass:"pt-3 pb-4 px-3",attrs:{type:"flex",gutter:20}},[a("el-col",{attrs:{span:12}},[a("TableTitle",[t._v(t._s(t.params.productName+" - "+t.params.batchNumber)+" - "+t._s(t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.PREREGISTRATION_MANAGEMENT")))])],1)],1),a("el-row",{staticClass:"pt-3 pb-4 px-3",attrs:{type:"flex",gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.PLACEHOLDER1")},model:{value:t.params.add_flag,callback:function(e){t.$set(t.params,"add_flag",e)},expression:"params.add_flag"}},[a("el-option",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.ALL"),value:"all"}}),a("el-option",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.ADD_STATUS_DONE"),value:"1"}}),a("el-option",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.ADD_STATUS_UNDO"),value:"0"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.PLACEHOLDER2")},model:{value:t.params.device_number,callback:function(e){t.$set(t.params,"device_number",e)},expression:"params.device_number"}})],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"border"},on:{click:t.getPreRegistrationList}},[t._v(t._s(t.$t("COMMON.SEARCH")))])],1)],1),a("el-form",{staticClass:"inline-edit"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.DEVICE_ID"),prop:"device_code",align:"left"}}),a("el-table-column",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.ADD_STATUS"),prop:"add_flag",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s("1"===e.row.add_flag?t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.ADD_STATUS_DONE"):t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.ADD_STATUS_UNDO"))+" ")]}}])}),a("el-table-column",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.ADD_DATE"),prop:"add_date",align:"center"}}),a("el-table-column",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.ACTIVE_STATUS"),prop:"activate_flag",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s("1"===e.row.activate_flag?t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.ACTIVE_STATUS_DONE"):t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.ACTIVE_STATUS_UNDO"))+" ")]}}])}),a("el-table-column",{attrs:{align:"right",label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.OPERATION"),width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-right"},["1"!==e.row.add_flag?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"primary"},on:{click:function(a){return t.handleAddDevice(e.row)}},slot:"reference"},[t._v(t._s(t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.ADD_DEVICE")))]):t._e(),a("el-popconfirm",{staticClass:"mr-1",attrs:{"confirm-button-text":t.$t("COMMON.CONFIRM"),"cancel-button-text":t.$t("COMMON.CANCEL"),title:t.$t("AUTOMATION.TITLE4")},on:{confirm:function(a){return t.handleDelete(e.row)}}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[t._v(t._s(t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.DELETE")))])],1)],1)]}}])})],1)],1),a("div",{staticClass:"text-right py-3"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.params.total,"current-page":t.params.current_page,"page-size":t.params.per_page},on:{"update:currentPage":function(e){return t.$set(t.params,"current_page",e)},"update:current-page":function(e){return t.$set(t.params,"current_page",e)},"current-change":t.getPreRegistrationList}})],1),a("add-device",{attrs:{visible:t.addDeviceDialogVisible,data:t.currentItem},on:{"update:visible":function(e){t.addDeviceDialogVisible=e},submit:t.getPreRegistrationList}})],1)},n=[],o=(a("d3b7"),a("239d")),i=a("c4c8"),l=(a("3cfe"),a("2fa3")),s=a("ca05"),c={name:"PreRegistration",components:{TableTitle:o["a"],AddDevice:s["default"]},data:function(){return{tableData:[],loading:!1,params:{current_page:1,per_page:10,total:0,add_flag:"all"},addDeviceDialogVisible:!1,currentItem:{}}},mounted:function(){console.log(this.$route.query),this.params.productName=this.$route.query.productName,this.params.batchNumber=this.$route.query.batchNumber,this.getPreRegistrationList()},methods:{getPreRegistrationList:function(){var t=this;this.loading=!0,this.params.batch_id=this.$route.query.batchId,this.params.add_flag="all"===this.params.add_flag?"":this.params.add_flag,i["a"].getPreRegistration(this.params).then((function(e){var a,r=e.data;200===r.code&&(t.tableData=(null===(a=r.data)||void 0===a?void 0:a.data)||[],t.params.total=r.data.total)})).finally((function(){t.loading=!1}))},handleDelete:function(t){var e=this;i["a"].deletePreRegistration({id:t.id}).then((function(t){var a=t.data;200===a.code&&(Object(l["i"])("删除成功！"),e.getPreRegistrationList())}))},handleAddDevice:function(t){this.currentItem=t,this.addDeviceDialogVisible=!0}}},d=c,u=a("2877"),p=Object(u["a"])(d,r,n,!1,null,"73d285e7",null);e["default"]=p.exports}}]);