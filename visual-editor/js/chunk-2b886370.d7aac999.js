(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b886370"],{5517:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"el-dark-dialog",attrs:{title:e.id?e.$t("RULE_ENGINE.DATA_GATEWAY.EDIT"):e.$t("RULE_ENGINE.DATA_GATEWAY.CREATE"),"close-on-click-modal":!1,"before-close":e.handleClose,visible:e.dataGatewayDialogVisible,width:"30%",height:"60%",top:"10vh"},on:{"update:visible":function(t){e.dataGatewayDialogVisible=t}}},[a("el-form",{ref:"CreateForm",staticStyle:{"margin-left":"5%"},attrs:{"label-position":"left","label-width":"140px",model:e.form}},[a("el-form-item",{attrs:{label:e.$t("RULE_ENGINE.DATA_GATEWAY.NAME"),required:""}},[a("el-col",{attrs:{span:20}},[a("el-input",{ref:"nameRef",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("el-form-item",{attrs:{label:e.$t("RULE_ENGINE.DATA_GATEWAY.SIGNATURE_MODE"),required:""}},[a("el-col",{attrs:{span:20}},[a("el-select",{ref:"signatureModeRef",staticClass:"el-dark-input",staticStyle:{width:"100%"},attrs:{"no-data-text":e.$t("COMMON.SELECT_NO_DATA")},model:{value:e.form.signature_mode,callback:function(t){e.$set(e.form,"signature_mode",t)},expression:"form.signature_mode"}},e._l(e.signMethodChoice,(function(e){return a("el-option",{key:e,staticClass:"el-dark-input",attrs:{label:e,value:e}})})),1)],1)],1),a("el-form-item",{attrs:{label:e.$t("RULE_ENGINE.DATA_GATEWAY.IP_WHITELIST")}},[a("el-col",{attrs:{span:20}},[a("el-input",{ref:"IPRef",staticClass:"el-dark-input",attrs:{type:"textarea",rows:"4",placeholder:e.$t("RULE_ENGINE.DATA_GATEWAY.MSG_IP_FORMAT")},model:{value:e.form.ip_whitelist,callback:function(t){e.$set(e.form,"ip_whitelist",t)},expression:"form.ip_whitelist"}})],1)],1),a("el-form-item",{attrs:{label:e.$t("RULE_ENGINE.DATA_GATEWAY.DEVICE_ACCESS_SCOPE"),required:""}},[a("el-col",{attrs:{span:20}},[a("el-select",{ref:"deviceAccessScopeRef",staticClass:"el-dark-input",staticStyle:{width:"100%"},attrs:{"no-data-text":e.$t("COMMON.SELECT_NO_DATA")},model:{value:e.form.device_access_scope,callback:function(t){e.$set(e.form,"device_access_scope",t)},expression:"form.device_access_scope"}},e._l(e.deviceAccessScopeChoice,(function(e){return a("el-option",{key:e.value,staticClass:"el-dark",attrs:{label:e.name,value:e.value}})})),1)],1)],1),a("el-form-item",{attrs:{label:e.$t("RULE_ENGINE.DATA_GATEWAY.API_ACCESS_SCOPE"),required:""}},[a("el-col",{attrs:{span:20}},[a("el-select",{ref:"apiAccessScopeRef",staticClass:"el-dark-input",staticStyle:{width:"100%"},attrs:{"no-data-text":e.$t("COMMON.SELECT_NO_DATA")},model:{value:e.form.api_access_scope,callback:function(t){e.$set(e.form,"api_access_scope",t)},expression:"form.api_access_scope"}},e._l(e.apiAccessScopeChoice,(function(e){return a("el-option",{key:e.value,staticClass:"el-dark-input",attrs:{label:e.name,value:e.value}})})),1)],1)],1),a("el-form-item",{attrs:{label:e.$t("RULE_ENGINE.DATA_GATEWAY.DESCRIPTION")}},[a("el-col",{attrs:{span:20}},[a("el-input",{ref:"descRef",staticClass:"el-dark-input",attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("el-button",{staticClass:"cancel-button",attrs:{type:"cancel",size:"medium",plain:""},on:{click:e.cancelDialog}},[e._v(e._s(e.$t("RULE_ENGINE.DATA_GATEWAY.CANCEL")))]),a("el-button",{staticClass:"medium",staticStyle:{"margin-left":"10px"},attrs:{type:"save",size:"medium"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("RULE_ENGINE.DATA_GATEWAY.SUBMIT")))])],1)],1)],1)},s=[],c=(a("e9c4"),a("b0c0"),a("ac1f"),a("00b4"),a("d956")),o=a("2fa3"),n={name:"CreateForm",props:{id:{default:null},data:{default:null},visible:{type:[Boolean],default:!1}},computed:{dataGatewayDialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},watch:{visible:{handler:function(e){e&&this.id&&(this.form=this.data)}}},data:function(){return{signMethodChoice:["MD5","HAS256"],apiAccessScopeChoice:[{name:this.$t("RULE_ENGINE.DATA_GATEWAY.ALL"),value:"1"},{name:this.$t("RULE_ENGINE.DATA_GATEWAY.PART"),value:"2"}],deviceAccessScopeChoice:[{name:this.$t("RULE_ENGINE.DATA_GATEWAY.ALL"),value:"1"},{name:this.$t("RULE_ENGINE.DATA_GATEWAY.PART"),value:"2"}],listData:[],form:{id:"",name:"",signature_mode:"",ip_whitelist:"",device_access_scope:"1",api_access_scope:"1",created_at:0,description:""}}},methods:{onSubmit:function(){var e=this;if(this.validate()){var t=JSON.parse(JSON.stringify(this.form));this.id?Object(c["i"])(t).then((function(t){200===t.data.code&&(e.$emit("submit"),e.listData=[],e.dataGatewayDialogVisible=!1,e.$message({message:e.$t("COMMON.EDIT_SUCCESS"),center:!0,type:"success"}))})):Object(c["b"])(t).then((function(t){200===t.data.code&&(e.$emit("submit"),e.listData=[],e.dataGatewayDialogVisible=!1,e.$message({message:e.$t("COMMON.ADD_SUCCESS"),center:!0,type:"success"}))})),this.form={}}},handleClose:function(){this.form={},this.listData=[],this.dataGatewayDialogVisible=!1},cancelDialog:function(){this.form={},this.listData=[],this.dataGatewayDialogVisible=!1},validate:function(){var e=/^(?:(?:^|\|)(?:[0-9]|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])(?:\.(?:[0-9]|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])){3})+$/;return this.form.name&&""!=this.form.name?this.form.signature_mode&&""!=this.form.signature_mode?this.form.ip_whitelist&&!e.test(this.form.ip_whitelist)?(Object(o["h"])(this.$t("RULE_ENGINE.DATA_GATEWAY.MSG_IP_ERROR")),!1):this.form.device_access_scope&&""!=this.form.device_access_scope?!(!this.form.api_access_scope||""==this.form.api_access_scope)||(this.$refs.apiAccessScopeRef.focus(),Object(o["h"])(this.$t("RULE_ENGINE.DATA_GATEWAY.请选择接口接入范围")),!1):(this.$refs.deviceAccessScopeRef.focus(),Object(o["h"])(this.$t("RULE_ENGINE.DATA_GATEWAY.MSG_DEVICE_ACCESS_SCOPE_ERROR")),!1):(this.$refs.signatureModeRef.focus(),Object(o["h"])(this.$t("RULE_ENGINE.DATA_GATEWAY.MSG_SIGNATURE_MODE_ERROR")),!1):(this.$refs.nameRef.focus(),Object(o["h"])(this.$t("RULE_ENGINE.DATA_GATEWAY.MSG_NAME_ERROR")),!1)}}},l=n,r=(a("bb3a"),a("2877")),u=Object(r["a"])(l,i,s,!1,null,"3ec69592",null);t["default"]=u.exports},"8a72":function(e,t,a){},bb3a:function(e,t,a){"use strict";a("8a72")},d956:function(e,t,a){"use strict";a.d(t,"g",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"i",(function(){return o})),a.d(t,"d",(function(){return n})),a.d(t,"e",(function(){return l})),a.d(t,"h",(function(){return r})),a.d(t,"f",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return p}));var i=a("18a6");function s(e){return Object(i["a"])({url:"/openapi/auth/list",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/openapi/auth/add",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/openapi/auth/edit",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/openapi/auth/del",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/openapi/api/list",method:"post",data:{tp_openapi_auth_id:e,current_page:1,per_page:1e4,name:"",api_type:"",service_type:""}})}function r(e){return Object(i["a"])({url:"/openapi/rapi/edit",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/device/business/asset/permissions",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/openapi/rdevice/add",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/openapi/rdevice/del",method:"post",data:e})}}}]);