(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d09d0cc"],{"53bb":function(t,e,a){"use strict";a("f237")},a1b9:function(t,e,a){"use strict";a.d(e,"d",(function(){return l})),a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return n})),a.d(e,"e",(function(){return r})),a.d(e,"f",(function(){return c})),a.d(e,"g",(function(){return f}));var i=a("18a6");function l(t){return Object(i["a"])({url:"/tp_data_services_config/list",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/tp_data_services_config/add",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/tp_data_services_config/edit",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/tp_data_services_config/del",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/tp_data_services_config/quize",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/tp_data_services_config/tptable",method:"post",data:t})}function f(t){return Object(i["a"])({url:"/tp_data_services_config/tptablefield",method:"post",data:t})}},e325:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"el-dark-dialog",attrs:{title:t.data?t.$t("DATASERVICE_MANAGEMENT.EDITTITLE"):t.$t("DATASERVICE_MANAGEMENT.ADDTITLE"),"close-on-click-modal":!1,"before-close":t.handleClose,visible:t.dialogVisible,width:"60%",height:"60%",top:"10vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"CreateForm",attrs:{"label-position":"left","label-width":"140px",model:t.form}},[a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMNAME"),required:""}},[a("el-input",{ref:"nameRef",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMWAY"),required:""}},[a("el-select",{ref:"wayRef",staticClass:"w-100",attrs:{"no-data-text":t.$t("COMMON.SELECT_NO_DATA")},model:{value:t.form.signature_mode,callback:function(e){t.$set(t.form,"signature_mode",e)},expression:"form.signature_mode"}},[a("el-option",{attrs:{label:"MD5",value:"MD5"}}),a("el-option",{attrs:{label:"HAS256",value:"HAS256"}})],1)],1),a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMIPWHITELIST")}},[a("el-input",{ref:"ip_whitelistRef",staticClass:"el-dark-input",attrs:{placeholder:t.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER6"),type:"textarea"},model:{value:t.form.ip_whitelist,callback:function(e){t.$set(t.form,"ip_whitelist",e)},expression:"form.ip_whitelist"}})],1),a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMINTERFACE_SUPPORT_FLAG"),required:""}},[a("el-select",{ref:"selRef",staticClass:"w-100",attrs:{"no-data-text":t.$t("COMMON.SELECT_NO_DATA")},on:{change:t.handleTypeChange},model:{value:t.form.api_flag,callback:function(e){t.$set(t.form,"api_flag",e)},expression:"form.api_flag"}},[a("el-option",{attrs:{label:"http接口",value:"0"}}),a("el-option",{attrs:{label:"http和ws接口",value:"1"}})],1)],1),1==t.noticeType?a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMSPACE"),required:""}},[a("el-input",{ref:"intervalRef",staticClass:"el-dark-input",model:{value:t.form.time_interval,callback:function(e){t.$set(t.form,"time_interval",e)},expression:"form.time_interval"}})],1):t._e(),a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMDESC")}},[a("el-input",{ref:"remarkRef",staticClass:"el-dark-input",attrs:{type:"textarea"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),a("el-form-item",[a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMSQLWRITiINGASSISTANCE")}},[a("el-select",{ref:"sqlIdRef",staticClass:"w-100",attrs:{"no-data-text":t.$t("COMMON.SELECT_NO_DATA")},on:{change:t.handleSqlChange},model:{value:t.form.table_name,callback:function(e){t.$set(t.form,"table_name",e)},expression:"form.table_name"}},t._l(t.sqlList,(function(t){return a("el-option",{key:t.table_name,attrs:{label:t.table_name,value:t.table_name}})})),1)],1)],1),a("el-form-item",[a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"field",label:t.$t("DATASERVICE_MANAGEMENT.TABLE")}}),a("el-table-column",{attrs:{prop:"type",label:t.$t("DATASERVICE_MANAGEMENT.TABLE1")}}),a("el-table-column",{attrs:{prop:"comment",label:t.$t("DATASERVICE_MANAGEMENT.TABLE2")}})],1)],1),a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMSQL")}},[a("el-input",{ref:"sqlRef",staticClass:"el-dark-input",attrs:{type:"textarea"},model:{value:t.form.data_sql,callback:function(e){t.$set(t.form,"data_sql",e)},expression:"form.data_sql"}})],1),a("el-form-item",[a("el-button",{staticClass:"medium",attrs:{type:"save",size:"medium"},on:{click:t.onBtn}},[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.BTN")))])],1),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("el-button",{staticClass:"cancel-button",attrs:{type:"cancel",size:"medium",plain:""},on:{click:t.cancelDialog}},[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.CANCEL")))]),a("el-button",{staticClass:"medium",attrs:{type:"save",size:"medium"},on:{click:t.onSubmit}},[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.SAVE")))])],1)],1)],1),a("el-dialog",{staticClass:"el-dark-dialog el-dark-input",attrs:{title:t.$t("DATASERVICE_MANAGEMENT.TITLE"),visible:t.dialogVisible2,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!0,"append-to-body":!0,width:"800px"},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("div",{staticClass:"dialog-body"},[a("el-form",{ref:"form",attrs:{rules:t.rules,"label-position":"left",model:t.formModel,"label-width":"100px"}},[a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.LABLE"),prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:10,disabled:""},model:{value:t.formModel.content,callback:function(e){t.$set(t.formModel,"content",e)},expression:"formModel.content"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("el-button",{staticClass:"medium",attrs:{type:"save",size:"medium"},on:{click:t.onSend}},[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.SAVE")))])],1)],1)],1)])],1)},l=[],s=(a("e9c4"),a("ac1f"),a("1276"),a("00b4"),a("a9e3"),a("b0c0"),a("2fa3")),o=a("a1b9"),n={name:"CreateForm",components:{},props:{data:{default:null},visible:{type:[Boolean],default:!1}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},watch:{visible:{handler:function(t){t?this.data?this.getDetail(this.data):this.form={name:"",signature_mode:"",ip_whitelist:"",api_flag:"",time_interval:"",remark:"",data_sql:""}:this.form={}}}},data:function(){return{noticeType:"",dialogVisible2:!1,form:{name:"",signature_mode:"",ip_whitelist:"",api_flag:"",time_interval:"",remark:"",data_sql:""},formModel:{content:""},disabled:!1,sqlList:[],tableData:[]}},created:function(){this.getSql()},methods:{handleTypeChange:function(t){this.form.api_flag=t,this.noticeType=t},getSql:function(){var t=this;Object(o["f"])({}).then((function(e){200==e.status&&(t.sqlList=e.data.data)}))},handleSqlChange:function(t){var e=this;Object(o["g"])({table_name:t}).then((function(t){200==t.status&&(e.tableData=t.data.data)}))},onBtn:function(){var t=this;""!=this.form.data_sql?(this.dialogVisible2=!0,Object(o["e"])({data_sql:this.form.data_sql}).then((function(e){if(200===e.data.code){var a=JSON.stringify(e.data.data);t.formModel.content=a}}))):Object(s["h"])(this.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER5"))},getDetail:function(t){this.form=t,this.noticeType=t.api_flag},onSubmit:function(){var t=this;if(this.validate()){if(this.form.ip_whitelist)for(var e=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,a=this.form.ip_whitelist.split("|"),i=0;i<a.length;i++)if(0==e.test(a[i]))return Object(s["h"])(this.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER7")),!1;var l=this.form;this.data?"1"===l.api_flag&&(l.time_interval=Number(this.form.time_interval)):"1"===l.api_flag?l.time_interval=Number(this.form.time_interval):l.time_interval=0,this.data?Object(o["c"])(l).then((function(e){200===e.data.code&&(t.$emit("submit"),t.noticeType="",t.dialogVisible=!1,t.$message({message:"编辑成功",center:!0,type:"success"}))})):Object(o["a"])(l).then((function(e){200===e.data.code&&(t.$emit("submit"),t.noticeType="",t.dialogVisible=!1,t.$message({message:"新建成功",center:!0,type:"success"}))}))}},handleClose:function(){this.form={},this.noticeType="",this.dialogVisible=!1},cancelDialog:function(){this.form={},this.noticeType="",this.dialogVisible=!1},onSend:function(){this.dialogVisible2=!1},validate:function(){return this.form.name&&""!==this.form.name?this.form.signature_mode&&""!==this.form.signature_mode?this.form.api_flag&&""!==this.form.api_flag?!!(1!==this.noticeType||this.form.time_interval&&""!==this.form.time_interval)||(Object(s["h"])(this.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER4")),!1):(this.$refs.selRef.focus(),Object(s["h"])(this.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER3")),!1):(this.$refs.wayRef.focus(),Object(s["h"])(this.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER2")),!1):(this.$refs.nameRef.focus(),Object(s["h"])(this.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER1")),!1)}}},r=n,c=(a("53bb"),a("2877")),f=Object(c["a"])(r,i,l,!1,null,"584ac5fd",null);e["default"]=f.exports},f237:function(t,e,a){}}]);