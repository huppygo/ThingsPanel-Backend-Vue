(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f8941b4","chunk-7d09d0cc"],{"239d":function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"table-title h3 font-weight-bolder m-0 pt-2"},[t._t("default")],2)},i=[],n={name:"TableTitle"},o=n,s=a("2877"),r=Object(s["a"])(o,l,i,!1,null,"2001a59c",null);e["a"]=r.exports},"26f1":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rounded p-4 card"},[a("el-row",{staticClass:"pt-3 pb-4 px-3",attrs:{type:"flex",gutter:20}},[a("el-col",{attrs:{span:12}},[a("TableTitle",[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.DATASERVICE")))])],1),a("el-col",{staticClass:"px-2 text-right",attrs:{span:12}},[a("el-button",{attrs:{size:"medium",type:"border"},on:{click:t.handleShowAdd}},[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.ADD")))])],1)],1),a("el-row",{staticClass:"pt-3 pb-4 px-3",attrs:{type:"flex",gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:t.$t("DATASERVICE_MANAGEMENT.SEARCHPLACEHOLDER")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",placeholder:t.$t("DATASERVICE_MANAGEMENT.SEARCHPLACEHOLDER2")},model:{value:t.enable_flag,callback:function(e){t.enable_flag=e},expression:"enable_flag"}},[a("el-option",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.SELECT1"),value:1}}),a("el-option",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.SELECT2"),value:0}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"border"},on:{click:t.getSearch}},[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.SEARCH")))])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.NO"),type:"index",width:"100"}}),a("el-table-column",{attrs:{prop:"name",label:t.$t("DATASERVICE_MANAGEMENT.NAME")}}),a("el-table-column",{attrs:{prop:"app_key",label:t.$t("DATASERVICE_MANAGEMENT.APPKEY")}}),a("el-table-column",{attrs:{prop:"signature_mode",label:t.$t("DATASERVICE_MANAGEMENT.WAY")}}),a("el-table-column",{attrs:{prop:"ip_whitelist",label:t.$t("DATASERVICE_MANAGEMENT.IPWHITELIST")}}),a("el-table-column",{attrs:{prop:"api_flag",label:t.$t("DATASERVICE_MANAGEMENT.INTERFACE_SUPPORT_FLAG")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s("0"===e.row.api_flag?"http接口":"http和ws接口")+" ")]}}])}),a("el-table-column",{attrs:{prop:"remark",label:t.$t("DATASERVICE_MANAGEMENT.DESC")}}),a("el-table-column",{attrs:{prop:"created_at",label:t.$t("DATASERVICE_MANAGEMENT.CREATEDATE")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.created_at?t.dateFormat(e.row.created_at):"")+" ")]}}])}),a("el-table-column",{attrs:{prop:"enable_flag",label:t.$t("DATASERVICE_MANAGEMENT.STATUS")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"inactive-text":e.row.statusValue?t.$t("DATASERVICE_MANAGEMENT.SRARTED"):t.$t("DATASERVICE_MANAGEMENT.PUTONHOLD"),"active-text":""},on:{change:function(a){return t.handleSetStatus(e.row)}},model:{value:e.row.statusValue,callback:function(a){t.$set(e.row,"statusValue",a)},expression:"scope.row.statusValue"}})]}}])}),a("el-table-column",{attrs:{prop:"actions",label:t.$t("DATASERVICE_MANAGEMENT.OPERATION"),align:"left",width:"320px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"indigo"},on:{click:function(a){return t.handleView(e.row.secret_key)}}},[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.VIEW")))]),a("el-button",{staticClass:"mr-3",attrs:{size:"mini",type:"indigo"},on:{click:function(a){return t.handleShowEdit(e.row)}}},[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.EDIT")))]),a("el-popconfirm",{attrs:{"confirm-button-text":t.$t("COMMON.CONFIRM"),"cancel-button-text":t.$t("COMMON.CANCEL"),title:t.$t("DATASERVICE_MANAGEMENT.TITLE4")},on:{confirm:function(a){return t.handle_del(e.row.id)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.DELETE")))])],1)]}}])})],1),a("div",{staticClass:"text-right py-3"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.data_count,"current-page":t.page,"page-size":t.per_page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.page_change}})],1),a("CreateForm",{attrs:{visible:t.dialogVisible,data:t.formData},on:{"update:visible":function(e){t.dialogVisible=e},submit:t.get_data}}),a("el-dialog",{staticClass:"el-dark-dialog el-dark-input",attrs:{title:t.$t("DATASERVICE_MANAGEMENT.VIEW"),visible:t.dialogViewVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!0,"append-to-body":!0,width:"400px"},on:{"update:visible":function(e){t.dialogViewVisible=e}}},[a("div",{staticClass:"dialog-body"},[a("el-form",{ref:"form",attrs:{rules:t.rules,"label-position":"left",model:t.formModel,"label-width":"100px"}},[a("el-tooltip",{attrs:{effect:"dark",content:t.formModel.tooltip?t.formModel.tooltip:t.$t("DEVICE_MANAGEMENT.EDIT_PARAMETER.COPY"),placement:"right-start"}},[a("el-input",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.formModel.value,expression:"formModel.value",arg:"copy"}],attrs:{readonly:""},on:{focus:function(e){return t.handleCopy(t.formModel)}},model:{value:t.formModel.value,callback:function(e){t.$set(t.formModel,"value",e)},expression:"formModel.value"}})],1)],1)],1)])],1)},i=[],n=(a("b0c0"),a("d3b7"),a("25f0"),a("159b"),a("a9e3"),a("e325")),o=a("239d"),s=a("a1b9"),r=(a("3cfe"),a("2fa3")),c={name:"notice",components:{CreateForm:n["default"],TableTitle:o["a"]},data:function(){return{dialogVisible:!1,dialogViewVisible:!1,formData:"",loading:!1,per_page:10,page:1,name:"",enable_flag:"",data_count:2,tableData:[],secret_key:"",formModel:{tooltip:"",value:""}}},created:function(){this.get_data()},methods:{get_data:function(){var t=this,e={current_page:this.page,per_page:10,name:this.name,enable_flag:this.enable_flag.toString()};Object(s["d"])(e).then((function(e){200==e.status&&(t.tableData=e.data.data.data,t.tableData.forEach((function(t){t.statusValue=1==t.enable_flag})),t.data_count=e.data.data.total,t.loading=!1)}))},page_change:function(t){this.loading||(this.loading=!0,this.page=t,this.get_data())},handle_del:function(t){var e=this;Object(s["b"])({id:t}).then((function(t){200===t.data.code&&(e.get_data(),e.$message({message:"删除成功",center:!0,type:"success"}))}))},handleShowAdd:function(){this.formData="",this.dialogVisible=!0},handleShowEdit:function(t){this.formData=t,this.dialogVisible=!0},handleView:function(t){console.log(t),this.formModel.value=t,this.dialogViewVisible=!0},getSearch:function(){this.get_data()},handleSetStatus:function(t){var e=this,a=t.statusValue?"1":"0";Object(s["c"])({id:t.id,enable_flag:a}).then((function(t){200===t.data.code&&(e.get_data(),Object(r["i"])("1"===a?e.$t("AUTOMATION.ENABLED"):e.$t("AUTOMATION.DISABLED")))}))},handleCopy:function(t){t.tooltip=this.$t("DEVICE_MANAGEMENT.EDIT_PARAMETER.COPIED")},dateFormat:function(t){if(!t)return"";if(10===t.toString().length)t=1e3*Number(t);else if(13===t.toString().length)t=t;else{if(16!==t.toString().length)return"";t=t.toString().substring(0,13)}var e=parseInt(t),a=new Date(e),l=a.getFullYear(),i=a.getMonth()+1;i=i<10?"0"+i:i;var n=a.getDate();n=n<10?"0"+n:n;var o=a.getHours();o=o<10?"0"+o:o;var s=a.getMinutes();s=s<10?"0"+s:s;var r=a.getSeconds();r=r<10?"0"+r:r;var c=l+"-"+i+"-"+n+" "+o+":"+s+":"+r;return c}}},d=c,u=(a("4f05"),a("2877")),f=Object(u["a"])(d,l,i,!1,null,"47f4ec44",null);e["default"]=f.exports},"3cfe":function(t,e,a){"use strict";a("a9e3"),a("d3b7"),a("25f0");var l=a("2b0e");l["default"].mixin({methods:{formatDate:function(t){var e=1e3*parseInt(t),a=new Date(e),l=a.getFullYear(),i=a.getMonth()+1;i=i<10?"0"+i:i;var n=a.getDate();n=n<10?"0"+n:n;var o=a.getHours();o=o<10?"0"+o:o;var s=a.getMinutes();s=s<10?"0"+s:s;var r=a.getSeconds();r=r<10?"0"+r:r;var c=l+"-"+i+"-"+n+" "+o+":"+s+":"+r;return c},jsonTypeConvert:function(t,e){var a=(null===t||void 0===t?void 0:t.toLowerCase())||"";return"float"===a||"integer"===a||"number"===a?Number(e):e.toString()}}})},"4f05":function(t,e,a){"use strict";a("782d")},"53bb":function(t,e,a){"use strict";a("f237")},"782d":function(t,e,a){},a1b9:function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return s})),a.d(e,"e",(function(){return r})),a.d(e,"f",(function(){return c})),a.d(e,"g",(function(){return d}));var l=a("18a6");function i(t){return Object(l["a"])({url:"/tp_data_services_config/list",method:"post",data:t})}function n(t){return Object(l["a"])({url:"/tp_data_services_config/add",method:"post",data:t})}function o(t){return Object(l["a"])({url:"/tp_data_services_config/edit",method:"post",data:t})}function s(t){return Object(l["a"])({url:"/tp_data_services_config/del",method:"post",data:t})}function r(t){return Object(l["a"])({url:"/tp_data_services_config/quize",method:"post",data:t})}function c(t){return Object(l["a"])({url:"/tp_data_services_config/tptable",method:"post",data:t})}function d(t){return Object(l["a"])({url:"/tp_data_services_config/tptablefield",method:"post",data:t})}},e325:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"el-dark-dialog",attrs:{title:t.data?t.$t("DATASERVICE_MANAGEMENT.EDITTITLE"):t.$t("DATASERVICE_MANAGEMENT.ADDTITLE"),"close-on-click-modal":!1,"before-close":t.handleClose,visible:t.dialogVisible,width:"60%",height:"60%",top:"10vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"CreateForm",attrs:{"label-position":"left","label-width":"140px",model:t.form}},[a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMNAME"),required:""}},[a("el-input",{ref:"nameRef",model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMWAY"),required:""}},[a("el-select",{ref:"wayRef",staticClass:"w-100",attrs:{"no-data-text":t.$t("COMMON.SELECT_NO_DATA")},model:{value:t.form.signature_mode,callback:function(e){t.$set(t.form,"signature_mode",e)},expression:"form.signature_mode"}},[a("el-option",{attrs:{label:"MD5",value:"MD5"}}),a("el-option",{attrs:{label:"HAS256",value:"HAS256"}})],1)],1),a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMIPWHITELIST")}},[a("el-input",{ref:"ip_whitelistRef",staticClass:"el-dark-input",attrs:{placeholder:t.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER6"),type:"textarea"},model:{value:t.form.ip_whitelist,callback:function(e){t.$set(t.form,"ip_whitelist",e)},expression:"form.ip_whitelist"}})],1),a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMINTERFACE_SUPPORT_FLAG"),required:""}},[a("el-select",{ref:"selRef",staticClass:"w-100",attrs:{"no-data-text":t.$t("COMMON.SELECT_NO_DATA")},on:{change:t.handleTypeChange},model:{value:t.form.api_flag,callback:function(e){t.$set(t.form,"api_flag",e)},expression:"form.api_flag"}},[a("el-option",{attrs:{label:"http接口",value:"0"}}),a("el-option",{attrs:{label:"http和ws接口",value:"1"}})],1)],1),1==t.noticeType?a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMSPACE"),required:""}},[a("el-input",{ref:"intervalRef",staticClass:"el-dark-input",model:{value:t.form.time_interval,callback:function(e){t.$set(t.form,"time_interval",e)},expression:"form.time_interval"}})],1):t._e(),a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMDESC")}},[a("el-input",{ref:"remarkRef",staticClass:"el-dark-input",attrs:{type:"textarea"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),a("el-form-item",[a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMSQLWRITiINGASSISTANCE")}},[a("el-select",{ref:"sqlIdRef",staticClass:"w-100",attrs:{"no-data-text":t.$t("COMMON.SELECT_NO_DATA")},on:{change:t.handleSqlChange},model:{value:t.form.table_name,callback:function(e){t.$set(t.form,"table_name",e)},expression:"form.table_name"}},t._l(t.sqlList,(function(t){return a("el-option",{key:t.table_name,attrs:{label:t.table_name,value:t.table_name}})})),1)],1)],1),a("el-form-item",[a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"field",label:t.$t("DATASERVICE_MANAGEMENT.TABLE")}}),a("el-table-column",{attrs:{prop:"type",label:t.$t("DATASERVICE_MANAGEMENT.TABLE1")}}),a("el-table-column",{attrs:{prop:"comment",label:t.$t("DATASERVICE_MANAGEMENT.TABLE2")}})],1)],1),a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.FORMSQL")}},[a("el-input",{ref:"sqlRef",staticClass:"el-dark-input",attrs:{type:"textarea"},model:{value:t.form.data_sql,callback:function(e){t.$set(t.form,"data_sql",e)},expression:"form.data_sql"}})],1),a("el-form-item",[a("el-button",{staticClass:"medium",attrs:{type:"save",size:"medium"},on:{click:t.onBtn}},[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.BTN")))])],1),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("el-button",{staticClass:"cancel-button",attrs:{type:"cancel",size:"medium",plain:""},on:{click:t.cancelDialog}},[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.CANCEL")))]),a("el-button",{staticClass:"medium",attrs:{type:"save",size:"medium"},on:{click:t.onSubmit}},[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.SAVE")))])],1)],1)],1),a("el-dialog",{staticClass:"el-dark-dialog el-dark-input",attrs:{title:t.$t("DATASERVICE_MANAGEMENT.TITLE"),visible:t.dialogVisible2,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!0,"append-to-body":!0,width:"800px"},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("div",{staticClass:"dialog-body"},[a("el-form",{ref:"form",attrs:{rules:t.rules,"label-position":"left",model:t.formModel,"label-width":"100px"}},[a("el-form-item",{attrs:{label:t.$t("DATASERVICE_MANAGEMENT.LABLE"),prop:"content"}},[a("el-input",{attrs:{type:"textarea",rows:10,disabled:""},model:{value:t.formModel.content,callback:function(e){t.$set(t.formModel,"content",e)},expression:"formModel.content"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("el-button",{staticClass:"medium",attrs:{type:"save",size:"medium"},on:{click:t.onSend}},[t._v(t._s(t.$t("DATASERVICE_MANAGEMENT.SAVE")))])],1)],1)],1)])],1)},i=[],n=(a("e9c4"),a("ac1f"),a("1276"),a("00b4"),a("a9e3"),a("b0c0"),a("2fa3")),o=a("a1b9"),s={name:"CreateForm",components:{},props:{data:{default:null},visible:{type:[Boolean],default:!1}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},watch:{visible:{handler:function(t){t?this.data?this.getDetail(this.data):this.form={name:"",signature_mode:"",ip_whitelist:"",api_flag:"",time_interval:"",remark:"",data_sql:""}:this.form={}}}},data:function(){return{noticeType:"",dialogVisible2:!1,form:{name:"",signature_mode:"",ip_whitelist:"",api_flag:"",time_interval:"",remark:"",data_sql:""},formModel:{content:""},disabled:!1,sqlList:[],tableData:[]}},created:function(){this.getSql()},methods:{handleTypeChange:function(t){this.form.api_flag=t,this.noticeType=t},getSql:function(){var t=this;Object(o["f"])({}).then((function(e){200==e.status&&(t.sqlList=e.data.data)}))},handleSqlChange:function(t){var e=this;Object(o["g"])({table_name:t}).then((function(t){200==t.status&&(e.tableData=t.data.data)}))},onBtn:function(){var t=this;""!=this.form.data_sql?(this.dialogVisible2=!0,Object(o["e"])({data_sql:this.form.data_sql}).then((function(e){if(200===e.data.code){var a=JSON.stringify(e.data.data);t.formModel.content=a}}))):Object(n["h"])(this.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER5"))},getDetail:function(t){this.form=t,this.noticeType=t.api_flag},onSubmit:function(){var t=this;if(this.validate()){if(this.form.ip_whitelist)for(var e=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,a=this.form.ip_whitelist.split("|"),l=0;l<a.length;l++)if(0==e.test(a[l]))return Object(n["h"])(this.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER7")),!1;var i=this.form;this.data?"1"===i.api_flag&&(i.time_interval=Number(this.form.time_interval)):"1"===i.api_flag?i.time_interval=Number(this.form.time_interval):i.time_interval=0,this.data?Object(o["c"])(i).then((function(e){200===e.data.code&&(t.$emit("submit"),t.noticeType="",t.dialogVisible=!1,t.$message({message:"编辑成功",center:!0,type:"success"}))})):Object(o["a"])(i).then((function(e){200===e.data.code&&(t.$emit("submit"),t.noticeType="",t.dialogVisible=!1,t.$message({message:"新建成功",center:!0,type:"success"}))}))}},handleClose:function(){this.form={},this.noticeType="",this.dialogVisible=!1},cancelDialog:function(){this.form={},this.noticeType="",this.dialogVisible=!1},onSend:function(){this.dialogVisible2=!1},validate:function(){return this.form.name&&""!==this.form.name?this.form.signature_mode&&""!==this.form.signature_mode?this.form.api_flag&&""!==this.form.api_flag?!!(1!==this.noticeType||this.form.time_interval&&""!==this.form.time_interval)||(Object(n["h"])(this.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER4")),!1):(this.$refs.selRef.focus(),Object(n["h"])(this.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER3")),!1):(this.$refs.wayRef.focus(),Object(n["h"])(this.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER2")),!1):(this.$refs.nameRef.focus(),Object(n["h"])(this.$t("DATASERVICE_MANAGEMENT.PLACEHOLDER1")),!1)}}},r=s,c=(a("53bb"),a("2877")),d=Object(c["a"])(r,l,i,!1,null,"584ac5fd",null);e["default"]=d.exports},f237:function(t,e,a){}}]);