(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0acefc95"],{"1ab6":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"el-dark-dialog",attrs:{title:t.$t("PLUGIN.TAB2_CONTENT.EDIT_BTN"),visible:t.dialogVisible,width:"50%","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{staticClass:"el-dark-input",attrs:{"label-position":"left",model:t.formData,rules:t.formRules}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.NAME"),prop:"name"}},[a("el-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.DEVICETYPE"),prop:"device_type"}},[a("el-select",{model:{value:t.formData.device_type,callback:function(e){t.$set(t.formData,"device_type",e)},expression:"formData.device_type"}},[a("el-option",{attrs:{value:"1",label:t.$t("PLUGIN.TAB2_CONTENT.DEVICE")}}),a("el-option",{attrs:{value:"2",label:t.$t("PLUGIN.TAB2_CONTENT.NEWWORK")}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.PROTOCOLTYPE"),prop:"protocol_type"}},[a("el-input",{model:{value:t.formData.protocol_type,callback:function(e){t.$set(t.formData,"protocol_type",e)},expression:"formData.protocol_type"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.CONNECTADDRESS"),prop:"access_address"}},[a("el-input",{model:{value:t.formData.access_address,callback:function(e){t.$set(t.formData,"access_address",e)},expression:"formData.access_address"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.HTTPADDRESS"),prop:"http_address"}},[a("el-input",{model:{value:t.formData.http_address,callback:function(e){t.$set(t.formData,"http_address",e)},expression:"formData.http_address"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.LABLE"),prop:"sub_topic_prefix"}},[a("el-input",{model:{value:t.formData.sub_topic_prefix,callback:function(e){t.$set(t.formData,"sub_topic_prefix",e)},expression:"formData.sub_topic_prefix"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.AUTHOR"),prop:"author"}},[a("el-input",{model:{value:t.formData.author,callback:function(e){t.$set(t.formData,"author",e)},expression:"formData.author"}})],1)],1),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.DESCRIBE"),prop:"description"}},[a("el-input",{model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[t._v(" "+t._s(t.$t("PLUGIN.TAB2_CONTENT.CONNECTNUMBER"))+" ")]),a("el-col",{attrs:{span:8,offset:8}},[a("el-button",{attrs:{type:"border"},on:{click:t.addConnectForm}},[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.ADDCONFIG")))])],1)],1),t._l(t.connectForm,(function(e,o){return a("el-row",{key:o,staticClass:"config-line",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:t.$t("PLUGIN.TAB2_CONTENT.PLACEHOLDER1")},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"form.key"}})],1),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:t.$t("PLUGIN.TAB2_CONTENT.PLACEHOLDER2")},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"form.value"}})],1),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.delConnectForm(o)}}},[t._v(" "+t._s(t.$t("PLUGIN.TAB2_CONTENT.DELETE"))+" ")])],1)],1)}))],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:t.handleClose}},[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.CANCEL")))]),a("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.CONFIRM")))])],1)],1)],1)},r=[],s=a("5530"),l=(a("b0c0"),a("a4d3"),a("e01a"),a("e9c4"),a("d3b7"),a("a434"),a("3b63")),i=a("2fa3"),n=a("f570"),c=!0,d={name:"EditPlugin",props:{visible:{type:[Boolean],default:!1},data:{type:[Object],default:function(){return{}}}},data:function(){return{dialogVisible:!1,formData:{name:this.data.name,device_type:this.data.device_type,protocol_type:this.data.protocol_type,access_address:this.data.access_address,http_address:this.data.http_address,sub_topic_prefix:this.data.sub_topic_prefix,author:this.data.author,description:this.data.description,additional_info:this.data.additional_info},formRules:{name:[{required:c,message:n["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER3")}],device_type:[{required:c,message:n["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER4")}],protocol_type:[{required:c,message:n["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER5")}],access_address:[{required:c,message:n["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER6")}],http_address:[{required:c,message:n["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER7")}],sub_topic_prefix:[{required:c,message:n["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER8")}]},loading:!1,connectForm:[]}},watch:{visible:{handler:function(t){console.log("====visible",t),t&&(this.loading=!1,this.dialogVisible=t)}},data:{handler:function(t){console.log("watch",t),t&&(this.formData=Object(s["a"])({},t),this.connectForm=JSON.parse(t.additional_info))}}},methods:{handleSubmit:function(){var t=this;this.loading=!0,this.formData.additional_info=JSON.stringify(this.connectForm),this.formData.id&&l["a"].edit(this.formData).then((function(e){var a=e.data;200==a.code&&(Object(i["i"])("编辑成功！"),t.$emit("submit"),t.handleClose())})).finally((function(){return t.loading=!1}))},handleClose:function(){this.$emit("update:visible",!1),this.dialogVisible=!1,this.formData={},this.connectForm=[]},addConnectForm:function(){this.connectForm.push({key:"",value:""})},delConnectForm:function(t){this.connectForm.splice(t,1)}}},p=d,u=(a("39ef"),a("2877")),f=Object(u["a"])(p,o,r,!1,null,"c057e270",null);e["default"]=f.exports},"39ef":function(t,e,a){"use strict";a("eca3")},"3b63":function(t,e,a){"use strict";var o=a("18a6");e["a"]={add:function(t){return Object(o["a"])({url:"/tp_protocol_plugin/add",method:"post",data:t})},edit:function(t){return Object(o["a"])({url:"/tp_protocol_plugin/edit",method:"post",data:t})},del:function(t){return Object(o["a"])({url:"/tp_protocol_plugin/delete",method:"post",data:t})},page:function(t){return Object(o["a"])({url:"/tp_protocol_plugin/list",method:"post",data:t})},getWVPDevices:function(t){return Object(o["a"])({url:"/wvp/query/devices",method:"post",data:t})},callPlayWVP:function(t){return Object(o["a"])({url:"/wvp/play/start/",method:"post",data:t})},commandPlayerPTZ:function(t){return Object(o["a"])({url:"/wvp/ptz",method:"post",data:t})},getRecordList:function(t){return Object(o["a"])({url:"/gb_record/query",method:"post",data:t})},getRecordURL:function(t){return Object(o["a"])({url:"/playback/start",method:"post",data:t})},stopRecordPlay:function(t){return Object(o["a"])({url:"/wvp/play/stop",method:"post",data:t})}}},eca3:function(t,e,a){}}]);