(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-997c2b0e"],{"2b6d":function(t,e,a){"use strict";a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return d}));var r=a("18a6");function o(t){return Object(r["a"])({url:"/business/index",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/business/add",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/business/edit",method:"post",data:t})}function d(t){return Object(r["a"])({url:"/business/delete",method:"post",data:t})}},"308f":function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"j",(function(){return i})),a.d(e,"d",(function(){return d})),a.d(e,"e",(function(){return u})),a.d(e,"f",(function(){return c})),a.d(e,"i",(function(){return s})),a.d(e,"g",(function(){return l})),a.d(e,"h",(function(){return f})),a.d(e,"a",(function(){return p})),a.d(e,"b",(function(){return m}));var r=a("5530"),o=(a("2ca0"),a("d3b7"),a("d81d"),a("18a6"));function n(){return Object(o["a"])({url:"/asset/index",method:"post"})}function i(t){return Object(o["a"])({url:"/structure/field",method:"post",data:t})}function d(t){return Object(o["a"])({url:"/asset/list",method:"post",data:t})}function u(t){return Object(o["a"])({url:"/asset/list/a",method:"post",data:t})}function c(t){return Object(o["a"])({url:"/asset/list/b",method:"post",data:t})}function s(t){var e=function(t){return t&&t.startsWith("/")?t.substring(1):t};return new Promise((function(a,r){Object(o["a"])({url:"/asset/list/d",method:"post",data:t}).then((function(t){var r=t.data.data.map((function(t){return t.device_group=e(t.device_group),t}));t.data.data=r,a(t)})).catch((function(t){r(t)}))}))}function l(t){return Object(o["a"])({url:"/asset/list/c",method:"post",data:t})}function f(t){return Object(o["a"])({url:"/asset/update_only",method:"post",data:t})}function p(t){return Object(o["a"])({url:"/asset/add_only",method:"post",data:t})}function m(t){return Object(o["a"])({url:"/asset/delete",method:"post",data:Object(r["a"])({type:1},t)})}},c4c8:function(t,e,a){"use strict";var r=a("18a6"),o=a("add0"),n="/tp_product",i="/tp_batch";e["a"]={add:function(t){return Object(r["a"])({url:n+"/add",method:"post",data:t})},edit:function(t){return Object(r["a"])({url:n+"/edit",method:"post",data:t})},del:function(t){return Object(r["a"])({url:n+"/delete",method:"post",data:t})},page:function(t){return Object(r["a"])({url:n+"/list",method:"post",data:t})},batchAdd:function(t){return Object(r["a"])({url:i+"/add",method:"post",data:t})},batchEdit:function(t){return Object(r["a"])({url:i+"/edit",method:"post",data:t})},batchDel:function(t){return Object(r["a"])({url:i+"/delete",method:"post",data:t})},batchPage:function(t){return Object(r["a"])({url:i+"/list",method:"post",data:t})},generateBatch:function(t){return Object(r["a"])({url:i+"/generate",method:"post",data:t})},uploadUrl:o["a"]+"api/file/up",importBatch:function(t){return Object(r["a"])({url:i+"/import",method:"post",data:t})},exportQRCodeAndData:function(t){return Object(r["a"])({url:i+"/export",method:"post",data:t})},getPreRegistration:function(t){return Object(r["a"])({url:"/tp_generate_device/list",method:"post",data:t})},generateDevice:function(t){return Object(r["a"])({url:"/tp_generate_device/activate",method:"post",data:t})},deletePreRegistration:function(t){return Object(r["a"])({url:"/tp_generate_device/delete",method:"post",data:t})},getDeviceListByProductId:function(t){return Object(r["a"])({url:"/device/listbyproduct",method:"post",data:t})},addTask:function(t){return Object(r["a"])({url:"/tp_ota_task/add",method:"post",data:t})}}},ca05:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"el-dark-dialog",attrs:{title:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.ADD_DEVICE"),visible:t.dialogVisible,width:"400px","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"formRef",attrs:{inline:!1,"label-position":"left","label-width":"80px",model:t.formData,rules:t.formRules}},[a("el-row",[a("el-form-item",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.PROJECT"),prop:"projectId",required:""}},[a("el-select",{attrs:{filterable:"",placeholder:t.$t("COMMON.PLACEHOLDER5")},on:{change:t.handleChangeProject},model:{value:t.formData.projectId,callback:function(e){t.$set(t.formData,"projectId",e)},expression:"formData.projectId"}},t._l(t.projectList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.GROUP"),prop:"groupId"}},[a("el-select",{attrs:{filterable:"",required:"",placeholder:t.$t("COMMON.PLACEHOLDER5")},model:{value:t.formData.groupId,callback:function(e){t.$set(t.formData,"groupId",e)},expression:"formData.groupId"}},t._l(t.groupList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.device_group,value:t.id}})})),1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:t.$t("PRODUCT_MANAGEMENT.BATCH_LIST.PREREGISTRATION.DEVICE_NAME"),prop:"deviceName",required:""}},[a("el-input",{attrs:{placeholder:t.$t("COMMON.PLACEHOLDER4")},model:{value:t.formData.deviceName,callback:function(e){t.$set(t.formData,"deviceName",e)},expression:"formData.deviceName"}})],1)],1)],1),a("span",{staticClass:"dialog-footer text-center",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"save"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("COMMON.SAVE")))])],1)],1)},o=[],n=(a("e9c4"),a("2b6d")),i=a("308f"),d=a("c4c8"),u={props:{visible:{type:[Boolean],default:!1},data:{type:[Object],default:function(){return{}}}},data:function(){return{formData:{projectId:"",groupId:"",deviceName:""},formRules:{projectId:[{required:!0,message:this.$t("COMMON.PLACEHOLDER5")}],groupId:[{required:!0,message:this.$t("COMMON.PLACEHOLDER5")}],deviceName:[{required:!0,message:this.$t("COMMON.PLACEHOLDER4")}]},projectList:[],groupList:[]}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},watch:{visible:function(t){t&&this.initForm()}},methods:{initForm:function(){var t=this;this.formData=JSON.parse(JSON.stringify(this.data)),console.log("initForm",this.formData);var e={page:1,limit:100};Object(n["d"])(e).then((function(e){var a,r=e.data;200===r.code&&(t.projectList=(null===(a=r.data)||void 0===a?void 0:a.data)||[])}))},handleChangeProject:function(t){var e=this;console.log("handleChangeProject",t),Object(i["i"])({business_id:t}).then((function(t){var a=t.data;console.log("asset_index",a),e.groupList=a.data||[]}))},handleSubmit:function(){var t=this;this.$refs["formRef"].validate((function(e){if(e){var a={activation_code:t.formData.id,name:t.formData.deviceName,access_id:t.formData.groupId};d["a"].generateDevice(a).then((function(e){var a=e.data;200===a.code&&(t.$message.success("激活成功"),t.dialogVisible=!1,t.$emit("submit"))}))}}))},handleClose:function(){this.dialogVisible=!1}}},c=u,s=a("2877"),l=Object(s["a"])(c,r,o,!1,null,"17b610c5",null);e["default"]=l.exports}}]);