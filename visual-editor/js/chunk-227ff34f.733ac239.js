(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-227ff34f"],{"1e78":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"el-dark-dialog",attrs:{title:t.id?t.$t("RULE_ENGINE.DATA_GATEWAY.EDIT"):t.$t("RULE_ENGINE.DATA_GATEWAY.CREATE"),"close-on-click-modal":!1,"before-close":t.handleClose,visible:t.apiDialogVisible,width:"40%",height:"60%",top:"10vh"},on:{"update:visible":function(e){t.apiDialogVisible=e}}},[a("div",{staticClass:"rounded p-4 card"},[a("el-row",{staticClass:"pt-3 pb-4 px-3",attrs:{type:"flex",gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-select",{staticClass:"el-dark-input",staticStyle:{width:"20%"},attrs:{placeholder:t.$t("COMMON.ALL")}}),a("el-input",{staticStyle:{width:"20%","margin-left":"10px"},attrs:{placeholder:t.$t("RULE_ENGINE.DATA_GATEWAY.INTERFACE_NAME"),clearable:""},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"formTable",attrs:{data:t.filteredData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",label:t.$t("RULE_ENGINE.DATA_GATEWAY.INTERFACE_NAME"),prop:"id"}}),a("el-table-column",{attrs:{label:t.$t("RULE_ENGINE.DATA_GATEWAY.INTERFACE_NAME"),prop:"name"}}),a("el-table-column",{attrs:{label:t.$t("RULE_ENGINE.DATA_GATEWAY.URL"),prop:"url"}}),a("el-table-column",{attrs:{label:t.$t("RULE_ENGINE.DATA_GATEWAY.INTERFACE_TYPE"),prop:"api_type"}}),a("el-table-column",{attrs:{label:t.$t("RULE_ENGINE.DATA_GATEWAY.INTERFACE_DESCRIPTION"),prop:"remark"}})],1),a("div",[a("div",[t._v(t._s(t.$t("RULE_ENGINE.DATA_GATEWAY.MSG_SELECTED"))+t._s(this.choosedCount)+t._s(t.$t("RULE_ENGINE.DATA_GATEWAY.MSG_SELECTED_INTERFACE")))]),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{staticClass:"cancel-button",attrs:{type:"cancel",size:"medium",plain:""},on:{click:t.handleClose}},[t._v(t._s(t.$t("RULE_ENGINE.DATA_GATEWAY.CANCEL")))]),a("el-button",{staticClass:"medium",staticStyle:{"margin-left":"10px"},attrs:{type:"save",size:"medium"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("RULE_ENGINE.DATA_GATEWAY.SUBMIT")))])],1)])],1)])},n=[],o=(a("4de4"),a("d3b7"),a("caad"),a("2532"),a("159b"),a("d956")),s={name:"ApiAccessScopeForm",props:{id:{default:null},data:{default:[]},tableData:{default:null},keyword:{default:""},visible:{type:[Boolean],default:!1}},mounted:function(){var t=this;this.SelectionChange(),"el-select"===this.$options._componentTag&&(this.$el.setAttribute("no-data-text","someValue"),this.$el.setAttribute("noDataText","someValue"),this.$el.setAttribute("placeholder","someValue"),console.error(this.$el)),this.$nextTick((function(){t.$refs.aaaa.setAttribute("placeholder","someValue"),console.error(t.$refs.aaaa)}))},computed:{apiDialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},watch:{keyword:function(){var t=this,e=this.listData;this.keyword&&(e=e.filter((function(e){return e.interface_name.includes(t.keyword)}))),this.page=1,this.filteredData=e,this.data_count=e.length},visible:{handler:function(t){t&&this.id&&(this.loading=!0,this.page=1,this.get_interface_data(),this.data_count=this.filteredData.length)}}},data:function(){return{page:0,page_size:5,data_count:0,choosedCount:0,choosedIdList:[],loading:!1,listData:[],filteredData:[],form:{id:"",name:"",app_key:"",signature_mode:"",ip_whitelist:"",device_access_scope:0,api_access_scope:0,created_at:0,tenant_id:"",description:""}}},methods:{get_interface_data:function(){var t=this;Object(o["e"])(this.id).then((function(e){200==e.data.code&&(t.listData=e.data.data,t.data_count=e.data.data.length,t.listData&&(t.listData.forEach((function(e){-1==t.choosedIdList.indexOf(e.id)&&t.choosedIdList.push(e.id)})),t.choosedCount=t.choosedIdList.length),t.filteredData=t.listData,t.SelectionChange(),t.loading=!1)}))},handleSubmit:function(){var t=this;this.loading=!0;var e={tp_api_id:this.choosedIdList,tp_openapi_auth_id:this.id};Object(o["h"])(e).then((function(e){200==e.data.code&&t.$message({message:"变更成功",center:!0,type:"success"}),t.get_interface_data()})),this.page=1,this.keyword="",this.form={},this.listData=[],this.apiDialogVisible=!1},handleClose:function(){this.page=1,this.keyword="",this.form={},this.listData=[],this.apiDialogVisible=!1},handleSelectionChange:function(t){var e=this;this.choosedIdList=[],t.forEach((function(t){e.choosedIdList.push(t.id)})),this.choosedCount=this.choosedIdList.length},cancelDialog:function(){this.page=1,this.keyword="",this.form={},this.listData=[],this.apiDialogVisible=!1},SelectionChange:function(){var t=this;this.$nextTick((function(){var e=t.filteredData;e.forEach((function(e){1===e.is_add&&t.$refs.formTable.toggleRowSelection(e,!0)}))}))}}},l=s,d=(a("e66e"),a("2877")),c=Object(d["a"])(l,i,n,!1,null,"bdf4e9d4",null);e["default"]=c.exports},"76a5a":function(t,e,a){},d956:function(t,e,a){"use strict";a.d(e,"g",(function(){return n})),a.d(e,"b",(function(){return o})),a.d(e,"i",(function(){return s})),a.d(e,"d",(function(){return l})),a.d(e,"e",(function(){return d})),a.d(e,"h",(function(){return c})),a.d(e,"f",(function(){return r})),a.d(e,"a",(function(){return u})),a.d(e,"c",(function(){return h}));var i=a("18a6");function n(t){return Object(i["a"])({url:"/openapi/auth/list",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/openapi/auth/add",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/openapi/auth/edit",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/openapi/auth/del",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/openapi/api/list",method:"post",data:{tp_openapi_auth_id:t,current_page:1,per_page:1e4,name:"",api_type:"",service_type:""}})}function c(t){return Object(i["a"])({url:"/openapi/rapi/edit",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/device/business/asset/permissions",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/openapi/rdevice/add",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/openapi/rdevice/del",method:"post",data:t})}},e66e:function(t,e,a){"use strict";a("76a5a")}}]);