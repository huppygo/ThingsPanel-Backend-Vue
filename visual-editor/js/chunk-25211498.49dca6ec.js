(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25211498"],{5592:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-form",{attrs:{"label-position":"left",model:t.formData,"label-width":"120px"}},[o("el-form-item",{attrs:{label:t.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.OFFLINETIME"),prop:"thresholdTime"}},[o("el-input-number",{attrs:{"controls-position":"right",size:"small",min:0},model:{value:t.formData.thresholdTime,callback:function(e){t.$set(t.formData,"thresholdTime",e)},expression:"formData.thresholdTime"}}),t._v(" 秒 ")],1),"3"==t.device.device_type?o("el-form-item",{attrs:{label:t.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.SUBDEVICEADDRESS")}},[o("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:t.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.PLACEHOLDER1")},model:{value:t.formData.subDeviceAddress,callback:function(e){t.$set(t.formData,"subDeviceAddress",e)},expression:"formData.subDeviceAddress"}})],1):t._e(),o("el-form-item",{attrs:{label:t.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.DEVICELOCATION")}},[o("el-input",{staticStyle:{width:"100%"},attrs:{readonly:"",placeholder:t.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.PLACEHOLDER2")},nativeOn:{click:function(e){return t.showCheckLocation.apply(null,arguments)}},model:{value:t.formData.location,callback:function(e){t.$set(t.formData,"location",e)},expression:"formData.location"}})],1)],1),t.positionShow?o("device-location-config",{attrs:{"maker-position":t.locationArray,"dialog-visible":t.positionShow},on:{"update:makerPosition":function(e){t.locationArray=e},"update:maker-position":function(e){t.locationArray=e},"update:dialogVisible":function(e){t.positionShow=e},"update:dialog-visible":function(e){t.positionShow=e}}}):t._e()],1)},a=[],n=(o("a15b"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{top:"5vh","append-to-body":!0,title:t.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.DEVICE_LOCATION.GET_MAP_LOCATION"),visible:t.dialogVisible,"before-close":t.handleClose,width:"1000px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("div",{staticClass:"amap-page-container"},[o("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20,type:"flex",align:"middle",justify:"center"}},[o("el-col",{attrs:{span:9}},[o("el-amap-search-box",{staticClass:"search-box",attrs:{"search-option":t.searchOption,"on-search-result":t.onSearchResult}})],1),o("el-col",{staticStyle:{color:"white",height:"100%"},attrs:{span:12}},[o("div",{staticClass:"toolbar",staticStyle:{color:"white",height:"100%"}},[o("div",[t._v(" "+t._s(t.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.DEVICE_LOCATION.CURRENT_COORDINATE"))+": "+t._s(t.lng)+", "+t._s(t.lat)+" ")]),o("div",[t._v(" "+t._s(t.$t("DEVICE_MANAGEMENT.DEVICE_CONFIG.DEVICE_LOCATION.CURRENT_LOCATION"))+": "+t._s(t.address)+" ")])])]),o("el-col",{attrs:{span:3}},[o("el-button",{attrs:{type:"primary"},on:{click:t.select}},[t._v(t._s(t.$t("COMMON.CONFIRM")))])],1)],1),o("el-amap",{ref:"centerMap",staticClass:"amap-box",attrs:{vid:"amap","amap-manager":t.amapManager,plugin:t.plugin,center:t.center,zoom:t.zoom,viewMode:"3D",events:t.events}},t._l(t.markers,(function(t,e){return o("el-amap-marker",{key:e,attrs:{position:t.position}})})),1)],1)])}),s=[],l=(o("d3b7"),o("159b"),o("8f9b")),r=new l["AMapManager"],c={name:"DeviceLocationConfig",props:{dialogVisible:{type:Boolean,default:!1},makerPosition:{type:Array,default:function(){return[121.59996,31.197646]}}},data:function(){var t=this;return{zoom:7,center:[121.59996,31.197646],amapManager:r,address:"",cityCode:"",searchOption:{city:"上海",citylimit:!1},mapCenter:[121.59996,31.197646],markers:[],plugin:[{pName:"ToolBar",events:{init:function(t){}}},{pName:"Geolocation",events:{init:function(e){console.error("init geolocation"),e.getCurrentPosition((function(e,o){console.error(o,e,"getCurrentPosition"),o&&o.position&&(console.log(o),t.address=o.formattedAddress,t.center=[o.position.lng,o.position.lat],t.loaded=!0,t.$nextTick(),t.lng=o.position.lng,t.lat=o.position.lat)}))}}}],events:{click:function(e){var o=e.lnglat,i=o.lng,a=o.lat;t.lng=i,t.lat=a,t.markers[0]={position:[i,a]};var n=new AMap.Geocoder({radius:1e3,extensions:"all"});n.getAddress([i,a],(function(e,o){"complete"===e&&"OK"===o.info&&o&&o.regeocode&&(t.address=o.regeocode.formattedAddress,t.$nextTick())}))}},lng:0,lat:0}},created:function(){this.mapCenter=this.makerPosition,this.lng=this.makerPosition[0],this.lat=this.makerPosition[1]},methods:{onSearchResult:function(t){var e=0,o=0;if(t.length>0){t.forEach((function(t){var i=t.lng,a=t.lat;o+=i,e+=a}));var i={lng:o/t.length,lat:e/t.length};this.mapCenter=[i.lng,i.lat]}},handleClose:function(t){this.$emit("update:dialogVisible",!1),this.$nextTick((function(){t()}))},select:function(){this.$emit("update:dialogVisible",!1),this.$emit("update:makerPosition",this.markers[0].position)}}},d=c,p=(o("6b09"),o("2877")),u=Object(p["a"])(d,n,s,!1,null,"d8cfda08",null),m=u.exports,f={components:{DeviceLocationConfig:m},props:{data:{type:Object,default:function(){return{}}},device:{type:[Object],default:function(){return{}}}},data:function(){return{positionShow:!1,locationArray:[]}},watch:{locationArray:function(t){this.formData.location=t.join(",")}},computed:{formData:{get:function(){return this.data},set:function(t){this.$emit("update:data",t)}}},methods:{showCheckLocation:function(){this.positionShow=!0}}},E=f,h=Object(p["a"])(E,i,a,!1,null,"2ccd00e5",null);e["default"]=h.exports},"6b09":function(t,e,o){"use strict";o("aee2")},aee2:function(t,e,o){}}]);