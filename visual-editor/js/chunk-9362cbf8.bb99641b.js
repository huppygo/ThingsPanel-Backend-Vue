(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9362cbf8","chunk-905188d6","chunk-2d0f00ea","chunk-2d0ba515","chunk-2d0b287a"],{"10fb":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rounded p-4 card"},[a("el-row",{staticClass:"pt-3 pb-4 px-3",attrs:{type:"flex",gutter:20}},[a("el-col",{attrs:{span:12}},[a("TableTitle",[e._v(e._s(e.$t("RULE_ENGINE.DATA_FORWARDING.TRANSPOND")))])],1),a("el-col",{staticClass:"px-2 text-right",attrs:{span:12}},[a("el-button",{attrs:{size:"medium",type:"border"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(e._s(e.$t("RULE_ENGINE.DATA_FORWARDING.CREATINGFORWARDINGRULE")))]),a("el-button",{attrs:{size:"medium",type:"border"}},[e._v("发布")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:e.$t("RULE_ENGINE.DATA_FORWARDING.NO"),type:"index",width:"100"}}),a("el-table-column",{attrs:{prop:"label",label:e.$t("RULE_ENGINE.DATA_FORWARDING.RULE_NAME")}}),a("el-table-column",{attrs:{prop:"status",label:e.$t("RULE_ENGINE.DATA_FORWARDING.TNTERFACESTATUS")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"small"}},[e._v(e._s("false"==t.row.disabled?e.$t("RULE_ENGINE.DATA_FORWARDING.SRARTED"):e.$t("RULE_ENGINE.DATA_FORWARDING.PUTONHOLD")))])]}}])}),a("el-table-column",{attrs:{prop:"actions",label:e.$t("RULE_ENGINE.DATA_FORWARDING.OPERATION"),align:"left",width:"320px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handle_launch(t.row)}}},[e._v(e._s(e.$t("RULE_ENGINE.DATA_FORWARDING.START")))]),a("el-button",{attrs:{size:"mini",type:"yellow"},on:{click:function(a){return e.handle_pause(t.row)}}},[e._v(e._s(e.$t("RULE_ENGINE.DATA_FORWARDING.SUSPENDED")))]),a("el-button",{staticClass:"mr-3",attrs:{size:"mini",type:"indigo"},on:{click:function(a){return e.startEditor(t.row)}}},[e._v(e._s(e.$t("RULE_ENGINE.DATA_FORWARDING.EDIT")))]),a("el-popconfirm",{attrs:{"confirm-button-text":e.$t("COMMON.CONFIRM"),"cancel-button-text":e.$t("COMMON.CANCEL"),title:e.$t("RULE_ENGINE.DATA_FORWARDING.TITLE4")},on:{confirm:function(a){return e.handle_del(t.row)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v(e._s(e.$t("RULE_ENGINE.DATA_FORWARDING.DELETE")))])],1)]}}])})],1),a("div",{staticClass:"text-right py-3"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.data_count,"current-page":e.page,"page-size":e.per_page},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.page_change}})],1),a("el-dialog",{staticClass:"el-dark-dialog el-dark-input",attrs:{title:e.$t("RULE_ENGINE.DATA_FORWARDING.CREATE"),visible:e.dialogVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("CreateForm",{on:{cancel:function(t){e.dialogVisible=!1},submit:e.handle_create}})],1),a("el-dialog",{staticClass:"el-dark-dialog el-dark-input",attrs:{title:e.$t("RULE_ENGINE.DATA_FORWARDING.CONFIGURATION"),visible:e.updateDialogVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.updateDialogVisible=t}}},[a("UpdateForm",{attrs:{init_data:e.edit_item},on:{update:e.handle_update}})],1)],1)},n=[],i=(a("d3b7"),a("159b"),a("f881")),s=a("2501"),u=a("239d"),o=a("3761"),r=a("3d68"),c={name:"TranspondIndex",components:{CreateForm:i["default"],UpdateForm:s["default"],TableTitle:u["a"]},data:function(){return{loading:!1,per_page:10,page:1,data_count:2,tableData:[],data_list:o["default"],launch_loading:!1,form_data:{device_name:"",frequency:0},dialogVisible:!1,updateDialogVisible:!1,edit_item:{frequency:"",status:""}}},created:function(){this.data_count=this.data_list.length,this.get_data()},methods:{get_data:function(){var e=this,t={current_page:this.page,per_page:10,role_type:"2"};Object(r["h"])(t).then((function(t){200==t.status&&(e.tableData=t.data.data.data,e.data_count=t.data.data.total,console.log(e.tableData),e.loading=!1)}))},page_change:function(e){this.loading||(this.loading=!0,this.page=e,this.get_data())},handle_launch:function(e){this.launch_loading||(this.launch_loading=!0,this.handleFlows(e,!1))},handle_pause:function(e){this.launch_loading||(this.launch_loading=!0,this.handleFlows(e,!0))},handleFlows:function(e,t){var a=this,l=e.process_id,n=e.label;e.id;console.log(e),Object(r["e"])().then((function(i){200==i.status&&(i.data.flows.forEach((function(e){e.id==l&&(e.disabled=t)})),Object(r["i"])(i.data).then((function(l){200==l.status&&(console.log(t),a.$message({message:n+(t?"暂停成功":" 启动成功"),center:!0,type:"success"}),e.disabled=t?"true":"false",Object(r["j"])(e).then((function(e){console.log(e),a.get_data()})),a.launch_loading=!1)})))})).catch((function(){a.launch_loading=!1}))},handle_del:function(e){var t=this;Object(r["d"])({id:e.id}).then((function(a){200==a.status&&(t.get_data(),Object(r["c"])(e.process_id).then((function(e){console.log(e)})),t.$message({message:e.label+" 删除成功",center:!0,type:"success"}))}))},handle_create:function(e){var t=this;console.log("=================================="),console.log(e),console.log("==================================");var a={label:e.rule_name,nodes:[],configs:[]};Object(r["a"])(a).then((function(a){200==a.status&&Object(r["b"])({process_id:a.data.id,disabled:"false",label:e.rule_name,role_type:"2"}).then((function(e){t.get_data(),t.dialogVisible=!1,t.$message({message:"创建成功",center:!0,type:"success"})}))})).catch((function(e){console.log(e)}))},startEditor:function(e){var t=window.open(Object(r["g"])(e.process_id),"_blank");t.opener=null},handle_update:function(e){this.edit_item.frequency=e.frequency,this.edit_item.status=e.status,this.updateDialogVisible=!1,this.$message({message:"更新成功",center:!0,type:"success"})}}},d=c,_=(a("27be"),a("2877")),f=Object(_["a"])(d,l,n,!1,null,"1df79e04",null);t["default"]=f.exports},1140:function(e,t,a){"use strict";a("ce37")},"239d":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"table-title h3 font-weight-bolder m-0 pt-2"},[e._t("default")],2)},n=[],i={name:"TableTitle"},s=i,u=a("2877"),o=Object(u["a"])(s,l,n,!1,null,"2001a59c",null);t["a"]=o.exports},2501:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"transpond-create"},[a("el-form",{ref:"updateForm",attrs:{rules:e.rules,"label-position":"left",model:e.form,"hide-required-asterisk":!0,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"频率",prop:"frequency"}},[a("el-select",{model:{value:e.form.frequency,callback:function(t){e.$set(e.form,"frequency",t)},expression:"form.frequency"}},[a("el-option",{attrs:{label:"实时",value:"实时"}}),a("el-option",{attrs:{label:"每分钟",value:"每分钟"}}),a("el-option",{attrs:{label:"每十分钟",value:"每十分钟"}}),a("el-option",{attrs:{label:"每半小时",value:"每半小时"}}),a("el-option",{attrs:{label:"每小时",value:"每小时"}})],1)],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"启用",value:"工作中"}}),a("el-option",{attrs:{label:"停用",value:"已停用"}})],1)],1),a("el-button",{staticClass:"w-100",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交更新")])],1)],1)},n=[],i={name:"UpdateForm",props:{init_data:{required:!0}},data:function(){return{form:{frequency:"",status:""},rules:{frequency:[{required:!0,message:"请选择频率"}],status:[{required:!0,message:"请选择状态"}]}}},watch:{init_data:{handler:function(e){this.form.frequency=e.frequency,this.form.status=e.status},immediate:!0,deep:!0}},methods:{onSubmit:function(){var e=this;this.$refs.updateForm.validate((function(t){t&&e.$emit("update",e.form)}))}}},s=i,u=a("2877"),o=Object(u["a"])(s,l,n,!1,null,null,null);t["default"]=o.exports},"27be":function(e,t,a){"use strict";a("300e")},"300e":function(e,t,a){},3761:function(e,t,a){"use strict";a.r(t);var l=[{rule_name:"烟感(CK) - 1层 - 设备A",status:"工作中",device_id:"924796"},{rule_name:"烟感(CK) - 1层 - 设备B",status:"工作中",device_id:"924797"},{rule_name:"烟感(CK) - 1层 - 设备C",status:"工作中",device_id:"924798"},{rule_name:"烟感(CK) - 1层 - 设备D",status:"工作中",device_id:"924799"},{rule_name:"烟感(CK) - 1层 - 设备E",status:"工作中",device_id:"924810"},{rule_name:"烟感(CK) - 2层 - 设备A",status:"工作中",device_id:"924811"},{rule_name:"烟感(CK) - 2层 - 设备B",status:"工作中",device_id:"924812"},{rule_name:"烟感(CK) - 2层 - 设备C",status:"工作中",device_id:"924813"},{rule_name:"温湿度 - 1层 - 设备A",status:"工作中",device_id:"928383"},{rule_name:"温湿度 - 1层 - 设备B",status:"工作中",device_id:"928246"},{rule_name:"温湿度 - 1层 - 设备C",status:"工作中",device_id:"928247"},{rule_name:"温湿度 - 1层 - 设备D",status:"工作中",device_id:"922389"},{rule_name:"温湿度 - 2层 - 设备A",status:"工作中",device_id:"922348"},{rule_name:"温湿度 - 2层 - 设备B",status:"工作中",device_id:"923566"},{rule_name:"温湿度 - 2层 - 设备C",status:"工作中",device_id:"923236"}];t["default"]=l},"9b6a":function(e,t,a){"use strict";a.r(t);var l=[{value:"烟感(CK)",label:"烟感(CK)",children:[{value:"1层",label:"1层",children:[{value:"设备A",label:"设备A"},{value:"设备B",label:"设备B"},{value:"设备C",label:"设备C"},{value:"设备D",label:"设备D"}]},{value:"2层",label:"2层",children:[{value:"设备A",label:"设备A"},{value:"设备B",label:"设备B"},{value:"设备C",label:"设备C"}]}]},{value:"温湿度",label:"温湿度",children:[{value:"1层",label:"1层",children:[{value:"设备A",label:"设备A"},{value:"设备B",label:"设备B"},{value:"设备C",label:"设备C"},{value:"设备D",label:"设备D"}]},{value:"2层",label:"2层",children:[{value:"设备A",label:"设备A"},{value:"设备B",label:"设备B"},{value:"设备C",label:"设备C"}]}]}];t["default"]=l},ce37:function(e,t,a){},f881:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"createForm",attrs:{rules:e.rules,"label-position":"left",model:e.form,"hide-required-asterisk":!0,"label-width":"80px"}},[a("el-form-item",{attrs:{label:e.$t("RULE_ENGINE.ACCESS_ENGINE.RULE_NAME"),prop:"rule_name"}},[a("el-input",{model:{value:e.form.rule_name,callback:function(t){e.$set(e.form,"rule_name",t)},expression:"form.rule_name"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("el-button",{staticClass:"cancel-button",attrs:{type:"cancel",size:"medium",plain:""},on:{click:e.cancelDialog}},[e._v(e._s(e.$t("RULE_ENGINE.ACCESS_ENGINE.CANCEL")))]),a("el-button",{staticClass:"medium",attrs:{type:"save",size:"medium"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("RULE_ENGINE.ACCESS_ENGINE.SUBMIT")))])],1)],1)},n=[],i=a("9b6a"),s=a("f570"),u=!0,o={name:"CreateForm",props:{init_data:{default:null}},data:function(){return{form:{rule_name:"",frequency:""},rules:{rule_name:[{required:u,message:s["a"].t("RULE_ENGINE.ACCESS_ENGINE.PLACEHOLDER")}]},options:i["default"]}},created:function(){this.init_data&&(this.form.rule_name=this.init_data.rule_name)},methods:{onSubmit:function(){var e=this;this.$refs.createForm.validate((function(t){t&&(e.$emit("submit",e.form),setTimeout((function(){e.$refs.createForm.resetFields()}),500))}))},cancelDialog:function(){this.$emit("cancel")}}},r=o,c=(a("1140"),a("2877")),d=Object(c["a"])(r,l,n,!1,null,null,null);t["default"]=d.exports}}]);