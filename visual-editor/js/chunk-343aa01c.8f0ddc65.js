(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-343aa01c","chunk-2d2102a6","chunk-2d0e1a0a"],{2089:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rounded card p-4"},[a("el-row",{staticClass:"pt-3 pb-3 px-3",attrs:{type:"flex",gutter:20}},[a("el-col",{attrs:{span:12}},[a("TableTitle",[t._v(t._s(t.$t("ALARM.WARNINFO")))])],1)],1),a("el-row",{staticClass:"pt-3 pb-4 px-3 el-dark-input",attrs:{type:"flex",gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-date-picker",{staticClass:"w-100",attrs:{"picker-options":t.DatePickerOptions,"value-format":"timestamp",type:"datetimerange","start-placeholder":t.$t("DATA_MANAGEMENT.PLACEHOLDER5"),"range-separator":t.$t("DATA_MANAGEMENT.PLACEHOLDER6"),"end-placeholder":t.$t("DATA_MANAGEMENT.PLACEHOLDER7")},on:{change:function(e){return t.handleSearch()},clear:function(e){return t.handleSearch()}},model:{value:t.params.dateTimeRange,callback:function(e){t.$set(t.params,"dateTimeRange",e)},expression:"params.dateTimeRange"}})],1),a("el-col",{staticClass:"text-right",attrs:{span:12}},[a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{"no-data-text":t.$t("COMMON.SELECT_NO_DATA"),placeholder:t.$t("ALARM.PLACEHOLDER.WARNING_LEVEL"),clearable:""},on:{change:t.handleSearch},model:{value:t.params.warningLevel,callback:function(e){t.$set(t.params,"warningLevel",e)},expression:"params.warningLevel"}},[a("el-option",{attrs:{value:"1",label:t.$t("AUTOMATION.WARNING_LEVEL_LOW")}}),a("el-option",{attrs:{value:"2",label:t.$t("AUTOMATION.WARNING_LEVEL_MEDIUM")}}),a("el-option",{attrs:{value:"3",label:t.$t("AUTOMATION.WARNING_LEVEL_HIGH")}})],1),a("el-select",{attrs:{"no-data-text":t.$t("COMMON.SELECT_NO_DATA"),placeholder:t.$t("ALARM.PROCESSING_RESULT"),clearable:""},on:{change:t.handleSearch},model:{value:t.params.processing_result,callback:function(e){t.$set(t.params,"processing_result",e)},expression:"params.processing_result"}},[a("el-option",{attrs:{value:t.ProcessingState.unprocessed,label:t.$t("ALARM.UNPROCESSED")}}),a("el-option",{attrs:{value:t.ProcessingState.processed,label:t.$t("ALARM.PROCESSED")}}),a("el-option",{attrs:{value:t.ProcessingState.ignored,label:t.$t("ALARM.IGNORED")}})],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData},on:{"selection-change":t.handleSelectionChange},scopedSlots:t._u([{key:"empty",fn:function(){return[a("div",[t._v(t._s(t.$t("COMMON.TABLE_NO_DATA")))])]},proxy:!0}])},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:t.$t("ALARM.ALARMTIME"),prop:"created_at",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.row.created_at))+" ")]}}])}),a("el-table-column",{attrs:{label:t.$t("ALARM.WARNING_NAME"),prop:"warning_name",width:"220"}}),a("el-table-column",{attrs:{label:t.$t("ALARM.LEVEL"),prop:"warning_level",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.warning_level?a("p",{staticClass:"table-describe mad"},[t._v("低")]):t._e(),"2"===e.row.warning_level?a("p",{staticClass:"table-describe mad"},[t._v("中")]):t._e(),"3"===e.row.warning_level?a("p",{staticClass:"table-describe mad"},[t._v("高")]):t._e()]}}])}),a("el-table-column",{attrs:{label:t.$t("ALARM.WARNING_DESCRIPTION"),prop:"warning_description","show-overflow-tooltip":!0,width:"auto"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"table-describe mad"},[t._v(t._s(e.row.warning_description))])]}}])}),a("el-table-column",{attrs:{label:t.$t("ALARM.PROCESSING_RESULT"),prop:"handle_result",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.processing_result==t.ProcessingState.processed?a("p",[t._v(t._s(t.$t("ALARM.PROCESSED")))]):t._e(),e.row.processing_result==t.ProcessingState.unprocessed?a("p",[t._v(t._s(t.$t("ALARM.UNPROCESSED")))]):t._e(),e.row.processing_result==t.ProcessingState.ignored?a("p",[t._v(t._s(t.$t("ALARM.IGNORED")))]):t._e()]}}])}),a("el-table-column",{attrs:{label:t.$t("ALARM.PROCESSOR"),prop:"handler",width:"auto"}}),a("el-table-column",{attrs:{label:t.$t("ALARM.HANDLE"),width:"240",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-right"},[a("el-button",{attrs:{type:"yellow",size:"mini"},on:{click:function(a){return t.handleShowDetail(e.row)}}},[t._v(t._s(t.$t("AUTOMATION.DETAIL")))]),e.row.processing_result==t.ProcessingState.unprocessed?a("el-button",{attrs:{type:"border",size:"mini"},on:{click:function(a){return t.handleShowProcess(e.row)}}},[t._v(t._s(t.$t("ALARM.PROCESS")))]):t._e(),e.row.processing_result==t.ProcessingState.unprocessed?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleIgnored(e.row)}}},[t._v(t._s(t.$t("ALARM.IGNORE")))]):t._e()],1)]}}])})],1),a("div",{staticClass:"text-left py-3"},[a("el-button",{attrs:{size:"mini",type:"border"},on:{click:t.handleShowBatchProcessing}},[t._v(t._s(t.$t("ALARM.BATCH_PROCESS")))]),a("el-button",{attrs:{size:"mini",type:"yellow"},on:{click:function(e){return t.handleIgnored(t.selectRows)}}},[t._v(t._s(t.$t("ALARM.BATCH_IGNORED")))])],1),a("div",{staticClass:"text-right py-3"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.params.current_page,"page-size":t.params.per_page},on:{"update:currentPage":function(e){return t.$set(t.params,"current_page",e)},"update:current-page":function(e){return t.$set(t.params,"current_page",e)},"current-change":t.getAlarmList}})],1),a("AlarmDetail",{attrs:{visible:t.detailDialogVisible,data:t.currentItem},on:{"update:visible":function(e){t.detailDialogVisible=e}}}),a("AlarmProcess",{attrs:{visible:t.processDialogVisible,data:t.currentItem},on:{"update:visible":function(e){t.processDialogVisible=e},change:t.processing}})],1)},n=[],s=(a("d3b7"),a("25f0"),a("d81d"),a("239d")),r=a("7af0"),l=a("b772"),o=a("18a6"),c={list:function(t){return Object(o["a"])({url:"/v1/warning/information/list",method:"post",data:t})},process:function(t){return Object(o["a"])({url:"/v1/warning/information/edit",method:"post",data:t})},batchProcess:function(t){return Object(o["a"])({url:"/v1/warning/information/batch/processing",method:"post",data:t})}},d=(a("3cfe"),a("2fa3")),u={all:"all",unprocessed:"0",processed:"1",ignored:"2"},p={name:"AlarmIndex",components:{TableTitle:s["a"],AlarmDetail:r["default"],AlarmProcess:l["default"]},data:function(){return{loading:!1,tableData:[],total:0,selectRows:[],params:{dateTimeRange:[],warningLevel:"",processing_result:"",current_page:1,per_page:10},DatePickerOptions:[],ProcessingState:u,detailDialogVisible:!1,processDialogVisible:!1,currentItem:{}}},created:function(){this.getAlarmList()},methods:{handleSearch:function(){this.params.dateTimeRange&&this.params.dateTimeRange.length>0&&""!==this.params.dateTimeRange[0]&&""!==this.params.dateTimeRange[1]?(this.params.start_time=this.params.dateTimeRange[0].toString().substring(0,10),this.params.end_time=this.params.dateTimeRange[1].toString().substring(0,10)):(delete this.params.start_time,delete this.params.end_time),this.getAlarmList()},getAlarmList:function(){var t=this;this.loading=!0,c.list(this.params).then((function(e){var a,i=e.data;200===i.code&&(console.log(i.data),t.tableData=(null===(a=i.data)||void 0===a?void 0:a.data)||[],t.total=i.data.total)})).finally((function(){t.loading=!1}))},handleShowDetail:function(t){this.currentItem=t,this.detailDialogVisible=!0},handleShowProcess:function(t){this.currentItem=t,this.processDialogVisible=!0},handleShowBatchProcessing:function(){console.log(this.selectRows),this.currentItem=this.selectRows,this.processDialogVisible=!0},processing:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.processed,i={id:t.id,processing_result:a,processing_instructions:t.processing_instructions||""};"[object Array]"===Object.prototype.toString.call(t.id)?c.batchProcess(i).then((function(t){var i=t.data;200===i.code&&(e.getAlarmList(),Object(d["i"])(a===u.processed?e.$t("ALARM.PROCESSED"):$t("ALARM.IGNORED")))})):c.process(i).then((function(t){var i=t.data;200===i.code&&(e.getAlarmList(),Object(d["i"])(a===u.processed?e.$t("ALARM.PROCESSED"):$t("ALARM.IGNORED")))}))},handleSelectionChange:function(t){this.selectRows=t},handleIgnored:function(t){"[object Array]"===Object.prototype.toString.call(t)?this.processing({id:t.map((function(t){return t.id}))},u.ignored):this.processing({id:t.id},u.ignored)}}},g=p,m=a("2877"),h=Object(m["a"])(g,i,n,!1,null,null,null);e["default"]=h.exports},"239d":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"table-title h3 font-weight-bolder m-0 pt-2"},[t._t("default")],2)},n=[],s={name:"TableTitle"},r=s,l=a("2877"),o=Object(l["a"])(r,i,n,!1,null,"2001a59c",null);e["a"]=o.exports},"3cfe":function(t,e,a){"use strict";a("a9e3"),a("d3b7"),a("25f0");var i=a("2b0e");i["default"].mixin({methods:{formatDate:function(t){var e=1e3*parseInt(t),a=new Date(e),i=a.getFullYear(),n=a.getMonth()+1;n=n<10?"0"+n:n;var s=a.getDate();s=s<10?"0"+s:s;var r=a.getHours();r=r<10?"0"+r:r;var l=a.getMinutes();l=l<10?"0"+l:l;var o=a.getSeconds();o=o<10?"0"+o:o;var c=i+"-"+n+"-"+s+" "+r+":"+l+":"+o;return c},jsonTypeConvert:function(t,e){var a=(null===t||void 0===t?void 0:t.toLowerCase())||"";return"float"===a||"integer"===a||"number"===a?Number(e):e.toString()}}})},"7af0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"el-dark-dialog",attrs:{title:t.$t("ALARM.ALARAM_DETAIL"),visible:t.dialogVisible,width:"600px",top:"10vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{staticClass:"el-dark-input",attrs:{"label-position":"left","label-width":"85px"}},[a("el-form-item",{attrs:{label:t.$t("ALARM.ALARAM_CONTENT")}},[a("el-input",{attrs:{type:"textarea",readonly:"",rows:3},model:{value:t.formData.warning_content,callback:function(e){t.$set(t.formData,"warning_content",e)},expression:"formData.warning_content"}})],1),a("div",{staticClass:"text-right"},[a("el-button",{attrs:{size:"medium",type:"cancel"},on:{click:t.handleCancel}},[t._v(t._s(t.$t("COMMON.CLOSE")))])],1)],1)],1)},n=[],s=(a("e9c4"),{name:"AlarmDetail",props:{data:{type:[Object,Array],default:""},visible:{type:[Boolean],default:!1}},data:function(){return{formData:{}}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},watch:{visible:{handler:function(t){t&&this.initFormData()}}},methods:{initFormData:function(){this.formData=JSON.parse(JSON.stringify(this.data))},handleCancel:function(){this.dialogVisible=!1}}}),r=s,l=a("2877"),o=Object(l["a"])(r,i,n,!1,null,"372976d8",null);e["default"]=o.exports},b772:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"el-dark-dialog",attrs:{title:t.$t("ALARM.PROCESS"),visible:t.dialogVisible,width:"600px",top:"10vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{staticClass:"el-dark-input",attrs:{"label-position":"left","label-width":"85px"}},[a("el-form-item",{attrs:{label:t.$t("ALARM.PROCESS_DESCRIPTION")}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:t.$t("ALARM.PLACEHOLDER.PROCESS_DESCRIPTION")},model:{value:t.formData.processing_instructions,callback:function(e){t.$set(t.formData,"processing_instructions",e)},expression:"formData.processing_instructions"}})],1),a("div",{staticClass:"text-right"},[a("el-button",{attrs:{size:"medium",type:"border"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("COMMON.CONFIRM")))])],1)],1)],1)},n=[],s=(a("d3b7"),a("d81d"),{name:"AlarmDetail",props:{data:{type:[Object,Array],default:""},visible:{type:[Boolean],default:!1}},data:function(){return{formData:{rows:"",processing_instructions:""}}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},watch:{visible:{handler:function(t){t&&this.initFormData()}}},methods:{initFormData:function(){console.log("initFormData",this.data),"[object Array]"===Object.prototype.toString.call(this.data)?this.formData.id=this.data.map((function(t){return t.id}))||[]:this.formData.id=this.data.id||""},handleSubmit:function(){this.$emit("change",this.formData),this.handleCancel()},handleCancel:function(){this.dialogVisible=!1}}}),r=s,l=a("2877"),o=Object(l["a"])(r,i,n,!1,null,"45651cfb",null);e["default"]=o.exports}}]);