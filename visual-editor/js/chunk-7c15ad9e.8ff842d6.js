(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c15ad9e","chunk-0acefc95","chunk-3a1d1df7"],{"1ab6":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"el-dark-dialog",attrs:{title:t.$t("PLUGIN.TAB2_CONTENT.EDIT_BTN"),visible:t.dialogVisible,width:"50%","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{staticClass:"el-dark-input",attrs:{"label-position":"left",model:t.formData,rules:t.formRules}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.NAME"),prop:"name"}},[a("el-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.DEVICETYPE"),prop:"device_type"}},[a("el-select",{model:{value:t.formData.device_type,callback:function(e){t.$set(t.formData,"device_type",e)},expression:"formData.device_type"}},[a("el-option",{attrs:{value:"1",label:t.$t("PLUGIN.TAB2_CONTENT.DEVICE")}}),a("el-option",{attrs:{value:"2",label:t.$t("PLUGIN.TAB2_CONTENT.NEWWORK")}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.PROTOCOLTYPE"),prop:"protocol_type"}},[a("el-input",{model:{value:t.formData.protocol_type,callback:function(e){t.$set(t.formData,"protocol_type",e)},expression:"formData.protocol_type"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.CONNECTADDRESS"),prop:"access_address"}},[a("el-input",{model:{value:t.formData.access_address,callback:function(e){t.$set(t.formData,"access_address",e)},expression:"formData.access_address"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.HTTPADDRESS"),prop:"http_address"}},[a("el-input",{model:{value:t.formData.http_address,callback:function(e){t.$set(t.formData,"http_address",e)},expression:"formData.http_address"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.LABLE"),prop:"sub_topic_prefix"}},[a("el-input",{model:{value:t.formData.sub_topic_prefix,callback:function(e){t.$set(t.formData,"sub_topic_prefix",e)},expression:"formData.sub_topic_prefix"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.AUTHOR"),prop:"author"}},[a("el-input",{model:{value:t.formData.author,callback:function(e){t.$set(t.formData,"author",e)},expression:"formData.author"}})],1)],1),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.DESCRIBE"),prop:"description"}},[a("el-input",{model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[t._v(" "+t._s(t.$t("PLUGIN.TAB2_CONTENT.CONNECTNUMBER"))+" ")]),a("el-col",{attrs:{span:8,offset:8}},[a("el-button",{attrs:{type:"border"},on:{click:t.addConnectForm}},[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.ADDCONFIG")))])],1)],1),t._l(t.connectForm,(function(e,o){return a("el-row",{key:o,staticClass:"config-line",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:t.$t("PLUGIN.TAB2_CONTENT.PLACEHOLDER1")},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"form.key"}})],1),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:t.$t("PLUGIN.TAB2_CONTENT.PLACEHOLDER2")},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"form.value"}})],1),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.delConnectForm(o)}}},[t._v(" "+t._s(t.$t("PLUGIN.TAB2_CONTENT.DELETE"))+" ")])],1)],1)}))],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:t.handleClose}},[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.CANCEL")))]),a("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.CONFIRM")))])],1)],1)],1)},l=[],r=a("5530"),s=(a("b0c0"),a("a4d3"),a("e01a"),a("e9c4"),a("d3b7"),a("a434"),a("3b63")),i=a("2fa3"),n=a("f570"),c=!0,d={name:"EditPlugin",props:{visible:{type:[Boolean],default:!1},data:{type:[Object],default:function(){return{}}}},data:function(){return{dialogVisible:!1,formData:{name:this.data.name,device_type:this.data.device_type,protocol_type:this.data.protocol_type,access_address:this.data.access_address,http_address:this.data.http_address,sub_topic_prefix:this.data.sub_topic_prefix,author:this.data.author,description:this.data.description,additional_info:this.data.additional_info},formRules:{name:[{required:c,message:n["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER3")}],device_type:[{required:c,message:n["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER4")}],protocol_type:[{required:c,message:n["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER5")}],access_address:[{required:c,message:n["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER6")}],http_address:[{required:c,message:n["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER7")}],sub_topic_prefix:[{required:c,message:n["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER8")}]},loading:!1,connectForm:[]}},watch:{visible:{handler:function(t){console.log("====visible",t),t&&(this.loading=!1,this.dialogVisible=t)}},data:{handler:function(t){console.log("watch",t),t&&(this.formData=Object(r["a"])({},t),this.connectForm=JSON.parse(t.additional_info))}}},methods:{handleSubmit:function(){var t=this;this.loading=!0,this.formData.additional_info=JSON.stringify(this.connectForm),this.formData.id&&s["a"].edit(this.formData).then((function(e){var a=e.data;200==a.code&&(Object(i["i"])("编辑成功！"),t.$emit("submit"),t.handleClose())})).finally((function(){return t.loading=!1}))},handleClose:function(){this.$emit("update:visible",!1),this.dialogVisible=!1,this.formData={},this.connectForm=[]},addConnectForm:function(){this.connectForm.push({key:"",value:""})},delConnectForm:function(t){this.connectForm.splice(t,1)}}},p=d,u=(a("39ef"),a("2877")),f=Object(u["a"])(p,o,l,!1,null,"c057e270",null);e["default"]=f.exports},"232c":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rounded card p-4"},[a("el-row",{staticClass:"pt-3 pb-4 px-3",attrs:{type:"flex",gutter:20}},[a("el-col",{attrs:{span:12}},[a("TableTitle",[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.TITLE")))])],1),a("el-col",{staticClass:"px-2 text-right",attrs:{span:12}},[a("el-button",{attrs:{size:"medium",type:"indigo"},on:{click:t.handleShowRegister}},[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.BTN")))]),a("el-button",{attrs:{size:"medium",type:"indigo"}},[t._v("发布")])],1)],1),a("el-form",{staticClass:"inline-edit"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.params.data}},[a("el-table-column",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.NAME"),prop:"name",align:"left"}}),a("el-table-column",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.DEVICETYPE"),prop:"device_type",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.device_type?a("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.DEVICE")))]):"2"==e.row.device_type?a("el-tag",[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.NEWWORK")))]):t._e()]}}])}),a("el-table-column",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.PROTOCOLTYPE"),prop:"protocol_type",align:"left"}}),a("el-table-column",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.CONNECTADDRESS"),prop:"access_address",align:"left"}}),a("el-table-column",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.HTTPADDRESS"),prop:"http_address",align:"left"}}),a("el-table-column",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.LABLE"),prop:"sub_topic_prefix",align:"left"}}),a("el-table-column",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.AUTHOR"),prop:"author",align:"left"}}),a("el-table-column",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.DESCRIBE"),prop:"description",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.description?e.row.description:"--")+" ")]}}])}),a("el-table-column",{attrs:{align:"left",label:t.$t("PLUGIN.TAB2_CONTENT.OPERATION"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"save",size:"mini"},on:{click:function(a){return t.handleShowEdit(e.row)}}},[t._v("编辑")]),a("el-popconfirm",{attrs:{"confirm-button-text":t.$t("COMMON.CONFIRM"),"cancel-button-text":t.$t("COMMON.CANCEL"),title:t.$t("PLUGIN.TAB2_CONTENT.TITLE4")},on:{confirm:function(a){return t.handleDelete(e.row)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",disabled:!t.hasAuth("plugin:protocol:del")},slot:"reference"},[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.DELETE")))])],1)],1)]}}])})],1)],1),a("div",{staticClass:"text-right py-3"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.params.total,"current-page":t.params.current_page,"page-size":t.params.per_page},on:{"update:currentPage":function(e){return t.$set(t.params,"current_page",e)},"update:current-page":function(e){return t.$set(t.params,"current_page",e)},"current-change":t.getPluginList}})],1),a("register-plugin",{attrs:{visible:t.registerDialogVisible,data:{}},on:{"update:visible":function(e){t.registerDialogVisible=e},submit:t.handleRegistered}}),a("edit-plugin",{attrs:{visible:t.editDialogVisible,data:t.currentItem},on:{"update:visible":function(e){t.editDialogVisible=e},submit:t.handleRegistered}})],1)},l=[],r=a("3b63"),s=a("239d"),i=a("4ec0"),n=a("1ab6"),c=a("2fa3"),d={name:"index",components:{TableTitle:s["a"],RegisterPlugin:i["default"],EditPlugin:n["default"]},data:function(){return{loading:!1,params:{total:0,current_page:1,per_page:10,data:[]},registerDialogVisible:!1,editDialogVisible:!1,currentItem:{}}},mounted:function(){this.getPluginList()},methods:{handleShowRegister:function(){this.registerDialogVisible=!0},handleRegistered:function(){this.getPluginList()},getPluginList:function(){var t=this;this.loading=!0;var e={current_page:this.params.current_page,per_page:this.params.per_page};r["a"].page(e).then((function(e){var a=e.data;200==a.code&&(t.loading=!1,t.params=a.data)}))},handleShowEdit:function(t){var e=this,a={current_page:1,per_page:1,id:t.id};r["a"].page(a).then((function(t){var a=t.data;200==a.code&&(e.currentItem=a.data.data[0])})),this.editDialogVisible=!0},handleDelete:function(t){var e=this;r["a"].del({id:t.id}).then((function(t){var a=t.data;200==a.code&&"success"==a.message&&(Object(c["i"])("删除成功！"),e.getPluginList())}))}}},p=d,u=a("2877"),f=Object(u["a"])(p,o,l,!1,null,"ad950744",null);e["default"]=f.exports},"239d":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h3",{staticClass:"table-title h3 font-weight-bolder m-0 pt-2"},[t._t("default")],2)},l=[],r={name:"TableTitle"},s=r,i=a("2877"),n=Object(i["a"])(s,o,l,!1,null,"2001a59c",null);e["a"]=n.exports},"39ef":function(t,e,a){"use strict";a("eca3")},"3b63":function(t,e,a){"use strict";var o=a("18a6");e["a"]={add:function(t){return Object(o["a"])({url:"/tp_protocol_plugin/add",method:"post",data:t})},edit:function(t){return Object(o["a"])({url:"/tp_protocol_plugin/edit",method:"post",data:t})},del:function(t){return Object(o["a"])({url:"/tp_protocol_plugin/delete",method:"post",data:t})},page:function(t){return Object(o["a"])({url:"/tp_protocol_plugin/list",method:"post",data:t})},getWVPDevices:function(t){return Object(o["a"])({url:"/wvp/query/devices",method:"post",data:t})},callPlayWVP:function(t){return Object(o["a"])({url:"/wvp/play/start/",method:"post",data:t})},commandPlayerPTZ:function(t){return Object(o["a"])({url:"/wvp/ptz",method:"post",data:t})},getRecordList:function(t){return Object(o["a"])({url:"/gb_record/query",method:"post",data:t})},getRecordURL:function(t){return Object(o["a"])({url:"/playback/start",method:"post",data:t})},stopRecordPlay:function(t){return Object(o["a"])({url:"/wvp/play/stop",method:"post",data:t})}}},"4ec0":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"el-dark-dialog",attrs:{title:t.$t("PLUGIN.TAB2_CONTENT.BTN"),visible:t.dialogVisible,width:"50%","before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{staticClass:"el-dark-input",attrs:{"label-position":"left",model:t.formData,rules:t.formRules}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.NAME"),prop:"name"}},[a("el-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.DEVICETYPE"),prop:"device_type"}},[a("el-select",{model:{value:t.formData.device_type,callback:function(e){t.$set(t.formData,"device_type",e)},expression:"formData.device_type"}},[a("el-option",{attrs:{value:"1",label:t.$t("PLUGIN.TAB2_CONTENT.DEVICE")}}),a("el-option",{attrs:{value:"2",label:t.$t("PLUGIN.TAB2_CONTENT.NEWWORK")}})],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.PROTOCOLTYPE"),prop:"protocol_type"}},[a("el-input",{model:{value:t.formData.protocol_type,callback:function(e){t.$set(t.formData,"protocol_type",e)},expression:"formData.protocol_type"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.CONNECTADDRESS"),prop:"access_address"}},[a("el-input",{model:{value:t.formData.access_address,callback:function(e){t.$set(t.formData,"access_address",e)},expression:"formData.access_address"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.HTTPADDRESS"),prop:"http_address"}},[a("el-input",{model:{value:t.formData.http_address,callback:function(e){t.$set(t.formData,"http_address",e)},expression:"formData.http_address"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.LABLE"),prop:"sub_topic_prefix"}},[a("el-input",{model:{value:t.formData.sub_topic_prefix,callback:function(e){t.$set(t.formData,"sub_topic_prefix",e)},expression:"formData.sub_topic_prefix"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.AUTHOR"),prop:"author"}},[a("el-input",{model:{value:t.formData.author,callback:function(e){t.$set(t.formData,"author",e)},expression:"formData.author"}})],1)],1),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:t.$t("PLUGIN.TAB2_CONTENT.DESCRIBE"),prop:"description"}},[a("el-input",{model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[t._v(" "+t._s(t.$t("PLUGIN.TAB2_CONTENT.CONNECTNUMBER"))+" ")]),a("el-col",{attrs:{span:8,offset:8}},[a("el-button",{attrs:{type:"border"},on:{click:t.addConnectForm}},[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.ADDCONFIG")))])],1)],1),t._l(t.connectForm,(function(e,o){return a("el-row",{key:o,staticClass:"config-line",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:t.$t("PLUGIN.TAB2_CONTENT.PLACEHOLDER1")},model:{value:e.key,callback:function(a){t.$set(e,"key",a)},expression:"form.key"}})],1),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:t.$t("PLUGIN.TAB2_CONTENT.PLACEHOLDER2")},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"form.value"}})],1),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.delConnectForm(o)}}},[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.DELETE")))])],1)],1)}))],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"info"},on:{click:t.handleClose}},[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.CANCEL")))]),a("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("PLUGIN.TAB2_CONTENT.CONFIRM")))])],1)],1)],1)},l=[],r=(a("e9c4"),a("d3b7"),a("a434"),a("3b63")),s=a("2fa3"),i=a("f570"),n=!0,c={name:"RegisterPlugin",props:{visible:{type:[Boolean],default:!1},data:{type:[Object],default:function(){return{}}}},data:function(){return{dialogVisible:!1,formData:{name:"",device_type:"1",protocol_type:"",access_address:"",http_address:"",sub_topic_prefix:"",author:"",description:"",additional_info:{}},formRules:{name:[{required:n,message:i["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER3")}],device_type:[{required:n,message:i["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER4")}],protocol_type:[{required:n,message:i["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER5")}],access_address:[{required:n,message:i["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER6")}],http_address:[{required:n,message:i["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER7")}],sub_topic_prefix:[{required:n,message:i["a"].t("PLUGIN.TAB2_CONTENT.PLACEHOLDER8")}]},loading:!1,connectForm:[]}},watch:{visible:{handler:function(t){console.log("====visible",t),t&&(this.loading=!1,this.dialogVisible=t)}}},methods:{handleSubmit:function(){var t=this;this.loading=!0,this.formData.additional_info=JSON.stringify(this.connectForm),this.formData.id||r["a"].add(this.formData).then((function(e){var a=e.data;200==a.code&&(Object(s["i"])("注册成功！"),t.$emit("submit"),t.handleClose())})).finally((function(){return t.loading=!1}))},handleClose:function(){this.$emit("update:visible",!1),this.dialogVisible=!1},addConnectForm:function(){this.connectForm.push({key:"",value:""})},delConnectForm:function(t){this.connectForm.splice(t,1)}}},d=c,p=(a("f773"),a("2877")),u=Object(p["a"])(d,o,l,!1,null,"18049e85",null);e["default"]=u.exports},7760:function(t,e,a){},eca3:function(t,e,a){},f773:function(t,e,a){"use strict";a("7760")}}]);