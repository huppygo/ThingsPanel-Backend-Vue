(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c312c96","chunk-905188d6","chunk-2d0f00ea","chunk-2d0b287a"],{"102e":function(e,t,a){},1140:function(e,t,a){"use strict";a("ce37")},"239d":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",{staticClass:"table-title h3 font-weight-bolder m-0 pt-2"},[e._t("default")],2)},n=[],r={name:"TableTitle"},i=r,o=a("2877"),s=Object(o["a"])(i,l,n,!1,null,"2001a59c",null);t["a"]=s.exports},2501:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"transpond-create"},[a("el-form",{ref:"updateForm",attrs:{rules:e.rules,"label-position":"left",model:e.form,"hide-required-asterisk":!0,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"频率",prop:"frequency"}},[a("el-select",{model:{value:e.form.frequency,callback:function(t){e.$set(e.form,"frequency",t)},expression:"form.frequency"}},[a("el-option",{attrs:{label:"实时",value:"实时"}}),a("el-option",{attrs:{label:"每分钟",value:"每分钟"}}),a("el-option",{attrs:{label:"每十分钟",value:"每十分钟"}}),a("el-option",{attrs:{label:"每半小时",value:"每半小时"}}),a("el-option",{attrs:{label:"每小时",value:"每小时"}})],1)],1),a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"启用",value:"工作中"}}),a("el-option",{attrs:{label:"停用",value:"已停用"}})],1)],1),a("el-button",{staticClass:"w-100",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交更新")])],1)],1)},n=[],r={name:"UpdateForm",props:{init_data:{required:!0}},data:function(){return{form:{frequency:"",status:""},rules:{frequency:[{required:!0,message:"请选择频率"}],status:[{required:!0,message:"请选择状态"}]}}},watch:{init_data:{handler:function(e){this.form.frequency=e.frequency,this.form.status=e.status},immediate:!0,deep:!0}},methods:{onSubmit:function(){var e=this;this.$refs.updateForm.validate((function(t){t&&e.$emit("update",e.form)}))}}},i=r,o=a("2877"),s=Object(o["a"])(i,l,n,!1,null,null,null);t["default"]=s.exports},"65c2":function(e,t,a){"use strict";a("102e")},"74ed":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rounded p-4 card no-border"},[a("el-row",{staticClass:"pt-3 pb-4 px-3",attrs:{type:"flex",gutter:20}},[a("el-col",{attrs:{span:12}},[a("TableTitle",[e._v(e._s(e.$t("SYSTEM_MANAGEMENT.ROLE_MANAGEMENT.MANAGEMENT")))])],1),a("el-col",{staticClass:"px-2 text-right",attrs:{span:12}},[a("el-button",{attrs:{size:"medium",type:"indigo"},on:{click:e.dialogVisible}},[e._v(e._s(e.$t("SYSTEM_MANAGEMENT.ROLE_MANAGEMENT.ADDROLE")))])],1)],1),a("el-form",{staticClass:"inline-edit"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:e.$t("SYSTEM_MANAGEMENT.ROLE_MANAGEMENT.NO"),type:"index"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(10*(e.page-1)+t.$index+1))])]}}])}),a("el-table-column",{attrs:{prop:"role_name",label:e.$t("SYSTEM_MANAGEMENT.ROLE_MANAGEMENT.ROLENAME"),width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.inputVal==t.row.id?a("el-form-item",[a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"inputStyle",attrs:{size:"medium"},nativeOn:{keydown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleSave(t.row)}},model:{value:t.row.role_name,callback:function(a){e.$set(t.row,"role_name",a)},expression:"scope.row.role_name"}})],1):a("span",{staticClass:"cursor-pointer",on:{click:function(a){return e.showDevice(t.row)}}},[e._v(e._s(t.row.role_name))])]}}])}),a("el-table-column",{attrs:{prop:"role_describe",label:e.$t("SYSTEM_MANAGEMENT.ROLE_MANAGEMENT.ROLEDESCRIPTION")},scopedSlots:e._u([{key:"default",fn:function(t){return[e.inputVal==t.row.id?a("el-form-item",[a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],staticClass:"inputStyle",attrs:{size:"medium"},nativeOn:{keydown:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.handleSave(t.row)}},model:{value:t.row.role_describe,callback:function(a){e.$set(t.row,"role_describe",a)},expression:"scope.row.role_describe"}})],1):a("span",{staticClass:"cursor-pointer",on:{click:function(a){return e.showDevice(t.row)}}},[e._v(e._s(t.row.role_describe))])]}}])}),a("el-table-column",{attrs:{prop:"id",label:e.$t("SYSTEM_MANAGEMENT.ROLE_MANAGEMENT.PERMISSIONMANAGEMENT")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"indigo",disabled:!e.hasAuth("sys:role:assign")},on:{click:function(a){return e.handle_quanxian(t.row)}}},[e._v(e._s(e.$t("SYSTEM_MANAGEMENT.ROLE_MANAGEMENT.PERMISSIONMANAGEMENT")))])]}}])}),a("el-table-column",{attrs:{prop:"actions",label:e.$t("SYSTEM_MANAGEMENT.ROLE_MANAGEMENT.OPERATION"),align:"center",width:"210px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.inputVal==t.row.id?a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"indigo"},on:{click:function(a){return e.handle_sever(t.row)}}},[e._v(e._s(e.$t("SYSTEM_MANAGEMENT.SAVE")))]),a("el-button",{staticClass:"butStyle",attrs:{size:"mini",type:"default"},on:{click:function(a){return e.handleCancel(t.row)}}},[e._v(e._s(e.$t("SYSTEM_MANAGEMENT.CANCEL")))])],1):a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"indigo",disabled:!e.hasAuth("sys:role:edit")},on:{click:function(a){return e.handle_launch(t.row)}}},[e._v(e._s(e.$t("SYSTEM_MANAGEMENT.EDIT")))]),a("el-popconfirm",{attrs:{title:e.$t("SYSTEM_MANAGEMENT.TITLE4")},on:{confirm:function(a){return e.handle_del(t.row)}}},[a("el-button",{staticClass:"butStyle",attrs:{slot:"reference",size:"mini",type:"danger",disabled:!e.hasAuth("sys:role:del")},slot:"reference"},[e._v(e._s(e.$t("SYSTEM_MANAGEMENT.DELETE")))])],1)],1)]}}])})],1)],1),a("div",{staticClass:"text-right py-3"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"current-page":e.page,"page-size":e.per_page},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.page_change}})],1),a("div",{staticClass:"home"},[a("el-drawer",{ref:"closeDrawer",attrs:{title:e.$t("SYSTEM_MANAGEMENT.ROLE_MANAGEMENT.PERMISSIONEDIT"),visible:e.drawer,direction:"rtl",size:"400px","with-header":!0,"show-close":!0},on:{"update:visible":function(t){e.drawer=t}}},[a("div",{staticClass:"dividerLine"},[a("el-divider")],1),a("div",{staticClass:"treeStyle"},[a("el-tree",{ref:"permTree",attrs:{data:e.treeData,"check-strictly":!0,"show-checkbox":"","node-key":"id","default-checked-keys":e.treeCheckeds,props:e.defaultProps}})],1),a("div",[a("div",{staticClass:"footer",staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"buttStyle",attrs:{size:"small "},on:{click:e.closeDrawerClose}},[e._v(e._s(e.$t("SYSTEM_MANAGEMENT.CANCEL")))]),a("el-button",{attrs:{size:"small",type:"indigo"},on:{click:e.jurisdiction}},[e._v(e._s(e.$t("SYSTEM_MANAGEMENT.SAVE")))])],1)])])],1)],1)},n=[],r=(a("d3b7"),a("159b"),a("b0c0"),a("99af"),a("a434"),a("854b")),i=a("7b99"),o=a("30ab"),s=a("f881"),c=a("2501"),u=a("239d"),d=a("2fa3"),f=a("0feb"),m=a("ed09"),p=a("f570"),E=a("add0"),b=Object(m["c"])({name:"Home",components:{CreateForm:s["default"],UpdateForm:c["default"],TableTitle:u["a"]},setup:function(e,t){var a=Object(m["i"])("0"),l=Object(m["i"])(!1),n=Object(m["i"])([]),s=Object(m["i"])([]),c=Object(m["i"])(!1),u=Object(m["i"])([]),b={},_=10,v=1,h=2,N=Object(m["i"])(!1),A=Object(m["i"])({children:"children",label:function(e){return p["a"].t(e.title)}}),M=Object(m["h"])({page:v||1,limit:10}),S=Object(m["d"])().proxy,g=Object(m["i"])(0);Object(m["g"])((function(){console.log(r["i"].state),C(),T()}));var C=function(){var e={current_page:M.page,per_page:M.limit};console.log(E["a"]+"/api/user/role/list"),i["a"].post(E["a"]+"/api/user/role/list",e).then((function(e){var t=e.data;200==t.code&&(n.value=t.data.data,g.value=t.data.total)}))},T=function(){f["a"].tree().then((function(e){var t=e.data;if(console.log("=================role tree==================="),200==t.code){var a=o["a"].getCurrentUser(),l=t.data;a&&"super@super.cn"!=a.email&&l.forEach((function(e){e.children&&"SystemManagement"==e.name&&e.children.forEach((function(e){e.children&&e.children.forEach((function(e){"AddPermission"!=e.name&&"EditPermission"!=e.name&&"DeletePermission"!=e.name&&"DelUser"!=e.name&&"EditPassword"!=e.name&&"EditRole"!=e.name&&"DelRole"!=e.name||(e.disabled=!0)}))}))})),s.value=l,console.log(l)}console.log("=================role tree===================")}))},y=function(e){var t=e.id;u.value=[""],f["a"].getPermissionsByRole({role:t}).then((function(e){var t=e.data;200==t.code&&(u.value=t.data||[],console.log(u.value),S.$refs.permTree.setCheckedKeys(u.value))}))},k=function(e){console.log(e),a.value=e.id},w=function(e){if(""!=e.role_name)if(a.value=1,""==e.id){var t={role_name:e.role_name,role_describe:e.role_describe};i["a"].post(E["a"]+"/api/user/role/add",t).then((function(e){var t=e.data;200==t.code&&(Object(d["i"])("添加成功"),C())}))}else{var l={id:e.id,role_name:e.role_name,role_describe:e.role_describe};i["a"].post(E["a"]+"/api/user/role/edit",l).then((function(e){var t=e.data;200==t.code&&(Object(d["i"])("修改成功"),C())}))}else Object(d["h"])("角色名称不能为空!")},O=function(e){i["a"].post(E["a"]+"/api/user/role/delete",{id:e.id}).then((function(e){var t=e.data;200==t.code&&(Object(d["i"])("删除成功"),C())}))},$=Object(m["i"])(""),G=function(e){y(e),b.role=e.id,c.value=!0},x=function(){c.value=!1},j=function(e,t){},D=function(e,t,a){},L=function(){var e=S.$refs.permTree.getHalfCheckedKeys(),t=S.$refs.permTree.getCheckedKeys();console.log("================权限保存======================"),b.functions=e.concat(t),console.log(b),console.log("==================权限保存====================="),f["a"].assignPermissions(b).then((function(e){var t=e.data;console.log(t),Object(d["i"])("保存成功!"),c.value=!1}))},R=function(e){setTimeout((function(){M.page=e,C()}),500)},I=function(){a.value="",n.value.unshift({id:"",role_describe:"",role_name:"",errors:{role_name:""}})},q=function(){n.value.unshift({id:"",role_describe:"",role_name:""})},P=function(e){if(console.log(e),""==e.id){var t=n.value.indexOf(e);n.value.splice(t,1)}else a.value=""};return{paramsPage:M,handleCreate:q,handleCancel:P,dialogVisible:I,page_change:R,checkedKeyObj:b,role_id:$,checkChange:j,setChecked:D,jurisdiction:L,closeDrawerClose:x,treeDateList:y,sbdata:C,handle_launch:k,handle_sever:w,treeData:s,treeCheckeds:u,defaultProps:A,drawer:c,closeDrawer:N,handle_del:O,tableData:n,inputShow:l,inputVal:a,handle_quanxian:G,direction:"rtl",per_page:_,page:v,data_count:h,total:g}}}),_=b,v=(a("65c2"),a("2877")),h=Object(v["a"])(_,l,n,!1,null,null,null);t["default"]=h.exports},"9b6a":function(e,t,a){"use strict";a.r(t);var l=[{value:"烟感(CK)",label:"烟感(CK)",children:[{value:"1层",label:"1层",children:[{value:"设备A",label:"设备A"},{value:"设备B",label:"设备B"},{value:"设备C",label:"设备C"},{value:"设备D",label:"设备D"}]},{value:"2层",label:"2层",children:[{value:"设备A",label:"设备A"},{value:"设备B",label:"设备B"},{value:"设备C",label:"设备C"}]}]},{value:"温湿度",label:"温湿度",children:[{value:"1层",label:"1层",children:[{value:"设备A",label:"设备A"},{value:"设备B",label:"设备B"},{value:"设备C",label:"设备C"},{value:"设备D",label:"设备D"}]},{value:"2层",label:"2层",children:[{value:"设备A",label:"设备A"},{value:"设备B",label:"设备B"},{value:"设备C",label:"设备C"}]}]}];t["default"]=l},ce37:function(e,t,a){},f881:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"createForm",attrs:{rules:e.rules,"label-position":"left",model:e.form,"hide-required-asterisk":!0,"label-width":"80px"}},[a("el-form-item",{attrs:{label:e.$t("RULE_ENGINE.ACCESS_ENGINE.RULE_NAME"),prop:"rule_name"}},[a("el-input",{model:{value:e.form.rule_name,callback:function(t){e.$set(e.form,"rule_name",t)},expression:"form.rule_name"}})],1),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("el-button",{staticClass:"cancel-button",attrs:{type:"cancel",size:"medium",plain:""},on:{click:e.cancelDialog}},[e._v(e._s(e.$t("RULE_ENGINE.ACCESS_ENGINE.CANCEL")))]),a("el-button",{staticClass:"medium",attrs:{type:"save",size:"medium"},on:{click:e.onSubmit}},[e._v(e._s(e.$t("RULE_ENGINE.ACCESS_ENGINE.SUBMIT")))])],1)],1)},n=[],r=a("9b6a"),i=a("f570"),o=!0,s={name:"CreateForm",props:{init_data:{default:null}},data:function(){return{form:{rule_name:"",frequency:""},rules:{rule_name:[{required:o,message:i["a"].t("RULE_ENGINE.ACCESS_ENGINE.PLACEHOLDER")}]},options:r["default"]}},created:function(){this.init_data&&(this.form.rule_name=this.init_data.rule_name)},methods:{onSubmit:function(){var e=this;this.$refs.createForm.validate((function(t){t&&(e.$emit("submit",e.form),setTimeout((function(){e.$refs.createForm.resetFields()}),500))}))},cancelDialog:function(){this.$emit("cancel")}}},c=s,u=(a("1140"),a("2877")),d=Object(u["a"])(c,l,n,!1,null,null,null);t["default"]=d.exports}}]);