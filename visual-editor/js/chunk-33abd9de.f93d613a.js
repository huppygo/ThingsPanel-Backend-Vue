(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33abd9de"],{c4c8:function(t,e,a){"use strict";var r=a("18a6"),n=a("add0"),i="/tp_product",o="/tp_batch";e["a"]={add:function(t){return Object(r["a"])({url:i+"/add",method:"post",data:t})},edit:function(t){return Object(r["a"])({url:i+"/edit",method:"post",data:t})},del:function(t){return Object(r["a"])({url:i+"/delete",method:"post",data:t})},page:function(t){return Object(r["a"])({url:i+"/list",method:"post",data:t})},batchAdd:function(t){return Object(r["a"])({url:o+"/add",method:"post",data:t})},batchEdit:function(t){return Object(r["a"])({url:o+"/edit",method:"post",data:t})},batchDel:function(t){return Object(r["a"])({url:o+"/delete",method:"post",data:t})},batchPage:function(t){return Object(r["a"])({url:o+"/list",method:"post",data:t})},generateBatch:function(t){return Object(r["a"])({url:o+"/generate",method:"post",data:t})},uploadUrl:n["a"]+"api/file/up",importBatch:function(t){return Object(r["a"])({url:o+"/import",method:"post",data:t})},exportQRCodeAndData:function(t){return Object(r["a"])({url:o+"/export",method:"post",data:t})},getPreRegistration:function(t){return Object(r["a"])({url:"/tp_generate_device/list",method:"post",data:t})},generateDevice:function(t){return Object(r["a"])({url:"/tp_generate_device/activate",method:"post",data:t})},deletePreRegistration:function(t){return Object(r["a"])({url:"/tp_generate_device/delete",method:"post",data:t})},getDeviceListByProductId:function(t){return Object(r["a"])({url:"/device/listbyproduct",method:"post",data:t})},addTask:function(t){return Object(r["a"])({url:"/tp_ota_task/add",method:"post",data:t})}}},dcc7:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"el-dark-dialog",attrs:{title:"请选择设备",visible:t.dialogVisible,width:"30%","before-close":function(){return t.dialogVisible=!1},"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"addTaskForm",staticClass:"inline-edit",attrs:{"label-position":"left",model:t.params,"hide-required-asterisk":!0}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"version"}},[a("el-input",{attrs:{placeholder:"版本筛选"},model:{value:t.params.version,callback:function(e){t.$set(t.params,"version",e)},expression:"params.version"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"device_name"}},[a("el-input",{attrs:{placeholder:"请输入设备名称"},model:{value:t.params.device_name,callback:function(e){t.$set(t.params,"device_name",e)},expression:"params.device_name"}})],1)],1),a("el-col",{staticClass:"text-right",attrs:{span:6,offset:2}},[a("el-button",{attrs:{type:"border"}},[t._v("搜索")])],1)],1),a("el-table",{staticClass:"table",attrs:{data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"设备名称",prop:"name",align:"center"}}),a("el-table-column",{attrs:{label:"版本号",prop:"current_version",align:"center"}}),a("el-table-column",{attrs:{label:"设备编号",prop:"device_code",align:"center","show-overflow-tooltip":!0}})],1),a("div",{staticClass:"text-right"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.params.total,"current-page":t.params.current_page,"page-size":t.params.per_page},on:{"update:currentPage":function(e){return t.$set(t.params,"current_page",e)},"update:current-page":function(e){return t.$set(t.params,"current_page",e)},"current-change":t.getList}})],1),a("div",{staticClass:"text-right py-5"},[t._v(" 已选择"+t._s(t.params.count)+"个设备 "),a("el-button",{attrs:{type:"border"},on:{click:function(e){t.dialogVisible=!1}}},[t._v(t._s(t.$t("COMMON.CANCEL")))]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(t._s(t.$t("COMMON.CONFIRM")))])],1)],1)],1)],1)},n=[],i=a("c4c8"),o=a("2fa3"),c={components:{},props:{visible:{type:[Boolean],default:!1},data:{type:[Object],default:function(){return{}}}},data:function(){return{tableData:[],params:{current_page:1,per_page:5,product_id:"",current_version:"",name:""},deviceSelection:[]}},computed:{dialogVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.params.product_id=this.$route.query.productId,i["a"].getDeviceListByProductId(this.params).then((function(e){var a,r,n=e.data;200===n.code&&(t.tableData=(null===(a=n.data)||void 0===a?void 0:a.data)||[],t.params.total=(null===(r=n.data)||void 0===r?void 0:r.total)||0)}))},handleSelectionChange:function(t){this.deviceSelection=t},onSubmit:function(){console.log("SelectDevice",this.deviceSelection),0!==this.deviceSelection.length?(this.$emit("change",this.deviceSelection),this.dialogVisible=!1):Object(o["h"])("请至少选择一个设备")}}},l=c,s=(a("f8c8"),a("2877")),d=Object(s["a"])(l,r,n,!1,null,"4c6fd28c",null);e["default"]=d.exports},f657:function(t,e,a){},f8c8:function(t,e,a){"use strict";a("f657")}}]);